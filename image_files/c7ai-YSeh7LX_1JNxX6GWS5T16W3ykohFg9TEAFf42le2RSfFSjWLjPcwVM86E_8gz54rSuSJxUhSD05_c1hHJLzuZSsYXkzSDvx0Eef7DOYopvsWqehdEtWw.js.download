;/*FB_PKG_DELIM*/

__d("WABackendHandleError",["Promise","WADeprecatedWapParser","WALogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unknown error code: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid stanza sent (smax-invalid)"]);j=function(){return a};return a}var k={SMAX_INVALID:479},l=new(c("WADeprecatedWapParser"))("errorParser",function(a){a.assertTag("error");a=a.attrInt("code");switch(a){case k.SMAX_INVALID:return m();default:return n(a)}});function a(a){l.parse(a);return(h||(h=b("Promise"))).resolve("NO_ACK")}function m(){d("WALogger").ERROR(j()).devConsole("check tracelogs for more info").sendLogs("smax-invalid")}function n(a){d("WALogger").ERROR(i(),a).sendLogs("unknown-error-code")}g.backendErrorParser=l;g.handleError=a}),98);
__d("WAPromiseAny",["Promise","WACustomError"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return a.length===0?(h||(h=b("Promise"))).reject(new(d("WACustomError").AggregateError)([])):(h||(h=b("Promise"))).all(a.map(i)).then(function(a){throw new(d("WACustomError").AggregateError)(a)},function(a){return a})}function i(a){return new(h||(h=b("Promise")))(function(c,d){return(h||(h=b("Promise"))).resolve(a).then(d,c)})}g.promiseAny=a}),98);
__d("WARaceSignalLegacyPromise",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c,d=new AbortController();if(a.some(function(a){return a.aborted}))d.abort();else{c=function(){for(var d=0;d<a.length;d++){var b=a[d];b.removeEventListener("abort",e)}c=null};var e=function(){c==null?void 0:c(),d.abort()};for(var f=0;f<a.length;f++){var g=a[f];g.addEventListener("abort",e)}}return b(d.signal)["finally"](function(){c==null?void 0:c()})}f["default"]=a}),66);
__d("WASmaxInBizCtwaActionEnums",[],(function(a,b,c,d,e,f){a={"false":"false","true":"true"};b={info:"info",warning:"warning"};f.ENUM_FALSE_TRUE=a;f.ENUM_INFO_WARNING=b}),66);
__d("WASmaxInBizCtwaActionLocalisationMetadataMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"parameter");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"name");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(a,"value");return!a.success?a:d("WAResultOrError").makeResult({name:b.value,value:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"localisation_metadata");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"uid");if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"translation_project");if(!c.success)return c;a=d("WASmaxParseUtils").mapChildrenWithTag(a,"parameter",0,20,h);return!a.success?a:d("WAResultOrError").makeResult({uid:b.value,translationProject:c.value,parameter:a.value})}g.parseLocalisationMetadataParameter=h;g.parseLocalisationMetadataMixin=a}),98);
__d("WASmaxInBizCtwaActionNativeActionsMixinMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"native_action");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"platform");if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"min_app_version");if(!c.success)return c;var e=d("WASmaxParseUtils").attrString(a,"local_link");if(!e.success)return e;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"universal_link");return!a.success?a:d("WAResultOrError").makeResult({platform:b.value,minAppVersion:c.value,localLink:e.value,universalLink:a.value})}function a(a){a=d("WASmaxParseUtils").mapChildrenWithTag(a,"native_action",0,50,h);return!a.success?a:d("WAResultOrError").makeResult({nativeAction:a.value})}g.parseNativeActionsMixinNativeAction=h;g.parseNativeActionsMixinMixin=a}),98);
__d("WASmaxInBizCtwaActionServerNotificationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"offline",0,1024);return!a.success?a:d("WAResultOrError").makeResult({t:b.value,id:c.value,offline:a.value})}g.parseServerNotificationMixin=a}),98);
__d("WASmaxInBizCtwaActionBannerSuggestionRequest",["WAResultOrError","WASmaxInBizCtwaActionEnums","WASmaxInBizCtwaActionLocalisationMetadataMixin","WASmaxInBizCtwaActionNativeActionsMixinMixin","WASmaxInBizCtwaActionServerNotificationMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"action");if(!b.success)return b;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"deep_link");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"local_link");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"local_android_link");return!a.success?a:d("WAResultOrError").makeResult({deepLink:b.value,localLink:c.value,localAndroidLink:a.value})}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"localised_heading");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"localisation_metadata");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(a,"value");if(!a.success)return a;b=d("WASmaxInBizCtwaActionLocalisationMetadataMixin").parseLocalisationMetadataMixin(b.value);return!b.success?b:d("WAResultOrError").makeResult({value:a.value,localisationMetadataLocalisationMetadataMixin:b.value})}function j(a){var b=d("WASmaxParseUtils").assertTag(a,"localised_body");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"localisation_metadata");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(a,"value");if(!a.success)return a;b=d("WASmaxInBizCtwaActionLocalisationMetadataMixin").parseLocalisationMetadataMixin(b.value);return!b.success?b:d("WAResultOrError").makeResult({value:a.value,localisationMetadataLocalisationMetadataMixin:b.value})}function k(a){var b=d("WASmaxParseUtils").assertTag(a,"localised_highlight");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"localisation_metadata");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(a,"value");if(!a.success)return a;b=d("WASmaxInBizCtwaActionLocalisationMetadataMixin").parseLocalisationMetadataMixin(b.value);return!b.success?b:d("WAResultOrError").makeResult({value:a.value,localisationMetadataLocalisationMetadataMixin:b.value})}function l(a){var b=d("WASmaxParseUtils").assertTag(a,"banner");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"config");if(!b.success)return b;var c=d("WASmaxParseUtils").flattenedChildWithTag(a,"content");if(!c.success)return c;var e=d("WASmaxParseUtils").flattenedChildWithTag(c.value,"heading");if(!e.success)return e;var f=d("WASmaxParseUtils").flattenedChildWithTag(c.value,"body");if(!f.success)return f;var g=d("WASmaxParseUtils").flattenedChildWithTag(c.value,"highlight");if(!g.success)return g;var l=d("WASmaxParseUtils").optionalChildWithTag(a,"action",h);if(!l.success)return l;var m=d("WASmaxParseUtils").optionalChildWithTag(c.value,"localised_heading",i);if(!m.success)return m;var n=d("WASmaxParseUtils").optionalChildWithTag(c.value,"localised_body",j);if(!n.success)return n;var o=d("WASmaxParseUtils").optionalChildWithTag(c.value,"localised_highlight",k);if(!o.success)return o;var p=d("WASmaxParseUtils").attrIntRange(b.value,"expires_at",1,void 0);if(!p.success)return p;var q=d("WASmaxParseUtils").attrStringEnum(b.value,"display",d("WASmaxInBizCtwaActionEnums").ENUM_INFO_WARNING);if(!q.success)return q;b=d("WASmaxParseUtils").attrStringEnum(b.value,"revoked",d("WASmaxInBizCtwaActionEnums").ENUM_FALSE_TRUE);if(!b.success)return b;c=d("WASmaxParseUtils").attrString(c.value,"locale");if(!c.success)return c;e=d("WASmaxParseUtils").contentString(e.value);if(!e.success)return e;f=d("WASmaxParseUtils").contentString(f.value);if(!f.success)return f;g=d("WASmaxParseUtils").contentString(g.value);if(!g.success)return g;a=d("WASmaxInBizCtwaActionNativeActionsMixinMixin").parseNativeActionsMixinMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({configExpiresAt:p.value,configDisplay:q.value,configRevoked:b.value,contentLocale:c.value,contentHeadingElementValue:e.value,contentBodyElementValue:f.value,contentHighlightElementValue:g.value},a.value,{action:l.value,contentLocalisedHeading:m.value,contentLocalisedBody:n.value,contentLocalisedHighlight:o.value}))}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"ctwa_suggestion");if(!b.success)return b;var c=d("WASmaxParseUtils").optionalChildWithTag(b.value,"banner",l);if(!c.success)return c;var e=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!e.success)return e;var f=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"to");if(!f.success)return f;var g=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","business");if(!g.success)return g;b=d("WASmaxParseUtils").attrString(b.value,"target_entity_id");if(!b.success)return b;a=d("WASmaxInBizCtwaActionServerNotificationMixin").parseServerNotificationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({from:e.value,to:f.value,type:g.value,ctwaSuggestionTargetEntityId:b.value},a.value,{ctwaSuggestionBanner:c.value}))}g.parseBannerSuggestionRequestCtwaSuggestionBannerAction=h;g.parseBannerSuggestionRequestCtwaSuggestionBannerContentLocalisedHeading=i;g.parseBannerSuggestionRequestCtwaSuggestionBannerContentLocalisedBody=j;g.parseBannerSuggestionRequestCtwaSuggestionBannerContentLocalisedHighlight=k;g.parseBannerSuggestionRequestCtwaSuggestionBanner=l;g.parseBannerSuggestionRequest=a}),98);
__d("WASmaxBizCtwaActionBannerSuggestionRPC",["WASmaxInBizCtwaActionBannerSuggestionRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInBizCtwaActionBannerSuggestionRequest").parseBannerSuggestionRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("BannerSuggestion",{Request:a}));return{parsedRequest:a.value}}g.receiveBannerSuggestionRPC=a}),98);
__d("WASmaxInBizCtwaAdAccountServerNotificationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"offline",0,1024);return!a.success?a:d("WAResultOrError").makeResult({t:b.value,id:c.value,offline:a.value})}g.parseServerNotificationMixin=a}),98);
__d("WASmaxInBizCtwaAdAccountNonceNotificationRequest",["WAResultOrError","WASmaxInBizCtwaAdAccountServerNotificationMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"wa_ad_account_nonce");if(!b.success)return b;var c=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"to");if(!e.success)return e;var f=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","business");if(!f.success)return f;b=d("WASmaxParseUtils").contentString(b.value);if(!b.success)return b;a=d("WASmaxInBizCtwaAdAccountServerNotificationMixin").parseServerNotificationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({from:c.value,to:e.value,type:f.value,waAdAccountNonceElementValue:b.value},a.value))}g.parseNonceNotificationRequest=a}),98);
__d("WASmaxBizCtwaAdAccountNonceNotificationRPC",["WASmaxInBizCtwaAdAccountNonceNotificationRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInBizCtwaAdAccountNonceNotificationRequest").parseNonceNotificationRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("NonceNotification",{Request:a}));return{parsedRequest:a.value}}g.receiveNonceNotificationRPC=a}),98);
__d("WASmaxInBizSettingsServerNotificationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"offline",0,1024);return!a.success?a:d("WAResultOrError").makeResult({t:b.value,id:c.value,offline:a.value})}g.parseServerNotificationMixin=a}),98);
__d("WASmaxInBizSettingsSyncPrivacySettingRequest",["WAResultOrError","WASmaxInBizSettingsServerNotificationMixin","WASmaxInBizSettingsSmbDataSharingSettingMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"privacy");if(!b.success)return b;var c=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"to");if(!e.success)return e;var f=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","business");if(!f.success)return f;b=d("WASmaxInBizSettingsSmbDataSharingSettingMixin").parseSmbDataSharingSettingMixin(b.value);a=d("WASmaxInBizSettingsServerNotificationMixin").parseServerNotificationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({from:c.value,to:e.value,type:f.value,privacySmbDataSharingSettingMixin:b.success?b.value:null},a.value))}g.parseSyncPrivacySettingRequest=a}),98);
__d("WASmaxBizSettingsSyncPrivacySettingRPC",["WASmaxInBizSettingsSyncPrivacySettingRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInBizSettingsSyncPrivacySettingRequest").parseSyncPrivacySettingRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("SyncPrivacySetting",{Request:a}));return{parsedRequest:a.value}}g.receiveSyncPrivacySettingRPC=a}),98);
__d("WASmaxInBotIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInBotIQErrorForbiddenMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","forbidden");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",403);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorForbiddenMixin=a}),98);
__d("WASmaxInBotIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInBotIQErrorNotAllowedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","not-allowed");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",405);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorNotAllowedMixin=a}),98);
__d("WASmaxInBotIQErrorInternalServerErrorOrForbiddenOrBadRequestOrNotAllowedMixinGroup",["WAResultOrError","WASmaxInBotIQErrorBadRequestMixin","WASmaxInBotIQErrorForbiddenMixin","WASmaxInBotIQErrorInternalServerErrorMixin","WASmaxInBotIQErrorNotAllowedMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInBotIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:b.value});var c=d("WASmaxInBotIQErrorForbiddenMixin").parseIQErrorForbiddenMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorForbidden",value:c.value});var e=d("WASmaxInBotIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:e.value});var f=d("WASmaxInBotIQErrorNotAllowedMixin").parseIQErrorNotAllowedMixin(a);return f.success?d("WAResultOrError").makeResult({name:"IQErrorNotAllowed",value:f.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorInternalServerError","IQErrorForbidden","IQErrorBadRequest","IQErrorNotAllowed"],[b,c,e,f])}g.parseIQErrorInternalServerErrorOrForbiddenOrBadRequestOrNotAllowedMixinGroup=a}),98);
__d("WASmaxInBotIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInBotBotListResponseError",["WAResultOrError","WASmaxInBotIQErrorInternalServerErrorOrForbiddenOrBadRequestOrNotAllowedMixinGroup","WASmaxInBotIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInBotIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInBotIQErrorInternalServerErrorOrForbiddenOrBadRequestOrNotAllowedMixinGroup").parseIQErrorInternalServerErrorOrForbiddenOrBadRequestOrNotAllowedMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorInternalServerErrorOrForbiddenOrBadRequestOrNotAllowedMixinGroup:b.value}))}g.parseBotListResponseError=a}),98);
__d("WASmaxInBotEnums",[],(function(a,b,c,d,e,f){a={"AI available":"AI available","Added to waitlist":"Added to waitlist","In waitlist":"In waitlist"};b={"AI available":"AI available","In waitlist":"In waitlist"};c={all:"all",category:"category",featured:"featured"};d={dark:"dark",light:"light"};e={"false":"false","true":"true"};var g={hidden:"hidden",hscroll:"hscroll",hscroll_icebreakers:"hscroll_icebreakers",hscroll_large:"hscroll_large",hscroll_small:"hscroll_small",listview:"listview"};f.ENUM_AIAVAILABLE_ADDEDTOWAITLIST_INWAITLIST=a;f.ENUM_AIAVAILABLE_INWAITLIST=b;f.ENUM_ALL_CATEGORY_FEATURED=c;f.ENUM_DARK_LIGHT=d;f.ENUM_FALSE_TRUE=e;f.ENUM_HIDDEN_HSCROLL_HSCROLLICEBREAKERS_HSCROLLLARGE_HSCROLLSMALL_LISTVIEW=g}),66);
__d("WASmaxInBotIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInBotBotListResponseSuccessV1",["WAResultOrError","WASmaxInBotEnums","WASmaxInBotIQResultResponseMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"bot");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"jid");if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,a,"default",d("WASmaxInBotEnums").ENUM_FALSE_TRUE);return!a.success?a:d("WAResultOrError").makeResult({jid:b.value,"default":a.value})}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"bot");if(!c.success)return c;var e=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,c.value,"v","1");if(!e.success)return e;a=d("WASmaxInBotIQResultResponseMixin").parseIQResultResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"bot",1,Infinity,h);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({botV:e.value},a.value,{botBot:b.value}))}g.parseBotListResponseSuccessV1BotBot=h;g.parseBotListResponseSuccessV1=a}),98);
__d("WASmaxInBotBotListResponseSuccessV2",["WAResultOrError","WASmaxInBotEnums","WASmaxInBotIQResultResponseMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"theme");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"background");if(!b.success)return b;var c=d("WASmaxParseUtils").flattenedChildWithTag(a,"primary_text");if(!c.success)return c;var e=d("WASmaxParseUtils").flattenedChildWithTag(a,"secondary_text");if(!e.success)return e;a=d("WASmaxParseUtils").attrStringEnum(a,"mode",d("WASmaxInBotEnums").ENUM_DARK_LIGHT);if(!a.success)return a;b=d("WASmaxParseUtils").contentString(b.value);if(!b.success)return b;c=d("WASmaxParseUtils").contentString(c.value);if(!c.success)return c;e=d("WASmaxParseUtils").contentString(e.value);return!e.success?e:d("WAResultOrError").makeResult({mode:a.value,backgroundElementValue:b.value,primaryTextElementValue:c.value,secondaryTextElementValue:e.value})}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"bot");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"jid");if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"persona_id");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrInt,a,"count");if(!e.success)return e;a=d("WASmaxParseUtils").mapChildrenWithTag(a,"theme",0,2,h);return!a.success?a:d("WAResultOrError").makeResult({jid:b.value,personaId:c.value,count:e.value,theme:a.value})}function j(a){var b=d("WASmaxParseUtils").assertTag(a,"section");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"name");if(!b.success)return b;var c=d("WASmaxParseUtils").attrStringEnum(a,"type",d("WASmaxInBotEnums").ENUM_ALL_CATEGORY_FEATURED);if(!c.success)return c;a=d("WASmaxParseUtils").mapChildrenWithTag(a,"bot",0,Infinity,i);return!a.success?a:d("WAResultOrError").makeResult({name:b.value,type:c.value,bot:a.value})}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"bot");if(!c.success)return c;var e=d("WASmaxParseUtils").flattenedChildWithTag(c.value,"default");if(!e.success)return e;var f=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"v","2");if(!f.success)return f;var g=d("WASmaxParseJid").attrUserJid(e.value,"jid");if(!g.success)return g;e=d("WASmaxParseUtils").attrString(e.value,"persona_id");if(!e.success)return e;a=d("WASmaxInBotIQResultResponseMixin").parseIQResultResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"section",1,Infinity,j);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({botV:f.value,botDefaultJid:g.value,botDefaultPersonaId:e.value},a.value,{botSection:b.value}))}g.parseBotListResponseSuccessV2BotSectionBotTheme=h;g.parseBotListResponseSuccessV2BotSectionBot=i;g.parseBotListResponseSuccessV2BotSection=j;g.parseBotListResponseSuccessV2=a}),98);
__d("WASmaxInBotBotListResponseSuccessV3",["WAResultOrError","WASmaxInBotEnums","WASmaxInBotIQResultResponseMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"bot");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"jid");if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"persona_id");if(!c.success)return c;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"card_title");if(!e.success)return e;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrInt,a,"count");return!a.success?a:d("WAResultOrError").makeResult({jid:b.value,personaId:c.value,cardTitle:e.value,count:a.value})}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"section");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"name");if(!b.success)return b;var c=d("WASmaxParseUtils").attrStringEnum(a,"type",d("WASmaxInBotEnums").ENUM_ALL_CATEGORY_FEATURED);if(!c.success)return c;var e=d("WASmaxParseUtils").attrStringEnum(a,"display_type",d("WASmaxInBotEnums").ENUM_HIDDEN_HSCROLL_HSCROLLICEBREAKERS_HSCROLLLARGE_HSCROLLSMALL_LISTVIEW);if(!e.success)return e;a=d("WASmaxParseUtils").mapChildrenWithTag(a,"bot",0,Infinity,h);return!a.success?a:d("WAResultOrError").makeResult({name:b.value,type:c.value,displayType:e.value,bot:a.value})}function j(a){var b=d("WASmaxParseUtils").assertTag(a,"default");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"jid");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(a,"persona_id");return!a.success?a:d("WAResultOrError").makeResult({jid:b.value,personaId:a.value})}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"bot");if(!c.success)return c;var e=d("WASmaxParseUtils").optionalChildWithTag(c.value,"default",j);if(!e.success)return e;var f=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"v","3");if(!f.success)return f;var g=d("WASmaxParseUtils").attrString(c.value,"bhash");if(!g.success)return g;a=d("WASmaxInBotIQResultResponseMixin").parseIQResultResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"section",0,Infinity,i);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({botV:f.value,botBhash:g.value},a.value,{botDefault:e.value,botSection:b.value}))}g.parseBotListResponseSuccessV3BotSectionBot=h;g.parseBotListResponseSuccessV3BotSection=i;g.parseBotListResponseSuccessV3BotDefault=j;g.parseBotListResponseSuccessV3=a}),98);
__d("WASmaxInBotBotListResponseSuccessV4",["WAResultOrError","WASmaxInBotIQResultResponseMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"bot");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"jid");if(!b.success)return b;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"persona_id");return!a.success?a:d("WAResultOrError").makeResult({jid:b.value,personaId:a.value})}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"bot");if(!c.success)return c;var e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"v","4");if(!e.success)return e;var f=d("WASmaxParseUtils").attrString(c.value,"bhash");if(!f.success)return f;a=d("WASmaxInBotIQResultResponseMixin").parseIQResultResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"bot",0,Infinity,h);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({botV:e.value,botBhash:f.value},a.value,{botBot:b.value}))}g.parseBotListResponseSuccessV4BotBot=h;g.parseBotListResponseSuccessV4=a}),98);
__d("WASmaxOutBotBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"get"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutBotBotListIQMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutBotBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxOutBotBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET,xmlns:"bot"}));return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBotListIQMixin=a}),98);
__d("WASmaxOutBotBotListRequest",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxOutBotBotListIQMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.botJid;a=d("WASmaxJsx").smax("bot",{jid:d("WAWap").JID(a)});return a}function a(a){var b=a.botArgs,c=a.botV;a=a.botBhash;c=d("WASmaxOutBotBotListIQMixin").mergeBotListIQMixin(d("WASmaxJsx").smax("iq",null,d("WASmaxJsx").smax("bot",{v:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,c),bhash:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)},d("WASmaxChildren").REPEATED_CHILD(h,b,0,Infinity))));return c}g.makeBotListRequestBotBot=h;g.makeBotListRequest=a}),98);
__d("WASmaxBotBotListRPC",["WAComms","WASmaxInBotBotListResponseError","WASmaxInBotBotListResponseSuccessV1","WASmaxInBotBotListResponseSuccessV2","WASmaxInBotBotListResponseSuccessV3","WASmaxInBotBotListResponseSuccessV4","WASmaxOutBotBotListRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i,j,k;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:e=d("WASmaxOutBotBotListRequest").makeBotListRequest(a);l.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=l.sent;g=d("WASmaxInBotBotListResponseSuccessV1").parseBotListResponseSuccessV1(f,e);if(!g.success){l.next=7;break}return l.abrupt("return",{name:"BotListResponseSuccessV1",value:g.value});case 7:h=d("WASmaxInBotBotListResponseSuccessV2").parseBotListResponseSuccessV2(f,e);if(!h.success){l.next=10;break}return l.abrupt("return",{name:"BotListResponseSuccessV2",value:h.value});case 10:i=d("WASmaxInBotBotListResponseSuccessV3").parseBotListResponseSuccessV3(f,e);if(!i.success){l.next=13;break}return l.abrupt("return",{name:"BotListResponseSuccessV3",value:i.value});case 13:j=d("WASmaxInBotBotListResponseSuccessV4").parseBotListResponseSuccessV4(f,e);if(!j.success){l.next=16;break}return l.abrupt("return",{name:"BotListResponseSuccessV4",value:j.value});case 16:k=d("WASmaxInBotBotListResponseError").parseBotListResponseError(f,e);if(!k.success){l.next=19;break}return l.abrupt("return",{name:"BotListResponseError",value:k.value});case 19:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("BotList",{SuccessV1:g,SuccessV2:h,SuccessV3:i,SuccessV4:j,Error:k}));case 20:case"end":return l.stop()}},null,this)}g.sendBotListRPC=a}),98);
__d("WASmaxInClientExpirationClientExpirationRequest",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"ib");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"client_expiration");if(!b.success)return b;a=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!a.success)return a;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,b.value,"t",0,void 0);return!b.success?b:d("WAResultOrError").makeResult({from:a.value,clientExpirationT:b.value})}g.parseClientExpirationRequest=a}),98);
__d("WASmaxClientExpirationClientExpirationRPC",["WASmaxInClientExpirationClientExpirationRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInClientExpirationClientExpirationRequest").parseClientExpirationRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("ClientExpiration",{Request:a}));return{parsedRequest:a.value}}g.receiveClientExpirationRPC=a}),98);
__d("WASmaxInMdServerNotificationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"offline",0,1024);return!a.success?a:d("WAResultOrError").makeResult({t:b.value,id:c.value,offline:a.value})}g.parseServerNotificationMixin=a}),98);
__d("WASmaxInMdPrimaryHelloNotifyCompanionRequest",["WAResultOrError","WASmaxInMdServerNotificationMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"link_code_companion_reg");if(!b.success)return b;var c=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"link_code_pairing_wrapped_primary_ephemeral_pub");if(!c.success)return c;var e=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"primary_identity_pub");if(!e.success)return e;var f=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"link_code_pairing_ref");if(!f.success)return f;var g=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","link_code_companion_reg");if(!g.success)return g;var h=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!h.success)return h;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,b.value,"stage","primary_hello");if(!b.success)return b;c=d("WASmaxParseUtils").contentBytes(c.value);if(!c.success)return c;e=d("WASmaxParseUtils").contentBytes(e.value);if(!e.success)return e;f=d("WASmaxParseUtils").contentBytes(f.value);if(!f.success)return f;a=d("WASmaxInMdServerNotificationMixin").parseServerNotificationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({type:g.value,from:h.value,linkCodeCompanionRegStage:b.value,linkCodeCompanionRegLinkCodePairingWrappedPrimaryEphemeralPubElementValue:c.value,linkCodeCompanionRegPrimaryIdentityPubElementValue:e.value,linkCodeCompanionRegLinkCodePairingRefElementValue:f.value},a.value))}g.parsePrimaryHelloNotifyCompanionRequest=a}),98);
__d("WASmaxInMdRefreshCodeNotifyCompanionRequest",["WAResultOrError","WASmaxInMdEnums","WASmaxInMdServerNotificationMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"link_code_companion_reg");if(!b.success)return b;var c=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"link_code_pairing_ref");if(!c.success)return c;var e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","link_code_companion_reg");if(!e.success)return e;var f=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!f.success)return f;var g=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,b.value,"stage","refresh_code");if(!g.success)return g;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,b.value,"force_manual_refresh",d("WASmaxInMdEnums").ENUM_FALSE_TRUE);if(!b.success)return b;c=d("WASmaxParseUtils").contentBytes(c.value);if(!c.success)return c;a=d("WASmaxInMdServerNotificationMixin").parseServerNotificationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({type:e.value,from:f.value,linkCodeCompanionRegStage:g.value,linkCodeCompanionRegForceManualRefresh:b.value,linkCodeCompanionRegLinkCodePairingRefElementValue:c.value},a.value))}g.parseRefreshCodeNotifyCompanionRequest=a}),98);
__d("WASmaxInNewslettersAdminNotificationGeosuspendedStateMixinMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"country");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"iso_code");return!b.success?b:d("WAResultOrError").makeResult({isoCode:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"admin");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"geosuspended");if(!b.success)return b;a=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"country",1,250,h);return!a.success?a:d("WAResultOrError").makeResult({geosuspendedCountry:a.value})}g.parseAdminNotificationGeosuspendedStateMixinGeosuspendedCountry=h;g.parseAdminNotificationGeosuspendedStateMixinMixin=a}),98);
__d("WASmaxInNewslettersAdminNotificationGeounsuspendedStateMixinMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"country");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"iso_code");return!b.success?b:d("WAResultOrError").makeResult({isoCode:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"admin");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"geounsuspended");if(!b.success)return b;a=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"country",1,250,h);return!a.success?a:d("WAResultOrError").makeResult({geounsuspendedCountry:a.value})}g.parseAdminNotificationGeounsuspendedStateMixinGeounsuspendedCountry=h;g.parseAdminNotificationGeounsuspendedStateMixinMixin=a}),98);
__d("WASmaxInNewslettersAdminNotificationGeosuspendedOrGeounsuspendedStateMixinMixinGroup",["WAResultOrError","WASmaxInNewslettersAdminNotificationGeosuspendedStateMixinMixin","WASmaxInNewslettersAdminNotificationGeounsuspendedStateMixinMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInNewslettersAdminNotificationGeosuspendedStateMixinMixin").parseAdminNotificationGeosuspendedStateMixinMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"AdminNotificationGeosuspendedStateMixin",value:b.value});var c=d("WASmaxInNewslettersAdminNotificationGeounsuspendedStateMixinMixin").parseAdminNotificationGeounsuspendedStateMixinMixin(a);return c.success?d("WAResultOrError").makeResult({name:"AdminNotificationGeounsuspendedStateMixin",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["AdminNotificationGeosuspendedStateMixin","AdminNotificationGeounsuspendedStateMixin"],[b,c])}g.parseAdminNotificationGeosuspendedOrGeounsuspendedStateMixinMixinGroup=a}),98);
__d("WASmaxInNewslettersAdminGeosuspendNotificationPayloadMixin",["WAResultOrError","WASmaxInNewslettersAdminNotificationGeosuspendedOrGeounsuspendedStateMixinMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"admin");if(!b.success)return b;b=d("WASmaxInNewslettersAdminNotificationGeosuspendedOrGeounsuspendedStateMixinMixinGroup").parseAdminNotificationGeosuspendedOrGeounsuspendedStateMixinMixinGroup(a);return!b.success?b:d("WAResultOrError").makeResult({adminNotificationGeosuspendedOrGeounsuspendedStateMixinMixinGroup:b.value})}g.parseAdminGeosuspendNotificationPayloadMixin=a}),98);
__d("WASmaxInNewslettersServerNotificationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"offline",0,1024);return!a.success?a:d("WAResultOrError").makeResult({t:b.value,id:c.value,offline:a.value})}g.parseServerNotificationMixin=a}),98);
__d("WASmaxInNewslettersCommonNotificationMixin",["WAResultOrError","WASmaxInNewslettersServerNotificationMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseJid").attrNewsletterJid(a,"from");if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","newsletter");if(!c.success)return c;a=d("WASmaxInNewslettersServerNotificationMixin").parseServerNotificationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({from:b.value,type:c.value},a.value))}g.parseCommonNotificationMixin=a}),98);
__d("WASmaxInNewslettersAdminNotificationRequest",["WAResultOrError","WASmaxInNewslettersAdminGeosuspendNotificationPayloadMixin","WASmaxInNewslettersCommonNotificationMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"admin");if(!b.success)return b;b=d("WASmaxInNewslettersAdminGeosuspendNotificationPayloadMixin").parseAdminGeosuspendNotificationPayloadMixin(b.value);a=d("WASmaxInNewslettersCommonNotificationMixin").parseCommonNotificationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({adminAdminGeosuspendNotificationPayloadMixin:b.success?b.value:null},a.value))}g.parseAdminNotificationRequest=a}),98);
__d("WASmaxInNewslettersDeleteNotificationRequest",["WAResultOrError","WASmaxInNewslettersCommonNotificationMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"delete");if(!b.success)return b;b=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,a,"is_sender","true");if(!b.success)return b;a=d("WASmaxInNewslettersCommonNotificationMixin").parseCommonNotificationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({isSender:b.value},a.value))}g.parseDeleteNotificationRequest=a}),98);
__d("WASmaxInNewslettersLeaveNotificationRequest",["WASmaxInNewslettersCommonNotificationMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"leave");if(!b.success)return b;b=d("WASmaxInNewslettersCommonNotificationMixin").parseCommonNotificationMixin(a);return!b.success?b:b}g.parseLeaveNotificationRequest=a}),98);
__d("WASmaxInNewslettersLiveUpdatesNotificationRequest",["WAResultOrError","WASmaxInNewslettersCommonNotificationMixin","WASmaxInNewslettersNewsletterMessageResponsePayloadMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"live_updates");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"messages");if(!b.success)return b;b=d("WASmaxInNewslettersNewsletterMessageResponsePayloadMixin").parseNewsletterMessageResponsePayloadMixin(b.value);if(!b.success)return b;a=d("WASmaxInNewslettersCommonNotificationMixin").parseCommonNotificationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({liveUpdatesMessagesNewsletterMessageResponsePayloadMixin:b.value},a.value))}g.parseLiveUpdatesNotificationRequest=a}),98);
__d("WASmaxInNewslettersNewsletterMessageDeliveryUpdateMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"issue");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"server_id",0,void 0);if(!a.success)return a;b=d("WASmaxParseUtils").attrIntRange(b.value,"code",0,void 0);return!b.success?b:d("WAResultOrError").makeResult({serverId:a.value,issueCode:b.value})}g.parseNewsletterMessageDeliveryUpdateMixin=a}),98);
__d("WASmaxInNewslettersMessageDeliveryUpdateNotificationRequest",["WAResultOrError","WASmaxInNewslettersCommonNotificationMixin","WASmaxInNewslettersNewsletterMessageDeliveryUpdateMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInNewslettersNewsletterMessageDeliveryUpdateMixin").parseNewsletterMessageDeliveryUpdateMixin(a);return!b.success?b:b}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"message_delivery_updates");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"messages");if(!b.success)return b;a=d("WASmaxInNewslettersCommonNotificationMixin").parseCommonNotificationMixin(a);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"message",1,300,h);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{messageDeliveryUpdatesMessagesMessage:b.value}))}g.parseMessageDeliveryUpdateNotificationRequestMessageDeliveryUpdatesMessagesMessage=h;g.parseMessageDeliveryUpdateNotificationRequest=a}),98);
__d("WASmaxInNewslettersNewsletterReactionsModeOthersMixin",["WAResultOrError","WASmaxInNewslettersEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"reactions");if(!b.success)return b;b=d("WASmaxParseUtils").attrStringEnum(a,"mode",d("WASmaxInNewslettersEnums").ENUM_ALL_BASIC_NONE);return!b.success?b:d("WAResultOrError").makeResult({mode:b.value})}g.parseNewsletterReactionsModeOthersMixin=a}),98);
__d("WASmaxInNewslettersNewsletterReactionSettingsMixin",["WASmaxInNewslettersNewsletterReactionsModeOthersMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"settings");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"reactions");if(!b.success)return b;a=d("WASmaxInNewslettersNewsletterReactionsModeOthersMixin").parseNewsletterReactionsModeOthersMixin(b.value);return!a.success?a:a}g.parseNewsletterReactionSettingsMixin=a}),98);
__d("WASmaxInNewslettersNewsletterSettingsMetadataMixin",["WAResultOrError","WASmaxInNewslettersNewsletterReactionSettingsMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"metadata");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"settings");if(!b.success)return b;a=d("WASmaxInNewslettersNewsletterReactionSettingsMixin").parseNewsletterReactionSettingsMixin(b.value);return d("WAResultOrError").makeResult({settingsNewsletterReactionSettingsMixin:a.success?a.value:null})}g.parseNewsletterSettingsMetadataMixin=a}),98);
__d("WASmaxInNewslettersSetMetadataNotificationRequest",["WAResultOrError","WASmaxInNewslettersCommonNewsletterMetadataMixin","WASmaxInNewslettersCommonNotificationMixin","WASmaxInNewslettersNewsletterSettingsMetadataMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"metadata");if(!b.success)return b;var c=d("WASmaxInNewslettersCommonNewsletterMetadataMixin").parseCommonNewsletterMetadataMixin(b.value);if(!c.success)return c;b=d("WASmaxInNewslettersNewsletterSettingsMetadataMixin").parseNewsletterSettingsMetadataMixin(b.value);a=d("WASmaxInNewslettersCommonNotificationMixin").parseCommonNotificationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({metadataCommonNewsletterMetadataMixin:c.value,metadataNewsletterSettingsMetadataMixin:b.success?b.value:null},a.value))}g.parseSetMetadataNotificationRequest=a}),98);
__d("WASmaxInPresenceEnums",["WAJids"],(function(a,b,c,d,e,f,g){a={deny:"deny",error:"error",none:"none"};b={validators:[d("WAJids").validateGroupJid,d("WAJids").validateUserJid],typeName:"GroupJid|UserJid"};g.ENUM_DENY_ERROR_NONE=a;g.GROUPJID_USERJID=b}),98);
__d("WASmaxInPresenceAvailableMixin",["WAResultOrError","WASmaxInPresenceEnums","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"presence");if(!b.success)return b;b=d("WASmaxParseJid").attrJidEnum(a,"from",d("WASmaxInPresenceEnums").GROUPJID_USERJID);if(!b.success)return b;var c=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,a,"type","available");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"last");return!a.success?a:d("WAResultOrError").makeResult({from:b.value,type:c.value,last:a.value})}g.parseAvailableMixin=a}),98);
__d("WASmaxInPresenceLastSeenWithOtherValueMixin",["WAResultOrError","WASmaxInPresenceEnums","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"presence");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"from");if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","unavailable");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,a,"last",d("WASmaxInPresenceEnums").ENUM_DENY_ERROR_NONE);return!a.success?a:d("WAResultOrError").makeResult({from:b.value,type:c.value,last:a.value})}g.parseLastSeenWithOtherValueMixin=a}),98);
__d("WASmaxInPresenceUserUnavailableMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"presence");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"from");if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","unavailable");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"last");return!a.success?a:d("WAResultOrError").makeResult({from:b.value,type:c.value,last:a.value})}g.parseUserUnavailableMixin=a}),98);
__d("WASmaxInPresenceAvailableOrLastSeenWithOtherValueOrUserUnavailableMixinGroup",["WAResultOrError","WASmaxInPresenceAvailableMixin","WASmaxInPresenceLastSeenWithOtherValueMixin","WASmaxInPresenceUserUnavailableMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInPresenceAvailableMixin").parseAvailableMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"Available",value:b.value});var c=d("WASmaxInPresenceLastSeenWithOtherValueMixin").parseLastSeenWithOtherValueMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"LastSeenWithOtherValue",value:c.value});var e=d("WASmaxInPresenceUserUnavailableMixin").parseUserUnavailableMixin(a);return e.success?d("WAResultOrError").makeResult({name:"UserUnavailable",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["Available","LastSeenWithOtherValue","UserUnavailable"],[b,c,e])}g.parseAvailableOrLastSeenWithOtherValueOrUserUnavailableMixinGroup=a}),98);
__d("WASmaxInPresenceServerUpdateRequest",["WAResultOrError","WASmaxInPresenceAvailableOrLastSeenWithOtherValueOrUserUnavailableMixinGroup","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"presence");if(!b.success)return b;b=d("WASmaxInPresenceAvailableOrLastSeenWithOtherValueOrUserUnavailableMixinGroup").parseAvailableOrLastSeenWithOtherValueOrUserUnavailableMixinGroup(a);return!b.success?b:d("WAResultOrError").makeResult({availableOrLastSeenWithOtherValueOrUserUnavailableMixinGroup:b.value})}g.parseServerUpdateRequest=a}),98);
__d("WASmaxInPsaServerNotificationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"offline",0,1024);return!a.success?a:d("WAResultOrError").makeResult({t:b.value,id:c.value,offline:a.value})}g.parseServerNotificationMixin=a}),98);
__d("WASmaxInPsaResetSmbLastQpPrefetchTimestampRequest",["WAResultOrError","WASmaxInPsaServerNotificationMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"reset_smb_last_qp_prefetch_timestamp");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"from");if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","psa");if(!c.success)return c;a=d("WASmaxInPsaServerNotificationMixin").parseServerNotificationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({from:b.value,type:c.value},a.value))}g.parseResetSmbLastQpPrefetchTimestampRequest=a}),98);
__d("WASmaxInQpSurfacesEnums",[],(function(a,b,c,d,e,f){a={"false":"false","true":"true"};f.ENUM_FALSE_TRUE=a}),66);
__d("WASmaxInQpSurfacesQPSurfacesMixin",["WAResultOrError","WASmaxInQpSurfacesEnums","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"trigger");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"name");return!b.success?b:d("WAResultOrError").makeResult({name:b.value})}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"header");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"title");return!b.success?b:d("WAResultOrError").makeResult({title:b.value})}function j(a){var b=d("WASmaxParseUtils").assertTag(a,"light");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytes(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function k(a){var b=d("WASmaxParseUtils").assertTag(a,"dark");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytes(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function l(a){var b=d("WASmaxParseUtils").assertTag(a,"image");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"light",j);if(!b.success)return b;var c=d("WASmaxParseUtils").optionalChildWithTag(a,"dark",k);if(!c.success)return c;a=d("WASmaxParseUtils").attrString(a,"description");return!a.success?a:d("WAResultOrError").makeResult({description:a.value,light:b.value,dark:c.value})}function m(a){var b=d("WASmaxParseUtils").assertTag(a,"primary_action");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"text");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"universal_link");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"deep_link");return!a.success?a:d("WAResultOrError").makeResult({text:b.value,universalLink:c.value,deepLink:a.value})}function n(a){var b=d("WASmaxParseUtils").assertTag(a,"secondary_action");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"text");if(!b.success)return b;var c=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"universal_link");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"deep_link");return!a.success?a:d("WAResultOrError").makeResult({text:b.value,universalLink:c.value,deepLink:a.value})}function o(a){var b=d("WASmaxParseUtils").assertTag(a,"colors");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"light");if(!b.success)return b;a=d("WASmaxParseUtils").flattenedChildWithTag(a,"dark");if(!a.success)return a;var c=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,b.value,"background");if(!c.success)return c;b=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,b.value,"highlight");if(!b.success)return b;var e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a.value,"background");if(!e.success)return e;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a.value,"highlight");return!a.success?a:d("WAResultOrError").makeResult({lightBackground:c.value,lightHighlight:b.value,darkBackground:e.value,darkHighlight:a.value})}function p(a){var b=d("WASmaxParseUtils").assertTag(a,"attribute");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"key");if(!b.success)return b;a=d("WASmaxParseUtils").attrString(a,"value");return!a.success?a:d("WAResultOrError").makeResult({key:b.value,value:a.value})}function q(a){var b=d("WASmaxParseUtils").assertTag(a,"content_attributes");if(!b.success)return b;b=d("WASmaxParseUtils").mapChildrenWithTag(a,"attribute",0,50,p);return!b.success?b:d("WAResultOrError").makeResult({attribute:b.value})}function r(a){var b=d("WASmaxParseUtils").assertTag(a,"filter_rules");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytes(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function s(a){var b=d("WASmaxParseUtils").assertTag(a,"instance_log_data");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytes(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function t(a){var b=d("WASmaxParseUtils").assertTag(a,"promotion_config");if(!b.success)return b;b=d("WASmaxParseUtils").attrInt(a,"max_impressions");if(!b.success)return b;var c=d("WASmaxParseUtils").attrInt(a,"max_primary_clicks");if(!c.success)return c;var e=d("WASmaxParseUtils").attrInt(a,"max_secondary_clicks");if(!e.success)return e;a=d("WASmaxParseUtils").attrInt(a,"max_dismisses");return!a.success?a:d("WAResultOrError").makeResult({maxImpressions:b.value,maxPrimaryClicks:c.value,maxSecondaryClicks:e.value,maxDismisses:a.value})}function u(a){var b=d("WASmaxParseUtils").assertTag(a,"user_info");if(!b.success)return b;b=d("WASmaxParseUtils").attrInt(a,"impression_count");if(!b.success)return b;var c=d("WASmaxParseUtils").attrInt(a,"primary_click_count");if(!c.success)return c;var e=d("WASmaxParseUtils").attrInt(a,"secondary_click_count");if(!e.success)return e;a=d("WASmaxParseUtils").attrInt(a,"dismiss_click_count");return!a.success?a:d("WAResultOrError").makeResult({impressionCount:b.value,primaryClickCount:c.value,secondaryClickCount:e.value,dismissClickCount:a.value})}function v(a){var b=d("WASmaxParseUtils").assertTag(a,"pacing");if(!b.success)return b;b=d("WASmaxParseUtils").optionalChildWithTag(a,"promotion_config",t);if(!b.success)return b;a=d("WASmaxParseUtils").optionalChildWithTag(a,"user_info",u);return!a.success?a:d("WAResultOrError").makeResult({promotionConfig:b.value,userInfo:a.value})}function w(a){var b=d("WASmaxParseUtils").assertTag(a,"promotion");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"title");if(!b.success)return b;var c=d("WASmaxParseUtils").flattenedChildWithTag(a,"text");if(!c.success)return c;var e=d("WASmaxParseUtils").flattenedChildWithTag(a,"qp_config");if(!e.success)return e;var f=d("WASmaxParseUtils").flattenedChildWithTag(e.value,"triggers");if(!f.success)return f;var g=d("WASmaxParseUtils").optionalChildWithTag(a,"header",i);if(!g.success)return g;var j=d("WASmaxParseUtils").optionalChildWithTag(a,"image",l);if(!j.success)return j;var k=d("WASmaxParseUtils").optionalChildWithTag(a,"primary_action",m);if(!k.success)return k;var p=d("WASmaxParseUtils").optionalChildWithTag(a,"secondary_action",n);if(!p.success)return p;var t=d("WASmaxParseUtils").optionalChildWithTag(a,"colors",o);if(!t.success)return t;var u=d("WASmaxParseUtils").optionalChildWithTag(a,"content_attributes",q);if(!u.success)return u;var w=d("WASmaxParseUtils").optionalChildWithTag(e.value,"filter_rules",r);if(!w.success)return w;var x=d("WASmaxParseUtils").optionalChildWithTag(e.value,"instance_log_data",s);if(!x.success)return x;var y=d("WASmaxParseUtils").optionalChildWithTag(e.value,"pacing",v);if(!y.success)return y;var z=d("WASmaxParseUtils").attrString(a,"id");if(!z.success)return z;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a,"instance_id");if(!a.success)return a;b=d("WASmaxParseUtils").contentString(b.value);if(!b.success)return b;c=d("WASmaxParseUtils").contentString(c.value);if(!c.success)return c;var A=d("WASmaxParseUtils").attrString(e.value,"template_name");if(!A.success)return A;var B=d("WASmaxParseUtils").attrInt(e.value,"start_time_seconds");if(!B.success)return B;var C=d("WASmaxParseUtils").attrInt(e.value,"end_time_seconds");if(!C.success)return C;var D=d("WASmaxParseUtils").attrInt(e.value,"ttl_seconds");if(!D.success)return D;var E=d("WASmaxParseUtils").attrStringEnum(e.value,"dismissable",d("WASmaxInQpSurfacesEnums").ENUM_FALSE_TRUE);if(!E.success)return E;var F=d("WASmaxParseUtils").attrStringEnum(e.value,"force_pass",d("WASmaxInQpSurfacesEnums").ENUM_FALSE_TRUE);if(!F.success)return F;var G=d("WASmaxParseUtils").attrInt(e.value,"surface_delay_time_seconds");if(!G.success)return G;var H=d("WASmaxParseUtils").attrStringEnum(e.value,"deterministic",d("WASmaxInQpSurfacesEnums").ENUM_FALSE_TRUE);if(!H.success)return H;var I=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,e.value,"experiment_key");if(!I.success)return I;var J=d("WASmaxParseUtils").attrStringEnum(e.value,"exposure_holdout",d("WASmaxInQpSurfacesEnums").ENUM_FALSE_TRUE);if(!J.success)return J;var K=d("WASmaxParseUtils").attrInt(e.value,"max_impressions");if(!K.success)return K;var L=d("WASmaxParseUtils").attrInt(e.value,"impression_cooldown");if(!L.success)return L;var M=d("WASmaxParseUtils").attrInt(e.value,"eligibility_duration_ms");if(!M.success)return M;var N=d("WASmaxParseUtils").attrInt(e.value,"priority");if(!N.success)return N;e=d("WASmaxParseUtils").attrStringEnum(e.value,"log_eligibility_waterfall",d("WASmaxInQpSurfacesEnums").ENUM_FALSE_TRUE);if(!e.success)return e;f=d("WASmaxParseUtils").mapChildrenWithTag(f.value,"trigger",1,50,h);return!f.success?f:d("WAResultOrError").makeResult({id:z.value,instanceId:a.value,titleElementValue:b.value,textElementValue:c.value,qpConfigTemplateName:A.value,qpConfigStartTimeSeconds:B.value,qpConfigEndTimeSeconds:C.value,qpConfigTtlSeconds:D.value,qpConfigDismissable:E.value,qpConfigForcePass:F.value,qpConfigSurfaceDelayTimeSeconds:G.value,qpConfigDeterministic:H.value,qpConfigExperimentKey:I.value,qpConfigExposureHoldout:J.value,qpConfigMaxImpressions:K.value,qpConfigImpressionCooldown:L.value,qpConfigEligibilityDurationMs:M.value,qpConfigPriority:N.value,qpConfigLogEligibilityWaterfall:e.value,header:g.value,image:j.value,primaryAction:k.value,secondaryAction:p.value,colors:t.value,contentAttributes:u.value,qpConfigFilterRules:w.value,qpConfigInstanceLogData:x.value,qpConfigPacing:y.value,qpConfigTriggersTrigger:f.value})}function x(a){var b=d("WASmaxParseUtils").assertTag(a,"surface");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"id");if(!b.success)return b;a=d("WASmaxParseUtils").mapChildrenWithTag(a,"promotion",0,100,w);return!a.success?a:d("WAResultOrError").makeResult({id:b.value,promotion:a.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"surfaces");if(!b.success)return b;b=d("WASmaxParseUtils").mapChildrenWithTag(a,"surface",0,100,x);return!b.success?b:d("WAResultOrError").makeResult({surface:b.value})}g.parseQPSurfacesSurfacePromotionQpConfigTriggersTrigger=h;g.parseQPSurfacesSurfacePromotionHeader=i;g.parseQPSurfacesSurfacePromotionImageLight=j;g.parseQPSurfacesSurfacePromotionImageDark=k;g.parseQPSurfacesSurfacePromotionImage=l;g.parseQPSurfacesSurfacePromotionPrimaryAction=m;g.parseQPSurfacesSurfacePromotionSecondaryAction=n;g.parseQPSurfacesSurfacePromotionColors=o;g.parseQPSurfacesSurfacePromotionContentAttributesAttribute=p;g.parseQPSurfacesSurfacePromotionContentAttributes=q;g.parseQPSurfacesSurfacePromotionQpConfigFilterRules=r;g.parseQPSurfacesSurfacePromotionQpConfigInstanceLogData=s;g.parseQPSurfacesSurfacePromotionQpConfigPacingPromotionConfig=t;g.parseQPSurfacesSurfacePromotionQpConfigPacingUserInfo=u;g.parseQPSurfacesSurfacePromotionQpConfigPacing=v;g.parseQPSurfacesSurfacePromotion=w;g.parseQPSurfacesSurface=x;g.parseQPSurfacesMixin=a}),98);
__d("WASmaxInQpSurfacesServerNotificationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"offline",0,1024);return!a.success?a:d("WAResultOrError").makeResult({t:b.value,id:c.value,offline:a.value})}g.parseServerNotificationMixin=a}),98);
__d("WASmaxInQpSurfacesQPNotificationRequest",["WAResultOrError","WASmaxInQpSurfacesQPSurfacesMixin","WASmaxInQpSurfacesServerNotificationMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"surfaces");if(!b.success)return b;var c=d("WASmaxParseJid").attrUserJid(a,"from");if(!c.success)return c;var e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","psa");if(!e.success)return e;b=d("WASmaxInQpSurfacesQPSurfacesMixin").parseQPSurfacesMixin(b.value);if(!b.success)return b;a=d("WASmaxInQpSurfacesServerNotificationMixin").parseServerNotificationMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({from:c.value,type:e.value,surfacesQPSurfacesMixin:b.value},a.value))}g.parseQPNotificationRequest=a}),98);
__d("WASmaxOutMdNotificationClientAckMixin",["WASmaxJsx","WASmaxMixins","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrDomainJid,a,["from"]);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").DOMAIN_JID(c.value),"class":"notification",type:d("WAWap").CUSTOM_STRING(a.value)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNotificationClientAckMixin=a}),98);
__d("WASmaxOutMdPrimaryHelloNotifyCompanionResponseAck",["WASmaxJsx","WASmaxOutMdNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutMdNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makePrimaryHelloNotifyCompanionResponseAck=a}),98);
__d("WASmaxMdPrimaryHelloNotifyCompanionRPC",["WASmaxInMdPrimaryHelloNotifyCompanionRequest","WASmaxOutMdPrimaryHelloNotifyCompanionResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMdPrimaryHelloNotifyCompanionRequest").parsePrimaryHelloNotifyCompanionRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("PrimaryHelloNotifyCompanion",{Request:b}));return{parsedRequest:b.value,makePrimaryHelloNotifyCompanionResponseAck:function(){return d("WASmaxOutMdPrimaryHelloNotifyCompanionResponseAck").makePrimaryHelloNotifyCompanionResponseAck(a)}}}g.receivePrimaryHelloNotifyCompanionRPC=a}),98);
__d("WASmaxOutMdRefreshCodeNotifyCompanionResponseAck",["WASmaxJsx","WASmaxOutMdNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutMdNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeRefreshCodeNotifyCompanionResponseAck=a}),98);
__d("WASmaxMdRefreshCodeNotifyCompanionRPC",["WASmaxInMdRefreshCodeNotifyCompanionRequest","WASmaxOutMdRefreshCodeNotifyCompanionResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMdRefreshCodeNotifyCompanionRequest").parseRefreshCodeNotifyCompanionRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("RefreshCodeNotifyCompanion",{Request:b}));return{parsedRequest:b.value,makeRefreshCodeNotifyCompanionResponseAck:function(){return d("WASmaxOutMdRefreshCodeNotifyCompanionResponseAck").makeRefreshCodeNotifyCompanionResponseAck(a)}}}g.receiveRefreshCodeNotifyCompanionRPC=a}),98);
__d("WASmaxOutNewslettersNotificationClientAckMixin",["WASmaxJsx","WASmaxMixins","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrNewsletterJid,a,["from"]);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").JID(c.value),"class":"notification",type:d("WAWap").CUSTOM_STRING(a.value)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNotificationClientAckMixin=a}),98);
__d("WASmaxOutNewslettersAdminNotificationResponseAck",["WASmaxJsx","WASmaxOutNewslettersNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutNewslettersNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeAdminNotificationResponseAck=a}),98);
__d("WASmaxNewslettersAdminNotificationRPC",["WASmaxInNewslettersAdminNotificationRequest","WASmaxOutNewslettersAdminNotificationResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInNewslettersAdminNotificationRequest").parseAdminNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("AdminNotification",{Request:b}));return{parsedRequest:b.value,makeAdminNotificationResponseAck:function(){return d("WASmaxOutNewslettersAdminNotificationResponseAck").makeAdminNotificationResponseAck(a)}}}g.receiveAdminNotificationRPC=a}),98);
__d("WASmaxOutNewslettersDeleteNotificationResponseAck",["WASmaxJsx","WASmaxOutNewslettersNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutNewslettersNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeDeleteNotificationResponseAck=a}),98);
__d("WASmaxNewslettersDeleteNotificationRPC",["WASmaxInNewslettersDeleteNotificationRequest","WASmaxOutNewslettersDeleteNotificationResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInNewslettersDeleteNotificationRequest").parseDeleteNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("DeleteNotification",{Request:b}));return{parsedRequest:b.value,makeDeleteNotificationResponseAck:function(){return d("WASmaxOutNewslettersDeleteNotificationResponseAck").makeDeleteNotificationResponseAck(a)}}}g.receiveDeleteNotificationRPC=a}),98);
__d("WASmaxOutNewslettersLeaveNotificationResponseAck",["WASmaxJsx","WASmaxOutNewslettersNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutNewslettersNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeLeaveNotificationResponseAck=a}),98);
__d("WASmaxNewslettersLeaveNotificationRPC",["WASmaxInNewslettersLeaveNotificationRequest","WASmaxOutNewslettersLeaveNotificationResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInNewslettersLeaveNotificationRequest").parseLeaveNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("LeaveNotification",{Request:b}));return{parsedRequest:b.value,makeLeaveNotificationResponseAck:function(){return d("WASmaxOutNewslettersLeaveNotificationResponseAck").makeLeaveNotificationResponseAck(a)}}}g.receiveLeaveNotificationRPC=a}),98);
__d("WASmaxOutNewslettersLiveUpdatesNotificationResponseAck",["WASmaxJsx","WASmaxOutNewslettersNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutNewslettersNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeLiveUpdatesNotificationResponseAck=a}),98);
__d("WASmaxNewslettersLiveUpdatesNotificationRPC",["WASmaxInNewslettersLiveUpdatesNotificationRequest","WASmaxOutNewslettersLiveUpdatesNotificationResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInNewslettersLiveUpdatesNotificationRequest").parseLiveUpdatesNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("LiveUpdatesNotification",{Request:b}));return{parsedRequest:b.value,makeLiveUpdatesNotificationResponseAck:function(){return d("WASmaxOutNewslettersLiveUpdatesNotificationResponseAck").makeLiveUpdatesNotificationResponseAck(a)}}}g.receiveLiveUpdatesNotificationRPC=a}),98);
__d("WASmaxOutNewslettersMessageDeliveryUpdateNotificationResponseAck",["WASmaxJsx","WASmaxOutNewslettersNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutNewslettersNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeMessageDeliveryUpdateNotificationResponseAck=a}),98);
__d("WASmaxNewslettersMessageDeliveryUpdateNotificationRPC",["WASmaxInNewslettersMessageDeliveryUpdateNotificationRequest","WASmaxOutNewslettersMessageDeliveryUpdateNotificationResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInNewslettersMessageDeliveryUpdateNotificationRequest").parseMessageDeliveryUpdateNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("MessageDeliveryUpdateNotification",{Request:b}));return{parsedRequest:b.value,makeMessageDeliveryUpdateNotificationResponseAck:function(){return d("WASmaxOutNewslettersMessageDeliveryUpdateNotificationResponseAck").makeMessageDeliveryUpdateNotificationResponseAck(a)}}}g.receiveMessageDeliveryUpdateNotificationRPC=a}),98);
__d("WASmaxOutNewslettersSetMetadataNotificationResponseAck",["WASmaxJsx","WASmaxOutNewslettersNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutNewslettersNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeSetMetadataNotificationResponseAck=a}),98);
__d("WASmaxNewslettersSetMetadataNotificationRPC",["WASmaxInNewslettersSetMetadataNotificationRequest","WASmaxOutNewslettersSetMetadataNotificationResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInNewslettersSetMetadataNotificationRequest").parseSetMetadataNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("SetMetadataNotification",{Request:b}));return{parsedRequest:b.value,makeSetMetadataNotificationResponseAck:function(){return d("WASmaxOutNewslettersSetMetadataNotificationResponseAck").makeSetMetadataNotificationResponseAck(a)}}}g.receiveSetMetadataNotificationRPC=a}),98);
__d("WASmaxOutPsaNotificationClientAckMixin",["WASmaxInPsaEnums","WASmaxJsx","WASmaxMixins","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrJidEnum,a,["from"],d("WASmaxInPsaEnums").STATUSJID_USERJID);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").JID(c.value),"class":"notification",type:d("WAWap").CUSTOM_STRING(a.value)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNotificationClientAckMixin=a}),98);
__d("WASmaxOutPsaResetSmbLastQpPrefetchTimestampResponseAck",["WASmaxJsx","WASmaxOutPsaNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutPsaNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeResetSmbLastQpPrefetchTimestampResponseAck=a}),98);
__d("WASmaxOutQpSurfacesNotificationClientAckMixin",["WASmaxJsx","WASmaxMixins","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrUserJid,a,["from"]);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").USER_JID(c.value),"class":"notification",type:d("WAWap").CUSTOM_STRING(a.value)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNotificationClientAckMixin=a}),98);
__d("WASmaxOutQpSurfacesQPNotificationResponseAck",["WASmaxJsx","WASmaxOutQpSurfacesNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutQpSurfacesNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeQPNotificationResponseAck=a}),98);
__d("WASmaxPresenceServerUpdateRPC",["WASmaxInPresenceServerUpdateRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInPresenceServerUpdateRequest").parseServerUpdateRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("ServerUpdate",{Request:a}));return{parsedRequest:a.value}}g.receiveServerUpdateRPC=a}),98);
__d("WASmaxPsaResetSmbLastQpPrefetchTimestampRPC",["WASmaxInPsaResetSmbLastQpPrefetchTimestampRequest","WASmaxOutPsaResetSmbLastQpPrefetchTimestampResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInPsaResetSmbLastQpPrefetchTimestampRequest").parseResetSmbLastQpPrefetchTimestampRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("ResetSmbLastQpPrefetchTimestamp",{Request:b}));return{parsedRequest:b.value,makeResetSmbLastQpPrefetchTimestampResponseAck:function(){return d("WASmaxOutPsaResetSmbLastQpPrefetchTimestampResponseAck").makeResetSmbLastQpPrefetchTimestampResponseAck(a)}}}g.receiveResetSmbLastQpPrefetchTimestampRPC=a}),98);
__d("WASmaxQpSurfacesQPNotificationRPC",["WASmaxInQpSurfacesQPNotificationRequest","WASmaxOutQpSurfacesQPNotificationResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInQpSurfacesQPNotificationRequest").parseQPNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("QPNotification",{Request:b}));return{parsedRequest:b.value,makeQPNotificationResponseAck:function(){return d("WASmaxOutQpSurfacesQPNotificationResponseAck").makeQPNotificationResponseAck(a)}}}g.receiveQPNotificationRPC=a}),98);
__d("WAWebAdvStoredTimestampExpiredWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({AdvStoredTimestampExpired:[3036,{advExpireTimeInHours:[1,d("WAWebWamCodegenUtils").TYPES.INTEGER]},[1,1,1],"regular"]},{AdvStoredTimestampExpired:[]});g.AdvStoredTimestampExpiredWamEvent=a}),98);
__d("WAWebAdvDeviceInfoCheckJob",["Promise","WAJids","WALogger","WATimeUtils","WAWebABProps","WAWebAdvStoredTimestampExpiredWamEvent","WAWebApiDeviceList","WAWebApiPendingDeviceSync","WAWebApiTasksScheduledTime","WAWebIdentityUpdateDeviceTableApi","WAWebLastADVCheckTimeApi","WAWebLogoutReasonConstants","WAWebSocketLogoutJob","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["error running the adv device check job"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["skip first run"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["scheduled in "," seconds"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Logging out due to own expired device"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["adv_device_info_check: sending usync query"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["adv: error sending usync query: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["adv: removing companions: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["adv: running device info check with t=",""]);p=function(){return a};return a}var q=25*d("WATimeUtils").HOUR_SECONDS,r=function(){function a(a){this.advToSystemBridge=a}var c=a.prototype;c.run=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(p(),a).tags("automated-device-verification");var b=this.advToSystemBridge,c=(yield b.getUsersForExpiration(a)),e=c.usersExpired;c=c.usersCloseToExpiration;d("WALogger").DEV(o(),Array.from(e.entries()).map(function(a){var b=a[0];a=a[1];return"\n\t"+b.toString()+" (t="+a.timestamp+")"})).tags("automated-device-verification");b.removeCompanions(e);b.sendADVStoredTimestampExpiredEvents(e,a);a=Array.from(e.keys()).concat(Array.from(c.keys())).filter(function(a){return!b.canRemoveUserDevices(a)});b.sendOrQueueDeviceUsyncQuery(a)["catch"](function(a){return d("WALogger").DEV(n(),a).tags("automated-device-verification")});return b.recordLocalTimestamp()});function c(b){return a.apply(this,arguments)}return c}();return a}(),s=function(){function a(){}var c=a.prototype;c.getNumDaysKeyIndexListExpiration=function(){return d("WAWebABProps").getABPropConfigValue("num_days_key_index_list_expiration")};c.getNumDaysBeforeDeviceExpiryCheck=function(){return d("WAWebABProps").getABPropConfigValue("num_days_before_device_expiry_check")};c.getUsersForExpiration=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this,c=(yield d("WAWebApiDeviceList").getAllDeviceLists()),e=(yield d("WAWebLastADVCheckTimeApi").getLastADVDeviceInfoCheckTime()),f=this.getNumDaysKeyIndexListExpiration()*d("WATimeUtils").DAY_SECONDS,g=new Map(),h=new Map();c.forEach(function(c){if(c.deleted||z(c))return;else A(a,f,c,e)?g.set(d("WAWebWidFactory").createUserWid(c.id),c):B(a,f-b.getNumDaysBeforeDeviceExpiryCheck()*d("WATimeUtils").DAY_SECONDS,c)&&h.set(d("WAWebWidFactory").createUserWid(c.id),c)});return{usersExpired:g,usersCloseToExpiration:h}});function c(b){return a.apply(this,arguments)}return c}();c.sendADVStoredTimestampExpiredEvents=function(a,b){var c=this;a.forEach(function(a){a=b-(a.timestamp+c.getNumDaysKeyIndexListExpiration()*d("WATimeUtils").DAY_SECONDS);if(a<0)return;a=Math.round(a/d("WATimeUtils").HOUR_SECONDS);new(d("WAWebAdvStoredTimestampExpiredWamEvent").AdvStoredTimestampExpiredWamEvent)({advExpireTimeInHours:a}).commit()})};c.sendOrQueueDeviceUsyncQuery=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(m());yield d("WAWebApiPendingDeviceSync").addUserToPendingDeviceSync(a.map(function(a){return a.toString()}));return d("WAWebApiPendingDeviceSync").doPendingDeviceSync()});function c(b){return a.apply(this,arguments)}return c}();c.canRemoveUserDevices=function(a){return!1};c.removeCompanions=function(a){var c=Array.from(a.entries());c=c.some(function(a){var b=a[0];a[1];return b.user===d("WAWebUserPrefsMeUser").getMeUser().user});if(c&&d("WAWebABProps").getABPropConfigValue("web_adv_logout_on_self_device_list_expired")){d("WALogger").LOG(l());void d("WAWebSocketLogoutJob").socketLogout(d("WAWebLogoutReasonConstants").LogoutReason.InvalidAdvStatus);return(h||(h=b("Promise"))).resolve()}return(h||(h=b("Promise"))).all(Array.from(a.entries()).map(function(a){var b=a[0];a=a[1];return d("WAWebIdentityUpdateDeviceTableApi").clearDeviceRecord(b,a.devices)}))};c.recordLocalTimestamp=function(){return(h||(h=b("Promise"))).resolve()};return a}(),t="advDeviceInfoCheck",u;function v(){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){u!=null&&(self.clearTimeout(u),u=null);var a=d("WATimeUtils").unixTimeWithoutClockSkewCorrection(),c=(yield d("WAWebLastADVCheckTimeApi").getLastADVDeviceInfoCheckTime()),e=0,f=function(){return(h||(h=b("Promise"))).resolve()};c!=null?(e=Math.max(d("WATimeUtils").DAY_SECONDS-(a-c),0),f=function(){return y()},d("WALogger").DEV(k(),e).tags("automated-device-verification")):d("WALogger").DEV(j()).tags("automated-device-verification");u=self.setTimeout(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield f()}catch(a){d("WALogger").ERROR(i()).tags("automated-device-verification")}u=null;var a=d("WATimeUtils").unixTimeWithoutClockSkewCorrection();d("WAWebLastADVCheckTimeApi").setLastADVDeviceInfoCheckTime(a);d("WAWebApiTasksScheduledTime").updateTaskScheduledTime(t,d("WATimeUtils").castToUnixTime(a));v()}),e*1e3)});return w.apply(this,arguments)}var x;function y(){x==null&&(x=new r(new s()));return x.run(d("WATimeUtils").unixTimeWithoutClockSkewCorrection())}function z(a){return a.devices.length===1&&a.devices[0].id===d("WAJids").DEFAULT_DEVICE_ID}function A(a,b,c,d){if(a-c.timestamp>=b)return!0;return c.expectedTsUpdateTs!=null?a-c.expectedTsUpdateTs>=q&&c.expectedTsLastDeviceJobTs!==d:!1}function B(a,b,c){if(a-c.timestamp>=b)return!0;return c.expectedTs!=null?c.expectedTs>c.timestamp:!1}g.AdvToSystemBridgeImpl=s;g.scheduleAdvDeviceInfoCheck=v;g.runAdvDeviceInfoCheck=y}),98);
__d("WAWebAltDeviceLinkingHandleNotification",["WACryptoUtils","WASmaxMdPrimaryHelloNotifyCompanionRPC","WASmaxMdRefreshCodeNotifyCompanionRPC","WASmaxOutMessageFallbackDeliverResponseBadStanza","WAWebAltDeviceLinkingApi","WAWebBackendApi","err"],(function(a,b,c,d,e,f,g){var h;function a(){return h}function b(a){var b=a.content;if(!Array.isArray(b)||!b.length)return d("WASmaxOutMessageFallbackDeliverResponseBadStanza").makeDeliverResponseBadStanza({ackError:487},a);b=b[0].attrs;if(b.stage==="primary_hello")return i(a);else if(b.stage==="refresh_code")return j(a);return d("WASmaxOutMessageFallbackDeliverResponseBadStanza").makeDeliverResponseBadStanza({ackError:487},a)}function i(a){a=d("WASmaxMdPrimaryHelloNotifyCompanionRPC").receivePrimaryHelloNotifyCompanionRPC(a);var b=a.parsedRequest;a=a.makePrimaryHelloNotifyCompanionResponseAck;if(!b){d("WAWebBackendApi").frontendFireAndForget("errorAltLinking",{});throw c("err")("alt pairing: could not parse primary hello")}try{h=d("WAWebAltDeviceLinkingApi").handlePrimaryHello(b);return a()}catch(a){(b=d("WAWebAltDeviceLinkingApi").getCurrentMarker())==null?void 0:b.addPoint("primary_hello_error");throw a}}function j(a){a=d("WASmaxMdRefreshCodeNotifyCompanionRPC").receiveRefreshCodeNotifyCompanionRPC(a);var b=a.parsedRequest;a=a.makeRefreshCodeNotifyCompanionResponseAck;if(!b)throw c("err")("alt pairing: could not parse refresh code");var e=d("WAWebAltDeviceLinkingApi").getCurrentRef();if(e!=null&&d("WACryptoUtils").uint8ArraysEqual(e,b.linkCodeCompanionRegLinkCodePairingRefElementValue))if(b.linkCodeCompanionRegForceManualRefresh==="true"){(e=d("WAWebAltDeviceLinkingApi").getCurrentMarker())==null?void 0:e.addPoint("receive_force_refresh_code");d("WAWebBackendApi").frontendFireAndForget("forceManualRefresh",{ref:b.linkCodeCompanionRegLinkCodePairingRefElementValue})}else{(e=d("WAWebAltDeviceLinkingApi").getCurrentMarker())==null?void 0:e.addPoint("receive_refresh_code");d("WAWebBackendApi").frontendFireAndForget("refreshAltLinkingCode",{ref:b.linkCodeCompanionRegLinkCodePairingRefElementValue})}return a()}g.getPrimaryHello=a;g.handleAltDeviceLinkingNotification=b}),98);
__d("WAWebBackfillLidOriginCtwa",["WAJobOrchestratorTypes","WALogger","WAWebOrchestratorNonPersistedJob","WAWebSchemaChat","WAWebUserPrefsIndexedDBStorage","WAWebUsernameTypes","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[lid] backfillLidOriginCtwa failed"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[lid] end backfillLidOriginCtwa"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[lid] backfillLidOriginCtwa with "," chats"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[lid] begin backfillLidOriginCtwa"]);k=function(){return a};return a}function a(){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get("WABackfillLidOriginCtwaComplete")===!0)return;d("WALogger").LOG(k());return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("backfillLidOriginCtwa",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebSchemaChat").getChatTable().all()).filter(function(a){var b=a.id;a=a.lidOriginType;return c("WAWebWid").isLid(b)&&a==null});a.length>0&&(yield d("WAWebSchemaChat").getChatTable().bulkCreateOrMerge(a.map(function(a){a=a.id;return{id:a,lidOriginType:d("WAWebUsernameTypes").LidOriginType.CTWA}})),d("WALogger").LOG(j(),a.length).sendLogs("backfill-lid-origin-nonempty",{sampling:0}));yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set("WABackfillLidOriginCtwaComplete",!0);d("WALogger").LOG(i())}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW}).waitUntilCompleted()["catch"](function(){d("WALogger").ERROR(h()).sendLogs("backfill-lid-origin-failed")})});return l.apply(this,arguments)}g.maybeBackfillLidOriginCtwa=a}),98);
__d("WAWebBlockingOfflineResumeManager",["WALogger","WAShiftTimer","WAWebApiPendingDeviceSync","WAWebBackendApi","WAWebBrokerGlobalAppState","WAWebChatThreadLogging","WAWebCmd","WAWebHandleMsgTypes.flow","WAWebJSHaltDetector","WAWebMessageQueue","WAWebOfflineResumeConst","WAWebOfflineResumeTypes.flow","WAWebOfflineResumeUtils","WAWebPageLoadLogging","WAWebSignalProtocolStore","WAWebUserPrefsGeneral","WAWebWamEnumWebcScenarioType","WAWebWamMemoryStat","WAWebWamOfflineResumeReporter","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] _onOfflineComplete: clearOfflineSnapShot done."]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] _onOfflineComplete: waitForOfflineMsgThread done, total decryption error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking]offline resume finished by timeout"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking]: offline session completed by timeout"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] "," received after offline completion marker. Refreshing window due to potential server issue."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] start handling offline stanza"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] Reject multiple offline preview ib during offline resume, delay ","."]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] Reject multiple offline preview ibs during offline resume, delay ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] Accept multiple offline preview ibs during offline resume, delay ","."]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] start handling offline stanza"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] restart client due to exceed the LIMIT, message: ",", receipt: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] Offline session is complete when receiving offline preview ib."]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] offline resume stage: "," -> ",""]);t=function(){return a};return a}var u;function a(){u==null&&(u=new v());return u}function e(){u=null}var v=function(){function a(){var a=this;this._offlineCompleteTimer=null;this._progressBarTimer=new(d("WAShiftTimer").ShiftTimer)(function(){d("WAWebCmd").Cmd.handleOfflineProgressUpdate(),a._progressBarTimer.onOrAfter(d("WAWebOfflineResumeConst").UI_UPDATE_TIME_MS)});this._chatsAndMsgsRestored=!1;this.resumeType=d("WAWebOfflineResumeTypes.flow").ResumeType.Blocking;this._initState()}var e=a.prototype;e._initState=function(){this.offlineMessagePreviewCounter=-1,this._decryptedMessageCount=0,this._decryptionErrorCount=0,this._finishedDownloading=!1,this._hasMessagesToDownload=null,this._status=d("WAWebOfflineResumeConst").ResumeStatus.INIT};e._setStatus=function(a){d("WALogger").LOG(t(),this._status,a),this._status=a};e.processOfflinePreview=function(a){d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflinePreviewT();if(this.isResumeFromRestartComplete())d("WALogger").LOG(s()),d("WAWebOfflineResumeUtils").exceedResumeWithOpenTabLimit(a.message,a.receipt)&&(d("WALogger").LOG(r(),a.message,a.receipt),d("WAWebOfflineResumeUtils").refreshWindow()),d("WAWebJSHaltDetector").jsHaltDetector.restartDetection(),this._setStatus(d("WAWebOfflineResumeConst").ResumeStatus.RESUME_WITH_OPEN_TAB),d("WAWebBackendApi").frontendFireAndForget("updateChatSortListener",{enable:!1}),self.setTimeout(function(){d("WAWebBackendApi").frontendFireAndForget("updateChatSortListener",{enable:!0})},7e3);else if(this._status===d("WAWebOfflineResumeConst").ResumeStatus.INIT)c("WAWebBrokerGlobalAppState").initOrUpdateTracking(d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.OFFLINE_RESUME),d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflineCount(a),this._hasMessagesToDownload=a.message>0,this._finishedDownloading=a.message===0,this.offlineMessagePreviewCounter=a.message,this._decryptedMessageCount=0,this._firstPreviewReceivedT=Date.now(),d("WAWebSignalProtocolStore").enableMemSignalStore(),d("WAWebCmd").Cmd.handleOfflineProgressUpdate(),d("WAWebJSHaltDetector").jsHaltDetector.restartDetection(),this._setStatus(d("WAWebOfflineResumeConst").ResumeStatus.RESUME_ON_RESTART),this._startOfflineCompleteTimer(a.message,a.receipt),this._progressBarTimer.onOrAfter(d("WAWebOfflineResumeConst").UI_UPDATE_TIME_MS),d("WAWebCmd").Cmd.readyForProcessOffline(),d("WALogger").LOG(q());else{var b=this._firstPreviewReceivedT;if(b!=null){b=Date.now()-b;b<d("WAWebOfflineResumeConst").OFFLINE_PREVIEW_PERIOD_MS?(d("WALogger").LOG(p(),b),this.offlineMessagePreviewCounter+=a.message,this._hasMessagesToDownload=this.offlineMessagePreviewCounter>0,this._finishedDownloading=this.offlineMessagePreviewCounter===0,d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflineCount(a),d("WAWebCmd").Cmd.handleOfflineProgressUpdate()):!c("gkx")("26258")?d("WALogger").ERROR(o(),b).sendLogs("offline-multiple-preview"):d("WALogger").LOG(n(),b)}this._refreshOfflineCompleteTimer()}};e.getOfflineDeliveryProgress=function(){if(this._finishedDownloading)return 100;else if(this.offlineMessagePreviewCounter===-1)return 0;else if(this.offlineMessagePreviewCounter===0)return 100;return Math.min(Math.ceil(100*this._decryptedMessageCount/this.offlineMessagePreviewCounter),100)};e.processOfflineSessionComplete=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,c=this;a=a;self.setTimeout(function(){d("WAWebBackendApi").frontendFireAndForget("updateChatSortListener",{enable:!0})},3e3);(b=this._offlineCompleteTimer)==null?void 0:b.cancel();this._offlineCompleteTimer=null;d("WAWebCmd").Cmd.readyForProcessOffline();d("WALogger").LOG(m());if(this._status===d("WAWebOfflineResumeConst").ResumeStatus.COMPLETE){d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logLastStanzaT();void d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.commit();return}else if(this._status===d("WAWebOfflineResumeConst").ResumeStatus.RESUME_WITH_OPEN_TAB){yield d("WAWebMessageQueue").waitForOnlineMessageQueue();yield d("WAWebApiPendingDeviceSync").doPendingDeviceSync();this._setStatus(d("WAWebOfflineResumeConst").ResumeStatus.COMPLETE);d("WAWebCmd").Cmd.offlineDeliveryEnd();return}this._hasMessagesToDownload=a>0;this._finishedDownloading=a===0;this._offlineStanzaCountAfterOfflineMarker=0;self.setTimeout(function(){c._offlineStanzaCountAfterOfflineMarker>d("WAWebOfflineResumeConst").OFFLINE_STANZA_COUNT_LIMIT&&(d("WALogger").WARN(l(),c._offlineStanzaCountAfterOfflineMarker),d("WAWebOfflineResumeUtils").refreshWindow())},d("WAWebOfflineResumeConst").OFFLINE_STANZA_COUNT_CHECK_TIMEOUT_MS);d("WAWebCmd").Cmd.handleOfflineProgressUpdate();this._setStatus(d("WAWebOfflineResumeConst").ResumeStatus.COMPLETE);return this._handleOfflineComplete()});function c(b){return a.apply(this,arguments)}return c}();e.isResumeFromRestartComplete=function(){return this._status!==d("WAWebOfflineResumeConst").ResumeStatus.RESUME_ON_RESTART&&this._status!==d("WAWebOfflineResumeConst").ResumeStatus.INIT};e.isResumeOnSocketDisconnectInProgress=function(){return this._status===d("WAWebOfflineResumeConst").ResumeStatus.RESUME_WITH_OPEN_TAB};e.isResumeFromRestartInProgress=function(){return this._status!==d("WAWebOfflineResumeConst").ResumeStatus.INIT&&!d("WAWebCmd").Cmd.isOfflineDeliveryEnd};e.isResumeComplete=function(){return this._status===d("WAWebOfflineResumeConst").ResumeStatus.COMPLETE};e.getHasMessagesToDownload=function(){return this._hasMessagesToDownload};e.getFinishedDownloading=function(){return this.getOfflineDeliveryProgress()===100};e.shouldUseOfflineResumeScreen=function(){return this.offlineMessagePreviewCounter>this._decryptedMessageCount};e.processDecryptResult=function(a){this._refreshOfflineCompleteTimer(),this._decryptedMessageCount+=1,a===d("WAWebHandleMsgTypes.flow").E2EProcessResult.RETRY&&(this._decryptionErrorCount+=1)};e.offlineStanzaReceivedAfterComplete=function(){this.isResumeFromRestartComplete()&&(this._offlineStanzaCountAfterOfflineMarker+=1)};e.newOfflineStanza=function(a,b){this._refreshOfflineCompleteTimer(),d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logAddOfflineSizeBytes(b),d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOldestStanzaTime(a)};e.getResumeUIProgressBarType=function(){return d("WAWebOfflineResumeTypes.flow").ResumeUIProgressBarType.None};e._refreshOfflineCompleteTimer=function(){this._offlineCompleteTimer&&this._offlineCompleteTimer.onOrAfter(d("WAWebOfflineResumeConst").OFFLINE_STANZA_TIMEOUT_MS)};e._startOfflineCompleteTimer=function(a,b){var c,e=this;(c=this._offlineCompleteTimer)==null?void 0:c.cancel();this._offlineCompleteTimer=new(d("WAShiftTimer").ShiftTimer)(function(){e._status!==d("WAWebOfflineResumeConst").ResumeStatus.COMPLETE&&(d("WALogger").LOG(k()),d("WALogger").ERROR(j()).sendLogs("blocking-offline-resume-timeout",{sampling:.01}),e.processOfflineSessionComplete(a+b),e._offlineCompleteTimer=null,d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logMissedOfflineComplete())});this._offlineCompleteTimer.onOrAfter(d("WAWebOfflineResumeConst").OFFLINE_STANZA_TIMEOUT_MS)};e._handleOfflineComplete=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;(a=d("WAWebPageLoadLogging")).startPageLoadQplMeasure("waitForOfflineMessageQueue");yield d("WAWebMessageQueue").waitForOfflineMessageQueue();a.endPageLoadQplMeasure("waitForOfflineMessageQueue");this._finishedDownloading=!0;d("WAWebCmd").Cmd.handleOfflineProgressUpdate();d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflineDecryptionErrorCount(this._decryptionErrorCount);d("WALogger").LOG(i(),this._decryptionErrorCount);this._decryptionErrorCount=0;a.startPageLoadQplMeasure("clearOfflineSnapShot");yield d("WAWebOfflineResumeUtils").clearOfflineSnapShot();a.endPageLoadQplMeasure("clearOfflineSnapShot");d("WALogger").LOG(h());d("WAWebSignalProtocolStore").enablePersistSignalStore();d("WAWebOfflineResumeUtils").runReceiptCleanUpLoop();d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logLastStanzaT();a.startPageLoadQplMeasure("loadMainScreen");yield d("WAWebOfflineResumeUtils").loadMainScreen({shouldUpdateReceipts:!0,shouldRestoreChatsAndMsgs:!this._chatsAndMsgsRestored});a.endPageLoadQplMeasure("loadMainScreen");d("WAWebCmd").Cmd.offlineDeliveryEnd();d("WAWebUserPrefsGeneral").setOfflinePushCount(0);d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.commit();d("WAWebWorkerSafeBackendApi").workerSafeFireAndForget("processAllOrphanPaymentNotifications");d("WAWebChatThreadLogging").uploadChatThreadLoggingEvents();c("WAWebBrokerGlobalAppState").initOrUpdateTracking(d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE);d("WAWebWamMemoryStat").setCurrentMemoryScenario(d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE);self.setTimeout(function(){d("WAWebApiPendingDeviceSync").doPendingDeviceSync()},d("WAWebOfflineResumeConst").OFFLINE_DEVICE_SYNC_DELAY)});function a(){return a.apply(this,arguments)}return a}();return a}();g.getOrCreateInstance=a;g.clearInstance=e;g.OfflineBlockingResumeStageManager=v}),98);
__d("WAWebBootstrapPremiumMessages",["Promise","WAWebMiscGatingUtils","WAWebMsgCollection","WAWebPremiumMessageCollection","WAWebPremiumMessageSchema","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){var h,i=250;function a(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!d("WAWebMiscGatingUtils").isRambutanEnabled())return(h||(h=b("Promise"))).resolve();var a=(yield d("WAWebPremiumMessageSchema").getPremiumMessageTable().all());d("WAWebPremiumMessageCollection").PremiumMessageCollection.initializeFromCache(a)});return j.apply(this,arguments)}function e(){if(!d("WAWebMiscGatingUtils").isRambutanEnabled())return;d("WAWebMsgCollection").MsgCollection.listenTo(d("WAWebMsgCollection").MsgCollection,"add",c("lodash").debounce(k,i,{leading:!0,trailing:!0}));d("WAWebPremiumMessageCollection").PremiumMessageCollection.listenTo(d("WAWebPremiumMessageCollection").PremiumMessageCollection,"add",function(a){return a.hydrateMessages()})}function k(){d("WAWebPremiumMessageCollection").PremiumMessageCollection.getModelsArray().forEach(function(a){a.hydrateMessages()})}g.restorePremiumMessages=a;g.bindPremiumMessageListeners=e}),98);
__d("WAWebCTWAParsePrivacy",["WALogger","WASmaxBizSettingsSyncPrivacySettingRPC"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseCTWAPrivacy: Could not parse RPC response"]);h=function(){return a};return a}function a(a){try{a=d("WASmaxBizSettingsSyncPrivacySettingRPC").receiveSyncPrivacySettingRPC(a.node());a=a.parsedRequest;a=(a=a.privacySmbDataSharingSettingMixin)==null?void 0:a.value;return a==null?null:{smbDataSharingSetting:a}}catch(a){d("WALogger").ERROR(h());return null}}g.parseCTWAPrivacy=a}),98);
__d("WAWebWamEnumPreferredLinkType",[],(function(a,b,c,d,e,f){a=Object.freeze({LOCAL:0,UNIVERSAL:1});f.PREFERRED_LINK_TYPE=a}),66);
__d("WAWebCtwaActionBannerUnderstandWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumPreferredLinkType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({CtwaActionBannerUnderstand:[3586,{bannerIdentifier:[1,a.TYPES.STRING],bannerLocale:[2,a.TYPES.STRING],clientLocale:[3,a.TYPES.STRING],hasLocalLink:[4,a.TYPES.BOOLEAN],hasUniversalLink:[5,a.TYPES.BOOLEAN],invalidLink:[6,a.TYPES.STRING],lwiFlowIdentifier:[7,a.TYPES.STRING],preferredLink:[8,d("WAWebWamEnumPreferredLinkType").PREFERRED_LINK_TYPE],validLocale:[9,a.TYPES.BOOLEAN],validNotification:[10,a.TYPES.BOOLEAN]},[1,1,1],"private",0]},{CtwaActionBannerUnderstand:[]});g.CtwaActionBannerUnderstandWamEvent=b}),98);
__d("WAWebCTWAParseSuggestion",["WALogger","WASmaxBizCtwaActionBannerSuggestionRPC","WATimeUtils","WAWebApiParse","WAWebBizGatingUtils","WAWebCtwaActionBannerUnderstandWamEvent","WAWebL10N","WAWebUpdaterVersion"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseCTWASuggestion: invalid deep link (",", ",")"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseCTWASuggestion: manage ads not enabled (",")"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseCTWASuggestion: invalid link (",")"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseCTWASuggestion: app version too old (",")"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseCTWASuggestion: too many actions (",")"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose([""," (",")"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose([""," (",")"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseCTWASuggestion: locale mismatch (",")"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseCTWASuggestion: missing banner data (",")"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseCTWASuggestion: metric failed"]);q=function(){return a};return a}var r="recreate_ad",s="manage_ads",t="parseCTWASuggestion: missing action link";function u(a){if(!d("WAWebBizGatingUtils").adsActionBannersLoggingEnabled())return;var b=new(d("WAWebCtwaActionBannerUnderstandWamEvent").CtwaActionBannerUnderstandWamEvent)();b.bannerIdentifier=a.bannerIdentifier;b.validNotification=a.validNotification;a.clientLocale!=null&&(b.clientLocale=a.clientLocale);a.bannerLocale!=null&&(b.bannerLocale=a.bannerLocale);a.validLocale!=null&&(b.validLocale=a.validLocale);b.commitAndWaitForFlush()["catch"](function(a){d("WALogger").ERROR(q()).devConsole(a)})}function v(a){a=a.split("-");return a[1]}function a(a){a=d("WASmaxBizCtwaActionBannerSuggestionRPC").receiveBannerSuggestionRPC(a.node());a=a.parsedRequest;var b=a.ctwaSuggestionTargetEntityId,e=a.ctwaSuggestionBanner;a=a.t;var f=v(b);if(e==null){u({bannerIdentifier:b,validNotification:!1});d("WALogger").ERROR(p(),f).sendLogs("parseCTWASuggestion-missing-banner-data-"+f);return}if(e.configRevoked==="true")return{type:"revokedBanner",id:b};var g=e.contentLocale,q=c("WAWebL10N").getNormalizedLocale(),w=function(a){var c=a.validNotification;a=a.validLocale;u({bannerIdentifier:b,validNotification:c,clientLocale:q,bannerLocale:g,validLocale:a})};if(c("WAWebL10N").normalizeLocaleToWajsLocale(g)!==q){w({validNotification:!1,validLocale:!1});d("WALogger").WARN(o(),f);return}var x=e.configExpiresAt,y=e.contentHeadingElementValue,z=e.contentBodyElementValue,A=e.contentHighlightElementValue,B=e.configDisplay;e=e.nativeAction;e=e.filter(function(a){return a.platform==="web"});if(e.length===0){w({validNotification:!1,validLocale:!0});b.endsWith(r)||b.includes(s)?d("WALogger").ERROR(n(),t,f).sendLogs("parseCTWASuggestion-missing-action-link-${bannerType}"):d("WALogger").WARN(m(),t,f);return}else if(e.length>1){w({validNotification:!1,validLocale:!0});d("WALogger").ERROR(l(),f).sendLogs("parseCTWASuggestion-too-many-actions-${bannerType}");return}e=e[0];var C=e.minAppVersion;C=new(d("WAWebUpdaterVersion").Version)(C);var D=new(d("WAWebUpdaterVersion").Version)(d("WAWebUpdaterVersion").SANITIZED_VERSION_STR);if(D.lt(C)){d("WALogger").WARN(k(),f);return}D=e.localLink;C=d("WAWebApiParse").parseAPICmd(D);if(C.resultType==="INVALID"){if(!D.startsWith("https://")){w({validNotification:!1,validLocale:!0});d("WALogger").ERROR(j(),f).sendLogs("parseCTWASuggestion-invalid-link-${bannerType}");return}}else if(C.resultType==="MANAGE_ADS"){if(!d("WAWebBizGatingUtils").adsActionManageAdsBannerEnabled()){w({validNotification:!1,validLocale:!0});d("WALogger").WARN(i(),f);return}}else{C.resultType;w({validNotification:!1,validLocale:!0});d("WALogger").ERROR(h(),f,C.resultType).sendLogs("parseCTWASuggestion-invalid-deep-link-${bannerType}");return}w({validNotification:!0,validLocale:!0});return{type:"banner",id:b,expiresAt:d("WATimeUtils").castToUnixTime(x),heading:y,body:z,highlight:A,actionLink:D,display:B,ts:d("WATimeUtils").castToUnixTime(a)}}g.parseCTWASuggestion=a}),98);
__d("WAWebChatSocketPlatformDetails",["WALogger","WAVerifyChainCertificateWA6","WAWebABProps","WAWebUserPrefsInfoStore","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] processCertificate: failed to set cert chain: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] persisting cert chain finished"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] persisting cert chain start"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] processCertificate finished with success: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] processCertificate start"]);l=function(){return a};return a}function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.certificate;a=a.serverStatic;d("WALogger").LOG(l());b=d("WAVerifyChainCertificateWA6").verifyChainCertificateWA6(b,a);d("WALogger").LOG(k(),b.success);if(!b.success)throw c("err")("[comms] processCertificate error: "+b.error);if(d("WAWebABProps").getABPropConfigValue("web_optimized_resume_handshake_enabled")){a=b.value;b=a.intermediate;a=a.leaf;a&&b&&(d("WALogger").LOG(j()),void d("WAWebUserPrefsInfoStore").waNoiseInfo.setCertificateChain({intermediate:{key:b.key,notAfter:Number(b.notAfter),notBefore:Number(b.notBefore)},leaf:{key:a.key,notAfter:Number(a.notAfter),notBefore:Number(a.notBefore)}}).then(function(){d("WALogger").LOG(i())})["catch"](function(a){d("WALogger").ERROR(h(),a).sendLogs("handhshake-set-cert-chain")}))}});return m.apply(this,arguments)}g.verifyAndProcessCertificate=a}),98);
__d("WAWebClearDirtyBitsJob",["WADeprecatedSendIq","WADeprecatedWapParser","WALogger","WAWap","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["clearDirtyBits: failed with error"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["clearDirtyBits: success for type: ",""]);i=function(){return a};return a}var j=new(c("WADeprecatedWapParser"))("cleanDirtyReplyParser",function(a){a.assertAttr("type","result");return{}});function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)return;var b=a.map(function(a){return d("WAWap").wap("clean",{type:d("WAWap").CUSTOM_STRING(a.type),timestamp:d("WAWap").INT(a.timestamp)})});b=d("WAWap").wap("iq",{to:d("WAWap").S_WHATSAPP_NET,type:"set",xmlns:"urn:xmpp:whatsapp:dirty",id:d("WAWap").generateId()},b);try{yield d("WADeprecatedSendIq").deprecatedSendIq(b,j),d("WALogger").LOG(i(),a.map(function(a){return a.type}).join(","))}catch(a){d("WALogger").WARN(h()).devConsole(a)}});return k.apply(this,arguments)}g.clearDirtyBits=a}),98);
__d("WAWebClientPayload",["WABase64","WAByteArray","WAMd5","WAWebBuildConstants","WAWebClientPayloadReleaseChannel","WAWebMiscBrowserUtils","WAWebProtobufsCompanionReg.pb","WAWebProtobufsWa6.pb","WAWebSyncdMdSyncFieldstatMeta","WAWebUserPrefsInfoStore","WAWebUserPrefsMeUser","WAWebWamPlatform","asyncToGeneratorRuntime","encodeProtobuf","gkx","justknobx"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebUserPrefsMeUser").assertGetMe();a=babelHelpers["extends"]({},yield j(a),{username:parseInt(b.user,10),device:b.device!=null?b.device:0});return d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsWa6.pb").ClientPayloadSpec,a).readByteArray()});return h.apply(this,arguments)}function e(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=l(),f=(yield m());c=babelHelpers["extends"]({},yield j(c),{devicePairingData:{buildHash:e,deviceProps:f,eRegid:d("WAByteArray").intToBytes(4,a.registrationId),eKeytype:d("WAByteArray").intToBytes(1,5),eIdent:a.identityKeyPair.pubKey,eSkeyId:d("WAByteArray").intToBytes(3,b.keyId),eSkeyVal:b.keyPair.pubKey,eSkeySig:b.signature}});return d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsWa6.pb").ClientPayloadSpec,c).readByteArray()});return i.apply(this,arguments)}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;return{passive:(b=a==null?void 0:a.passive)!=null?b:!1,pull:(b=a==null?void 0:a.pull)!=null?b:!1,connectType:d("WAWebProtobufsWa6.pb").ClientPayload$ConnectType.WIFI_UNKNOWN,connectReason:d("WAWebProtobufsWa6.pb").ClientPayload$ConnectReason.USER_ACTIVATED,userAgent:yield o(),webInfo:{webSubPlatform:r()}}});return k.apply(this,arguments)}function l(){var a=d("WABase64").decodeB64(c("WAMd5")(d("WAWebBuildConstants").VERSION_BASE));a=new Uint8Array(a);return a}function m(){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=c("WAWebMiscBrowserUtils").info(),b;if(a.version&&a.version!==""){var e=a.version.split(".");e.length>0&&a.version&&/^[0-9\.]+$/.test(a.version)&&(b={primary:parseInt(e[0],10),secondary:e.length>1?parseInt(e[1],10):void 0,tertiary:e.length>2?parseInt(e[2],10):void 0})}e={inlineInitialPayloadInE2EeMsg:!0,supportBotUserAgentChatHistory:!0,supportCagReactionsAndPolls:!0,supportRecentSyncChunkMessageCountTuning:!0,supportHostedGroupMsg:!0,supportBizHostedMsg:!0,supportFbidBotChatHistory:c("justknobx")._("822"),supportMessageAssociation:c("gkx")("5434")};var f=(yield d("WAWebSyncdMdSyncFieldstatMeta").MdSyncFieldStatsMeta.getStorageEstimation());f.mdStorageQuotaBytes!==d("WAWebSyncdMdSyncFieldstatMeta").STORAGE_QUOTA_UNAVAILABLE&&(e=babelHelpers["extends"]({},e,{storageQuotaMb:Math.trunc(f.mdStorageQuotaBytes/1024/1024)}));f={os:a.os,version:b,platformType:q(a.name),requireFullSync:!1,historySyncConfig:e};a=d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsCompanionReg.pb").DevicePropsSpec,f).readByteArray();return a});return n.apply(this,arguments)}function o(){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebUserPrefsInfoStore").deviceInfo.get());return{appVersion:{primary:Number(d("WAWebBuildConstants").VERSION_PRIMARY),secondary:Number(d("WAWebBuildConstants").VERSION_SECONDARY),tertiary:Number(d("WAWebBuildConstants").VERSION_TERTIARY)},platform:d("WAWebProtobufsWa6.pb").ClientPayload$UserAgent$Platform.WEB,releaseChannel:yield d("WAWebClientPayloadReleaseChannel").getReleaseChannel(),mcc:a.mcc,mnc:a.mnc,osVersion:a.osVersion,manufacturer:a.manufacturer,device:a.device,osBuildNumber:a.osBuild,localeLanguageIso6391:a.lg,localeCountryIso31661Alpha2:a.lc}});return p.apply(this,arguments)}function q(a){switch(a){case"Chrome":return d("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.CHROME;case"Firefox":return d("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.FIREFOX;case"IE":return d("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.IE;case"Opera":return d("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.OPERA;case"Safari":return d("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.SAFARI;case"Edge":return d("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.EDGE;case"electron":case"Desktop":return d("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.DESKTOP;case"ipad":case"iPad":return d("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.IPAD;case"tablet":case"Android tablet":return d("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.ANDROID_TABLET;case"Ohana":return d("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.OHANA;case"Aloha":return d("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.ALOHA;case"Catalina":return d("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.CATALINA;default:return d("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.UNKNOWN}}function r(){switch(d("WAWebWamPlatform").getWamPlatform()){case"WEB":case"PWA":return d("WAWebProtobufsWa6.pb").ClientPayload$WebInfo$WebSubPlatform.WEB_BROWSER;case"DARWIN":case"DARWIN_BETA":return d("WAWebProtobufsWa6.pb").ClientPayload$WebInfo$WebSubPlatform.DARWIN;case"MACSTORE":return d("WAWebProtobufsWa6.pb").ClientPayload$WebInfo$WebSubPlatform.APP_STORE;default:return void 0}}g.getClientPayloadForLogin=a;g.getClientPayloadForRegistration=e}),98);
__d("WAWebCommsProcessAck",["WALogger","WAWebActiveMessageRanges","WAWebDBMessageUtils","WAWebMsgCollection","WAWebMsgKey","WAWebMsgType","WAWebSchemaMessage","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["processAckForOutgoingMessage: failed to update in storage"]);h=function(){return a};return a}function a(a){var b=a.attrs,c=b.id,e=b.from;b=b.t;if(a.attrs["class"]==="message"){e=d("WAWebWidFactory").createWid(String(e));a=i(a);l(String(c),e,parseInt(b,10),a);k(a,String(c),e)}}function i(a){var b;a=a.content;if(!Array.isArray(a)||((b=a[0])==null?void 0:b.tag)!=="rcat")return null;a=(b=a[0])==null?void 0:b.content;return Array.isArray(a)?null:a}function j(a,b){return b.isGroup()?new(c("WAWebMsgKey"))({fromMe:!0,remote:b,id:a,participant:d("WAWebUserPrefsMeUser").getMeUser()}):new(c("WAWebMsgKey"))({fromMe:!0,remote:b,id:a})}function k(a,b,c){if(a==null)return;b=d("WAWebMsgCollection").MsgCollection.get(j(b,c));b!=null&&(b.rcat=a)}function l(a,b,c,d){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){a=j(a,b);var f=String(a);try{var g=(yield d("WAWebSchemaMessage").getMessageTable().get(f));if((g==null?void 0:g.type)===d("WAWebMsgType").MSG_TYPE.REACTION)return;g=d("WAWebDBMessageUtils").MessagePropertyType.cast(g==null?void 0:g.messageRangeIndex.split("_")[1]);d("WAWebSchemaMessage").getMessageTable().merge(f,{messageRangeIndex:d("WAWebDBMessageUtils").craftMessageRangeIndex(b.toString(),!1,g===d("WAWebDBMessageUtils").MessagePropertyType.SystemMessage,c),rcat:e})}catch(a){d("WALogger").ERROR(h()).verbose().devConsole(a).sendLogs("message processAckForOutgoingMessage failed");throw a}d("WAWebActiveMessageRanges").checkAndRemoveActiveMessageRanges(a,c)});return m.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebPassiveModeManager",["Promise","WAAbortError","WALogger","WAPromiseRaceAbort","WAResolvable","WASendPassiveModeProtocol","WAWebCmd","WAWebHandleOfflineAbProps","WAWebPageLoadLogging","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebWamOfflineResumeReporter"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: setPassiveModeTimeout: config timeout to be ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: send passive active iq"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: _endPassiveMode"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: executePassiveTasks: passive mode end with timeout"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: executePassiveTasks: done"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: executePassiveTasks: end with error ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: executePassiveTasks: abort by disconnect, skip send active"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: executePassiveTasks: complete all tasks"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: executePassiveTasks: failed for single task with ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: executePassiveTasks: start to execute "," passive tasks"]);r=function(){return a};return a}function a(){var b=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: enable debug passive mode"]);a=function(){return b};return b}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: register passive task"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: reset status"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: processing tasks finished: ",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: "," current tasks"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: trying to abort passive mode because of disconnect"]);w=function(){return a};return a}var x=6e4;e=function(){function a(){var a=this;this._disconnectAbortController=new AbortController();this._passiveEndPromise=new(d("WAResolvable").Resolvable)();this._debugPassiveModeEnabled=!1;this._passiveTasks=[];this._passiveModeTimeout=x;d("WAWebCmd").Cmd.on("socket_stream_disconnected",function(){var b;d("WALogger").LOG(w());d("WALogger").LOG(v(),a._passiveTasks.length);d("WALogger").LOG(u(),a._passiveEndPromise.resolveWasCalled());(b=a._disconnectAbortController)==null?void 0:b.abort();a.resetState()})}var e=a.prototype;e.resetState=function(){d("WALogger").LOG(t()),this._passiveTasks=[],this._passiveTimeoutTimer&&(self.clearTimeout(this._passiveTimeoutTimer),this._passiveTimeoutTimer=null),this._debugPassiveModeEnabled=!1,this._passiveEndPromise.resolveWasCalled()||this._passiveEndPromise.resolve(),this._passiveEndPromise=new(d("WAResolvable").Resolvable)(),this._disconnectAbortController=new AbortController()};e.registerPassiveTask=function(a){d("WALogger").LOG(s()),this._passiveTasks.push(a)};e.enableDebugPassiveMode=function(){};e.executePassiveTasks=function(){var a=this;if(!this.shouldConnectAsPassiveMode()){this._passiveEndPromise.resolve();return}d("WAWebPageLoadLogging").startPageLoadQplMeasure("passive_tasks");d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"PassiveTasks_start");d("WALogger").LOG(r(),this._passiveTasks.length);void c("WAPromiseRaceAbort")((h||(h=b("Promise"))).all(this._passiveTasks.map(function(b){return b(a._disconnectAbortController.signal)["catch"](function(a){if(a.name===d("WAAbortError").ABORT_ERROR)throw a;d("WALogger").ERROR(q(),a)})})),this._disconnectAbortController.signal).then(function(){d("WALogger").LOG(p()),void a._endPassiveMode()})["catch"](d("WAAbortError").catchAbort(function(){d("WALogger").LOG(o()),a._passiveEndPromise.resolve()}))["catch"](function(b){d("WALogger").ERROR(n(),b),void a._endPassiveMode()})["finally"](function(){d("WAWebPageLoadLogging").endPageLoadQplMeasure("passive_tasks"),d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"PassiveTasks_end"),d("WALogger").LOG(m()),a.resetState()});this._passiveTimeoutTimer=self.setTimeout(function(){var b=d("WALogger").ERROR(l());d("WAWebHandleOfflineAbProps").isNonBlockingOfflineResumeExpEnabled()&&(b=b.tags("offline-resume-experimental"));b.sendLogs("passive-timeout");void a._endPassiveMode();a.resetState()},this._passiveModeTimeout)};e._endPassiveMode=function(){d("WALogger").LOG(k()),this._passiveEndPromise.resolve(),d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflinePassiveT(),this._debugPassiveModeEnabled||(d("WALogger").LOG(j()),void d("WASendPassiveModeProtocol").sendPassiveModeProtocol("active"))};e.waitForPassiveTaskEnd=function(){return this._passiveEndPromise.promise};e.shouldConnectAsPassiveMode=function(){return this._debugPassiveModeEnabled||this._passiveTasks.length>0};e.setPassiveModeTimeout=function(a){d("WALogger").LOG(i(),a),this._passiveModeTimeout=a};return a}();f=new e();g.PassiveTaskManager=f}),98);
__d("WAWebUploadPrekeysForRegTask",["Promise","WAComms","WADeprecatedSendIq","WALogger","WAWap","WAWebConstantsDeprecated","WAWebServerPropsModel","WAWebSignalKeyApi","WAWebSignalStoreApi","WAWebSignalUtilsApi","WAWebUploadPreKeysJob","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: disconnected, unclear if on server: "," (count: ",", size: ","b)"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: unrecognized error "," (count: ",", size: ","b)"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: uploaded invalid keys (count: ",", size: ","b)"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: server requested backoff "," (count: ",", size: ","b)"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: "," keys uploaded, raw stanza size: ","b"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["PrekeyUploadForRegistrationTask: start key upload"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["PrekeyUploadForRegistrationTask: successfully generated "," keys"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["PrekeyUploadForRegistrationTask: start key generation"]);p=function(){return a};return a}var q=function(){function a(){}var e=a.prototype;e.startKeyGenerationStage=function(){this.$1||(this.$1=this.$3());return this.$1};e.startKeyUploadStage=function(){this.$2||(this.$2=this.$4());return this.$2};e.$3=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WALogger").LOG(p());var a=d("WAWebServerPropsModel").ServerProps.maxKeys,e=(yield (h||(h=b("Promise"))).all([d("WAWebSignalStoreApi").waSignalStore.getRegistrationInfo(),d("WAWebSignalStoreApi").waSignalStore.getSignedPreKey()])),f=e[0];e=e[1];if(!f||!e)throw c("err")("No signal info is available");a=(yield d("WAWebSignalStoreApi").waSignalStore.getOrGenPreKeys(a,d("WAWebSignalKeyApi").generatePreKeyPair));d("WALogger").LOG(o(),a.length);return{regInfo:f,signedPreKey:e,prekeys:a}});function e(){return a.apply(this,arguments)}return e}();e.$4=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this.$1||this.startKeyGenerationStage();a=(yield a);var b=a.regInfo,e=a.signedPreKey;a=a.prekeys;d("WALogger").LOG(n());var f=a.length;if(f===0)throw c("err")("No preKey is available");var g=a[a.length-1].keyId,h=b.registrationId;b=b.identityKeyPair;h=d("WAWap").wap("iq",{id:d("WAWap").generateId(),xmlns:"encrypt",type:"set",to:d("WAWap").S_WHATSAPP_NET},d("WAWap").wap("registration",null,d("WAWap").BIG_ENDIAN_CONTENT(h)),d("WAWap").wap("type",null,c("WAWebConstantsDeprecated").KEY_BUNDLE_TYPE),d("WAWap").wap("identity",null,b.pubKey),d("WAWap").wap("list",null,a.map(d("WAWebSignalUtilsApi").xmppPreKey)),d("WAWebSignalUtilsApi").xmppSignedPreKey(e));try{yield d("WAComms").waitForConnection();yield d("WAWebSignalStoreApi").waSignalStore.markKeyAsUploaded(g);b=(yield d("WADeprecatedSendIq").deprecatedSendIqWithoutRetry(h,d("WAWebUploadPreKeysJob").uploadPreKeyResParser));if(b.success){d("WAWebSignalStoreApi").waSignalStore.setServerHasPreKeys(!0);d("WALogger").LOG(m(),a.length,h.toString().length);return{success:!0}}e=b.errorCode;e>=500?d("WALogger").WARN(l(),e,f,h.toString().length):e===406?d("WALogger").WARN(k(),f,h.toString().length):d("WALogger").WARN(j(),e,f,h.toString().length);return{errorCode:b.errorCode,errorText:b.errorText}}catch(a){d("WALogger").WARN(i(),a,f,h.toString().length);return}});function e(){return a.apply(this,arguments)}return e}();return a}();function a(){return new q()}g["default"]=a}),98);
__d("WAWebWamEnumMdLinkDeviceCompanionStage",[],(function(a,b,c,d,e,f){a=Object.freeze({PAIR_SUCCESS_RECEIVED:1,PAIR_DEVICE_SIGN_SENT:2,FIRST_CONNECT:3,UPLOAD_PREKEYS:4,COMPLETE:5,GENERATE_PREKEYS:6,SENT_PREKEYS:7});f.MD_LINK_DEVICE_COMPANION_STAGE=a}),66);
__d("WAWebMdLinkDeviceCompanionWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMdLinkDeviceCompanionStage"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MdLinkDeviceCompanion:[2576,{mdCompanionRefHash:[10,a.TYPES.STRING],mdDurationS:[8,a.TYPES.INTEGER],mdLinkDeviceCompanionErrorCode:[6,a.TYPES.INTEGER],mdLinkDeviceCompanionStage:[4,d("WAWebWamEnumMdLinkDeviceCompanionStage").MD_LINK_DEVICE_COMPANION_STAGE],mdLinkDeviceExperienceId:[11,a.TYPES.INTEGER],mdRegAttemptId:[9,a.TYPES.STRING],mdSessionId:[1,a.TYPES.STRING],mdTimestampS:[7,a.TYPES.INTEGER],mdWasUpgraded:[5,a.TYPES.BOOLEAN]},[1,1,1],"regular"]},{MdLinkDeviceCompanion:[]});g.MdLinkDeviceCompanionWamEvent=b}),98);
__d("WAWebWamDeviceLinkReporter",["WABase64","WABinary","WACryptoSha256","WAResolvable","WATimeUtils","WAWebLinkDeviceExperience","WAWebMdLinkDeviceCompanionWamEvent","WAWebWamEnumMdLinkDeviceCompanionStage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=null,i=null,j=null,k=null;function a(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){h=new(d("WAWebMdLinkDeviceCompanionWamEvent").MdLinkDeviceCompanionWamEvent)();a=(yield n(a,b));i={regStartTime:c,sessionId:a}});return l.apply(this,arguments)}function c(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;if(!h)return;yield (b=k)==null?void 0:b.promise;k=new(d("WAResolvable").Resolvable)();j=a;yield p()});return m.apply(this,arguments)}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=new(d("WABinary").Binary)();c.writeBuffer(a);c.write("_".charCodeAt(0));c.writeBuffer(b);a=c.readByteArray();b=(yield d("WACryptoSha256").sha256(a));return d("WABase64").encodeB64(b)});return o.apply(this,arguments)}function p(a){if(!h||!i)return;var b=i,c=d("WATimeUtils").unixTimeWithoutClockSkewCorrection()-b.regStartTime;if(j==null)return;h=new(d("WAWebMdLinkDeviceCompanionWamEvent").MdLinkDeviceCompanionWamEvent)({mdDurationS:c,mdSessionId:b.sessionId,mdTimestampS:b.regStartTime,mdLinkDeviceCompanionErrorCode:a==null?0:a,mdLinkDeviceCompanionStage:j,mdLinkDeviceExperienceId:d("WAWebLinkDeviceExperience").getWebCompanionLinkDeviceExperienceId()});c=h;c.commitAndWaitForFlush(!0);(b=k)==null?void 0:b.resolve();(a!=null||c.mdLinkDeviceCompanionStage===d("WAWebWamEnumMdLinkDeviceCompanionStage").MD_LINK_DEVICE_COMPANION_STAGE.COMPLETE)&&(h=null,i=null,j=null)}g.initDeviceLinkEvent=a;g.setDeviceLinkPairStage=c;g.commitDeviceLinkEvent=p}),98);
__d("WAWebRegisterPassiveTasks",["WAAbortError","WACustomError","WALogger","WAPromiseLoop","WAPromiseTimeout","WAWebABPropsLocalStorage","WAWebABPropsWamGlobals","WAWebAbPropsSyncJob","WAWebClearDanglingReceipts","WAWebGetMessageCache","WAWebHandleOfflineAbProps","WAWebMessagingGatingUtils","WAWebOnlineDanglingReceipts","WAWebPassiveModeManager","WAWebSchemaDanglingReceipt","WAWebSignalStoreApi","WAWebUploadPrekeysForRegTask","WAWebUserPrefsGeneral","WAWebWamDeviceLinkReporter","WAWebWamEnumMdLinkDeviceCompanionStage","asyncToGeneratorRuntime","cr:10195"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[passive] flush message cache failed: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[passive] flush message cache: timeout"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[passive] flush message cache: done"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[passive] flush message cache: stop after "," attempts"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[passive] flush message cache: size: ",", queue size: ",", generation: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[passive] flush message cache"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[passive] flush message cache: skip"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[passive] sending dangling receipts failed: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[passive] sending dangling receipts: done"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[passive] sending dangling receipts"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while sending online dangling receipts, ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[passive] sending online dangling receipts complete"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[passive] start sending online dangling receipts"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while sync ab props prekeys, ",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while uploading prekeys, ",""]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["[passive] key upload complete"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["[passive] start key upload"]);x=function(){return a};return a}var y=4,z=60*1e3;function a(){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebSignalStoreApi").waSignalStore.getServerHasPreKeys());if(!a){yield d("WAWebWamDeviceLinkReporter").setDeviceLinkPairStage(d("WAWebWamEnumMdLinkDeviceCompanionStage").MD_LINK_DEVICE_COMPANION_STAGE.UPLOAD_PREKEYS);var e=c("WAWebUploadPrekeysForRegTask")();void e.startKeyGenerationStage();d("WAWebPassiveModeManager").PassiveTaskManager.registerPassiveTask(function(a){d("WALogger").LOG(x());return e.startKeyUploadStage().then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WALogger").LOG(w()),yield d("WAWebWamDeviceLinkReporter").setDeviceLinkPairStage(d("WAWebWamEnumMdLinkDeviceCompanionStage").MD_LINK_DEVICE_COMPANION_STAGE.COMPLETE),yield d("WAWebWamDeviceLinkReporter").commitDeviceLinkEvent()}))["catch"](function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").ERROR(v(),a).verbose().devConsole(a).sendLogs("error while uploading prekeys"),yield d("WAWebWamDeviceLinkReporter").commitDeviceLinkEvent(-1)});return function(b){return a.apply(this,arguments)}}())})}(!d("WAWebABPropsLocalStorage").isABPropsAfterFirstSync()||(yield d("WAWebUserPrefsGeneral").getWhatsAppWebExternalBetaDirtyBitIdb()))&&(yield d("WAWebPassiveModeManager").PassiveTaskManager.registerPassiveTask(function(a){return d("WAWebAbPropsSyncJob").syncABPropsTask()["catch"](function(a){d("WALogger").WARN(u(),a).verbose()})}),void d("WAWebUserPrefsGeneral").setWhatsAppWebExternalBetaDirtyBitIdb(!1),d("WAWebABPropsWamGlobals").setAbPropDependingGlobalWamAttributes())});return A.apply(this,arguments)}function e(){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WAWebOnlineDanglingReceipts").hasOnlineDanglingReceipts()&&d("WAWebPassiveModeManager").PassiveTaskManager.registerPassiveTask(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{d("WALogger").LOG(t()),yield d("WAWebOnlineDanglingReceipts").sendAndClearOnlineDanglingReceipts(a),d("WALogger").LOG(s())}catch(a){d("WALogger").ERROR(r(),a).verbose().devConsole(a).sendLogs("send-online-dangling-receipts-failed")}});return function(b){return a.apply(this,arguments)}}());var a=(yield d("WAWebSchemaDanglingReceipt").getTable().count())>0,c=!1;d("WAWebMessagingGatingUtils").isFlushMessageCacheBeforeSendingPreacksEnabled()&&(c=d("WAWebGetMessageCache").getMessageCache().size()>0||d("WAWebGetMessageCache").getMessageCache().checkpointQueue.size()>0);(a||c)&&d("WAWebPassiveModeManager").PassiveTaskManager.registerPassiveTask(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){if(a)try{d("WALogger").LOG(q()),yield d("WAWebClearDanglingReceipts").sendAndClearDanglingReceipts(b),d("WALogger").LOG(p())}catch(a){if(a.name===d("WAAbortError").ABORT_ERROR)throw a;d("WALogger").ERROR(o(),a).verbose().devConsole(a).sendLogs("send-and-clear-dangling-receipts-failed")}c&&(yield D())});return function(a){return e.apply(this,arguments)}}())});return B.apply(this,arguments)}var C=null;function D(){return E.apply(this,arguments)}function E(){E=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(C){d("WALogger").LOG(n());return C}try{d("WALogger").LOG(m());var a=d("WAPromiseLoop").promiseLoop(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){d("WALogger").LOG(l(),d("WAWebGetMessageCache").getMessageCache().size(),d("WAWebGetMessageCache").getMessageCache().checkpointQueue.size(),c),d("WAWebGetMessageCache").getMessageCache().size()>0&&d("WAWebGetMessageCache").getMessageCache().createSnapshot(),yield d("WAWebGetMessageCache").getMessageCache().checkpointQueue.wait(),d("WAWebGetMessageCache").getMessageCache().size()===0&&d("WAWebGetMessageCache").getMessageCache().checkpointQueue.size()===0?a():c+1>=y&&(d("WALogger").WARN(k(),y),a())});return function(b,c,d){return a.apply(this,arguments)}}());C=d("WAPromiseTimeout").promiseTimeout(a,z);yield C;d("WALogger").LOG(j())}catch(b){if(b instanceof d("WACustomError").TimeoutError){a=d("WALogger").ERROR(i());d("WAWebHandleOfflineAbProps").isNonBlockingOfflineResumeExpEnabled()&&(a=a.tags("offline-resume-experimental"));a.sendLogs("passive-flush-message-cache-timeout",{sampling:.01})}else d("WALogger").ERROR(h(),b).verbose().devConsole(b).sendLogs("passive-flush-message-cache-failed",{sampling:.01})}finally{C=null}});return E.apply(this,arguments)}g.registerPassiveTaskForStartUp=a;g.registerPassiveTasksForConnect=e}),98);
__d("WAWebGetClientPayloadForLogin",["WALogger","WAWebClientPayload","WAWebPassiveModeManager","WAWebRegisterPassiveTasks","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] getClientPayloadForLogin generated payload in ","ms"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] getClientPayloadForLogin registered passive tasks in ","ms"]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a||{passive:!1,pull:!0};var b=self.performance.now();yield d("WAWebRegisterPassiveTasks").registerPassiveTasksForConnect();d("WALogger").LOG(i(),Math.ceil(self.performance.now()-b)).tags("launch-socket-chat");a.passive=d("WAWebPassiveModeManager").PassiveTaskManager.shouldConnectAsPassiveMode();b=self.performance.now();a=(yield d("WAWebClientPayload").getClientPayloadForLogin(a));d("WALogger").LOG(h(),Math.ceil(self.performance.now()-b)).tags("launch-socket-chat");return a});return j.apply(this,arguments)}g.getClientPayloadForLogin=a}),98);
__d("WAWebGetClientPayloadForRegistration",["Promise","WALogger","WAWebClientPayload","WAWebSignalStoreApi","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] getClientPayloadForRegistration generated payload in ","ms"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] getClientPayloadForRegistration fetched signalInfo in ","ms"]);j=function(){return a};return a}function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=self.performance.now(),f=(yield (h||(h=b("Promise"))).all([d("WAWebSignalStoreApi").waSignalStore.getRegistrationInfo(),d("WAWebSignalStoreApi").waSignalStore.getSignedPreKey()])),g=f[0];f=f[1];d("WALogger").LOG(j(),Math.ceil(self.performance.now()-e)).tags("launch-socket-chat");if(!f||!g)throw c("err")("Invalid signal credentials");e=self.performance.now();g=(yield d("WAWebClientPayload").getClientPayloadForRegistration(g,f,a));d("WALogger").LOG(i(),Math.ceil(self.performance.now()-e)).tags("launch-socket-chat");return g});return k.apply(this,arguments)}g.getClientPayloadForRegistration=a}),98);
__d("WAWebEventsWaitForOnline",["WAPromiseDelays","WAWebEventsWaitForEvent","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=100;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield c("WAWebEventsWaitForEvent")(self,"online",void 0,a);return d("WAPromiseDelays").delayMs(h,a)});return i.apply(this,arguments)}g.waitForOnlineNaive=a}),98);
__d("WAWebWatchdog",["WALogger","WAShiftTimer","WAWebBaseModel"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Watchdog timed-out without handler!"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["forced non-running watchdog!"]);i=function(){return a};return a}b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.failGeneration=d("WAWebBaseModel").session(0),c.ts=d("WAWebBaseModel").session(),c.waitDuration=d("WAWebBaseModel").session(0),c.prevWaitDuration=d("WAWebBaseModel").session(0),c.jitter=d("WAWebBaseModel").session(0),c.shiftTimer=d("WAWebBaseModel").session(),c.waitAlgorithm=d("WAWebBaseModel").session(),c.onActivated=d("WAWebBaseModel").session(),c.onDeactivated=d("WAWebBaseModel").session(),c.onFed=d("WAWebBaseModel").session(),c.onTimeout=d("WAWebBaseModel").session(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.initialize=function(){var a=this;this.shiftTimer=new(d("WAShiftTimer").ShiftTimer)(function(){return j.call(a)})};c.activate=function(){this.shiftTimer.isScheduled()||(this._run(!0),this.onActivated&&this.onActivated(this))};c.deactivate=function(){this.shiftTimer.isScheduled()&&(this.shiftTimer.cancel(),this.onDeactivated&&this.onDeactivated(this))};c.feed=function(){if(!this.shiftTimer.isScheduled())return;this._run(!0);this.onFed&&this.onFed(this)};c.forceTimeout=function(a){!this.shiftTimer.isScheduled()?d("WALogger").WARN(i()):a!=null&&a!==0?(this.shiftTimer.onOrBefore(a),this.ts=this.shiftTimer.ts):this.shiftTimer.forceRunNow()};c.poke=function(){this.forceTimeout.apply(this,arguments)};c.resetGeneration=function(){this.failGeneration=0};c._run=function(a){a&&this.resetGeneration();a=this.waitAlgorithm(this);var b=this.jitter*Math.random()*a;this.shiftTimer.debounce(a+b);this.set({ts:this.shiftTimer.ts,waitDuration:a,prevWaitDuration:this.waitDuration})};return b}(d("WAWebBaseModel").BaseModel);c=d("WAWebBaseModel").defineModel(b);function j(){var a=this.onTimeout;if(!a){d("WALogger").WARN(h()).sendLogs("watchdog-no-handler");return}this.failGeneration++;a(this)&&this._run(!1)}function a(a,b,c){if(typeof c==="number"){var d=c;return function(c){switch(c.failGeneration){case 0:return Math.min(d,b);case 1:return Math.min(d,a+b);default:return Math.min(d,c.waitDuration+c.prevWaitDuration)}}}return function(c){switch(c.failGeneration){case 0:return b;case 1:return a+b;default:return c.waitDuration+c.prevWaitDuration}}}g.Watchdog=c;g.fibonacci=a}),98);
__d("WAWebSocketOpenerMd",["Promise","WAAbortError","WACustomError","WALogger","WAPromiseAny","WAPromiseDelays","WARaceSignalLegacyPromise","WAWebABProps","WAWebBaseJSHaltDetector","WAWebBaseModel","WAWebDeprecatedTightPromise","WAWebEventsWaitForBbEvent","WAWebEventsWaitForOnline","WAWebJSHaltDetector","WAWebNetworkStatus","WAWebNoop","WAWebStreamModel","WAWebWatchdog","WAWebWatchedSocketMd","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["js halt longer than "," ms detected, resetting watchdog fail generation"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] SocketOpenerMD:offline... heuristic poll"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] SocketOpenerMD:offline... quick poll"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] SocketOpenerMD:offline... wait for navigator"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] SocketOpenerMD:offlineController activating"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] SocketOpenerMD:onlineController activating"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] opened web socket"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] attemptOpen called while not active!"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["SocketOpenerMD deadly error! ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] SocketOpenerMD closing socket opener"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] SocketOpenerMD set to socket ",""]);s=function(){return a};return a}var t=c("gkx")("26258")?"wss://web.whatsapp.com/ws/chat":"wss://dev-web.whatsapp.com/ws/chat";c("gkx")("26258")?"wss://web-fallback.whatsapp.com/ws/chat":"wss://dev-web-fallback.whatsapp.com/ws/chat";var u=["wss://web.whatsapp.com/ws/chat","wss://web.whatsapp.com:5222/ws/chat"],v=3e5,w=6e3,x=2,y=.2,z=180*1e3,A=d("WAWebWatchdog").fibonacci(8e3,4e3,3e5);a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.active=d("WAWebBaseModel").prop(!0),c.socket=d("WAWebBaseModel").prop(),c.signal=d("WAWebBaseModel").prop(),c.sockets=d("WAWebBaseModel").prop(),c.pendingSocketPromiseCount=d("WAWebBaseModel").prop(0),c.attempts=d("WAWebBaseModel").prop(0),c.watchDogController=d("WAWebBaseModel").prop(),c.retryTimestamp=d("WAWebBaseModel").prop(),c.tsListener=d("WAWebBaseModel").prop(),c.onerror=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.initialize=function(){var a=this;this.sockets=[];new(h||(h=b("Promise")))(function(b,c){a.$SocketOpenerMD1=b,a.$SocketOpenerMD2=c}).then(function(b){d("WALogger").LOG(s(),b.id);if(a.signal.aborted)throw new(d("WAAbortError").AbortError)();a.set({active:!1,socket:b});c("WAWebNetworkStatus").online=!0})["finally"](function(){a.stopListening();d("WALogger").LOG(r());a.active=!1;a.sockets.forEach(function(a){a.promise instanceof c("WAWebDeprecatedTightPromise")&&a.promise.cancel();if(d("WAWebABProps").getABPropConfigValue("web_prevent_parallel_socket_connection_enabled")){(a=a.controller)==null?void 0:a.abort()}});var b=a.watchDogController;b&&(b.deactivate(),a.watchDogController=null)})["catch"](d("WAAbortError").catchAbort(c("WAWebNoop")))["catch"](function(b){d("WALogger").WARN(q(),String(b)).devConsole(b);if(a.onerror)a.onerror(b);else throw b});this.tsListener=function(b){a.retryTimestamp=b.ts};this.listenTo(c("WAWebNetworkStatus"),"change:online",this.$SocketOpenerMD3);this.listenTo(d("WAWebJSHaltDetector").jsHaltDetector,d("WAWebBaseJSHaltDetector").JS_HALT_EVENT,this.$SocketOpenerMD4);self.addEventListener("online",function(){a.$SocketOpenerMD3()});this.$SocketOpenerMD3()};f.$SocketOpenerMD5=function(a,e){var f=this;if(!this.active){d("WALogger").LOG(p());return}var g=new AbortController();a=c("WARaceSignalLegacyPromise")([g.signal,a],function(a){return d("WAWebWatchedSocketMd").open(e,f.routingToken,a)});d("WALogger").DEV(o()).devConsole(a);this.attempts=this.sockets.push({promise:a,controller:g});this.pendingSocketPromiseCount++;var i=!1,j=function(){if(i)return(h||(h=b("Promise"))).resolve();i=!0;var a=g.signal;return c("WAWebNetworkStatus").checkOnline({signal:a})},k=new AbortController();d("WAPromiseDelays").delayMs(6e3,k.signal).then(function(){return j()})["catch"](c("WAWebNoop"));a.then(this.$SocketOpenerMD1)["finally"](function(){f.pendingSocketPromiseCount--,k.abort()})["catch"](d("WAAbortError").catchAbort(c("WAWebNoop")))["catch"](function(){return j()})};f.attemptOpen=function(a){var c=this;this.onAttemptOpen==null?void 0:this.onAttemptOpen();d("WAWebABProps").getABPropConfigValue("web_socket_parallel_connection_enabled")?u.map(function(d){return(h||(h=b("Promise"))).resolve(c.$SocketOpenerMD5(a,d))}):this.$SocketOpenerMD5(a,t)};f.poke=function(){this.watchDogController&&this.watchDogController.forceTimeout()};f.$SocketOpenerMD3=function(){if(!this.active)return;var a=this.watchDogController,b=c("WAWebNetworkStatus").online?this.onlineController():this.offlineController();a&&(a.off("change:ts",this.tsListener),a.deactivate());b.on("change:ts",this.tsListener);b.activate();this.watchDogController=b};f.onlineController=function(){var a=this;d("WALogger").LOG(n());return new(d("WAWebWatchdog").Watchdog)({waitAlgorithm:A,jitter:y,onActivated:function(){a.attemptOpen(a.signal)},onTimeout:function(){a.attemptOpen(a.signal);return!0}})};f.offlineController=function(){var a=this;d("WALogger").LOG(m());var b=0,e,f=function(a){e&&e.abort();e=new AbortController();var f=e.signal;if(!navigator.onLine){d("WALogger").LOG(l());b=0;void B(a,[d("WAWebEventsWaitForOnline").waitForOnlineNaive(f)],e);return v}else if(b++<x){d("WALogger").LOG(k());return w}d("WALogger").LOG(j());void B(a,[d("WAWebEventsWaitForOnline").waitForOnlineNaive(f),c("WAWebEventsWaitForBbEvent")(d("WAWebJSHaltDetector").jsHaltDetector,d("WAWebBaseJSHaltDetector").JS_HALT_EVENT,void 0,f),c("WAWebEventsWaitForBbEvent")(d("WAWebStreamModel").Stream,"change:available",void 0,f)],e);return v};return new(d("WAWebWatchdog").Watchdog)({waitAlgorithm:f,jitter:y,onActivated:function(){a.pendingAttempts()===0&&a.attemptOpen(a.signal)},onDeactivated:function(){e&&e.abort()},onTimeout:function(){a.attemptOpen(a.signal);return!0}})};f.deactivate=function(){this.$SocketOpenerMD2(new(d("WAAbortError").AbortError)())};f.pendingAttempts=function(){return this.pendingSocketPromiseCount};f.$SocketOpenerMD4=function(a){var b=this.watchDogController;b&&a>z&&(d("WALogger").LOG(i(),z),b.resetGeneration())};return e}(d("WAWebBaseModel").BaseModel);function B(a,b,e){return d("WAPromiseAny").promiseAny(b).then(function(){a.forceTimeout()})["finally"](function(){e.abort()})["catch"](d("WAAbortError").catchAbort(c("WAWebNoop")))["catch"](function(a){if(a instanceof d("WACustomError").AggregateError&&a.errors.every(function(a){return a.name===d("WAAbortError").ABORT_ERROR}))return;throw a})}e=d("WAWebBaseModel").defineModel(a);g["default"]=e}),98);
__d("WAWebWamEnumWebcSocketConnectReasonType",[],(function(a,b,c,d,e,f){a=Object.freeze({PAGE_LOAD:0,RECONNECT:1});f.WEBC_SOCKET_CONNECT_REASON_TYPE=a}),66);
__d("WAWebWebcSocketConnectWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebcSocketConnectReasonType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebcSocketConnect:[5450,{webcAuthHandshakeDuration:[1,a.TYPES.TIMER],webcSocketConnectDuration:[2,a.TYPES.TIMER],webcSocketConnectReason:[3,d("WAWebWamEnumWebcSocketConnectReasonType").WEBC_SOCKET_CONNECT_REASON_TYPE],webcSocketHostname:[4,a.TYPES.STRING]},[1,1,1],"regular"]},{WebcSocketConnect:[]});g.WebcSocketConnectWamEvent=b}),98);
__d("WAWebOpenChatSocket",["Promise","WABase64","WABinary","WAFrameSocket","WAHex","WALogger","WANoiseHandshake","WANullthrows","WAResultOrError","WAVerifyChainCertificateWA6","WAWapDict","WAWebABProps","WAWebChatSocketPlatformDetails","WAWebClientPayload","WAWebCommonSocketPlatformDetails","WAWebCryptoCurve25519","WAWebEventsWaitForBbEvent","WAWebGetClientPayloadForLogin","WAWebGetClientPayloadForRegistration","WAWebPageLoadLogging","WAWebPassiveModeManager","WAWebProtobufsWa6.pb","WAWebRegisterPassiveTasks","WAWebSignalStoreApi","WAWebSocketLogoutJob","WAWebSocketOpenerMd","WAWebUserPrefsInfoStore","WAWebUserPrefsMultiDevice","WAWebWamEnumWebcSocketConnectReasonType","WAWebWebcSocketConnectWamEvent","asyncToGeneratorRuntime","cr:4533","decodeProtobuf","encodeProtobuf","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms][unified] openChatSocket (login flow: ",") error: ",", msg: ",", stack: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to decrypt noise data for resume handshake"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] openChatSocketForRegistration error: ",", msg: ",", stack: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["openChatSocketForRegistration success, resetting round"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] openChatSocketForLogin error: ",", msg: ",", stack: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["openChatSocketForLogin success, resetting round"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to decrypt noise data"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to decrypt noise data"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["openChatSocket send hello"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["openChatSocket preIntro ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] SocketOpenerMD: socket event"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] openChatSocketCommon"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifying certificate"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["openChatSocket send hello"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["openChatSocket preIntro ",""]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] SocketOpenerMD: socket event"]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] openChatSocketCommon"]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["certificateCiphertext: ",""]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["serverStaticCiphertext: ",""]);A=function(){return a};return a}function B(){var a=babelHelpers.taggedTemplateLiteralLoose(["serverEphemeral: ",""]);B=function(){return a};return a}function C(){var a=babelHelpers.taggedTemplateLiteralLoose(["server hello content: ",""]);C=function(){return a};return a}function D(){var a=babelHelpers.taggedTemplateLiteralLoose(["openChatSocket rcv hello"]);D=function(){return a};return a}function E(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake deriving secrets"]);E=function(){return a};return a}function F(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake continuing resume handshake"]);F=function(){return a};return a}function G(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake rcv hello"]);G=function(){return a};return a}function H(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake send hello"]);H=function(){return a};return a}function I(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake failed to encrypt client login props: ",""]);I=function(){return a};return a}function J(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake EC Agreement 2"]);J=function(){return a};return a}function K(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake failed to encrypt client static key: ",""]);K=function(){return a};return a}function L(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake encrypt client static key"]);L=function(){return a};return a}function M(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake EC Agreement 1"]);M=function(){return a};return a}function N(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake authenticate with client ephemeral key"]);N=function(){return a};return a}function O(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake authenticate with server static key"]);O=function(){return a};return a}function P(){var a=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake started"]);P=function(){return a};return a}var aa=2;e=4e3;f=6;var Q=new Uint8Array([87,65,f,d("WAWapDict").DICT_VERSION]),ba="Noise_XX_25519_AESGCM_SHA256\0\0\0\0",ca="Noise_IK_25519_AESGCM_SHA256\0\0\0\0",R;function da(a,b){return S.apply(this,arguments)}function S(){S=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){d("WALogger").DEV(y());var e=(yield d("WAWebUserPrefsMultiDevice").getRoutingInfo()),f=e?e.edgeRouting:null;e=f?d("WABase64").encodeB64UrlSafe(f):null;d("WAWebPageLoadLogging").startPageLoadQplMeasure("socket_open");var g=new(c("WAWebSocketOpenerMd"))({routingToken:e,signal:a,onAttemptOpen:function(){return b.startWebcSocketConnectDuration()}}),h=d("WAWebCryptoCurve25519").keyPair();e=(yield c("WAWebEventsWaitForBbEvent")(g,"change:socket",void 0,a).then(function(){d("WALogger").DEV(x());return g.socket})["finally"](function(){g.deactivate()}).then(function(a){var c=void 0;d("WAWebPageLoadLogging").addPageLoadQplAnnotation({login_ip_source:a.wsUrl});d("WAWebPageLoadLogging").endPageLoadQplMeasure("socket_open");b.markWebcSocketConnectDuration();b.webcSocketHostname=a.wsUrl;b.webcSocketConnectReason=d("WAWebPageLoadLogging").wasPageLoadQplLogged()?d("WAWebWamEnumWebcSocketConnectReasonType").WEBC_SOCKET_CONNECT_REASON_TYPE.RECONNECT:d("WAWebWamEnumWebcSocketConnectReasonType").WEBC_SOCKET_CONNECT_REASON_TYPE.PAGE_LOAD;if(f){var e=new(d("WABinary").Binary)();e.write("ED",0,1);e.writeUint8(f.byteLength>>16);e.writeUint16(f.byteLength&65535);e.writeBuffer(f);c=e.readByteArray();d("WALogger").DEV(w(),c)}e=c?d("WABinary").Binary.build(c,Q).readByteArray():Q;c=new(d("WAFrameSocket").FrameSocket)(a,e);d("WAWebPageLoadLogging").startPageLoadQplMeasure("auth_handshake");b.startWebcAuthHandshakeDuration();R=new(d("WANoiseHandshake").NoiseHandshake)(c);R.start(ba,Q);d("WALogger").LOG(v());R.authenticate(h.pubKey);a={clientHello:{ephemeral:h.pubKey}};return R.sendAndReceive(d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsWa6.pb").HandshakeMessageSpec,a).readByteArray()).then(function(a){return ha(R,a,h)})}));a=e[0];var i=e[1];e=e[2];d("WALogger").LOG(u());i=d("WAVerifyChainCertificateWA6").verifyChainCertificateWA6(i,a);if(!i.success)throw c("err")("verifyCertificateWA6 - "+i.error);return e});return S.apply(this,arguments)}function ea(a,b,c,d){return T.apply(this,arguments)}function T(){T=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){d("WALogger").DEV(t());var h=(yield d("WAWebUserPrefsMultiDevice").getRoutingInfo()),i=h?h.edgeRouting:null;h=i?d("WABase64").encodeB64UrlSafe(i):null;d("WAWebPageLoadLogging").startPageLoadQplMeasure("socket_open");var j=new(c("WAWebSocketOpenerMd"))({routingToken:h,signal:a,onAttemptOpen:function(){return f.startWebcSocketConnectDuration()}}),k=d("WAWebCryptoCurve25519").keyPair();return c("WAWebEventsWaitForBbEvent")(j,"change:socket",void 0,a).then(function(){d("WALogger").DEV(s());return j.socket})["finally"](function(){j.deactivate()}).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=void 0;d("WAWebPageLoadLogging").addPageLoadQplAnnotation({login_ip_source:a.wsUrl});d("WAWebPageLoadLogging").endPageLoadQplMeasure("socket_open");f.markWebcSocketConnectDuration();f.webcSocketHostname=a.wsUrl;f.webcSocketConnectReason=d("WAWebPageLoadLogging").wasPageLoadQplLogged()?d("WAWebWamEnumWebcSocketConnectReasonType").WEBC_SOCKET_CONNECT_REASON_TYPE.RECONNECT:d("WAWebWamEnumWebcSocketConnectReasonType").WEBC_SOCKET_CONNECT_REASON_TYPE.PAGE_LOAD;if(i){var c=new(d("WABinary").Binary)();c.write("ED",0,1);c.writeUint8(i.byteLength>>16);c.writeUint16(i.byteLength&65535);c.writeBuffer(i);b=c.readByteArray();d("WALogger").DEV(r(),b)}c=b?d("WABinary").Binary.build(b,Q).readByteArray():Q;b=new(d("WAFrameSocket").FrameSocket)(a,c);a=e?yield la(ka):null;if(a!=null){c=(yield d("WAWebUserPrefsInfoStore").waNoiseInfo.get());return ga(b,g,e,k,c==null?void 0:c.staticKeyPair,a)}return fa(b,k,e,g)});return function(b){return a.apply(this,arguments)}}())});return T.apply(this,arguments)}function fa(a,b,c,d){return U.apply(this,arguments)}function U(){U=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){R=new(d("WANoiseHandshake").NoiseHandshake)(a);R.start(ba,Q);d("WALogger").LOG(q());R.authenticate(e.pubKey);a={clientHello:{ephemeral:e.pubKey}};a=(yield R.sendAndReceive(d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsWa6.pb").HandshakeMessageSpec,a).readByteArray()).then(function(a){return ha(R,a,e)}));var i=a[0],j=a[1];a=a[2];yield d("WAWebChatSocketPlatformDetails").verifyAndProcessCertificate({certificate:j,serverStatic:i});yield a;j=f?d("WAWebGetClientPayloadForLogin").getClientPayloadForLogin(g):d("WAWebGetClientPayloadForRegistration").getClientPayloadForRegistration(g);i=(yield d("WAWebUserPrefsInfoStore").waNoiseInfo.get());i==null&&(d("WALogger").LOG(p()).tags("launch-socket-chat"),yield d("WAWebSocketLogoutJob").socketLogout(),c("WANullthrows")(i,"Unexpected null: noiseData"));f=c("WANullthrows")(i).staticKeyPair;return(h||(h=b("Promise"))).all([X(f,R,a),R.encrypt(h.resolve(j))]).then(function(a){var b=a[0];a=a[1];b={clientFinish:{"static":b,payload:a}};R.send(d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsWa6.pb").HandshakeMessageSpec,b).readByteArray());return R.finish()})});return U.apply(this,arguments)}function ga(e,f,g,i,j,k){if(j==null)return(h||(h=b("Promise"))).reject("resumeNoiseHandshake authKeyPair is null");var a=new(d("WANoiseHandshake").NoiseHandshake)(e);d("WALogger").LOG(P());a.start(ca,Q);d("WALogger").LOG(O());a.authenticate(k);d("WALogger").LOG(N());a.authenticate(i.pubKey);d("WALogger").LOG(M());a.mixIntoKey(d("WAWebCryptoCurve25519").sharedSecret(k,i.privKey));d("WALogger").LOG(L());e=a.encrypt((h||(h=b("Promise"))).resolve(j.pubKey))["catch"](function(a){d("WALogger").ERROR(K(),a);return(h||(h=b("Promise"))).reject(a)});d("WALogger").LOG(J());a.mixIntoKey(d("WAWebCryptoCurve25519").sharedSecret(k,j.privKey));k=g?d("WAWebGetClientPayloadForLogin").getClientPayloadForLogin(f):d("WAWebGetClientPayloadForRegistration").getClientPayloadForRegistration(f);g=a.encrypt(h.resolve(k))["catch"](function(a){d("WALogger").ERROR(I(),a);return(h||(h=b("Promise"))).reject(a)});return h.all([i.pubKey,g,e]).then(function(b){var e=b[0],f=b[1];b=b[2];d("WALogger").LOG(H());e={clientHello:{ephemeral:e,payload:f,"static":b}};return a.sendAndReceive(d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsWa6.pb").HandshakeMessageSpec,e).readByteArray()).then(function(b){d("WALogger").LOG(G());b=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsWa6.pb").HandshakeMessageSpec,b);b=b.serverHello;b=b||{};var e=b.ephemeral,f=b["static"];b=b.payload;if(f==null){d("WALogger").LOG(F());if(!e)throw c("err")("serverHello missing serverEphemeral");if(!b)throw c("err")("serverHello missing certificateCiphertext");a.authenticate(e);a.mixIntoKey(d("WAWebCryptoCurve25519").sharedSecret(e,i.privKey));a.mixIntoKey(d("WAWebCryptoCurve25519").sharedSecret(e,j.privKey));return a.decrypt(b).then(function(){d("WALogger").LOG(E());return a.finish()})}throw c("err")("resumeNoiseHandshake failed: serverStaticCiphertext not null")})})}function ha(a,e,f){d("WALogger").LOG(D());d("WALogger").DEV(C(),d("WAHex").toLowerCaseHex(e));e=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsWa6.pb").HandshakeMessageSpec,e);e=e.serverHello;if(!e)throw c("err")("ServerHello payload error");var g=e.ephemeral,i=e["static"];e=e.payload;if(g==null||i==null||e==null)throw c("err")("Missing server Ephemeral");d("WALogger").DEV(B(),d("WAHex").toLowerCaseHex(new Uint8Array(g)));d("WALogger").DEV(A(),d("WAHex").toLowerCaseHex(new Uint8Array(i)));d("WALogger").DEV(z(),d("WAHex").toLowerCaseHex(new Uint8Array(e)));a.authenticate(g);a.mixIntoKey(d("WAWebCryptoCurve25519").sharedSecret(g,f.privKey));i=a.decrypt(i);var j=i.then(function(a){return d("WAWebCryptoCurve25519").sharedSecret(a,f.privKey)});a.mixIntoKey(j);return(h||(h=b("Promise"))).all([i,a.decrypt(e),g])}function ia(a){return V.apply(this,arguments)}function V(){V=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{var e=a||{passive:!1,pull:!0},f=(yield d("WAWebUserPrefsInfoStore").waNoiseInfo.get());a=c("WANullthrows")(a==null?void 0:a.signal,"abort signal is null");var g=new(d("WAWebWebcSocketConnectWamEvent").WebcSocketConnectWamEvent)();a=(yield da(a,g).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){f==null&&(d("WALogger").LOG(o()).tags("launch-socket-chat"),yield d("WAWebSocketLogoutJob").socketLogout(),c("WANullthrows")(f,"Unexpected null: noiseData"));var g=c("WANullthrows")(f).staticKeyPair;yield d("WAWebRegisterPassiveTasks").registerPassiveTasksForConnect();e.passive=d("WAWebPassiveModeManager").PassiveTaskManager.shouldConnectAsPassiveMode();var i=(yield d("WAWebClientPayload").getClientPayloadForLogin(e));return(h||(h=b("Promise"))).all([X(g,R,a),R.encrypt(h.resolve(i))])});return function(b){return a.apply(this,arguments)}}()).then(function(a){var b=a[0];a=a[1];b={clientFinish:{"static":b,payload:a}};R.send(d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsWa6.pb").HandshakeMessageSpec,b).readByteArray());return R.finish()}));d("WALogger").LOG(n());d("WAWebPageLoadLogging").endPageLoadQplMeasure("auth_handshake");g.markWebcAuthHandshakeDuration();g.commit();return d("WAResultOrError").makeResult(a)}catch(a){d("WAWebPageLoadLogging").incrementPageLoadQplSocketError();d("WALogger").ERROR(m(),a.name,a.message,a.stack).sendLogs("handshake-error",{sampling:.01});return d("WAResultOrError").makeError("disconnected")}});return V.apply(this,arguments)}function ja(a){return W.apply(this,arguments)}function W(){W=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{var e=c("WANullthrows")(a==null?void 0:a.signal,"abort signal is null"),f=new(d("WAWebWebcSocketConnectWamEvent").WebcSocketConnectWamEvent)();e=(yield da(e,f).then(function(a){return(h||(h=b("Promise"))).all([d("WAWebSignalStoreApi").waSignalStore.getRegistrationInfo(),d("WAWebSignalStoreApi").waSignalStore.getSignedPreKey(),a])}).then(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var f=e[0],g=e[1];e=e[2];if(!g||!f)throw c("err")("Invalid signal credentials");f=(yield d("WAWebClientPayload").getClientPayloadForRegistration(f,g,a));g=c("WANullthrows")(yield d("WAWebUserPrefsInfoStore").waNoiseInfo.get()).staticKeyPair;return(h||(h=b("Promise"))).all([X(g,R,e),R.encrypt(h.resolve(f))])});return function(a){return e.apply(this,arguments)}}()).then(function(a){var b=a[0];a=a[1];b={clientFinish:{"static":b,payload:a}};R.send(d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsWa6.pb").HandshakeMessageSpec,b).readByteArray());return R.finish()}));d("WALogger").LOG(l());d("WAWebPageLoadLogging").endPageLoadQplMeasure("auth_handshake");f.markWebcAuthHandshakeDuration();f.commit();return d("WAResultOrError").makeResult(e)}catch(a){d("WAWebPageLoadLogging").incrementPageLoadQplSocketError();d("WALogger").ERROR(k(),a.name,a.message,a.stack).sendLogs("handshake-error",{sampling:.01});return d("WAResultOrError").makeError("disconnected")}});return W.apply(this,arguments)}function X(a,e,f){var g=(h||(h=b("Promise"))).resolve(a.pubKey);g=e.encrypt(g);if(!f)return(h||(h=b("Promise"))).reject(c("err")("staticAgreement called before serverKeys"));f=d("WAWebCryptoCurve25519").sharedSecret(f,a.privKey);e.mixIntoKey(f);return g}var ka=0;function la(a){return Y.apply(this,arguments)}function Y(){Y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebABProps").getABPropConfigValue("web_optimized_resume_handshake_enabled"))return null;if(a>=aa)return null;a=(yield d("WAWebUserPrefsInfoStore").waNoiseInfo.get());if(a==null){d("WALogger").LOG(j()).tags("launch-socket-chat");return null}a=a.certificateChainBuffer?d("WAWebUserPrefsInfoStore").waNoiseInfo.getCertficateChain(a.certificateChainBuffer):null;return d("WAWebCommonSocketPlatformDetails").makeServerInfoIfKnown(a)});return Y.apply(this,arguments)}function ma(a,b){return Z.apply(this,arguments)}function Z(){Z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{var e=a||{passive:!1,pull:!0};a=c("WANullthrows")(a==null?void 0:a.signal,"abort signal is null");var f=new(d("WAWebWebcSocketConnectWamEvent").WebcSocketConnectWamEvent)();a=(yield ea(a,b,f,e));d("WAWebPageLoadLogging").endPageLoadQplMeasure("auth_handshake");f.markWebcAuthHandshakeDuration();f.commit();return d("WAResultOrError").makeResult(a)}catch(a){d("WAWebPageLoadLogging").incrementPageLoadQplSocketError();d("WALogger").ERROR(i(),b,a.name,a.message,a.stack).sendLogs("handshake-error",{sampling:.01});return d("WAResultOrError").makeError("disconnected")}});return Z.apply(this,arguments)}function a(a){return $.apply(this,arguments)}function $(){$=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebUserPrefsMultiDevice").isRegistered();if(d("WAWebABProps").getABPropConfigValue("web_unified_chat_socket_opener_enabled"))return ma(a,b);return b?ia(a):ja(a)});return $.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebCommsConfig",["WALogger","WANullthrows","WAWapJid","WAWebABProps","WAWebClientFeatureFlags","WAWebCmd","WAWebCommsProcessAck","WAWebCommsSendPing","WAWebNoop","WAWebOfflineResumePreAckHandler","WAWebOpenChatSocket","WAWebSocketConstants","WAWebUserPrefsMultiDevice","cr:7907","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["ack.to is a "," not a WapJid: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] getCommsConfig:onSocketLoopIteration"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] getCommsConfig:onSocketOpen"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] getCommsConfig:onDisconnect"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] getCommsConfig:openChatSocket"]);l=function(){return a};return a}var m=60*15*1e3;function n(){return{jitter:.1,max:m,algo:{type:"fibonacci",first:1e3,second:1e3},relativeDelay:!1}}function a(a){var e=a?a:{passive:!1,pull:!1};return{maxRetries:Number.MAX_SAFE_INTEGER,openChatSocket:function(a,b){d("WAWebABProps").getABPropConfigValue("web_comms_socket_reconnect_enabled")?e.signal=c("WANullthrows")(b):e.signal=new AbortController().signal;return c("WAWebOpenChatSocket")(e).then(function(b){d("WALogger").DEV(l()).devConsole(b);a();e.passive=!1;return b})},healthCheckInterval:15,deadSocketTime:2e4,maxSocketLoopWaitTime:m,shouldCloseStaleSocket:!0,socketReconnectBackoffAlgo:n(),shouldBlockReceivingUntilSuccess:!0,handlers:{onConnect:function(){d("WAWebUserPrefsMultiDevice").isRegistered()&&(d("WAWebCmd").Cmd.setSocketState(d("WAWebSocketConstants").SOCKET_STATE.CONNECTED),d("WAWebCmd").Cmd.openSocketStream())},onDisconnect:function(){d("WALogger").DEV(k()),d("WAWebABProps").getABPropConfigValue("web_reset_offline_state_ondisconnect_enabled")&&d("WAWebCmd").Cmd.resetOfflineDeliveryState(),d("WAWebCmd").Cmd.socketStreamDisconnected()},onSocketOpen:function(){d("WALogger").DEV(j()),d("WAWebCmd").Cmd.setSocketState(d("WAWebSocketConstants").SOCKET_STATE.PAIRING)},onSocketLoopIteration:function(a){d("WAWebABProps").getABPropConfigValue("web_prevent_parallel_socket_connection_enabled")&&(a==null?void 0:a.abort()),d("WALogger").DEV(i()),d("WAWebCmd").Cmd.setSocketState(d("WAWebSocketConstants").SOCKET_STATE.OPENING)},onConnectionChange:c("WAWebNoop"),onOptimisticConnectionChange:c("WAWebNoop"),onBeforeCastStanzaForE2E:function(a,b){a.tag==="ack"&&!(b==null?void 0:b.preAck)&&!d("WAWebCmd").Cmd.isOfflineDeliveryEnd&&void d("WAWebOfflineResumePreAckHandler").parseAndSerializeOfflinePreAck(a)},onCastStanza:function(a){c("gkx")("26259")&&(a.tag==="ack"&&!(a.attrs.to instanceof d("WAWapJid").WapJid)&&d("WALogger").ERROR(h(),typeof a.attrs.to,a).sendLogs("send-string-jid")),!c("gkx")("26258")&&!d("WAWebClientFeatureFlags").isFeatureEnabled("debug_win_long_sync")&&(b("cr:7907")==null?void 0:b("cr:7907").sendNewStanzaToDevTool(a,!0))},onHandleAck:function(a){c("WAWebCommsProcessAck")(a)},onHandleStanza:function(a){!c("gkx")("26258")&&!d("WAWebClientFeatureFlags").isFeatureEnabled("debug_win_long_sync")&&(b("cr:7907")==null?void 0:b("cr:7907").sendNewStanzaToDevTool(a,!1))},onSendIq:c("WAWebNoop"),onClockSkewUpdate:function(a){d("WAWebCommsSendPing").updateClockSkew(a)}}}}g.getCommsConfig=a}),98);
__d("WAWebDbMigrationJobTypes",[],(function(a,b,c,d,e,f){a={NOT_UPDATED:0,ALREADY_UPDATED:1,ALREADY_DELETED_DUPLICATED_ROWS:2};f.DB_MIGRATION_STATUS=a}),66);
__d("WAWebDBIdentityTableMigrationJob",["WALogger","WAWebApiContact","WAWebDbMigrationJobTypes","WAWebSchemaIdentity","WAWebSignalAddress","WAWebUserPrefsGeneral","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["migrateIdentityTable: finished: "," records were updated"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["migrateIdentityTable: updated chunk: "," records"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["migrateIdentityTable: "," missing mapping"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["migrateIdentityTable: skipping - table already migrated"]);k=function(){return a};return a}function a(){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebUserPrefsGeneral").getLidDbMigration();if((a==null?void 0:a.identityTable)!=null&&(a==null?void 0:a.identityTable)>=d("WAWebDbMigrationJobTypes").DB_MIGRATION_STATUS.ALREADY_UPDATED){d("WALogger").LOG(k());return[]}var b=[],c=[],e=[];a=(yield d("WAWebSchemaIdentity").getTable().all());a.forEach(function(a){var f=d("WAWebWidFactory").widFromSignalAddress(a.identifier);if(f.isBot()||f.isHosted())return;if(f.isLid())return;f=f;var g=d("WAWebApiContact").getCurrentLid(d("WAWebWidFactory").toUserWid(f));if(g==null){e.push(f);return}c.push(a.identifier);b.push(babelHelpers["extends"]({},a,{identifier:new(d("WAWebSignalAddress").SignalAddress)(f,!0).toString()+".0"}))});d("WALogger").LOG(j(),e.length);a=1e3;var f=Math.ceil(b.length/a);if(b.length>0)for(var g=0;g<f;g++){var l=b.slice(g*a,(g+1)*a);yield d("WAWebSchemaIdentity").getTable().bulkCreateOrReplace(l);d("WALogger").LOG(i(),l.length)}d("WALogger").LOG(h(),b.length);d("WAWebUserPrefsGeneral").createOrUpdateLidDbMigration({identityTable:d("WAWebDbMigrationJobTypes").DB_MIGRATION_STATUS.ALREADY_UPDATED});return c});return l.apply(this,arguments)}g.migrateIdentityTable=a}),98);
__d("WAWebDBSenderKeyStoreMigrationJob",["WALogger","WAWebApiContact","WAWebDbMigrationJobTypes","WAWebDeprecatedSignalAddress","WAWebSchemaSenderkey","WAWebSignalAddress","WAWebUserPrefsGeneral","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["migrateSenderKeyStoreTable: finished: "," records were created"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["migrateSenderKeyStoreTable: updated chunk: "," records"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["migrateSenderKeyStoreTable: "," missing mapping"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["migrateSenderKeyStoreTable: skipping - table already migrated"]);k=function(){return a};return a}function a(){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebUserPrefsGeneral").getLidDbMigration();if((a==null?void 0:a.senderKeyStoreTable)!=null&&(a==null?void 0:a.senderKeyStoreTable)>=d("WAWebDbMigrationJobTypes").DB_MIGRATION_STATUS.ALREADY_UPDATED){d("WALogger").LOG(k());return[]}var b=new Map(),c=new Set(),e=[];a=(yield d("WAWebSchemaSenderkey").getTable().all());a.forEach(function(a){var f=d("WAWebWidFactory").widFromSignalAddress(a.senderId),g=a.senderKeyName.split("::")[0];if(f.isLid()){var h=new(d("WAWebDeprecatedSignalAddress").DeprecatedSignalAddress)(f,!0).toString()+".0",i=g+"::"+h;b.set(i,babelHelpers["extends"]({},a,{senderId:h,senderKeyName:i}));c.add(a.senderKeyName);return}h=f;i=d("WAWebApiContact").getCurrentLid(d("WAWebWidFactory").toUserWid(h));if(i==null){e.push(h);return}i=new(d("WAWebSignalAddress").SignalAddress)(f,!0).toString()+".0";h=g+"::"+i;b.set(h,babelHelpers["extends"]({},a,{senderId:i,senderKeyName:h}));c.add(a.senderKeyName)});d("WALogger").LOG(j(),e.length);a=Array.from(b.values());var f=1e3,g=Math.ceil(a.length/f);if(a.length>0)for(var l=0;l<g;l++){var m=a.slice(l*f,(l+1)*f);yield d("WAWebSchemaSenderkey").getTable().bulkCreateOrReplace(m);d("WALogger").LOG(i(),m.length)}d("WALogger").LOG(h(),a.length);d("WAWebUserPrefsGeneral").createOrUpdateLidDbMigration({senderKeyStoreTable:d("WAWebDbMigrationJobTypes").DB_MIGRATION_STATUS.ALREADY_UPDATED});var n=[];c.forEach(function(a){b.has(a)||n.push(a)});return n});return l.apply(this,arguments)}g.migrateSenderKeyStoreTable=a}),98);
__d("WAWebDBSessionStoreTableMigrationJob",["WALogger","WAWebApiContact","WAWebDbMigrationJobTypes","WAWebDeprecatedSignalAddress","WAWebSchemaSession","WAWebSignalAddress","WAWebUserPrefsGeneral","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["migrateSessionStoreTable: finished: "," records were created"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["migrateSessionStoreTable: updated chunk: "," records"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["migrateSessionStoreTable: "," missing mapping"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["migrateSessionStoreTable: skipping - table already migrated"]);k=function(){return a};return a}function a(){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebUserPrefsGeneral").getLidDbMigration();if((a==null?void 0:a.sessionStoreTable)!=null&&(a==null?void 0:a.sessionStoreTable)>=d("WAWebDbMigrationJobTypes").DB_MIGRATION_STATUS.ALREADY_UPDATED){d("WALogger").LOG(k());return[]}var b=new Map(),c=new Set(),e=[];a=(yield d("WAWebSchemaSession").getTable().all());a.forEach(function(a){var f=d("WAWebWidFactory").widFromSignalAddress(a.address);if(f.isBot()||f.isHosted())return;if(f.isLid()){var g=new(d("WAWebDeprecatedSignalAddress").DeprecatedSignalAddress)(f,!0).toString()+".0";b.set(g,babelHelpers["extends"]({},a,{address:g}));c.add(a.address);return}g=f;f=d("WAWebApiContact").getCurrentLid(d("WAWebWidFactory").toUserWid(g));if(f==null){e.push(g);return}f=new(d("WAWebSignalAddress").SignalAddress)(g,!0).toString()+".0";b.set(f,babelHelpers["extends"]({},a,{address:f}));c.add(a.address)});d("WALogger").LOG(j(),e.length);a=Array.from(b.values());var f=1e3,g=Math.ceil(a.length/f);if(a.length>0)for(var l=0;l<g;l++){var m=a.slice(l*f,(l+1)*f);yield d("WAWebSchemaSession").getTable().bulkCreateOrReplace(m);d("WALogger").LOG(i(),m.length)}d("WALogger").LOG(h(),a.length);d("WAWebUserPrefsGeneral").createOrUpdateLidDbMigration({sessionStoreTable:d("WAWebDbMigrationJobTypes").DB_MIGRATION_STATUS.ALREADY_UPDATED});var n=[];c.forEach(function(a){b.has(a)||n.push(a)});return n});return l.apply(this,arguments)}g.migrateSessionStoreTable=a}),98);
__d("WAWebDBSignalStorage",["WALogger","WAWebDBIdentityTableMigrationJob","WAWebDBSenderKeyStoreMigrationJob","WAWebDBSessionStoreTableMigrationJob","WAWebDbMigrationJobTypes","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebSchemaIdentity","WAWebSchemaSenderkey","WAWebSchemaSession","WAWebSingleSignalSession","WAWebUserPrefsGeneral","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["migrateSignalStorageDb failed: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["migrateSignalStorageDb - SessionStoreTable: deleted "," records"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["migrateSenderKeyStoreTable: deleted "," records"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["migrateSignalStorageDb - IdentityTable: deleted "," records"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["migrateSignalStorageDb - SignalStorageDb is done: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["migrateSignalStorageDb - SignalStorageDb is already migrated"]);m=function(){return a};return a}function a(){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(d("WAWebSingleSignalSession").isUsingAccountIdentifierForSignalStorage()){d("WALogger").WARN(m());return}d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.PAGE_LOAD,"LIDMigration_SignalStorage_start");var a=Date.now();try{var b=(yield d("WAWebDBIdentityTableMigrationJob").migrateIdentityTable()),c=(yield d("WAWebDBSenderKeyStoreMigrationJob").migrateSenderKeyStoreTable()),e=(yield d("WAWebDBSessionStoreTableMigrationJob").migrateSessionStoreTable());d("WALogger").WARN(l(),Date.now()-a);yield d("WAWebSingleSignalSession").setIsUsingAccountIdentifierForSignalStorage(!0);d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.PAGE_LOAD,"LIDMigration_SignalStorage_end");b.length>0&&(yield d("WAWebSchemaIdentity").getTable().bulkRemove(b),d("WALogger").LOG(k(),b.length));c.length>0&&(yield d("WAWebSchemaSenderkey").getTable().bulkRemove(c),d("WALogger").LOG(j(),c.length));e.length>0&&(yield d("WAWebSchemaSession").getTable().bulkRemove(e),d("WALogger").LOG(i(),e.length))}catch(b){d("WAWebUserPrefsGeneral").createOrUpdateLidDbMigration({deviceTable:(a=d("WAWebDbMigrationJobTypes")).DB_MIGRATION_STATUS.NOT_UPDATED,identityTable:a.DB_MIGRATION_STATUS.NOT_UPDATED,sessionStoreTable:a.DB_MIGRATION_STATUS.NOT_UPDATED,senderKeyStoreTable:a.DB_MIGRATION_STATUS.NOT_UPDATED});d("WALogger").ERROR(h(),b)}});return n.apply(this,arguments)}g.migrateSignalStorageDb=a}),98);
__d("WAWebEventsWaitForMain",["Promise","WAWebCmd","WAWebEventsWaitForBbEvent"],(function(a,b,c,d,e,f,g){var h;function a(){return d("WAWebCmd").Cmd.isMainLoaded?(h||(h=b("Promise"))).resolve():c("WAWebEventsWaitForBbEvent")(d("WAWebCmd").Cmd,"main_loaded")}g["default"]=a}),98);
__d("WAWebInitFavoritesFromStorage",["WAWebFavoriteCollection","WAWebSchemaFavorite"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebSchemaFavorite").getFavoriteTable().all().then(function(a){d("WAWebFavoriteCollection").FavoriteCollection.initializeFromCache(a)})}g.restoreFavorites=a}),98);
__d("WAWebRequestBotList",["WALogger","WASmaxBotBotListRPC","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bot] requestBotList failed"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bot] requestBotList failed"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bot] requestBotList failed"]);j=function(){return a};return a}function a(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WASmaxBotBotListRPC").sendBotListRPC({botV:"2"}));switch(a.name){case"BotListResponseSuccessV1":var b=a.value.botBot;b=b.map(function(a){return{id:d("WAWebWidFactory").createWid(a.jid),isDefault:a["default"]==="true"}});var e=b.filter(function(a){return a.isDefault===!0}).length;if(e!==1){d("WALogger").ERROR(j()).devConsole("[bot] requestBotList response has "+e+" default bots");return[]}return b;case"BotListResponseSuccessV2":e=a.value;var f=e.botDefaultJid;b=e.botSection;var g=[];b.forEach(function(a){a.bot.forEach(function(a){var b=a.jid;a=a.personaId;g.push({id:d("WAWebWidFactory").createWid(b),isDefault:b===f,personaId:a})})});return g;case"BotListResponseSuccessV3":case"BotListResponseSuccessV4":throw c("err")(a.name+" is not implemented");case"BotListResponseError":e=a.value.errorIQErrorInternalServerErrorOrForbiddenOrBadRequestOrNotAllowedMixinGroup.value;b=e.code;a=e.text;d("WALogger").ERROR(i()).devConsole("[bot] requestBotList failed with code "+b+", "+a);return[]}});return k.apply(this,arguments)}function e(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WASmaxBotBotListRPC").sendBotListRPC({botV:"3",botBhash:a}));switch(a.name){case"BotListResponseSuccessV3":var b=a.value,e=b.botDefault,f=b.botSection;b=b.botBhash;var g=[];f.forEach(function(a){a.bot.forEach(function(a){var b=a.jid;a=a.personaId;g.push({id:d("WAWebWidFactory").createWid(b),isDefault:b===e,personaId:a})})});return{botList:g,botBhash:b};case"BotListResponseSuccessV1":case"BotListResponseSuccessV2":case"BotListResponseSuccessV4":throw c("err")(a.name+" is not implemented");case"BotListResponseError":f=a.value.errorIQErrorInternalServerErrorOrForbiddenOrBadRequestOrNotAllowedMixinGroup.value;b=f.code;a=f.text;d("WALogger").ERROR(h()).devConsole("[bot] requestBotList failed with code "+b+", "+a);return null}});return l.apply(this,arguments)}g.requestBotList=a;g.requestUgcBotList=e}),98);
__d("WAWebRestoreBotProfilesFromDb",["WALogger","WAWebBotProfileCollection","WAWebSchemaBotProfile","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["restore-bot-profiles: commands parsing failed"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["restore-bot-profiles: commands are not an array"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["restore-bot-profiles: prompts parsing failed"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["restore-bot-profiles: prompts are not an array"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["restore-bot-profiles: invalid id"]);l=function(){return a};return a}function a(){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebSchemaBotProfile").getBotProfileTable().all());a.forEach(function(a){var b=a.id,c=a.prompts,e=a.commands;a=babelHelpers.objectWithoutPropertiesLoose(a,["id","prompts","commands"]);var f;try{f=d("WAWebWidFactory").createUserWid(b)}catch(a){d("WALogger").ERROR(l()).sendLogs("restore-bot-profiles: invalid id");return}b=[];if(c)try{b=JSON.parse(c),Array.isArray(b)||(b=[],d("WALogger").ERROR(k()).sendLogs("restore-bot-profiles: prompts are not an array"))}catch(a){d("WALogger").ERROR(j()).sendLogs("restore-bot-profiles: prompts parsing failed")}c=[];if(e!=null)try{c=JSON.parse(e),Array.isArray(c)||(c=[],d("WALogger").ERROR(i()).sendLogs("restore-bot-profiles: commands are not an array"))}catch(a){d("WALogger").ERROR(h()).sendLogs("restore-bot-profiles: commands parsing failed")}d("WAWebBotProfileCollection").BotProfileCollection.gadd(babelHelpers["extends"]({id:f,commands:c,prompts:b},a))})});return m.apply(this,arguments)}g.restoreBotProfilesFromDb=a}),98);
__d("WAWebInitializeBots",["WALogger","WATimeUtils","WAWebABProps","WAWebBotGating","WAWebCmd","WAWebPersistBotProfiles","WAWebRequestBotList","WAWebRequestBotProfiles","WAWebRestoreBotProfilesFromDb","WAWebRuntimeEnvironmentUtils","WAWebUserPrefsBot","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getBotProfilesFromServer: exceed max number of UGC bot: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bot] initializing bots complete, next fetch at ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bot] restoring bots from DB"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bot] requesting bots from server"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bot] not initializing bots due to feature being disabled"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bot] skipping bot initialization in worker"]);m=function(){return a};return a}function n(){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(d("WAWebRuntimeEnvironmentUtils").isWorker()){d("WALogger").LOG(m());return}if(!d("WAWebBotGating").isBotEnabled()){d("WALogger").LOG(l());return}var a=s(),c=d("WATimeUtils").unixTime(),e=d("WAWebABProps").getABPropConfigValue("bonsai_update_interval"),f;a+e<c?(d("WALogger").LOG(k()),yield q(),f=e):(d("WALogger").LOG(j()),yield d("WAWebRestoreBotProfilesFromDb").restoreBotProfilesFromDb(),f=a+e-c);self.setTimeout(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield n()}),f*1e3);d("WALogger").LOG(i(),c+f)});return o.apply(this,arguments)}var p=500;function q(){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=[];if(d("WAWebBotGating").isUgcBotEnabled()){var b=(yield d("WAWebRequestBotList").requestUgcBotList(d("WAWebUserPrefsBot").getUgcBotListLastBhash()));if(b){var c=b.botList.length;if(c>p){d("WALogger").ERROR(h(),c).sendLogs("exceed-max-ugc-bots");t();return}d("WAWebUserPrefsBot").setUgcBotListLastBhash(b.botBhash);a=b.botList}}else a=(yield d("WAWebRequestBotList").requestBotList());c=(yield d("WAWebRequestBotProfiles").requestBotProfiles(a));yield d("WAWebPersistBotProfiles").persistBotProfiles(c);t()});return r.apply(this,arguments)}d("WAWebCmd").Cmd.on("on_ab_props_update",function(){void n()});d("WAWebCmd").Cmd.on("ab_props_loaded",function(){void n()});function s(){return d("WAWebBotGating").isUgcBotEnabled()?d("WAWebUserPrefsBot").getUgcBotListLastRequestedTimestamp():d("WAWebUserPrefsBot").getBotListLastRequestedTimestamp()}function t(){d("WAWebBotGating").isUgcBotEnabled()?d("WAWebUserPrefsBot").setUgcBotListLastRequestedTimestamp(d("WATimeUtils").unixTime()):d("WAWebUserPrefsBot").setBotListLastRequestedTimestamp(d("WATimeUtils").unixTime())}g.initializeBots=n}),98);
__d("WAWebMergeContactRecordsById",["WALogger","WAWebLidAwareContactsDB","WAWebModelStorageUtils","WAWebUserPrefsIndexedDBStorage","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["mergeContactRecordsById: end migration"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["mergeContactRecordsById: start migration"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["mergeContactRecordsById: migration already complete"]);j=function(){return a};return a}function a(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebModelStorageUtils").getStorage().lock(["contact","user-prefs"],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get("WAContactMigrationIdComplete")){d("WALogger").LOG(j());return}d("WALogger").LOG(i());var a=(yield c("WAWebLidAwareContactsDB").all()).filter(function(a){return a.id.endsWith("@c.us")});yield c("WAWebLidAwareContactsDB").bulkCreateOrMerge(a.map(function(a){var b=a.id;a=a.pushname;return{id:d("WAWebWidFactory").createWid(b).toJid(),pushname:a}}));yield c("WAWebLidAwareContactsDB").bulkRemove(a.map(function(a){a=a.id;return a}));yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set("WAContactMigrationIdComplete",!0);d("WALogger").LOG(h())}))});return k.apply(this,arguments)}g.mergeContactRecordsById=a}),98);
__d("WAWebNewsletterMetadataInitFromStorage",["WAJids","WALinkify","WALogger","WAWebBackendApi","WAWebCommonNewsletterEnums","WAWebNewsletterMessageDeliveryUpdateToModelUtils","WAWebNewsletterMetadataCollection","WAWebSchemaNewsletterMetadata","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage]: restoreNewsletterMetadata: complete restoring newsletter metadata"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[init-from-storage]: restoreNewsletterMetadata: start restoring newsletter metadata"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Encountered unexpected newsletter capability in DB: ",""]);j=function(){return a};return a}function k(a){switch(a){case 0:return d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Subscriber;case 1:return d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Admin;case 3:return d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Owner;case 2:default:return d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Guest}}function l(a){switch(a){case 0:return d("WAWebCommonNewsletterEnums").NewsletterReactionCodesSetting.All;case 3:return d("WAWebCommonNewsletterEnums").NewsletterReactionCodesSetting.None;case 2:return d("WAWebCommonNewsletterEnums").NewsletterReactionCodesSetting.Blocklist;case 1:default:return d("WAWebCommonNewsletterEnums").NewsletterReactionCodesSetting.Basic}}function m(a){switch(a){case 0:return d("WAWebCommonNewsletterEnums").NewsletterCapability.Insights;default:d("WALogger").WARN(j(),a).tags("newsletter-capabilities").sendLogs("Unexpected newsletter capability in DB");return null}}function n(a){switch(a){case 1:return d("WAWebCommonNewsletterEnums").NewsletterPrivacy.Private;case 0:default:return d("WAWebCommonNewsletterEnums").NewsletterPrivacy.Public}}function a(){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WALogger").DEV(i());try{var a=(yield d("WAWebSchemaNewsletterMetadata").getNewsletterMetadataTable().all());a.forEach(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebWidFactory").createWid(a.id),e={id:b,creationTime:a.creationTime,name:a.name,nameUpdateTime:a.nameUpdateTime,description:a.description,descriptionUpdateTime:a.descriptionUpdateTime,handle:a.handle,inviteCode:a.inviteCode,size:a.size,verified:a.verified,membershipType:k(a.membershipType),reactionCodesSetting:l(a.reactionCodesSetting),privacy:n(a.privacy),website:a.website!=null?d("WALinkify").findLink(a.website):null,adminCount:a.adminCount,capabilities:a.capabilities!=null?new Set(Array.from(a.capabilities).map(m).filter(Boolean)):new Set(),suspended:a.suspended,geosuspended:a.geosuspended,terminated:a.terminated};c("WAWebNewsletterMetadataCollection")==null?void 0:c("WAWebNewsletterMetadataCollection").add(e,{merge:!0});if(a.messageDeliveryUpdates!=null){var f=[];a.messageDeliveryUpdates.forEach(function(a,b){return f.push({id:b,code:a.code})});e=(yield d("WAWebNewsletterMessageDeliveryUpdateToModelUtils").getMessageDeliveryUpdatesModelToUpdate(d("WAJids").toNewsletterJid(a.id),f,[]));a=e.modelUpdatesToAdd;yield d("WAWebBackendApi").frontendFireAndForget("updateNewsletterMessageDeliveryUpdate",{id:b,modelUpdatesToAdd:a,modelUpdatesToRemove:[]})}});return function(b){return a.apply(this,arguments)}}())}finally{d("WALogger").DEV(h())}});return o.apply(this,arguments)}g.restoreNewsletterMetadata=a}),98);
__d("WAWebNonBlockingOfflineResumeManager",["WALogger","WAShiftTimer","WAWebApiPendingDeviceSync","WAWebBackendApi","WAWebBrokerGlobalAppState","WAWebChatThreadLogging","WAWebCmd","WAWebHandleMsgTypes.flow","WAWebHandleOfflineAbProps","WAWebJSHaltDetector","WAWebMessageQueue","WAWebMsgSyncConfiguratedTunnel","WAWebMsgSyncTunnelBatcher","WAWebOffdStorageUpdateOfflinePeerReceipts","WAWebOfflineResumeConst","WAWebOfflineResumeMsgProcessReporter","WAWebOfflineResumeTypes.flow","WAWebOfflineResumeUtils","WAWebSignalProtocolStore","WAWebThreadMetadata","WAWebUserPrefsGeneral","WAWebWamEnumWebcScenarioType","WAWebWamMemoryStat","WAWebWamOfflineResumeReporter","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] _onOfflineComplete: clearOfflineSnapShot done."]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] _onOfflineComplete: waitForOfflineMsgThread done, total decryption error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] offline resume finished by timeout"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking]: offline session completed by timeout"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] "," received after offline completion marker. Refreshing window due to potential server issue."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] Reject multiple offline preview ib during offline resume, delay ","."]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] Reject multiple offline preview ibs during offline resume, delay ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] Accept multiple offline preview ibs during offline resume, delay ","."]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[resume-from-open-tab] Main screen is loaded"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] restart client due to exceed the LIMIT, message: ",", receipt: ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] Offline session is complete when receiving offline preview ib."]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[resume-from-open-tab] reset offline delivery end to false"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] offline resume stage: "," -> ",""]);t=function(){return a};return a}var u=100,v;function a(a){v!=null&&v.updateOptions(a);v==null&&(v=new w(a));return v}function e(){v=null}var w=function(){function a(a){var b=this;this._offlineCompleteTimer=null;this._progressBarTimer=new(d("WAShiftTimer").ShiftTimer)(function(){d("WAWebCmd").Cmd.handleOfflineProgressUpdate(),b._progressBarTimer.onOrAfter(d("WAWebOfflineResumeConst").UI_UPDATE_TIME_MS)});this._maxProgress=95;this.resumeType=d("WAWebOfflineResumeTypes.flow").ResumeType.NonBlocking;(a==null?void 0:a.mainScreenLoaded)&&(this._mainScreenLoaded=!0);this._initState()}var e=a.prototype;e.updateOptions=function(a){this._mainScreenLoaded=(a=a==null?void 0:a.mainScreenLoaded)!=null?a:!1};e._initState=function(){this.offlineMessagePreviewCounter=-1,this._decryptedMessageCount=0,this._decryptionErrorCount=0,this._finishedDownloading=!1,this._hasMessagesToDownload=null,this._status=d("WAWebOfflineResumeConst").ResumeStatus.INIT};e._setStatus=function(a){d("WALogger").LOG(t(),this._status,a),this._status=a};e.processOfflinePreview=function(a){d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflinePreviewT();this._mainScreenLoaded&&(d("WALogger").LOG(s()),d("WAWebCmd").Cmd.resetOfflineDeliveryState());if(this.isResumeFromRestartComplete())d("WALogger").LOG(r()),d("WAWebOfflineResumeUtils").exceedResumeWithOpenTabLimit(a.message,a.receipt)&&(d("WALogger").LOG(q(),a.message,a.receipt),d("WAWebOfflineResumeUtils").refreshWindow()),d("WAWebJSHaltDetector").jsHaltDetector.restartDetection(),this._setStatus(d("WAWebOfflineResumeConst").ResumeStatus.RESUME_WITH_OPEN_TAB),this._startOfflineCompleteTimer(a.message,a.receipt),d("WAWebBackendApi").frontendFireAndForget("updateChatSortListener",{enable:!1}),self.setTimeout(function(){d("WAWebBackendApi").frontendFireAndForget("updateChatSortListener",{enable:!0})},7e3);else if(this._status===d("WAWebOfflineResumeConst").ResumeStatus.INIT)c("WAWebBrokerGlobalAppState").initOrUpdateTracking(d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.OFFLINE_RESUME),d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflineCount(a),d("WAWebOfflineResumeMsgProcessReporter").msgProcessReporter.activate(a),this.offlineMessagePreviewCounter=a.message,this._hasMessagesToDownload=!1,this._finishedDownloading=!0,this._decryptedMessageCount=0,this._firstPreviewReceivedT=Date.now(),d("WAWebSignalProtocolStore").enableMemSignalStore(),d("WAWebCmd").Cmd.handleOfflineProgressUpdate(),d("WAWebJSHaltDetector").jsHaltDetector.restartDetection(),this._progressBarTimer.onOrAfter(d("WAWebOfflineResumeConst").UI_UPDATE_TIME_MS),this._setStatus(d("WAWebOfflineResumeConst").ResumeStatus.RESUME_ON_RESTART),this._startOfflineCompleteTimer(a.message,a.receipt),!this._mainScreenLoaded?this._mainScreenLoadPromise=d("WAWebOfflineResumeUtils").loadMainScreen({}):d("WALogger").LOG(p());else{var b=this._firstPreviewReceivedT;if(b!=null){b=Date.now()-b;b<d("WAWebOfflineResumeConst").OFFLINE_PREVIEW_PERIOD_MS?(d("WALogger").LOG(o(),b),this.offlineMessagePreviewCounter+=a.message,this._hasMessagesToDownload=!1,this._finishedDownloading=!0,d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflineCount(a)):!c("gkx")("26258")?d("WALogger").ERROR(n(),b).sendLogs("offline-multiple-preview"):d("WALogger").LOG(m(),b)}this._refreshOfflineCompleteTimer()}};e.getOfflineDeliveryProgress=function(){return this.offlineMessagePreviewCounter===0?this._maxProgress:Math.min(Math.ceil(100*this._decryptedMessageCount/this.offlineMessagePreviewCounter),this._maxProgress)};e.processOfflineSessionComplete=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this;self.setTimeout(function(){d("WAWebBackendApi").frontendFireAndForget("updateChatSortListener",{enable:!0})},3e3);(a=this._offlineCompleteTimer)==null?void 0:a.cancel();this._offlineCompleteTimer=null;if(this._status===d("WAWebOfflineResumeConst").ResumeStatus.COMPLETE){d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logLastStanzaT();void d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.commit();return}else if(this._status===d("WAWebOfflineResumeConst").ResumeStatus.RESUME_WITH_OPEN_TAB){yield d("WAWebMessageQueue").waitForOnlineMessageQueue();yield d("WAWebApiPendingDeviceSync").doPendingDeviceSync();this._setStatus(d("WAWebOfflineResumeConst").ResumeStatus.COMPLETE);d("WAWebCmd").Cmd.offlineDeliveryEnd();return}else this._status===d("WAWebOfflineResumeConst").ResumeStatus.INIT&&(this._hasMessagesToDownload=!1,this._finishedDownloading=!0,d("WAWebCmd").Cmd.handleOfflineProgressUpdate(),!this._mainScreenLoaded&&!this._mainScreenLoadPromise&&(this._mainScreenLoadPromise=d("WAWebOfflineResumeUtils").loadMainScreen({})));yield this._mainScreenLoadPromise;this._offlineStanzaCountAfterOfflineMarker=0;self.setTimeout(function(){b._offlineStanzaCountAfterOfflineMarker>d("WAWebOfflineResumeConst").OFFLINE_STANZA_COUNT_LIMIT&&(d("WALogger").WARN(l(),b._offlineStanzaCountAfterOfflineMarker),d("WAWebOfflineResumeUtils").refreshWindow())},d("WAWebOfflineResumeConst").OFFLINE_STANZA_COUNT_CHECK_TIMEOUT_MS);this._setStatus(d("WAWebOfflineResumeConst").ResumeStatus.COMPLETE);return this._handleOfflineComplete()});function c(b){return a.apply(this,arguments)}return c}();e.isResumeFromRestartComplete=function(){return this._status!==d("WAWebOfflineResumeConst").ResumeStatus.RESUME_ON_RESTART&&this._status!==d("WAWebOfflineResumeConst").ResumeStatus.INIT};e.isResumeFromRestartInProgress=function(){return this._status!==d("WAWebOfflineResumeConst").ResumeStatus.INIT&&!d("WAWebCmd").Cmd.isOfflineDeliveryEnd};e.isResumeOnSocketDisconnectInProgress=function(){return this._status===d("WAWebOfflineResumeConst").ResumeStatus.RESUME_WITH_OPEN_TAB};e.isResumeComplete=function(){return this._status===d("WAWebOfflineResumeConst").ResumeStatus.COMPLETE};e.getHasMessagesToDownload=function(){return this._hasMessagesToDownload};e.getFinishedDownloading=function(){return this.getOfflineDeliveryProgress()===100};e.shouldUseOfflineResumeScreen=function(){return this.offlineMessagePreviewCounter>this._decryptedMessageCount};e.processDecryptResult=function(a){this._refreshOfflineCompleteTimer(),this._decryptedMessageCount+=1,a===d("WAWebHandleMsgTypes.flow").E2EProcessResult.RETRY&&(this._decryptionErrorCount+=1)};e.offlineStanzaReceivedAfterComplete=function(){this.isResumeFromRestartComplete()&&(this._offlineStanzaCountAfterOfflineMarker+=1)};e.newOfflineStanza=function(a,b){d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logAddOfflineSizeBytes(b),d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOldestStanzaTime(a),this._refreshOfflineCompleteTimer()};e.getResumeUIProgressBarType=function(){return!d("WAWebCmd").Cmd.isOfflineDeliveryEnd&&this.offlineMessagePreviewCounter>=u?d("WAWebOfflineResumeTypes.flow").ResumeUIProgressBarType.Toastbar:d("WAWebOfflineResumeTypes.flow").ResumeUIProgressBarType.None};e._refreshOfflineCompleteTimer=function(){this._offlineCompleteTimer&&this._offlineCompleteTimer.onOrAfter(d("WAWebOfflineResumeConst").OFFLINE_STANZA_TIMEOUT_MS)};e._startOfflineCompleteTimer=function(a,b){var c,e=this;(c=this._offlineCompleteTimer)==null?void 0:c.cancel();this._offlineCompleteTimer=new(d("WAShiftTimer").ShiftTimer)(function(){if(e._status!==d("WAWebOfflineResumeConst").ResumeStatus.COMPLETE){d("WALogger").LOG(k());var c=d("WALogger").ERROR(j());d("WAWebHandleOfflineAbProps").isNonBlockingOfflineResumeExpEnabled()&&(c=c.tags("offline-resume-experimental"));c.sendLogs("non-blocking-offline-resume-timeout",{sampling:.01});void e.processOfflineSessionComplete(a+b);e._offlineCompleteTimer=null;d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logMissedOfflineComplete()}});this._offlineCompleteTimer.onOrAfter(d("WAWebOfflineResumeConst").OFFLINE_STANZA_TIMEOUT_MS)};e._handleOfflineComplete=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebMessageQueue").waitForOfflineMessageQueue(),d("WAWebMsgSyncTunnelBatcher").nonBlockingMsgsSyncTunnel.isEnabled()&&(yield d("WAWebMsgSyncTunnelBatcher").nonBlockingMsgsSyncTunnel.drain()),d("WAWebMsgSyncConfiguratedTunnel").isMsgSyncTunnelActive()&&d("WAWebMsgSyncConfiguratedTunnel").msgSyncTunnel.completeUIUpdate(),d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflineDecryptionErrorCount(this._decryptionErrorCount),d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logLastStanzaT(),d("WAWebThreadMetadata").resetThreadMeta(),d("WALogger").LOG(i(),this._decryptionErrorCount),this._decryptionErrorCount=0,yield d("WAWebOfflineResumeUtils").clearOfflineSnapShot(),this._maxProgress=97,yield this._mainScreenLoadPromise,yield d("WAWebOffdStorageUpdateOfflinePeerReceipts").updatePeerReceipts(),this._maxProgress=99,d("WALogger").LOG(h()),d("WAWebCmd").Cmd.offlineDeliveryEnd(),d("WAWebUserPrefsGeneral").setOfflinePushCount(0),this._progressBarTimer.forceRunNow(),this._progressBarTimer.cancel(),d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.commit(),d("WAWebSignalProtocolStore").enablePersistSignalStore(),void d("WAWebOfflineResumeUtils").runReceiptCleanUpLoop(),d("WAWebWorkerSafeBackendApi").workerSafeFireAndForget("processAllOrphanPaymentNotifications"),d("WAWebChatThreadLogging").uploadChatThreadLoggingEvents(),c("WAWebBrokerGlobalAppState").initOrUpdateTracking(d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE),d("WAWebWamMemoryStat").setCurrentMemoryScenario(d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE),self.setTimeout(function(){d("WAWebApiPendingDeviceSync").doPendingDeviceSync()},d("WAWebOfflineResumeConst").OFFLINE_DEVICE_SYNC_DELAY)});function a(){return a.apply(this,arguments)}return a}();return a}();g.getOrCreateInstance=a;g.clearInstance=e;g.OfflineNonBlockingResumeStageManager=w}),98);
__d("WAWebOfflineResumeMainThread",["WAWebABProps","WAWebBlockingOfflineResumeManager","WAWebNonBlockingOfflineResumeManager"],(function(a,b,c,d,e,f,g){function a(a){a.initState({getBlockingStageManager:function(){if(d("WAWebABProps").getABPropConfigValue("web_offline_stage_manager_singleton_enabled")){d("WAWebNonBlockingOfflineResumeManager").clearInstance();return d("WAWebBlockingOfflineResumeManager").getOrCreateInstance()}return new(d("WAWebBlockingOfflineResumeManager").OfflineBlockingResumeStageManager)()},getNonblockingStageManager:function(a){if(d("WAWebABProps").getABPropConfigValue("web_offline_stage_manager_singleton_enabled")){d("WAWebBlockingOfflineResumeManager").clearInstance();return d("WAWebNonBlockingOfflineResumeManager").getOrCreateInstance(a)}return new(d("WAWebNonBlockingOfflineResumeManager").OfflineNonBlockingResumeStageManager)(a)}})}g.setupMainThreadResume=a}),98);
__d("WAWebQplAbpropsConfigValueProvider",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("qpl_enabled")}function b(){return d("WAWebABProps").getABPropConfigValue("qpl_upload_delay")*60}function c(){return d("WAWebABProps").getABPropConfigValue("qpl_sampling_as_string")}function e(){return d("WAWebABProps").getABPropConfigValue("qpl_initial_upload_delay")*60}g.isQplEnabled=a;g.getUploadIntervalInSeconds=b;g.getEventSampling=c;g.getInitialUploadDelayInSeconds=e}),98);
__d("WAWebQplConfig",["WALogger","WAQplConfigTypes","WAWebQplHealthLogger","WAWebQplQuickPerformanceLoggerModule","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL Config has already been initialized"]);h=function(){return a};return a}var i={sampleRate:0,samplingMethod:d("WAQplConfigTypes").QplSampleMethod.EVENT_BASED_SAMPLING},j={sampleRate:1,samplingMethod:d("WAQplConfigTypes").QplSampleMethod.EVENT_BASED_SAMPLING},k,l,m;function n(){return m.isQplEnabled()}function o(){return m.getUploadIntervalInSeconds()}function p(){return m.getInitialUploadDelayInSeconds()}function q(a){if(c("gkx")("26256"))return j;a=d("WAWebQplQuickPerformanceLoggerModule").convertMarkerIdOrEvent(a);a=k.get(a);return a?a:i}function r(){try{var a=m.getEventSampling();a.indexOf("json:")===0&&(a=a.slice(5));a=JSON.parse(a);a=a.sampling;a.forEach(function(a){var b=a[0],c=a[1];a=Math.max(a[2],0);k.set(b,{sampleRate:a,samplingMethod:c})})}catch(a){d("WAWebQplHealthLogger").errorParsingConfig(a)}}function a(a,b){b===void 0&&(b=!1);!l||b===!0?(k=new Map(),m=a,r(),l={isQplEnabled:n,uploadInterval:o,getEventDetails:q,uploadDelay:p}):d("WALogger").WARN(h()).tags("qpl");return l}g.config=a}),98);
__d("WAWebQplInitMd",["Promise","WALogger","WAQplNetwork","WAQplUploader","WAWebApiQplEvents","WAWebQplAbpropsConfigValueProvider","WAWebQplConfig","WAWebQplHealthLogger","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebQplStorageApi","WAWebQplValuesConfig","WAWebXHR","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL is disabled, throwing Killswitch, will clear database"]);i=function(){return a};return a}function a(){var b=babelHelpers.taggedTemplateLiteralLoose(["QPL, got event ",", duration: ","ms, ",""]);a=function(){return b};return b}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL is being initialized"]);j=function(){return a};return a}var k={post:c("WAWebXHR").post};function e(){d("WAQplNetwork").defaultQplNetwork({restInterface:k,isDev:0,qplAccessToken:d("WAWebQplValuesConfig").qplConfigs.accessToken,qplAppId:d("WAWebQplValuesConfig").qplConfigs.appId,qplEndpoint:d("WAWebQplValuesConfig").qplConfigs.endpoint});var a=d("WAWebQplConfig").config(d("WAWebQplAbpropsConfigValueProvider"));if(a.isQplEnabled()){d("WALogger").LOG(j());if(c("gkx")("26256")){var e=new URLSearchParams(window.location.search).get("e2etestname");void d("WAQplUploader").start({sendEvents:function(a){a.forEach(function(a){e!=null&&(a.annotations?a.annotations.e2etestname=e:a.annotations={e2etestname:e})});var b=window.__je2e_recordQPLMarker;b!=null&&typeof b==="function"&&a.forEach(b);return d("WAQplNetwork").defaultQplNetwork().sendEventsOverNetwork(a)},isQplEnabled:function(){return!0},intervalInSeconds:a.uploadInterval(),startDelayInSeconds:a.uploadDelay()},{storageApi:new(d("WAWebQplStorageApi").QplStorageApi)(),healthLogger:d("WAWebQplHealthLogger")})}else d("WAQplUploader").start({isQplEnabled:a.isQplEnabled,sendEvents:function(a){return d("WAQplNetwork").defaultQplNetwork().sendEventsOverNetwork(a)},intervalInSeconds:a.uploadInterval(),startDelayInSeconds:a.uploadDelay()},{storageApi:new(d("WAWebQplStorageApi").QplStorageApi)(),healthLogger:d("WAWebQplHealthLogger")});d("WAWebQplQuickPerformanceLoggerModule").QPL.init(function(a,c){d("WAWebApiQplEvents").add([a]);return(h||(h=b("Promise"))).resolve()},a.getEventDetails,a.isQplEnabled)}else d("WALogger").LOG(i()),d("WAWebQplQuickPerformanceLoggerModule").QPL.throwKillswitch(!0),d("WAWebQplQuickPerformanceLoggerModule").QPL.clearStorage()}g.startQPL=e}),98);
__d("WAWebFetchSubscriptionsQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7886989308096763"}),null);
__d("WAWebFetchSubscriptionsQuery.graphql",["WAWebFetchSubscriptionsQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"data"}],c=[{alias:null,args:[{kind:"Variable",name:"request",variableName:"data"}],concreteType:"XWAGetSubscriptionsResponse",kind:"LinkedField",name:"xwa_get_subscriptions",plural:!1,selections:[{alias:null,args:null,concreteType:"XWASubscriptionInfoType",kind:"LinkedField",name:"subscriptions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_time",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebFetchSubscriptionsQuery",selections:c,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebFetchSubscriptionsQuery",selections:c},params:{id:b("WAWebFetchSubscriptionsQuery_facebookRelayOperation"),metadata:{},name:"WAWebFetchSubscriptionsQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("WAWebFetchSubscriptions",["Promise","WALogger","WAWebBizGatingUtils","WAWebFetchAdAccountToken","WAWebFetchSubscriptionsQuery.graphql","WAWebGraphQLServerError","WAWebNetworkStatus","WAWebRelayClient","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(['fetchSubscriptions: failed as "','"']);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchSubscriptions: success"]);k=function(){return a};return a}var l={type:"error"},m=h!==void 0?h:h=b("WAWebFetchSubscriptionsQuery.graphql");function a(){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(d("WAWebBizGatingUtils").isGetSubscriptionsGraphqlMigrationEnabled()===!1)return(i||(i=b("Promise"))).resolve({type:"not-enabled"});var a=(yield o());if(a.type==="success"){d("WALogger").LOG(k());return a}a.type;d("WALogger").LOG(j(),a.type);return a});return n.apply(this,arguments)}function o(){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebFetchAdAccountToken").fetchToken());if(a.type==="success"){var b=(yield q(a.token));b.type!=="success"?b.type==="auth-failure"?d("WAWebFetchAdAccountToken").markTokenAsInvalid():b.type:b.type;return b}a.type;return a});return p.apply(this,arguments)}function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield c("WAWebNetworkStatus").waitIfOffline({signal:new AbortController().signal});a=(yield d("WAWebRelayClient").fetchQuery(m,{data:{platform:"UNKNOWN"}},{environmentType:"facebook",accessToken:a})["catch"](function(a){if(d("WAWebFetchAdAccountToken").hasGraphQLAuthError(a))return{type:"auth-failure"};if(a instanceof d("WAWebGraphQLServerError").GraphQLServerError)return{type:"graphql-error",error:a}}));a=a==null?void 0:(a=a.xwa_get_subscriptions)==null?void 0:a.subscriptions;return a==null?l:{type:"success",subscriptions:a.map(function(a){var b;return{expirationDate:(b=a.end_time)!=null?b:null,id:(b=a.id)!=null?b:"",status:s(a.status)}})}});return r.apply(this,arguments)}function s(a){if(a==null)return;a=a;switch(a){case"STATUS_ACTIVE":return"ACTIVE";case"STATUS_CANCELED":return"CANCELED";case"STATUS_DISCOUNT_TRIAL":return"DISCOUNT_TRIAL";case"STATUS_EXPIRED":return"EXPIRED";case"STATUS_FREE_TRIAL":return"FREE_TRIAL";case"STATUS_IN_GRACE_PERIOD":return"IN_GRACE_PERIOD";case"STATUS_ON_HOLD":return"ON_HOLD"}}g.fetchSubscriptions=a}),98);
__d("WAWebSubscriptionJob",["WADeprecatedSendIq","WADeprecatedWapParser","WAWap","WAWapDeprecatedSmaxID","WAWebBackendErrors","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("subscriptionsParser",function(a){a.assertTag("iq");a.assertFromServer();a=a.child("subscriptions");var b=[];a.forEachChildWithTag("subscription",function(a){var c=a.attrString("status"),d=a.maybeAttrInt("subscription_end_time");a=a.attrString("id");b.push({id:a,status:c,expirationDate:d})});return b});function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;a=(a=d("WAWap")).wap("iq",{xmlns:"fb:thrift_iq",id:a.generateId(),type:"get",smax_id:a.SMAX_ID(c("WAWapDeprecatedSmaxID").QuerySubscription),to:a.S_WHATSAPP_NET});a=(yield d("WADeprecatedSendIq").deprecatedSendIq(a,h));if(a.success)return a.result;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode,a.errorText)});return i.apply(this,arguments)}g.querySubscriptions=a}),98);
__d("WAWebUserPrefsSmb",["$InternalEnum","WAWebUserPrefsStore"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum").Mirrored(["NextSubscriptionQuery"]);function a(){var a;return(a=parseInt(c("WAWebUserPrefsStore").getUser(h.NextSubscriptionQuery),10))!=null?a:0}function d(a){c("WAWebUserPrefsStore").setUser(h.NextSubscriptionQuery,a)}g.getNextSubscriptionQuery=a;g.setNextSubscriptionQuery=d}),98);
__d("WAWebSubscriptions",["WAExponentialBackoff","WALogger","WAPromiseDelays","WAWebBackendErrors","WAWebBizGatingUtils","WAWebFetchSubscriptions","WAWebPremiumAccessEngine","WAWebSchemaSubscription","WAWebSubscriptionCollection","WAWebSubscriptionJob","WAWebUserPrefsMeUser","WAWebUserPrefsSmb","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["subscription sync: Subscriptions graphql fetch failed, falling back to IQ"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Subscriptions manager, fetch state"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["subscription sync: error PremiumAccessEngine ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Subscriptions manager, got subscriptions: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["subscription sync: error PremiumAccessEngine ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Subscriptions manager, no subscriptions found"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Subscriptions manager, sleeping for "," sec"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Subscriptions manager, non recoverable error, exiting"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Subscriptions manager, will retry in "," ms"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Subscriptions manager pull failed, error: ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Subscriptions manager query failed, retriable error: ",", failCount ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["Subscriptions manager, run"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["Subscriptions manager found scheduled query, not due yet, sleeping for "," sec"]);t=function(){return a};return a}var u={minTimeout:1e3,maxTimeout:16e3,retries:5,signal:new AbortController().signal},v=86400*1e3;function w(){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!d("WAWebBizGatingUtils").subscriptionFetchEnabled())return;var a=d("WAWebUserPrefsSmb").getNextSubscriptionQuery();if(a){a=a-Date.now();a>0&&(d("WALogger").DEV(t(),a/1e3),yield d("WAPromiseDelays").delayMs(a))}try{yield d("WAExponentialBackoff").exponentialBackoff(u,function(a,b){d("WALogger").DEV(s());return A()["catch"](function(c){if(c instanceof d("WAWebBackendErrors").ServerStatusCodeError)switch(c.statusCode){case 500:d("WALogger").WARN(r(),c.message,b);return a(c)}throw c})})}catch(a){d("WALogger").ERROR(q(),a).verbose().devConsole(a).sendLogs("Subscriptions manager run failed");if(a instanceof d("WAWebBackendErrors").ServerStatusCodeError&&a.statusCode===500)d("WALogger").DEV(p(),v);else{d("WALogger").DEV(o());return}}d("WALogger").DEV(n(),v/1e3);d("WAWebUserPrefsSmb").setNextSubscriptionQuery(Date.now()+v);yield d("WAPromiseDelays").delayMs(v);d("WAWebUserPrefsMeUser").getMaybeMeUser()&&w()});return x.apply(this,arguments)}function y(a){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(d("WAWebBizGatingUtils").subscriptionFetchEnabled()){if(a.length===0){d("WALogger").DEV(m());d("WAWebSubscriptionCollection").SubscriptionCollection.reset();try{d("WAWebPremiumAccessEngine").update()}catch(a){d("WALogger").ERROR(l(),a).sendLogs("PremiumAccessEngine")}return}var b=["ACTIVE","FREE_TRIAL","IN_GRACE_PERIOD"];a=a.map(function(a){var c={id:a.id,isAutoRenewing:a.status==="ACTIVE",isDeactivated:!b.includes(a.status),expirationDate:a.expirationDate!==void 0?parseInt(a.expirationDate,10):void 0};a.status==="CANCELED"&&(c.expirationDate||0)>new Date().getTime()/1e3&&(c.isDeactivated=!1);return c});d("WALogger").DEV(k(),JSON.stringify(a));yield d("WAWebSchemaSubscription").getSubscriptionTable().bulkCreateOrMerge(a);d("WAWebSubscriptionCollection").SubscriptionCollection.add(a,{merge:!0});try{d("WAWebPremiumAccessEngine").update()}catch(a){d("WALogger").ERROR(j(),a).sendLogs("PremiumAccessEngine")}}});return z.apply(this,arguments)}function A(){return B.apply(this,arguments)}function B(){B=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!d("WAWebUserPrefsMeUser").getMaybeMeUser())return;d("WALogger").DEV(i());if(d("WAWebBizGatingUtils").isGetSubscriptionsGraphqlMigrationEnabled()){var a=(yield d("WAWebFetchSubscriptions").fetchSubscriptions());if(a.type==="success"&&a.subscriptions!=null)void y(a.subscriptions);else return c()}else{d("WALogger").WARN(h()).sendLogs("PremiumAccessEngine",{sampling:.01});return c()}function c(){return e.apply(this,arguments)}function e(){e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebSubscriptionJob").querySubscriptions());return y(a)});return e.apply(this,arguments)}});return B.apply(this,arguments)}g.runSubscriptionsManager=w;g.applySubscriptions=y}),98);
__d("WAWebWamEnumRetryRejectReason",[],(function(a,b,c,d,e,f){a=Object.freeze({OTHER:0,DOUBLE_CHECKMARK:1,IDENTITY_CHANGE:2,MESSAGE_NOT_EXIST:3});f.RETRY_REJECT_REASON=a}),66);
__d("WAWebE2eRetryRejectWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumDeviceType","WAWebWamEnumInvisibleMessageCategoryType","WAWebWamEnumMessageType","WAWebWamEnumRetryRejectReason"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({E2eRetryReject:[3578,{invisibleMessageCategory:[6,d("WAWebWamEnumInvisibleMessageCategoryType").INVISIBLE_MESSAGE_CATEGORY_TYPE],messageType:[1,d("WAWebWamEnumMessageType").MESSAGE_TYPE],msgRetryCount:[2,d("WAWebWamCodegenUtils").TYPES.INTEGER],retryRejectReason:[3,d("WAWebWamEnumRetryRejectReason").RETRY_REJECT_REASON],retryRevoke:[4,d("WAWebWamCodegenUtils").TYPES.BOOLEAN],senderDeviceType:[5,d("WAWebWamEnumDeviceType").DEVICE_TYPE]},[1,1,1],"regular"]},{E2eRetryReject:[]});g.E2eRetryRejectWamEvent=a}),98);
__d("WAWebMdAppStateDirtyBitsWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({MdAppStateDirtyBits:[2520,{dirtyBitsFalsePositive:[2,d("WAWebWamCodegenUtils").TYPES.BOOLEAN]},[1,20,1e3],"regular"]},{MdAppStateDirtyBits:[]});g.MdAppStateDirtyBitsWamEvent=a}),98);
__d("WAWebWamEnumMdAppStateKeyRotationReasonCode",[],(function(a,b,c,d,e,f){a=Object.freeze({APP_STATE_SYNC_KEY_EXPIRY:1,DEVICE_DEREGISTERATION:2,NO_KEYS:3});f.MD_APP_STATE_KEY_ROTATION_REASON_CODE=a}),66);
__d("WAWebMdAppStateKeyRotationWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMdAppStateKeyRotationReasonCode"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({MdAppStateKeyRotation:[2518,{mdAppStateKeyRotationReason:[1,d("WAWebWamEnumMdAppStateKeyRotationReasonCode").MD_APP_STATE_KEY_ROTATION_REASON_CODE]},[1,20,1e3],"regular"]},{MdAppStateKeyRotation:[]});g.MdAppStateKeyRotationWamEvent=a}),98);
__d("WAWebMdAppStateMessageRangeWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({MdAppStateMessageRange:[2522,{additionalMessagesCount:[1,d("WAWebWamCodegenUtils").TYPES.INTEGER]},[1,20,1e3],"regular"]},{MdAppStateMessageRange:[]});g.MdAppStateMessageRangeWamEvent=a}),98);
__d("WAWebMdAppStateSyncDailyWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MdAppStateSyncDaily:[2300,{crossIndexConflictCount:[11,a.TYPES.INTEGER],invalidActionCount:[4,a.TYPES.INTEGER],keyRotationRemoveCount:[12,a.TYPES.INTEGER],missingKeyCount:[9,a.TYPES.INTEGER],mutationCount:[1,a.TYPES.INTEGER],storedMutationCount:[7,a.TYPES.INTEGER],unsetActionCount:[8,a.TYPES.INTEGER],unsupportedActionCount:[5,a.TYPES.INTEGER],uploadConflictCount:[10,a.TYPES.INTEGER]},[1,1,1],"regular"]},{MdAppStateSyncDaily:[]});g.MdAppStateSyncDailyWamEvent=b}),98);
__d("WAWebMdBootstrapAppStateDataDownloadedWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMdBootstrapHistoryPayloadType","WAWebWamEnumMdBootstrapPayloadType","WAWebWamEnumMdBootstrapStepResult"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MdBootstrapAppStateDataDownloaded:[2294,{mdBootstrapContactsCount:[5,a.TYPES.INTEGER],mdBootstrapHistoryPayloadType:[11,d("WAWebWamEnumMdBootstrapHistoryPayloadType").MD_BOOTSTRAP_HISTORY_PAYLOAD_TYPE],mdBootstrapPayloadSize:[4,a.TYPES.INTEGER],mdBootstrapPayloadType:[2,d("WAWebWamEnumMdBootstrapPayloadType").MD_BOOTSTRAP_PAYLOAD_TYPE],mdBootstrapStepDuration:[6,a.TYPES.INTEGER],mdBootstrapStepResult:[7,d("WAWebWamEnumMdBootstrapStepResult").MD_BOOTSTRAP_STEP_RESULT],mdRegAttemptId:[10,a.TYPES.STRING],mdSessionId:[1,a.TYPES.STRING],mdStorageQuotaBytes:[8,a.TYPES.INTEGER],mdStorageQuotaUsedBytes:[9,a.TYPES.INTEGER],mdTimestamp:[3,a.TYPES.INTEGER]},[1,1,1],"regular"]},{MdBootstrapAppStateDataDownloaded:[]});g.MdBootstrapAppStateDataDownloadedWamEvent=b}),98);
__d("WAWebMdRetryFromUnknownDeviceWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumDeviceType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({MdRetryFromUnknownDevice:[2178,{offline:[2,d("WAWebWamCodegenUtils").TYPES.BOOLEAN],senderType:[1,d("WAWebWamEnumDeviceType").DEVICE_TYPE]},[1,1,1],"regular"]},{MdRetryFromUnknownDevice:[]});g.MdRetryFromUnknownDeviceWamEvent=a}),98);
__d("WAWebWamEnumNotificationActionType",[],(function(a,b,c,d,e,f){a=Object.freeze({SHOW:1,REMOVE:2});f.NOTIFICATION_ACTION_TYPE=a}),66);
__d("WAWebWamEnumNotificationDestinationType",[],(function(a,b,c,d,e,f){a=Object.freeze({INDIVIDUAL:1,GROUP:2,OTHER:3,CHANNEL:4,INTEROP:5,STATUS:6});f.NOTIFICATION_DESTINATION_TYPE=a}),66);
__d("WAWebWamEnumNotificationSourceType",[],(function(a,b,c,d,e,f){a=Object.freeze({PUSH_TRIGGERED:1,MAIN_APP:2,IN_APP:3});f.NOTIFICATION_SOURCE_TYPE=a}),66);
__d("WAWebWamEnumNotificationTypeEnum",[],(function(a,b,c,d,e,f){a=Object.freeze({TEXT_MESSAGE:1,VOICE_MESSAGE:2,FILE_MESSAGE:3,PHOTO_MESSAGE:4,VIDEO_MESSAGE:5,MISSED_VOICE_CALL:6,MISSED_VIDEO_CALL:7,STICKER_MESSAGE:8,REACTION_MESSAGE:9,GROUP_INVITE_MESSAGE:10,REQUEST_MEDIA_REUPLOAD:11,WEB_CLIENT_LOGIN:12,BACKUP:13,KEEP_IN_CHAT:14,PAYMENT:15,POLL_MESSAGE:16,LOCATION_MESSAGE:17,WEB_PAGE_MESSAGE:18,FAILED_UPLOAD:19,GDPR_REPORT:20,INCOMING_VOICE_CALL:21,INCOMING_VIDEO_CALL:22,VIDEO_CALL_UPGRADE:23,WAFFLE:24,XPLAT_MIGRATION:25,OTHER:26,INVITE_JOINED:27,SCHEDULED_CALL_LOCAL_REMINDER:28,PTV_MESSAGE:29,STATUS_MENTION:30,STATUS_REACTION:31,STICKER_PACK_MESSAGE:32,POLL_RESULT_SNAPSHOT_MESSAGE:33});f.NOTIFICATION_TYPE_ENUM=a}),66);
__d("WAWebNotificationDeliveryWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumNotificationActionType","WAWebWamEnumNotificationDestinationType","WAWebWamEnumNotificationSourceType","WAWebWamEnumNotificationTypeEnum"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({NotificationDelivery:[3748,{clientMessageId:[1,a.TYPES.STRING],notificationAction:[2,d("WAWebWamEnumNotificationActionType").NOTIFICATION_ACTION_TYPE],notificationDeliveryT:[3,a.TYPES.INTEGER],notificationDestination:[4,d("WAWebWamEnumNotificationDestinationType").NOTIFICATION_DESTINATION_TYPE],notificationId:[5,a.TYPES.STRING],notificationSource:[6,d("WAWebWamEnumNotificationSourceType").NOTIFICATION_SOURCE_TYPE],threadId:[7,a.TYPES.STRING],uiNotificationType:[8,d("WAWebWamEnumNotificationTypeEnum").NOTIFICATION_TYPE_ENUM]},[1,1,1],"regular"]},{NotificationDelivery:[]});g.NotificationDeliveryWamEvent=b}),98);
__d("WAWebWaOldCodeWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WaOldCode:[3940,{deviceId:[1,d("WAWebWamCodegenUtils").TYPES.STRING]},[1,1,1],"regular"]},{WaOldCode:[]});g.WaOldCodeWamEvent=a}),98);
__d("WAWebWamProcessWorkerData",["WALogger","WAShiftTimer","WAWebAdvMetadataCreationFailureWamEvent","WAWebAdvStoredTimestampExpiredWamEvent","WAWebChatMessageCountsWamEvent","WAWebClockSkewDifferenceTWamEvent","WAWebCommunityHomeActionWamEvent","WAWebCommunityTabActionWamEvent","WAWebDailyWamEvent","WAWebE2eMessageRecvWamEvent","WAWebE2eMessageSendWamEvent","WAWebE2eRetryRejectWamEvent","WAWebFmxActionWamEvent","WAWebForwardSendWamEvent","WAWebGatedMessageReceivedWamEvent","WAWebGraphqlCatalogRequestWamEvent","WAWebGroupJoinCWamEvent","WAWebIncomingMessageDropWamEvent","WAWebKeepInChatNotifWamEvent","WAWebMdAppStateDirtyBitsWamEvent","WAWebMdAppStateKeyRotationWamEvent","WAWebMdAppStateMessageRangeWamEvent","WAWebMdAppStateSyncDailyWamEvent","WAWebMdAppStateSyncMutationStatsWamEvent","WAWebMdBadDeviceSentMessageWamEvent","WAWebMdBootstrapAppStateCriticalDataProcessingWamEvent","WAWebMdBootstrapAppStateDataDownloadedWamEvent","WAWebMdBootstrapDataAppliedWamEvent","WAWebMdBootstrapHistoryDataDownloadedWamEvent","WAWebMdBootstrapHistoryDataStartDownloadingWamEvent","WAWebMdBootstrapHistorySyncStatusAfterPairingWamEvent","WAWebMdCriticalEventWamEvent","WAWebMdDeviceSyncAckWamEvent","WAWebMdFatalErrorWamEvent","WAWebMdGroupParticipantMissAckWamEvent","WAWebMdRetryFromUnknownDeviceWamEvent","WAWebMdSyncdDogfoodingFeatureUsageWamEvent","WAWebMessageReceiveWamEvent","WAWebMessageSecretErrorsWamEvent","WAWebMessageSendWamEvent","WAWebMexEventV2WamEvent","WAWebMexEventWamEvent","WAWebNonMessagePeerDataMediaUploadWamEvent","WAWebNonMessagePeerDataOperationResponseWamEvent","WAWebNonMessagePeerDataRequestWamEvent","WAWebNotificationDeliveryWamEvent","WAWebNotificationEngagementWamEvent","WAWebOfflineCountTooHighWamEvent","WAWebOfflineResumeWamEvent","WAWebPlaceholderActivityWamEvent","WAWebPsBufferUploadWamEvent","WAWebReceiptStanzaReceiveWamEvent","WAWebSignCredentialWamEvent","WAWebSyncdKeyCountWamEvent","WAWebWaOldCodeWamEvent","WAWebWamStorage","WAWebWebDbLoadFromVersionFailureNonAnonymousWamEvent","WAWebWebDbTableUsageWamEvent","WAWebWebDbVersionNonAnonymousWamEvent","WAWebWebcDbOpenWamEvent","WAWebWebcJobInfoWamEvent","WAWebWebcLinkPreviewResponseHandleWamEvent","WAWebWebcOfflineNotificationProcessWamEvent","WAWebWebcPageResumeWamEvent","WAWebWebcPhoneDisconnectedWamEvent","WAWebWebcRawPlatformsWamEvent","WAWebWebcStreamModeChangeWamEvent"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to process worker wam data: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["processWorkerWamData ",""]);i=function(){return a};return a}var j=2e4,k=1e4;function l(a){d("WALogger").LOG(i(),a?"start":"run");m();var b=new(d("WAShiftTimer").ShiftTimer)(function(){c("WAWebWamStorage").processWorkerWamData().then(function(a){a&&l(!1)})["catch"](function(a){d("WALogger").ERROR(h(),a).verbose().devConsole(a)})});b.onOrAfter(a?j:k)}function m(){void b("WAWebOfflineResumeWamEvent").OfflineResumeWamEvent,void b("WAWebOfflineResumeWamEvent").OfflineResumeWamEvent,void b("WAWebMessageSecretErrorsWamEvent").MessageSecretErrorsWamEvent,void b("WAWebMessageSendWamEvent").MessageSendWamEvent,void b("WAWebForwardSendWamEvent").ForwardSendWamEvent,void b("WAWebMexEventV2WamEvent").MexEventV2WamEvent,void b("WAWebWaOldCodeWamEvent").WaOldCodeWamEvent,void b("WAWebChatMessageCountsWamEvent").ChatMessageCountsWamEvent,void b("WAWebNotificationDeliveryWamEvent").NotificationDeliveryWamEvent,void b("WAWebGroupJoinCWamEvent").GroupJoinCWamEvent,void b("WAWebMdAppStateDirtyBitsWamEvent").MdAppStateDirtyBitsWamEvent,void b("WAWebMdBadDeviceSentMessageWamEvent").MdBadDeviceSentMessageWamEvent,void b("WAWebPlaceholderActivityWamEvent").PlaceholderActivityWamEvent,void b("WAWebGatedMessageReceivedWamEvent").GatedMessageReceivedWamEvent,void b("WAWebMessageReceiveWamEvent").MessageReceiveWamEvent,void b("WAWebOfflineCountTooHighWamEvent").OfflineCountTooHighWamEvent,void b("WAWebReceiptStanzaReceiveWamEvent").ReceiptStanzaReceiveWamEvent,void b("WAWebMdRetryFromUnknownDeviceWamEvent").MdRetryFromUnknownDeviceWamEvent,void b("WAWebE2eRetryRejectWamEvent").E2eRetryRejectWamEvent,void b("WAWebMdBootstrapHistoryDataDownloadedWamEvent").MdBootstrapHistoryDataDownloadedWamEvent,void b("WAWebMdBootstrapHistoryDataStartDownloadingWamEvent").MdBootstrapHistoryDataStartDownloadingWamEvent,void b("WAWebClockSkewDifferenceTWamEvent").ClockSkewDifferenceTWamEvent,void b("WAWebGraphqlCatalogRequestWamEvent").GraphqlCatalogRequestWamEvent,void b("WAWebSignCredentialWamEvent").SignCredentialWamEvent,void b("WAWebMdBootstrapHistorySyncStatusAfterPairingWamEvent").MdBootstrapHistorySyncStatusAfterPairingWamEvent,void b("WAWebWebcJobInfoWamEvent").WebcJobInfoWamEvent,void b("WAWebFmxActionWamEvent").FmxActionWamEvent,void b("WAWebE2eMessageSendWamEvent").E2eMessageSendWamEvent,void b("WAWebMdDeviceSyncAckWamEvent").MdDeviceSyncAckWamEvent,void b("WAWebMdGroupParticipantMissAckWamEvent").MdGroupParticipantMissAckWamEvent,void b("WAWebMexEventWamEvent").MexEventWamEvent,void b("WAWebAdvStoredTimestampExpiredWamEvent").AdvStoredTimestampExpiredWamEvent,void b("WAWebSyncdKeyCountWamEvent").SyncdKeyCountWamEvent,void b("WAWebMdAppStateSyncMutationStatsWamEvent").MdAppStateSyncMutationStatsWamEvent,void b("WAWebNonMessagePeerDataMediaUploadWamEvent").NonMessagePeerDataMediaUploadWamEvent,void b("WAWebNonMessagePeerDataOperationResponseWamEvent").NonMessagePeerDataOperationResponseWamEvent,void b("WAWebNonMessagePeerDataRequestWamEvent").NonMessagePeerDataRequestWamEvent,void b("WAWebWebcLinkPreviewResponseHandleWamEvent").WebcLinkPreviewResponseHandleWamEvent,void b("WAWebE2eMessageRecvWamEvent").E2eMessageRecvWamEvent,void b("WAWebIncomingMessageDropWamEvent").IncomingMessageDropWamEvent,void b("WAWebAdvMetadataCreationFailureWamEvent").AdvMetadataCreationFailureWamEvent,void b("WAWebWebcRawPlatformsWamEvent").WebcRawPlatformsWamEvent,void b("WAWebWebcPageResumeWamEvent").WebcPageResumeWamEvent,void b("WAWebWebcPhoneDisconnectedWamEvent").WebcPhoneDisconnectedWamEvent,void b("WAWebWebcStreamModeChangeWamEvent").WebcStreamModeChangeWamEvent,void b("WAWebPsBufferUploadWamEvent").PsBufferUploadWamEvent,void b("WAWebWebDbTableUsageWamEvent").WebDbTableUsageWamEvent,void b("WAWebWebDbVersionNonAnonymousWamEvent").WebDbVersionNonAnonymousWamEvent,void b("WAWebWebDbLoadFromVersionFailureNonAnonymousWamEvent").WebDbLoadFromVersionFailureNonAnonymousWamEvent,void b("WAWebWebcDbOpenWamEvent").WebcDbOpenWamEvent,void b("WAWebMdBootstrapAppStateCriticalDataProcessingWamEvent").MdBootstrapAppStateCriticalDataProcessingWamEvent,void b("WAWebMdCriticalEventWamEvent").MdCriticalEventWamEvent,void b("WAWebMdSyncdDogfoodingFeatureUsageWamEvent").MdSyncdDogfoodingFeatureUsageWamEvent,void b("WAWebMdAppStateMessageRangeWamEvent").MdAppStateMessageRangeWamEvent,void b("WAWebMdBootstrapDataAppliedWamEvent").MdBootstrapDataAppliedWamEvent,void b("WAWebMdBootstrapAppStateDataDownloadedWamEvent").MdBootstrapAppStateDataDownloadedWamEvent,void b("WAWebMdFatalErrorWamEvent").MdFatalErrorWamEvent,void b("WAWebMdAppStateKeyRotationWamEvent").MdAppStateKeyRotationWamEvent,void b("WAWebMdAppStateSyncDailyWamEvent").MdAppStateSyncDailyWamEvent,void b("WAWebCommunityHomeActionWamEvent").CommunityHomeActionWamEvent,void b("WAWebCommunityTabActionWamEvent").CommunityTabActionWamEvent,void b("WAWebDailyWamEvent").DailyWamEvent,void b("WAWebKeepInChatNotifWamEvent").KeepInChatNotifWamEvent,void b("WAWebNotificationEngagementWamEvent").NotificationEngagementWamEvent,void b("WAWebWebcOfflineNotificationProcessWamEvent").WebcOfflineNotificationProcessWamEvent}g.processWorkerWamData=l}),98);
__d("WAWebStartBackend",["Promise","WAComms","WAGzip","WALogger","WAPromiseTimeout","WAWebABProps","WAWebABPropsWamGlobals","WAWebAdvDeviceInfoCheckJob","WAWebApiContact","WAWebBackendApi","WAWebBackfillLidOriginCtwa","WAWebBackgroundSyncAction","WAWebBackgroundSyncReporter","WAWebBizAgentAction","WAWebBizChatAssignmentAction","WAWebBizGatingUtils","WAWebBizUpdateContactsWithVerifiedNamesAction","WAWebBootstrapPremiumMessages","WAWebChatThreadLogging","WAWebCmd","WAWebCommonCTWADataSharing","WAWebCommsConfig","WAWebCommsHandleStanza","WAWebCrashlog","WAWebDBCreateLidPnMappings","WAWebDBSignalStorage","WAWebDbEncryptionKey","WAWebDeleteStatusAction","WAWebEventsWaitForMain","WAWebFeatureDetectionSwSupport","WAWebFtsClient","WAWebHistorySyncNotificationUtils","WAWebHistorySyncProgress","WAWebInboxFiltersGatingUtils","WAWebInitFavoritesFromStorage","WAWebInitFromStorage","WAWebInitWaitForEvents","WAWebInitializeBots","WAWebJestE2ELogUtils","WAWebL10NCountryCodes","WAWebLid1X1ThreadAccountMigrations","WAWebLocalStorage","WAWebLogoutReason","WAWebLogoutReasonConstants","WAWebMediaHosts","WAWebMergeContactRecordsById","WAWebModelStorage","WAWebNewsletterGatingUtils","WAWebNewsletterMetadataInitFromStorage","WAWebOffdStorage","WAWebOfflineHandler","WAWebOfflineResumeMainThread","WAWebPageLoadLogging","WAWebPassiveModeManager","WAWebPersistedJobManager","WAWebPremiumAccessEngine","WAWebPrimaryFeatures","WAWebPushNotificationsGatingUtils","WAWebQplInitMd","WAWebRegisterPassiveTasks","WAWebSWBus","WAWebSWBusActions","WAWebServerPropsModel","WAWebSignalStoreApi","WAWebSingleSignalSession","WAWebSocketModel","WAWebStatusCollection","WAWebStickerDownloadGatingUtils","WAWebSubscribePushManagerAction","WAWebSubscriptions","WAWebSyncBootstrap","WAWebSyncContactsJob","WAWebSyncd","WAWebTasksDefinitions","WAWebTimeSpentLoggingSession","WAWebTos","WAWebUpdateServerPropsJob","WAWebUserPrefsGeneral","WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsKeys","WAWebUserPrefsLocales","WAWebUserPrefsMeUser","WAWebUserPrefsMultiDevice","WAWebWamGlobals","WAWebWamOfflineResumeReporter","WAWebWamProcessWorkerData","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime","cr:10195","cr:10196","cr:6167"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] Failed to close existing notifications, error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] Failed to request stopComms for service worker, error: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["init worker: error while calling startIndexer from initialSetup: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["init worker: startIndexer from initialSetup"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][continueProgressiveHistorySyncProcessingV2] start backend"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[bootstrap] need to sync critical data: false"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[startBackend]: SignalStorageDb isUsingAccountIdentifierForSignalStorage ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[startBackend]: connected as ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["startBackendRegistered: chatd user not registered"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["storage initialization error, logging out"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[StartBackend] initial setup failed:"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[StartBackend]: complete initial setup"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["[StartBackend]: start initial setup"]);u=function(){return a};return a}(e=b("cr:6167"))==null?void 0:e.registerListeners();d("WAWebCmd").Cmd.once("offline_delivery_end",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{d("WALogger").LOG(u()),yield E(),d("WALogger").LOG(t())}catch(a){d("WALogger").LOG(s()).devConsole(a)}}));d("WAWebCmd").Cmd.on("storage_initialization_error",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!d("WAWebUserPrefsMultiDevice").isRegistered()&&d("WAWebLogoutReason").getPrevLogoutReasonCode()===d("WAWebLogoutReasonConstants").LOGOUT_REASON_CODE.CLIENT_FATAL)return;d("WALogger").LOG(r());yield d("WAWebSocketModel").Socket.clearCredentialsAndStoredData(d("WAWebLogoutReasonConstants").LogoutReason.ClientFatalError);d("WAWebJestE2ELogUtils").maybeLogToJestE2eJSConsole("logging out due to storage initialization error");d("WAWebCmd").Cmd.logout()}));d("WAWebCmd").Cmd.on("open_socket_stream",function(){!d("WAWebCmd").Cmd.isOfflineDeliveryEnd?d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logSocketConnectT():(d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.resetEvent(),d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logSocketConnectT())});var v=function(){void c("WAWebCommonCTWADataSharing").fetchDataSharingSettingAndUpdateModel()};function a(){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WAWebPageLoadLogging").startPageLoadQplMeasure("startBackend");var a=(yield x());d("WAWebPageLoadLogging").endPageLoadQplMeasure("startBackend");return a});return w.apply(this,arguments)}function x(){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebSignalStoreApi").waSignalStore.getRegistrationInfo();if(!a){d("WALogger").LOG(q());return}d("WALogger").LOG(p(),d("WAWebUserPrefsMeUser").assertGetMe());try{d("WALogger").LOG(o(),d("WAWebSingleSignalSession").isUsingAccountIdentifierForSignalStorage()),d("WAWebSingleSignalSession").isSignalStorageUsingAccountIdentifierAbProps()&&(yield d("WAWebApiContact").warmUpAllLidPnMappings(),yield d("WAWebDBSignalStorage").migrateSignalStorageDb()),yield d("WAPromiseTimeout").promiseTimeout(d("WAWebModelStorage").initialize(),20*1e3),yield d("WAPromiseTimeout").promiseTimeout(d("WAWebOffdStorage").initialize(),20*1e3),d("WAWebCrashlog").registerCrashlogUploadIsUserInExternalBetaFunction(d("WAWebUserPrefsGeneral").getWhatsAppWebExternalBetaJoinedIdb)}catch(a){d("WAWebCmd").Cmd.storageInitializationError()}d("WAWebInitWaitForEvents").initOfflineResumeWaitForEvents();void d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.setLastPushCompleteTimestamp();void G();yield d("WAWebPrimaryFeatures").loadPrimaryFeatures();d("WAWebMediaHosts").mediaHosts.maybeLoadMediaConnFromStorage();yield I();B();d("WAWebABPropsWamGlobals").setAbPropDependingGlobalWamAttributes();d("WAWebLid1X1ThreadAccountMigrations").checkIfMigrationEnabled();c("WAWebLocalStorage")==null?void 0:c("WAWebLocalStorage").setItem(d("WAWebUserPrefsKeys").KEYS.DB_SCHEMA_OPTIMIZATION_ENABLED,String(d("WAWebABProps").getABPropConfigValue("web_apply_latest_db_schema_optimization_enabled")));d("WAWebABProps").getABPropConfigValue("language_and_time_web")&&(yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").KEYS.LANG_FROM_USER,d("WAWebUserPrefsLocales").getUserLangPref()||"en"));yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(d("WAWebUserPrefsKeys").KEYS.LANG_FROM_PHONE,d("WAWebUserPrefsLocales").getPhoneLangPref()||"en");d("WAWebTimeSpentLoggingSession").restoreTimeSpentSession();yield d("WAWebChatThreadLogging").initChatThreadLogging();yield d("WAWebPersistedJobManager").startWebPersistedJobManager();d("WAWebOfflineResumeMainThread").setupMainThreadResume(d("WAWebOfflineHandler").OfflineMessageHandler);yield d("WAComms").startHandlingRequests();yield d("WAWebDbEncryptionKey").DbEncKeyStore.waitForFinalDbMsgEncKey();yield d("WAWebPassiveModeManager").PassiveTaskManager.waitForPassiveTaskEnd();yield d("WAWebSyncd").initialize();a=!(yield c("WAWebSyncBootstrap").isCriticalDataSynced());a?yield c("WAWebSyncBootstrap").syncCriticalData():d("WALogger").LOG(n());d("WAWebBackendApi").frontendFireAndForget("handleDeferredMessages",{});d("WAWebServerPropsModel").ServerProps.serverPropsVersion==null&&(yield d("WAWebUpdateServerPropsJob").queryServerProps());yield C();void d("WAWebTos").TosManager.run();d("WAWebQplInitMd").startQPL();yield d("WAWebPremiumAccessEngine").initialize(d("WAWebBizGatingUtils").getBillingPremiumAccessConfig());void d("WAWebSubscriptions").runSubscriptionsManager();void d("WAWebSubscribePushManagerAction").updatePushManager();void d("WAWebBackgroundSyncAction").updatePeriodicBackgroundSyncRegistration();void d("WAWebMergeContactRecordsById").mergeContactRecordsById();v();void d("WAWebInitializeBots").initializeBots();d("WAWebABProps").getABPropConfigValue("web_auto_exposure_expo_key_test")});return y.apply(this,arguments)}function z(a){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a={passive:!1,pull:!0});d("WAWebPageLoadLogging").startPageLoadQplMeasure("startWebComms");a=d("WAWebCommsConfig").getCommsConfig(a);yield c("WAWebEventsWaitForMain")();d("WAComms").startComms(c("WAWebCommsHandleStanza"),a,function(a){return(h||(h=b("Promise"))).resolve(d("WAGzip").inflate(a))});yield d("WAComms").waitForConnection();d("WAWebPageLoadLogging").endPageLoadQplMeasure("startWebComms")});return A.apply(this,arguments)}function B(){var a;a=(a=d("WAWebUserPrefsMeUser").getMaybeMeUser())==null?void 0:a.user;a!=null&&d("WAWebWamGlobals").Global.set({psCountryCode:d("WAWebL10NCountryCodes").getCountryShortcodeByPhone(a)})}function C(){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;void d("WAWebBizUpdateContactsWithVerifiedNamesAction").applyContactBusinessProps();void (a=d("WAWebInitFromStorage")).restoreLabels();void a.restoreQuickReplies();void a.restoreLabelAssociations();void a.restoreCarts();void d("WAWebBootstrapPremiumMessages").restorePremiumMessages();d("WAWebBootstrapPremiumMessages").bindPremiumMessageListeners();yield a.restoreArchiveV2Settings();yield a.restoreAgents().then(d("WAWebBizAgentAction").initializeAgentLog);d("WAWebBizChatAssignmentAction").checkOrphanAssignments();void a.restoreChatAssignments()});return D.apply(this,arguments)}function E(){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){void d("WAWebDBCreateLidPnMappings").flushLidPnMappingsToDb(),d("WALogger").LOG(m()),void c("WAWebSyncBootstrap").continueProgressiveHistorySyncProcessingV2(d("WAWebHistorySyncNotificationUtils").HistorySyncScheduleSource.BackendStart),d("WALogger").LOG(l()),d("WAWebFtsClient").ftsClient.startIndexer()["catch"](function(a){d("WALogger").WARN(k(),a)}),void d("WAWebStatusCollection").StatusCollection.sync().then(function(){void d("WAWebDeleteStatusAction").clearStatusForRemovedContact()}),d("WAWebTasksDefinitions").registerTasks(),d("WAWebPushNotificationsGatingUtils").canSupportOfflineNotifications()&&(void d("WAWebBackgroundSyncReporter").setPushNotificationInteractionStatus(),d("WAWebWamProcessWorkerData").processWorkerWamData(!0)),yield d("WAWebSyncContactsJob").runSyncDirtyContactsJob(),void d("WAWebBackfillLidOriginCtwa").maybeBackfillLidOriginCtwa(),void d("WAWebInitFromStorage").restoreRecentStickers(),void d("WAWebInitFromStorage").restoreFavoriteStickers(),void d("WAWebAdvDeviceInfoCheckJob").scheduleAdvDeviceInfoCheck(),void d("WAWebInitFromStorage").restoreCommunityActivity(),void d("WAWebHistorySyncProgress").updateHistorySyncProgressModel(),void d("WAWebInitFromStorage").restoreMediaUploadResult(),void d("WAWebInitFromStorage").restoreUnjoinedSubgroups(),d("WAWebNewsletterGatingUtils").isNewsletterEnabled()&&void d("WAWebNewsletterMetadataInitFromStorage").restoreNewsletterMetadata(),d("WAWebInboxFiltersGatingUtils").inboxFavoritesEnabled()&&void d("WAWebInitFavoritesFromStorage").restoreFavorites(),d("WAWebStickerDownloadGatingUtils").isStickerDownloadM1Enabled()&&void d("WAWebInitFromStorage").restoreStickerDownload(),d("WAWebWorkerSafeBackendApi").workerSafeFireAndForget("restoreCTWASuggestions"),d("WAWebWorkerSafeBackendApi").workerSafeFireAndForget("loadQuickPromotions",{trigger:"app-launch"}),d("WAWebWorkerSafeBackendApi").workerSafeFireAndForget("fetchAdEntryPointsConfiguration",{trigger:"app-launch"})});return F.apply(this,arguments)}function G(){return H.apply(this,arguments)}function H(){H=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(d("WAWebPushNotificationsGatingUtils").canSupportOfflineNotifications()&&c("WAWebFeatureDetectionSwSupport").supported){var a;((a=window.navigator.serviceWorker)==null?void 0:a.controller)&&(yield c("WAWebSWBus").request(window.navigator.serviceWorker.controller,c("WAWebSWBusActions").STOP_COMMS)["catch"](function(a){d("WALogger").WARN(j(),a)}));(a=window.navigator.serviceWorker)==null?void 0:(a=a.ready)==null?void 0:a.then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(a=(yield a==null?void 0:a.getNotifications==null?void 0:a.getNotifications()))!=null?a:[];a.forEach(function(a){return a.close()})});return function(b){return a.apply(this,arguments)}}())["catch"](function(a){d("WALogger").WARN(i(),a)})}});return H.apply(this,arguments)}function I(){return J.apply(this,arguments)}function J(){J=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a={pull:!0};yield d("WAWebRegisterPassiveTasks").registerPassiveTaskForStartUp();yield z(a)});return J.apply(this,arguments)}g.startBackend=a;g.startWebComms=z}),98);
__d("WAWebHandleAboutNotification",["$InternalEnum","Promise","WADeprecatedWapParser","WALogger","WAWap","WAWebApiContact","WAWebCommsWapMd","WAWebJidToWid","WAWebLidAwareContactsDB","WAWebStatusContactAction","WAWebTextStatusCollection","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleAboutNotification: unhandled notification of\n        type ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleAboutNotification: get status update for unknown contact ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["could not find side contact hash for status update operation"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleAboutNotification: received ","\n    for ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);n=function(){return a};return a}var o=b("$InternalEnum")({CHANGE:"change",SIDE_LIST_CHANGE:"sideListChange",UNKNOWN:"unknown"}),p=new(c("WADeprecatedWapParser"))("incomingAboutNotification",function(a){a.assertTag("notification");var b={stanzaId:a.attrString("id")},c=a.hasChild("set")&&a.child("set");if(c&&!c.hasAttr("hash"))return babelHelpers["extends"]({type:o.CHANGE,from:d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("from")),pushname:a.attrString("notify"),content:c.contentString(),ts:a.attrTime("t")},b);return c&&c.hasAttr("hash")?babelHelpers["extends"]({type:o.SIDE_LIST_CHANGE,from:d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("from")),hash:c.attrString("hash")},b):babelHelpers["extends"]({type:o.UNKNOWN,from:a.attrString("from")},b)});function q(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").LOG(l(),a.type,a.from.toString());switch(a.type){case o.SIDE_LIST_CHANGE:var b=(yield c("WAWebLidAwareContactsDB").equals(["contactHash"],a.hash));if(b.length===0)d("WALogger").WARN(k());else{b=d("WAWebWidFactory").createUserWid(b[0].id);var e=d("WAWebTextStatusCollection").TextStatusCollection.get(b);b=e==null?null:d("WAWebStatusContactAction").getStatus(b).then(function(a){e.set({status:a.status})});yield b}break;case o.CHANGE:b=a.from;if(!(b instanceof c("WAWebWid")))break;var f=[b];if(b.isLid()){b=d("WAWebApiContact").getPhoneNumber(d("WAWebWidFactory").toUserWid(b));b!=null&&f.push(b)}for(b of f){f=d("WAWebTextStatusCollection").TextStatusCollection.get(b);f&&a.content!=null?f.status=a.content:d("WALogger").WARN(j(),b.toLogString())}break;default:d("WALogger").WARN(i(),a.type);break}return d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(a.stanzaId),to:a.from instanceof c("WAWebWid")?d("WAWebCommsWapMd").JID(a.from):d("WAWap").CUSTOM_STRING(a.from),"class":"notification",type:"status"})});return r.apply(this,arguments)}function a(a){var c=p.parse(a);if(c.error){d("WALogger").DEV(n(),a.toString());d("WALogger").ERROR(m(),c.error.toString());return(h||(h=b("Promise"))).reject(c.error)}return q(c.success)}g.handleAboutNotification=a}),98);
__d("WAWebHandleBusinessNameChange",["Promise","WADeprecatedSendIq","WADeprecatedWapParser","WALogger","WAWap","WAWebApiVerifiedBusinessName","WAWebBizCreateBizStateChangeNotificationMsgsAction","WAWebBizGatingUtils","WAWebBizUpdateContactsWithVerifiedNamesAction","WAWebCommonParsersVerifiedName","WAWebCommsWapMd","WAWebContactCollection","WAWebHandleBusinessRemoval","WAWebLidMigrationUtils","WAWebModelStorageUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["verified name notification not found"]);i=function(){return a};return a}function j(a,c,e,f,g,i){var j=d("WAWebContactCollection").ContactCollection.get(a);j!=null&&d("WAWebBizUpdateContactsWithVerifiedNamesAction").updateContactsWithVerifiedNames([{id:a,name:e,level:c,isApi:f,isSmb:g,privacyMode:i}],[j]);return(h||(h=b("Promise"))).resolve()}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebModelStorageUtils").getStorage().lock(["verified-business-name"],function(){return d("WAWebApiVerifiedBusinessName").createOrUpdateVerifiedBusinessName(a.wid,{level:a.level,serial:parseInt(a.serial||"0",10),name:a.verifiedName,isApi:a.isApi,isSmb:a.isSmb,privacyMode:a.privacyMode?{actualActors:a.privacyMode.actualActors,hostStorage:a.privacyMode.hostStorage,privacyModeTs:a.privacyMode.privacyModeTs}:null})});var e=[],f=d("WAWebContactCollection").ContactCollection.get(a.wid);f!=null&&e.push(c("WAWebBizCreateBizStateChangeNotificationMsgsAction")(a.wid,{isBusiness:f.isBusiness,privacyMode:f.privacyMode},{isBusiness:!0,privacyMode:a.privacyMode}));e.push(j(a.wid,a.level,a.verifiedName,a.isApi,a.isSmb,a.privacyMode));yield (h||(h=b("Promise"))).all(e)});return l.apply(this,arguments)}var m=new(c("WADeprecatedWapParser"))("verifiedNameParser",function(a){return c("WAWebCommonParsersVerifiedName")(a.child("verified_name"))});function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;b=(b=d("WAWap")).wap("iq",{to:b.S_WHATSAPP_NET,type:"get",xmlns:"w:biz",id:b.generateId()},b.wap("verified_name",{jid:d("WAWebCommsWapMd").DEVICE_JID(a)}));a=(yield d("WADeprecatedSendIq").deprecatedSendIq(b,m));if(!a.success){if(a.errorCode===404){d("WALogger").WARN(i());return}throw c("err")("Could not send IQ in retrieveBusinessDetails")}return a.result});return o.apply(this,arguments)}function a(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.type!=="verified_name_hash")throw c("err")("Invalid notification type");var e=d("WAWebContactCollection").ContactCollection.resolveWidsFromHash(a.hash);if(!e)return!1;e=(yield (h||(h=b("Promise"))).all(e.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield n(a));return{wid:a,verifiedName:b}});return function(b){return a.apply(this,arguments)}}())));e.length&&(yield (h||(h=b("Promise"))).all(e.map(function(b){var c=b.wid;b=b.verifiedName;if(b){var e=b.name,f=b.level,g=b.serial,h=b.isApi,i=b.isSmb,j=b.privacyMode;return r({wid:c,verifiedName:e,level:f,stanzaId:a.stanzaId,ts:a.ts,serial:g,isApi:h,isSmb:i,privacyMode:j})}else if(b===void 0)return d("WAWebHandleBusinessRemoval").handleBusinessRemoval(c,a.stanzaId,a.ts)})));return!0});return p.apply(this,arguments)}function e(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.jid,c=a.stanzaId,e=a.ts;a=a.verifiedName;var f=a.serial;f=f===void 0?"":f;var g=a.level,h=a.isApi,i=a.isSmb,j=a.privacyMode;a=a.name;if(!a){var k;if(((k=d("WAWebContactCollection").ContactCollection.get(b))==null?void 0:k.verifiedName)!=null){a=((k=d("WAWebContactCollection").ContactCollection.get(b))==null?void 0:k.verifiedName)||""}else{k=(yield n(b));if(!k)return;a=k.name}}return r({verifiedName:a,level:g,stanzaId:c,ts:e,wid:b,serial:f,isApi:h,isSmb:i,privacyMode:j})});return q.apply(this,arguments)}function r(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=d("WAWebBizGatingUtils").isLidMigrationForVnameEnabled()?d("WAWebLidMigrationUtils").getPnAndLidToUpdate(a.wid):[a.wid];yield (h||(h=b("Promise"))).all(c.map(function(b){return k(babelHelpers["extends"]({},a,{wid:b}))}))});return s.apply(this,arguments)}g.handleVerifiedBusinessNameNotificationHash=a;g.handleVerifiedBusinessNameNotificationContact=e;g.processDetailsChangeLidAware=r}),98);
__d("WAWebHandleBusinessProductCatalogNotification",["Promise","WAWebCatalogCollection","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=d("WAWebCatalogCollection").CatalogCollection.get(d("WAWebUserPrefsMeUser").getMeUser().toString());if(c){var e=[];a.forEach(function(a){e.push(c.refreshProduct(a))});yield (h||(h=b("Promise"))).all(e)}});return i.apply(this,arguments)}function c(a){var c=d("WAWebCatalogCollection").CatalogCollection.get(d("WAWebUserPrefsMeUser").getMeUser().toString());if(c==null?void 0:c.collections)for(var e=0;e<a.collectionIds.length;e++){var f=c.collections.get(a.collectionIds[e]);f&&f.set(a.reviewStatuses[e])}return(h||(h=b("Promise"))).resolve()}g.handleProductNotification=a;g.handleCollectionNotification=c}),98);
__d("WAWebHandleBusinessProfile",["Promise","WAWebBusinessProfileCollection","WAWebContactCollection","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.from;a=d("WAWebWidFactory").createWidFromWidLike(a.toString());yield k([a])});return i.apply(this,arguments)}function c(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.hash;a=d("WAWebContactCollection").ContactCollection.resolveWidsFromHash(a);if(!a)return!1;yield k(a);return!0});return j.apply(this,arguments)}function k(a){a=a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=Boolean(d("WAWebBusinessProfileCollection").BusinessProfileCollection.getValid(a));a=(yield d("WAWebBusinessProfileCollection").BusinessProfileCollection.update(a));a=Array.isArray(a)?a:[a];for(a of a)b||(a.stale=!0)});return function(b){return a.apply(this,arguments)}}());return(h||(h=b("Promise"))).all(a)}g.handleBusinessProfile=a;g.handleBusinessProfileHash=c}),98);
__d("WAWebHandleCTWASuggestion",["WALogger","WATimeUtils","WAWebBackendApi","WAWebBizGatingUtils","WAWebSchemaCTWASuggestion","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleCTWASuggestion: suggestion de-duped"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleCTWASuggestion: expired"]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a.type==="banner"?yield k(a):(a.type,yield m(a))});return j.apply(this,arguments)}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebBizGatingUtils").adsActionBannersEnabled())return;if(!d("WATimeUtils").isInFuture(a.expiresAt)){d("WALogger").WARN(i()).devConsole(a);return}try{yield d("WAWebSchemaCTWASuggestion").getCTWASuggestionTable().create(a)}catch(b){d("WALogger").WARN(h()).devConsole(a);return}d("WAWebBackendApi").frontendFireAndForget("newCTWASuggestion",{suggestion:a})});return l.apply(this,arguments)}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebSchemaCTWASuggestion").getCTWASuggestionTable().remove(a.id),d("WAWebBackendApi").frontendFireAndForget("revokeCTWASuggestion",{suggestion:a})});return n.apply(this,arguments)}g.handleCTWASuggestion=a}),98);
__d("WAWebHandlePrivacySettingsNotification",["WAWebBackendApi"],(function(a,b,c,d,e,f,g){function a(a){d("WAWebBackendApi").frontendFireAndForget("smbDataSharingSettingUpdate",{smbDataSharingSettingValue:a})}g.handleSmbDataSharingSettingNotification=a}),98);
__d("WAWebHandleBusinessNotification",["WADeprecatedWapParser","WALogger","WASmaxBizCtwaAdAccountNonceNotificationRPC","WAWap","WAWebBackendJobsCommon","WAWebBizGatingUtils","WAWebCTWABizAccessTokenNonceManager","WAWebCTWAParsePrivacy","WAWebCTWAParseSuggestion","WAWebCommonParsersVerifiedName","WAWebHandleBusinessNameChange","WAWebHandleBusinessProductCatalogNotification","WAWebHandleBusinessProfile","WAWebHandleBusinessRemoval","WAWebHandleCTWASuggestion","WAWebHandlePrivacySettingsNotification","WAWebJidToWid","WAWebOrchestratorNonPersistedJob","WAWebProductTypes.flow","WAWebSubscriptions","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["business notification received, node: ",""]);j=function(){return a};return a}var k=new(c("WADeprecatedWapParser"))("businessNotificationParser",function(a){a.assertTag("notification");var b=a.attrString("id"),e=a.attrWapJid("from"),f=a.attrTime("t");b={stanzaId:b,from:e,ts:f};if(a.hasChild("remove")){e=a.child("remove");return e.hasAttr("jid")?babelHelpers["extends"]({type:"remove_jid",jid:d("WAWebJidToWid").chatJidToChatWid(e.attrChatJid("jid"))},b):babelHelpers["extends"]({type:"remove_hash",hash:e.attrString("hash")},b)}else if(a.hasChild("verified_name")){e=a.child("verified_name");return e.hasAttr("jid")?babelHelpers["extends"]({type:"verified_name_jid",jid:d("WAWebJidToWid").chatJidToChatWid(e.attrChatJid("jid")),verifiedName:c("WAWebCommonParsersVerifiedName")(e)},b):babelHelpers["extends"]({type:"verified_name_hash",hash:e.attrString("hash")},b)}else if(a.hasChild("profile")){f=a.child("profile");e=f.maybeAttrString("hash");return e?babelHelpers["extends"]({type:"profile_hash",hash:e},b):babelHelpers["extends"]({type:"profile"},b)}else if(a.hasChild("product_catalog")){f=a.child("product_catalog");if(f.hasChild("product")){var g=[];f.forEachChildWithTag("product",function(a){a=a.child("id").contentString();g.push(a)});return babelHelpers["extends"]({type:"product",productsIds:g},b)}else if(f.hasChild("collection")){var h=[],i=[];f.forEachChildWithTag("collection",function(a){if(a.hasChild("status_info")){var b;b={reviewStatus:(b=d("WAWebProductTypes.flow").asProductReviewType(a.child("status_info").child("status").contentString()))!=null?b:"APPROVED",rejectReason:(b=a.child("status_info").maybeChild("reject_reason"))==null?void 0:b.contentString(),commerceUrl:(b=a.child("status_info").maybeChild("commerce_url"))==null?void 0:b.contentString()};h.push(a.attrString("id"));i.push(b)}});return babelHelpers["extends"]({type:"collection",collectionIds:h,reviewStatuses:i},b)}}else if(a.hasChild("subscriptions")){e=a.child("subscriptions");var j=[];e.forEachChildWithTag("subscription",function(a){var b=a.attrString("status"),c=a.maybeAttrInt("subscription_end_time");a=a.attrString("id");j.push({id:a,status:b,expirationDate:c})});return babelHelpers["extends"]({type:"subscriptions",subscriptions:j},b)}else if(a.hasChild("ctwa_suggestion")){if(d("WAWebBizGatingUtils").adsActionBannersEnabled()){f=d("WAWebCTWAParseSuggestion").parseCTWASuggestion(a);if(f!=null)return babelHelpers["extends"]({type:"ctwa_suggestion",suggestion:f},b)}}else if(a.hasChild("privacy")){if(d("WAWebBizGatingUtils").smbDataSharingConsentEnabled()){e=d("WAWebCTWAParsePrivacy").parseCTWAPrivacy(a);if(e!=null)return babelHelpers["extends"]({type:"privacy",privacy:e},b)}}else if(a.hasChild("wa_ad_account_nonce")){f=d("WASmaxBizCtwaAdAccountNonceNotificationRPC").receiveNonceNotificationRPC(a.node());return babelHelpers["extends"]({type:"wa_ad_account_nonce",nonce:d("WAWebCTWABizAccessTokenNonceManager").castToNonce(f.parsedRequest.waAdAccountNonceElementValue)},b)}return babelHelpers["extends"]({type:"unknown"},b)});function l(a,b,c){return c?d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(a),to:b,"class":"notification",type:"business"},d("WAWap").wap("user",{side_list:"out"})):d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(a),to:b,"class":"notification",type:"business"})}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(j(),a);var b=k.parse(a);if(b.error){d("WALogger").DEV(i(),a.toString());d("WALogger").ERROR(h(),b.error.toString());throw b.error}a=b.success;switch(a.type){case"verified_name_hash":b=(yield d("WAWebHandleBusinessNameChange").handleVerifiedBusinessNameNotificationHash(a));return l(a.stanzaId,a.from,!b);case"verified_name_jid":yield d("WAWebHandleBusinessNameChange").handleVerifiedBusinessNameNotificationContact(a);return l(a.stanzaId,a.from,!1);case"remove_hash":b=(yield d("WAWebHandleBusinessRemoval").handleBusinessRemovalNotificationHash(a));return l(a.stanzaId,a.from,!b);case"remove_jid":yield d("WAWebHandleBusinessRemoval").handleBusinessRemovalNotificationContact(a);return l(a.stanzaId,a.from,!1);case"profile":yield d("WAWebHandleBusinessProfile").handleBusinessProfile(a);return l(a.stanzaId,a.from,!1);case"profile_hash":b=(yield d("WAWebHandleBusinessProfile").handleBusinessProfileHash(a));return l(a.stanzaId,a.from,!b);case"product":yield d("WAWebHandleBusinessProductCatalogNotification").handleProductNotification(a.productsIds);return l(a.stanzaId,a.from,!1);case"collection":yield d("WAWebHandleBusinessProductCatalogNotification").handleCollectionNotification(a);return l(a.stanzaId,a.from,!1);case"subscriptions":yield d("WAWebSubscriptions").applySubscriptions(a.subscriptions);return l(a.stanzaId,a.from,!1);case"ctwa_suggestion":yield d("WAWebHandleCTWASuggestion").handleCTWASuggestion(a.suggestion);return l(a.stanzaId,a.from,!1);case"privacy":d("WAWebHandlePrivacySettingsNotification").handleSmbDataSharingSettingNotification(a.privacy.smbDataSharingSetting);return l(a.stanzaId,a.from,!1);case"wa_ad_account_nonce":d("WAWebCTWABizAccessTokenNonceManager").setNonceFromPushNotification(a.nonce);return l(a.stanzaId,a.from,!1);default:a.type;return l(a.stanzaId,a.from,!1)}});return n.apply(this,arguments)}function a(a){var b=d("WAWebBackendJobsCommon").getNonCriticalNotificationPriority(Boolean(a.attrs.offline));return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("handleBusinessNotification",function(a){return m(a.node)},{priority:b}).waitUntilCompleted({node:a})}g.handleBusinessNotification=m;g.handleBusinessNotificationJob=a}),98);
__d("WAWebHandleChatState",["WAWebApiChat","WAWebApiContact","WAWebChangePresenceHandlerAction","WAWebDBCreateLidPnMappings","WAWebJidToWid","WAWebLid1X1MigrationGating","WAWebLidMigrationUtils","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.jid;a=a.status;b=d("WAWebJidToWid").userJidToUserWid(b);var e;if(d("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isLidMigrated()){var f=d("WAWebLidMigrationUtils").toLid(b);if(f){f=(yield d("WAWebApiChat").getChatRecordByAccountLid(f));f[0]&&(e=d("WAWebWidFactory").createWid(f[0].id))}}else{e=b;if(b.isLid()&&d("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.shouldApplyNonMigratedMessagingRules()){f=(yield d("WAWebApiContact").getPhoneNumber(b));f&&(yield c("WAWebChangePresenceHandlerAction")({id:f,type:a}))}}e&&(yield c("WAWebChangePresenceHandlerAction")({id:e,type:a}));return"NO_ACK"});return function(b){return a.apply(this,arguments)}}();e=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.jid,e=a.status,f=a.participant;a=a.participantPn;b=d("WAWebJidToWid").chatJidToChatWid(b);f=d("WAWebJidToWid").userJidToUserWid(f);a=a==null?null:d("WAWebJidToWid").userJidToUserWid(a);a!=null&&(yield d("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:[{lid:f,pn:a}],flushImmediately:!0}));yield c("WAWebChangePresenceHandlerAction")({id:b,type:e,participant:f});return"NO_ACK"});return function(b){return a.apply(this,arguments)}}();g.handleIndividualChatState=a;g.handleGroupChatState=e}),98);
__d("WAWebProcessPhoneNumberChange",["WAJids","WAWebBackendApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=d("WAJids").validateChatJid(a.toJid());b=d("WAJids").validateChatJid(b.toJid());if(a==null||b==null)return;return d("WAWebBackendApi").frontendFireAndForget("updateNoteJidAction",{oldJid:a,newJid:b})});return h.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebHandleContactNotification",["Promise","WADeprecatedWapParser","WALogger","WANullthrows","WAWap","WAWebBackendJobsCommon","WAWebChangeProfilePicThumb","WAWebChatCollection","WAWebContactCollection","WAWebContactGetters","WAWebContactSyncBridge","WAWebContactTextStatusBridge","WAWebDBCreateLidPnMappings","WAWebHandleSingleMsg","WAWebJidToWid","WAWebMsgKey","WAWebMsgType","WAWebOrchestratorNonPersistedJob","WAWebPresenceCollection","WAWebProcessPhoneNumberChange","WAWebProfilePicConstants","WAWebSchemaChat","WAWebStatusContactAction","WAWebTextStatusCollection","WAWebTextStatusGatingUtils","WAWebUpdateTextStatusForContact","WAWebUserPrefsMeUser","WAWebViewMode.flow","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleContactsNotification: unhandled notification of type ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["received contact sync notification"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleContactsNotification: an update command does not include jid"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["notification.oldJid is null"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(['Unexpected "contacts" notification']);o=function(){return a};return a}var p=new(c("WADeprecatedWapParser"))("incomingContactsNotification",function(a){a.assertTag("notification");var b=a.attrString("id"),c=a.attrWapJid("from"),e=a.attrTime("t"),f=a.attrString("t");c={from:c,ts:e,rawTs:f,stanzaId:b};if(a.hasChild("update")){var g=a.child("update");if(g.hasAttr("jid"))return babelHelpers["extends"]({type:"update",jid:d("WAWebJidToWid").userJidToUserWid(g.attrUserJid("jid"))},c);else if(g.hasAttr("hash")){e=d("WAWebContactCollection").ContactCollection.findFirst(function(a){return((a=d("WAWebContactGetters").getUserhash(a))==null?void 0:a.slice(0,4))===g.attrString("hash")});return e==null?babelHelpers["extends"]({type:"empty",jid:null},c):babelHelpers["extends"]({type:"update",jid:e.id},c)}return babelHelpers["extends"]({type:"empty",jid:null},c)}else if(a.hasChild("add")){f=a.child("add");return babelHelpers["extends"]({type:"add",hash:f.hasContent()?f.contentBytes():null,jid:null},c)}else if(a.hasChild("remove")){b=a.child("remove");return babelHelpers["extends"]({type:"remove",jid:d("WAWebJidToWid").userJidToUserWid(b.attrUserJid("jid"))},c)}else if(a.hasChild("modify")){e=a.child("modify");return babelHelpers["extends"]({type:"modify",jid:d("WAWebJidToWid").userJidToUserWid(e.attrUserJid("new")),oldJid:d("WAWebJidToWid").userJidToUserWid(e.attrUserJid("old")),lid:e.maybeAttrUserJid("new_lid")?d("WAWebJidToWid").userJidToUserWid(e.attrUserJid("new_lid")):null,oldLid:e.maybeAttrUserJid("old_lid")?d("WAWebJidToWid").userJidToUserWid(e.attrUserJid("old_lid")):null},c)}else if(a.hasChild("sync")){f=a.child("sync");return babelHelpers["extends"]({type:"sync",after:f.attrTime("after"),jid:null},c)}d("WALogger").WARN(o());return babelHelpers["extends"]({type:"empty",jid:null},c)});function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b.type!=="modify")throw c("err")("Error: genContactChangeNotificationMsg invalid type");else{var e=d("WAWebUserPrefsMeUser").getMeUser(),f=c("WANullthrows")(b.oldJid),g=c("WANullthrows")(b.jid);if(b.lid!=null&&b.oldLid!=null){var h=b.oldLid,i=b.lid;h=[f,g,h,i]}else h=[f,g];return{id:new(c("WAWebMsgKey"))({remote:a,fromMe:!1,id:yield c("WAWebMsgKey").newId()}),from:a,subtype:"change_number",viewMode:d("WAWebViewMode.flow").ViewModeType.VISIBLE,t:b.ts,to:e,type:"notification_template",kind:d("WAWebMsgType").MsgKind.NotificationTemplate,templateParams:h}}});return r.apply(this,arguments)}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b.oldJid!=null&&b.jid!=null&&(yield c("WAWebProcessPhoneNumberChange")(b.oldJid,b.jid));b=(yield q(a,b));yield d("WAWebHandleSingleMsg").handleSingleMsg(a,b,"changeNumberNotification")});return t.apply(this,arguments)}function u(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.oldJid){var c=a.oldJid,e=a.jid,f=a.oldLid!=null?a.oldLid:null,g=a.lid!=null?a.lid:null,i=[],j=d("WAWebChatCollection").ChatCollection.get(c);j&&i.push({id:c.toString(),changeNumberNewJid:e.toString(),changeNumberOldJid:void 0});j=d("WAWebChatCollection").ChatCollection.get(e);j&&i.push({id:e.toString(),changeNumberNewJid:void 0,changeNumberOldJid:c.toString()});d("WAWebSchemaChat").getChatTable().bulkCreateOrMerge(i).then(function(){i.forEach(function(a){var b=d("WAWebChatCollection").ChatCollection.get(a.id);if(b){var c=a.changeNumberNewJid;a=a.changeNumberOldJid;b.changeNumberNewJid=c!=null?d("WAWebWidFactory").createWid(c):void 0;b.changeNumberOldJid=a!=null?d("WAWebWidFactory").createWid(a):void 0}})});if(f!=null&&g!=null){yield d("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:[{lid:(j=d("WAWebWidFactory")).toUserWid(f),pn:j.toUserWid(c)},{lid:j.toUserWid(g),pn:j.toUserWid(e)}],flushImmediately:!0})}yield (h||(h=b("Promise"))).all([s(c,a),s(e,a)])}else d("WALogger").LOG(n()).devConsole(a)});return v.apply(this,arguments)}function w(a){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=p.parse(a);if(c.error){d("WALogger").DEV(m(),a.toString());d("WALogger").ERROR(l(),c.error.toString());throw c.error}a=c.success;c=a.jid;switch(a.type){case"update":if(!c){d("WALogger").WARN(k());return n(a)}var e=d("WAWebPresenceCollection").PresenceCollection.get(c);e&&e.reset();var f=d("WAWebTextStatusCollection").TextStatusCollection.get(c);e=f==null?null:d("WAWebStatusContactAction").getStatus(d("WAWebWidFactory").toUserWid(c)).then(function(a){f.set({status:a.status})});c=d("WAWebContactCollection").ContactCollection.get(c);var g;c&&d("WAWebTextStatusGatingUtils").receiveTextStatusEnabled()&&(g=d("WAWebContactTextStatusBridge").getTextStatus(c.id,c.textStatusLastUpdateTime).then(function(a){var b=a.text,c=a.emoji,e=a.ephemeralDurationSeconds,f=a.lastUpdateTime;a=a.id;return d("WAWebUpdateTextStatusForContact").updateTextStatusForContact(a,b,c,e,f!=null?Number(f):void 0)}));c=d("WAWebChangeProfilePicThumb").changeProfilePicThumb(a.jid,d("WAWebProfilePicConstants").ProfilePicCommand.Set);yield (h||(h=b("Promise"))).all([c,e,g]);return n(a);case"modify":yield u(a);return n(a);case"sync":d("WALogger").LOG(j()).tags("contact-sync");yield d("WAWebContactSyncBridge").doFullContactSync();return n(a);default:d("WALogger").LOG(i(),a.type);return n(a)}function n(a,b){return d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(a.stanzaId),to:a.from,"class":"notification",type:"contacts"},b)}});return x.apply(this,arguments)}function a(a){var b=d("WAWebBackendJobsCommon").getNonCriticalNotificationPriority(Boolean(a.attrs.offline));return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("handleContactNotification",function(a){return w(a.node)},{priority:b}).waitUntilCompleted({node:a})}g["default"]=a}),98);
__d("WAWebHandleDeviceNotification",["Promise","WADeprecatedWapParser","WAJids","WALogger","WAWap","WAWebAdvHandlerApi","WAWebApiPendingDeviceSync","WAWebCommsWapMd","WAWebDBCreateLidPnMappings","WAWebJidToWid","WAWebLidAwareContactsDB","WAWebOfflineDeviceCache","WAWebOfflineHandler","WAWebSyncDeviceAdvDeviceListJob","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleDevicesNotification - unknown notification type ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleDevicesNotification - update error: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["could not find side contact hash for device update operation"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleDevicesNotification - remove error: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleDevicesNotification - add error: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(['Unknown Devices Notification: Devices notification without "remove" and "add" nodes']);p=function(){return a};return a}var q={add:"add",remove:"remove",update:"update"},r=new(c("WADeprecatedWapParser"))("incomingDevicesNotification",function(a){a.assertTag("notification");a.assertTag("notification");a.assertAttr("type","devices");var b,c,e,f=[],g=null;if(a.hasChild("remove"))c=q.remove,b=a.child("remove");else if(a.hasChild("add"))c=q.add,b=a.child("add");else if(a.hasChild("update"))c=q.update,b=a.child("update");else{d("WALogger").WARN(p());throw a.createParseError("Failed to parse devices notification")}if(c===q.add||c===q.remove){var h=b.maybeChild("key-index-list");if(!h)throw a.createParseError("key index node is required to handle device add or remove notification");var i=h.attrTime("ts");if(c===q.remove&&!i)throw a.createParseError("timestamp is required to handle device remove notification");e={ts:i,signedKeyIndexBytes:c===q.add?h.contentBytes():null};i=b.child("device");h=d("WAJids").extractDeviceId(i.attrDeviceJid("jid"));var j=i.hasAttr("lid")?d("WAJids").extractDeviceId(i.attrDeviceJid("lid")):null;i=i.hasAttr("key-index")?i.attrInt("key-index"):null;f=[{id:h,keyIndex:i}];j!=null&&(g=[{id:j,keyIndex:i}])}return{type:c,stanzaId:a.attrString("id"),hash:b.attrString(c===q.update?"hash":"device_hash"),lidHash:b.hasAttr("device_lid_hash")?b.attrString(c===q.update?"hash":"device_lid_hash"):null,user:d("WAWebJidToWid").deviceJidToUserWid(a.attrDeviceJid("from")),lidUser:a.hasAttr("lid")?d("WAWebJidToWid").deviceJidToUserWid(a.attrDeviceJid("lid")):null,deviceList:f,lidDeviceList:g,keyIndex:e}});function a(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=r.parse(a);if(e.error){d("WALogger").DEV(o(),a.toString());d("WALogger").ERROR(n(),e.error.toString());throw e.error}var f=e.success,g=d("WAWap").wap("ack",{to:d("WAWebCommsWapMd").USER_JID(f.user),id:d("WAWap").CUSTOM_STRING(f.stanzaId),"class":"notification"});a={wid:f.user,devices:{deviceList:f.deviceList,keyIndex:f.keyIndex},type:f.type,hash:f.hash};e=f.lidUser!=null&&f.lidHash!=null&&f.lidDeviceList!=null?{wid:f.lidUser,devices:{deviceList:f.lidDeviceList,keyIndex:f.keyIndex},type:f.type,hash:f.lidHash}:null;a=[a,e].filter(Boolean);e=[];f.lidUser!=null&&f.user!=null&&e.push({lid:f.lidUser,pn:f.user});if(!d("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete()){e.length>0&&(yield d("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:e,flushImmediately:!1}));a.forEach(function(a){a=a.wid;return d("WAWebOfflineDeviceCache").OfflinePendingDeviceCache.addOfflinePendingDevice(a.toString(),g)});return"NO_ACK"}e.length>0&&(yield d("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:e,flushImmediately:!0}));yield (h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.wid,e=a.devices,g=a.type;a=a.hash;if(d("WAWebOfflineHandler").OfflineMessageHandler.isResumeOnSocketDisconnectInProgress())yield d("WAWebApiPendingDeviceSync").addUserToPendingDeviceSync([b.toString()]);else if(f.type===q.add)try{yield d("WAWebAdvHandlerApi").handleADVDeviceNotification({wid:b,devices:e,type:g})}catch(a){d("WALogger").WARN(m(),a)}else if(f.type===q.remove)try{yield d("WAWebAdvHandlerApi").handleADVDeviceNotification({wid:b,devices:e,type:g})}catch(a){d("WALogger").WARN(l(),a)}else if(f.type===q.update){b=(yield c("WAWebLidAwareContactsDB").equals(["contactHash"],a));if(b.length===0)d("WALogger").WARN(k());else try{yield d("WAWebSyncDeviceAdvDeviceListJob").syncDeviceListJob([d("WAWebWidFactory").createWid(b[0].id)],"notification",null)}catch(a){d("WALogger").WARN(j(),a)}}else d("WALogger").WARN(i(),f.type)});return function(b){return a.apply(this,arguments)}}()));return g});return s.apply(this,arguments)}g.handleDevicesNotification=a}),98);
__d("WAWebHandleDeviceSwitchingNotification",["WADeprecatedWapParser","WALogger","WATimeUtils","WAWap","WAWebABProps","WAWebBackendApi","WAWebUserPrefsMeUser","WAWebWaOldCodeWamEvent","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["OTP code has expired, expiry time: "," and current time: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["DeviceSwitching notification received, node: ",""]);k=function(){return a};return a}var l=new(c("WADeprecatedWapParser"))("incomingDeviceSwitchingNotificationParser",function(a){a.assertTag("notification");var b=a.attrString("id"),c=a.attrWapJid("from");a=a.child("wa_old_registration");var d=a.attrString("code"),e=a.attrTime("expiry_t"),f=a.attrTime("ts");a=a.attrString("device_id");return{stanzaId:b,from:c,code:d,expiryTime:e,ts:f,deviceId:a}});function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(k(),a);var b=l.parse(a);if(b.error){d("WALogger").DEV(j(),a.toString());d("WALogger").ERROR(i(),b.error.toString());throw b.error}a=b.success;b=d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(a.stanzaId),"class":"notification",type:"registration",to:a.from});if(!d("WAWebABProps").getABPropConfigValue("web_device_switching"))return b;var c=a.expiryTime,e=d("WATimeUtils").unixTime();if(e>c){d("WALogger").LOG(h(),c,e);return b}c=a.code;d("WAWebBackendApi").frontendFireAndForget("showDeviceSwitchOtp",{otpCode:c});e=d("WAWebUserPrefsMeUser").assertGetMe().getDeviceId().toString();new(d("WAWebWaOldCodeWamEvent").WaOldCodeWamEvent)({deviceId:e}).commit();return b});return m.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebHandleDigestKey",["Promise","WADeprecatedWapParser","WALogger","WAWap","WAWebDigestKeyJob"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);j=function(){return a};return a}var k=new(c("WADeprecatedWapParser"))("digestKeyParser",function(a){a.assertTag("notification");a.assertAttr("type","encrypt");a.assertFromServer();a.child("digest").assertTag("digest");return{stanzaId:a.attrString("id")}});function a(a){var c=k.parse(a);if(c.error){d("WALogger").DEV(j(),a.toString());d("WALogger").ERROR(i(),c.error.toString());return(h||(h=b("Promise"))).reject(c.error)}a=c.success;var e=d("WAWap").wap("ack",{to:d("WAWap").S_WHATSAPP_NET,id:d("WAWap").CUSTOM_STRING(a.stanzaId),"class":"notification"});return d("WAWebDigestKeyJob").digestKey().then(function(){return e})}g["default"]=a}),98);
__d("WAWebHandleDisappearingModeNotification",["WADeprecatedWapParser","WAJobOrchestratorTypes","WALogger","WAWap","WAWebCommsWapMd","WAWebJidToWid","WAWebOrchestratorNonPersistedJob","WAWebUpdateDisappearingModeForContact","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleDisappearingModeNotification: received d=",":t=","\n    for ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);j=function(){return a};return a}var k=new(c("WADeprecatedWapParser"))("disappearingModeNotification",function(a){a.assertTag("notification");var b=a.child("disappearing_mode");return{stanzaId:a.attrString("id"),from:d("WAWebJidToWid").deviceJidToDeviceWid(a.attrDeviceJid("from")),duration:b.attrInt("duration",0),ts:b.attrTime("t")}});function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.duration,c=a.from,e=a.stanzaId;a=a.ts;d("WALogger").LOG(h(),b,a,c.toString()).tags("DM","DDM");yield d("WAWebUpdateDisappearingModeForContact").updateDisappearingModeForContact(c,b,a);return d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(e),to:d("WAWebCommsWapMd").JID(c),"class":"notification",type:"disappearing_mode"})});return m.apply(this,arguments)}function a(a){var b=d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW;return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("handleDisappearingModeNotification",function(){var b=k.parse(a);if(b.error){d("WALogger").DEV(j(),a.toString()).tags("DM","DDM");d("WALogger").ERROR(i(),b.error.toString());return Promise.reject(b.error)}return l(b.success)},{priority:b}).waitUntilCompleted({node:a})}g.handleDisappearingModeNotificationJob=a}),98);
__d("WAWebLazyPoll",["WALogger","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] manually resumed"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] manually paused"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] polling"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] active resuming"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] inactive slowing down"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] inactive paused"]);m=function(){return a};return a}a=function(){function a(a){var b=a.name,d=a.handler;d=d===void 0?null:d;var e=a.interval;e=e===void 0?3600:e;var f=a.restingInterval;f=f===void 0?18e3:f;var g=a.sleepWhileResting;g=g===void 0?!1:g;a=a.randomIntervalExtension;a=a===void 0?0:a;this.$6=!1;this.$7=!1;this.$1=b;this.$2=e*1e3;this.$3=f*1e3;this.$4=g;this.$5=a*1e3;this.$12();if(typeof d==="function")this.poll(d);else if(d!=null)throw c("err")("Poll handler must be a function or null")}var e=a.prototype;e.$13=function(){return Math.ceil(Math.random()*this.$5)};e.$14=function(){return(this.$7?this.$3:this.$2)+this.$13()};e.$12=function(){var a=this;document.addEventListener("visibilitychange",function(){if(a.$11)return;document.hidden?a.$4?(d("WALogger").LOG(m(),a.$1),a.$15()):(d("WALogger").LOG(l(),a.$1),a.$7=!0):a.$9&&(d("WALogger").LOG(k(),a.$1),a.$16())},!1)};e.$17=function(){if(!this.$10)return!0;var a=Date.now()-this.$10;return a>=this.$14()};e.$15=function(){self.clearTimeout(this.$8),this.$6=!1};e.$16=function(){this.$7=!1,this.$6=!0,this.$18()};e.$18=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=this;this.$6&&(this.$17()&&(d("WALogger").LOG(j(),this.$1),yield this.$9(),this.$10=Date.now()),self.clearTimeout(this.$8),this.$8=self.setTimeout(function(){return a.$18()},this.$14()))});function c(){return a.apply(this,arguments)}return c}();e.poll=function(a){if(this.$9!=null){this.resume();return}this.$9=a;this.$6=!0;this.$18()};e.pause=function(){d("WALogger").LOG(i(),this.$1),this.$11=!0,this.$15()};e.resume=function(){d("WALogger").LOG(h(),this.$1),this.$11=!1,this.$16()};return a}();g["default"]=a}),98);
__d("WAWebUpdaterUpdatePoll",["WALogger","WATimeUtils","WAWebLazyPoll","WAWebUpdater","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Updater: hard update failed with ",""]);h=function(){return a};return a}e=1800;f=3600;var i=e*.1,j=Date.now(),k=d("WATimeUtils").DAY_MILLISECONDS*3,l=d("WATimeUtils").DAY_MILLISECONDS*30,m={WEB:"web",PWA:"web",DARWIN:"darwin",MACSTORE:"darwin-store",DARWIN_BETA:"darwin-beta"};c=new(c("WAWebLazyPoll"))({name:"updater",interval:e,restingInterval:f,randomIntervalExtension:i});function a(){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=Date.now()-j;if(a>l){d("WAWebUpdater").Updater.update(void 0,!1,15e3)["catch"](function(a){d("WALogger").LOG(h(),a).sendLogs("thirty day hard expiration failed")});return!0}else if(a>k){d("WAWebUpdater").Updater.showSoftUpdateBanner();return!0}return!0});return n.apply(this,arguments)}g.PLATFORMS=m;g.updatePoll=c;g.checkForUpdates=a}),98);
__d("WAWebHandleFailure",["Promise","WAComms","WADeprecatedWapParser","WALogger","WAWebCmd","WAWebE2ETestPairingConstants","WAWebFailureErrorCodes","WAWebJestE2ELogUtils","WAWebL10N","WAWebLocalStorage","WAWebLogoutReasonConstants","WAWebSocketModel","WAWebUpdater","WAWebUpdaterUpdatePoll","WAWebUpdaterVersion","WAWebWamPlatform","asyncToGeneratorRuntime","err","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["failure reason "," not implemented yet"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleFailure: got failure code ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleFailure: got failure code ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Incorrect temporary ban data "," ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Client too old or bad user agent, attempting to update the app"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["received failure stanza, reason: ",", logging out"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["received failure stanza, reason: ",", logging out"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose([""," parsing ",""]);p=function(){return a};return a}var q=new(c("WADeprecatedWapParser"))("failureParser",function(a){a.assertTag("failure");return{reason:a.attrInt("reason",400,599),location:a.attrString("location"),code:a.hasAttr("code")?a.attrInt("code"):null,expire:a.hasAttr("expire")?a.attrInt("expire"):null,message:a.maybeAttrString("message"),url:a.maybeAttrString("url"),logoutMessageHeader:a.maybeAttrString("logout_message_header"),logoutMessageSubtext:a.maybeAttrString("logout_message_subtext"),logoutMessageLocale:a.maybeAttrString("logout_message_locale")}});function a(a){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){c("gkx")("26256")&&(d("WAWebJestE2ELogUtils").maybeLogToJestE2eJSConsole("received failure stanza, "+a.toString()),c("WAWebLocalStorage")==null?void 0:c("WAWebLocalStorage").removeItem(d("WAWebE2ETestPairingConstants").PAIRING_ATTEMPT_ONGOING_KEY));var e=q.parse(a);if(e.error){d("WALogger").ERROR(p(),e.error.toString(),a.toString());return(h||(h=b("Promise"))).reject(e.error)}switch(e.success.reason){case d("WAWebFailureErrorCodes").FAILURE_REASON.REASON_LOCKED:d("WALogger").LOG(o(),e.success.reason);a=e.success;var f=a.logoutMessageHeader,g=a.logoutMessageSubtext;a=a.logoutMessageLocale;var r=null;a===c("WAWebL10N").getNormalizedLocale()&&(f!=null||g!=null)&&(r={logoutMessageHeader:f,logoutMessageSubtext:g});yield d("WAWebSocketModel").Socket.clearCredentialsAndStoredData(d("WAWebLogoutReasonConstants").LogoutReason.AccountLocked,r);d("WAWebCmd").Cmd.logout();break;case d("WAWebFailureErrorCodes").FAILURE_REASON.REASON_NOT_AUTHORIZED:case d("WAWebFailureErrorCodes").FAILURE_REASON.REASON_BANNED:d("WALogger").LOG(n(),e.success.reason);yield d("WAWebSocketModel").Socket.clearCredentialsAndStoredData();d("WAWebCmd").Cmd.logout();break;case d("WAWebFailureErrorCodes").FAILURE_REASON.REASON_CLIENT_TOO_OLD:case d("WAWebFailureErrorCodes").FAILURE_REASON.REASON_BAD_USER_AGENT:d("WALogger").LOG(m());a=d("WAWebUpdaterVersion").SANITIZED_VERSION_STR;f=d("WAWebUpdaterUpdatePoll").PLATFORMS[d("WAWebWamPlatform").getWamPlatform()];f==="web"?d("WAWebUpdater").Updater.update(a,!1,0):d("WAWebUpdater").Updater.update(void 0,!1,0);d("WAComms").stopComms();break;case d("WAWebFailureErrorCodes").FAILURE_REASON.REASON_TEMP_BANNED:g=e.success;r=g.code;f=g.expire;a=g.message;g=g.url;if(r!=null&&f!=null)d("WAWebCmd").Cmd.onTemporaryBan({banned:!0,code:r,message:a,url:g,expire:f});else{d("WALogger").ERROR(l(),r,f);throw c("err")("handleFailure: wrong temp ban data")}break;case d("WAWebFailureErrorCodes").FAILURE_REASON.REASON_GENERIC_FAILURE:case d("WAWebFailureErrorCodes").FAILURE_REASON.REASON_INTERNAL_SERVER_ERROR:case d("WAWebFailureErrorCodes").FAILURE_REASON.REASON_EXPERIMENTAL:d("WALogger").WARN(k(),e.success.reason);break;case d("WAWebFailureErrorCodes").FAILURE_REASON.REASON_SERVICE_UNAVAILABLE:d("WALogger").WARN(j(),e.success.reason);d("WAWebCmd").Cmd.showServiceUnavailableError();break;default:d("WALogger").WARN(i(),e.success.reason);return(h||(h=b("Promise"))).reject(c("err")("failure reason "+e.success.reason+" not implemented yet"))}});return r.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebHandleGrowthNotification",["WADeprecatedWapParser","WALogger","WATimeUtils","WAWap","WAWebABProps","WAWebChatFindBridge","WAWebChatMessageCountsWamEvent","WAWebChatThreadLogging","WAWebCreateChat","WAWebHandleSingleMsg","WAWebJidToWid","WAWebMsgKey","WAWebMsgType","WAWebNotificationDeliveryWamEvent","WAWebUserPrefsMeUser","WAWebViewMode.flow","WAWebWamEnumNotificationTypeEnum","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to create new chat thread with receiver - {receiverId}"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to create new chat thread with receiver - {receiverId}"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid receiver id"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid receiver id"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Growth notification received, node: ",""]);n=function(){return a};return a}var o={contacts:"contacts","w:growth":"w:growth"},p=new(c("WADeprecatedWapParser"))("incomingGrowthNotificationParser",function(a){a.assertTag("notification");var b=a.attrString("id"),c=a.attrWapJid("from"),d=a.attrEnum("type",o);b={stanzaId:b,from:c,type:d};if(a.hasChild("invite")){c=a.child("invite");if(c.hasChild("receiver")){d=c.child("receiver");return babelHelpers["extends"]({receiverId:d.hasAttr("user")?d.attrUserJid("user"):null,reason:d.hasAttr("reason")?d.attrString("reason"):""},b)}}return b});function a(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(n(),a);var b=p.parse(a);if(b.error){d("WALogger").DEV(m(),a.toString());d("WALogger").ERROR(l(),b.error.toString());throw b.error}a=b.success;b=a.type;if(d("WAWebABProps").getABPropConfigValue("chat_upsell_for_1on1_invites")&&b==="contacts"){if(!("receiverId"in a)||a.receiverId==null){d("WALogger").DEV(k());d("WALogger").ERROR(j());return}var c=d("WAWebJidToWid").userJidToUserWid(a.receiverId),e="reason"in a&&a.reason==="clicked_invite_link";yield r(c,e)}return d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(a.stanzaId),"class":"notification",type:b,to:a.from})});return q.apply(this,arguments)}function r(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("WAWebChatFindBridge").findLocal(a.toString()));if(c==null){yield d("WAWebCreateChat").createChat({chatId:a},"createChatOnInviteAccept");c=(yield d("WAWebChatFindBridge").findLocal(a.toString()));if(c==null){d("WALogger").DEV(i());d("WALogger").ERROR(h());return}a=c.id;b=(yield t(a,b));c=(yield d("WAWebChatThreadLogging").getChatThreadID(c.id.toJid()));new(d("WAWebNotificationDeliveryWamEvent").NotificationDeliveryWamEvent)({threadId:c,uiNotificationType:d("WAWebWamEnumNotificationTypeEnum").NOTIFICATION_TYPE_ENUM.INVITE_JOINED}).commit();yield d("WAWebHandleSingleMsg").handleSingleMsg(a,b);new(d("WAWebChatMessageCountsWamEvent").ChatMessageCountsWamEvent)({isInviteCreatedThread:!0}).commit()}return});return s.apply(this,arguments)}function t(a,b){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return{id:new(c("WAWebMsgKey"))({remote:a,fromMe:!1,id:yield c("WAWebMsgKey").newId()}),from:a,subtype:"sender_invite",to:d("WAWebUserPrefsMeUser").getMeUser(),type:"notification_template",kind:d("WAWebMsgType").MsgKind.NotificationTemplate,viewMode:d("WAWebViewMode.flow").ViewModeType.VISIBLE,t:d("WATimeUtils").unixTime(),templateParams:[b.toString()]}});return u.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebHandleDirtyBits",["Promise","WALogger","WASyncd","WASyncdConst","WAWebAccountSyncJob","WAWebApiPendingDeviceSync","WAWebBackendApi","WAWebClearDirtyBitsJob","WAWebCmd","WAWebEventsWaitForOfflineDeliveryEnd","WAWebMdAppStateDirtyBitsWamEvent","WAWebNewsletterGatingUtils","WAWebOfflineDeviceCache","WAWebOfflineHandler","WAWebPDFNTypes","WAWebQueryAndUpdateGroupMetadataJob","WAWebQueryAndUpdateNewslettersMetadataAction","WAWebTos","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleDirtyBits: handle dirty bits, supported: ",", unsupported: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleDeviceDirtyBit: offline resume manager not initialized"]);j=function(){return a};return a}var k={groups:"groups",account_sync:"account_sync",syncd_app_state:"syncd_app_state",newsletter_metadata:"newsletter_metadata"};c={devices:"devices",picture:"picture",privacy:"privacy",blocklist:"blocklist",notice:"notice"};function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=[]);a=a.map(function(a){return d("WAWebAccountSyncJob").AccountSyncType.cast(a)}).filter(Boolean);a.length===0&&(a=Array.from(d("WAWebAccountSyncJob").AccountSyncType.members()));yield (h||(h=b("Promise"))).all(a.map(function(a){if(a===d("WAWebAccountSyncJob").AccountSyncType.DEVICES)return p();else if(a===d("WAWebAccountSyncJob").AccountSyncType.PICTURE)return d("WAWebAccountSyncJob").getAndUpdateProfilePicture();else a===d("WAWebAccountSyncJob").AccountSyncType.PRIVACY?d("WAWebAccountSyncJob").updatePrivacySettings():a===d("WAWebAccountSyncJob").AccountSyncType.BLOCKLIST?d("WAWebAccountSyncJob").updateBlocklist():a===d("WAWebAccountSyncJob").AccountSyncType.NOTICE&&void q()}))});return m.apply(this,arguments)}function n(a){return a.patches!=null&&a.patches.length>0||a.snapshot!=null}function o(){d("WAWebCmd").Cmd.once(d("WAWebCmd").APP_STATE_SYNC_COMPLETED,function(a){a=a.some(n);new(d("WAWebMdAppStateDirtyBitsWamEvent").MdAppStateDirtyBitsWamEvent)({dirtyBitsFalsePositive:!a}).commit()});return d("WASyncd").markCollectionsForSync(Array.from(d("WASyncdConst").CollectionName.members()))}function p(){if(!d("WAWebOfflineHandler").OfflineMessageHandler.hasInitOfflineResumeManager()){d("WALogger").ERROR(j()).tags("non-sad").sendLogs("handleDeviceDirtyBit: offline resume manager not initialized");return d("WAWebAccountSyncJob").getDevices("notification")}var a=String(d("WAWebUserPrefsMeUser").getMeUser());if(!d("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete()){d("WAWebOfflineDeviceCache").OfflinePendingDeviceCache.addOfflinePendingDevice(a,null);return(h||(h=b("Promise"))).resolve()}else if(d("WAWebOfflineHandler").OfflineMessageHandler.isResumeOnSocketDisconnectInProgress())return d("WAWebApiPendingDeviceSync").addUserToPendingDeviceSync([a]);return d("WAWebAccountSyncJob").getDevices("notification")}function q(){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebTos").TosManager.run();var a=[d("WAWebNewsletterGatingUtils").getNewsletterProducerTos(),d("WAWebNewsletterGatingUtils").getNewsletterConsumerTos(),d("WAWebNewsletterGatingUtils").getNewsletterAdminInviteTos()],b=[];a.map(function(a){a={id:a,accepted:d("WAWebTos").TosManager.getState(a)===d("WAWebPDFNTypes").NOTICE_STATUS.ACCEPTED};b.push(a)});return d("WAWebBackendApi").frontendFireAndForget("updateUserDisclosures",{userDisclosures:b})});return r.apply(this,arguments)}function a(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.supported,e=a.unsupported,f=a.protocols;d("WALogger").LOG(i(),c.map(function(a){return a.type}).join(","),e.map(function(a){return a.type}).join(","));a=[].concat(e,c);yield (h||(h=b("Promise"))).all(c.map(function(a){a=a.type;if(a===k.groups)return d("WAWebEventsWaitForOfflineDeliveryEnd").waitForOfflineDeliveryEnd().then(function(){return d("WAWebQueryAndUpdateGroupMetadataJob").queryAndUpdateAllGroupMetadata()});else if(a===k.newsletter_metadata)return d("WAWebEventsWaitForOfflineDeliveryEnd").waitForOfflineDeliveryEnd().then(function(){return d("WAWebQueryAndUpdateNewslettersMetadataAction").queryAndUpdateAllNewsletterMetadataAction(d("WAWebQueryAndUpdateNewslettersMetadataAction").NewsletterMetadataUpdateEntryPoint.DirtyBit,{messageCount:1})});else if(a===k.account_sync)return l(f);else if(a===k.syncd_app_state)return o()}));return d("WAWebClearDirtyBitsJob").clearDirtyBits(a)});return s.apply(this,arguments)}g.SUPPORTED_DIRTY_TYPE=k;g.SUPPORTED_DIRTY_PROTOCOLS=c;g.handleDirtyBits=a}),98);
__d("WAWebUpdaterHardExpireTime",[],(function(a,b,c,d,e,f){a=document.getElementById("hard_expire_time");c=parseInt(a==null?void 0:(b=a.dataset)==null?void 0:b.time,10);Number.isNaN(c)&&(c=1572566400);d=c;f["default"]=d}),66);
__d("WAWebHandleServerClientExpiration",["WATimeUtils","WAWebBuildConstants","WAWebCmd","WAWebUpdaterHardExpireTime","WAWebUserPrefsMultiDevice"],(function(a,b,c,d,e,f,g){function a(a){var b=parseInt(c("WAWebUpdaterHardExpireTime"),10);if(a==null)d("WAWebUserPrefsMultiDevice").clearServerClientExpirationOverride();else{var e;e=(e=d("WAWebUserPrefsMultiDevice").getServerClientExpirationOverride())==null?void 0:e.timestamp;if(e!=null&&a>=e||a>=b)return;e=d("WATimeUtils").futureUnixTime(3*d("WATimeUtils").DAY_SECONDS);e=Math.max(e,Math.min(a,b));d("WAWebUserPrefsMultiDevice").setServerClientExpirationOverride(""+e,d("WAWebBuildConstants").VERSION_BASE);d("WAWebCmd").Cmd.serverUpdatedClientExpiration()}}g.handleServerClientExpiration=a}),98);
__d("WAWebMdAppStateOfflineNotificationsWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({MdAppStateOfflineNotifications:[2602,{redundantCount:[1,d("WAWebWamCodegenUtils").TYPES.INTEGER]},[1,20,1e3],"regular"]},{MdAppStateOfflineNotifications:[]});g.MdAppStateOfflineNotificationsWamEvent=a}),98);
__d("WAWebHandleServerSyncNotification",["Promise","WADeprecatedWapParser","WALogger","WASyncd","WASyncdCollectionUtils","WASyncdConst","WAWap","WAWebMdAppStateOfflineNotificationsWamEvent","WAWebSyncBootstrap"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: unknown collection name in notification: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: filtered non critical collections during bootstrap. new collections: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: incoming sync notification for collections\n    ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(['handleServerSyncNotification: "from" is not domain jid "s.whatsapp.net"']);n=function(){return a};return a}var o=new Map(),p=new(c("WADeprecatedWapParser"))("serverSyncNotification",function(a){a.assertTag("notification");if(!a.hasChild("collection"))throw a.createParseError("Server sync notification does not contain any collections");var b=a.attrString("id"),c=new Map(a.mapChildrenWithTag("collection",function(a){return[a.attrString("name"),a.attrInt("version")]})),e=a.hasAttr("offline");a=a.attrString("from");a!==d("WAWap").S_WHATSAPP_NET.toString()&&d("WALogger").ERROR(n());return{changedCollections:c,stanzaId:b,offline:e}});function q(a){if(a.changedCollections){var e=new Map();for(var f=a.changedCollections,g=Array.isArray(f),i=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(g){if(i>=f.length)break;j=f[i++]}else{i=f.next();if(i.done)break;j=i.value}j=j;var n=j[0];j=j[1];var p=d("WASyncdConst").CollectionName.cast(n);p!=null?e.set(p,j):d("WALogger").WARN(k(),n)}p=Array.from(e.keys());a.offline&&p.forEach(function(a){var b=o.get(a);b!=null?o.set(a,b+1):o.set(a,1)});d("WALogger").LOG(m(),Array.from(e.entries()).map(function(b){var a=b[0];b=b[1];return a+" v"+b}).join("\n"));c("WAWebSyncBootstrap").isSyncDCriticalDataSyncInProcess()&&(p=p.filter(function(a){return d("WASyncdCollectionUtils").isCriticalCollection(a)}),d("WALogger").LOG(l(),p));void d("WASyncd").markCollectionsForSync(p,e)}return(h||(h=b("Promise"))).resolve(d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(a.stanzaId),"class":"notification",type:"server_sync",to:d("WAWap").S_WHATSAPP_NET}))}function a(){if(o.size<1)return;var a=0;Array.from(o.entries()).forEach(function(b){b=b[1];a+=b-1});new(d("WAWebMdAppStateOfflineNotificationsWamEvent").MdAppStateOfflineNotificationsWamEvent)({redundantCount:a}).commit();o.clear()}function e(a){var c=p.parse(a);if(c.error){d("WALogger").DEV(j(),a.toString());d("WALogger").ERROR(i(),c.error.toString());return(h||(h=b("Promise"))).reject(c.error)}return q(c.success)}g.reportOfflineNotifications=a;g.handleServerSyncNotification=e}),98);
__d("WAWebParseThreadMetadata",["WAWebHandleInfoBulletinTypes.flow"],(function(a,b,c,d,e,f,g){function a(a){a=a.child(d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.THREAD_META);var b={};a.forEachChildWithTag("item",function(a){var c=a.attrChatJid("from");a=a.attrTime("t");b[String(c)]=a});return{chatTimestamp:b}}g.parseThreadMetadata=a}),98);
__d("WAWebHandleInfoBulletin",["WADeprecatedWapParser","WALogger","WASmaxClientExpirationClientExpirationRPC","WATimeUtils","WAWebHandleDirtyBits","WAWebHandleInfoBulletinTypes.flow","WAWebHandleRoutingInfo","WAWebHandleServerClientExpiration","WAWebHandleServerSyncNotification","WAWebMessageDedupUtils","WAWebOfflineHandler","WAWebParseThreadMetadata","WAWebThreadMetadata","WAWebTos","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleInfoBulletin unrecognized info bulletin"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);j=function(){return a};return a}var k=new(c("WADeprecatedWapParser"))("infoBulletinParser",function(a){a.assertTag("ib");a.assertFromServer();if(a.hasChild(d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.DIRTY)){var b=[],c=[],e=[];a.forEachChildWithTag(d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.DIRTY,function(a){var f={type:a.attrString("type"),timestamp:a.attrInt("timestamp")};if(f.type==="account_sync"){a=a.mapChildren(function(a){return a.tag()});a.forEach(function(a){Object.prototype.hasOwnProperty.call(d("WAWebHandleDirtyBits").SUPPORTED_DIRTY_PROTOCOLS,a)&&e.push(a)});c.push(f)}else Object.prototype.hasOwnProperty.call(d("WAWebHandleDirtyBits").SUPPORTED_DIRTY_TYPE,f.type)?c.push(f):b.push(f)});return{type:d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.DIRTY,supported:c,unsupported:b,protocols:e}}else if(a.hasChild(d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.ROUTING)){var f=a.child(d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.ROUTING);return{type:d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.ROUTING,edgeRouting:f.child("routing_info").contentBytes(),domain:f.hasChild("dns_domain")?f.child("dns_domain").contentEnum(d("WAWebHandleRoutingInfo").DOMAINS):null}}else if(a.hasChild(d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.OFFLINE))return{count:a.child(d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.OFFLINE).attrInt("count"),type:d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.OFFLINE};else if(a.hasChild(d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.OFFLINE_PRIORITY_COMPLETE))return{type:d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.OFFLINE_PRIORITY_COMPLETE};else if(a.hasChild(d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.OFFLINE_PREVIEW)){return{count:{message:a.child((f=d("WAWebHandleInfoBulletinTypes.flow")).INFO_TYPE.OFFLINE_PREVIEW).attrInt("message"),receipt:a.child(f.INFO_TYPE.OFFLINE_PREVIEW).attrInt("receipt"),notification:a.child(f.INFO_TYPE.OFFLINE_PREVIEW).attrInt("notification")},type:f.INFO_TYPE.OFFLINE_PREVIEW}}else if(a.hasChild(d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.TOS)){var g=[];a.child("tos").forEachChildWithTag("notice",function(a){g.push(a.attrString("id"))});return{type:d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.TOS,noticeIds:g}}else if(a.hasChild(d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.THREAD_META))return{type:d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.THREAD_META,threadMeta:d("WAWebParseThreadMetadata").parseThreadMetadata(a)};else if(a.hasChild(d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.CLIENT_EXPIRATION)){f=d("WASmaxClientExpirationClientExpirationRPC").receiveClientExpirationRPC(a.getNode());a=f.parsedRequest.clientExpirationT;f=a!=null?d("WATimeUtils").castToUnixTime(a):null;return{type:d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.CLIENT_EXPIRATION,newClientExpirationTime:f}}return null});function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=k.parse(a);if(b.error){d("WALogger").DEV(j(),a.toString());d("WALogger").ERROR(i(),b.error.toString());throw b.error}a=b.success;if(!a){d("WALogger").WARN(h());return}switch(a.type){case d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.DIRTY:yield d("WAWebHandleDirtyBits").handleDirtyBits(a);return"NO_ACK";case d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.ROUTING:yield d("WAWebHandleRoutingInfo").handleRoutingInfo(a);return"NO_ACK";case d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.OFFLINE:d("WAWebOfflineHandler").OfflineMessageHandler.processOfflineIb(a.count);d("WAWebHandleServerSyncNotification").reportOfflineNotifications();d("WAWebMessageDedupUtils").maybeClearPendingMessages(a.count);return"NO_ACK";case d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.OFFLINE_PREVIEW:yield d("WAWebOfflineHandler").OfflineMessageHandler.processOfflinePreviewIb(a.count);return"NO_ACK";case d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.TOS:d("WAWebTos").TosManager.maybeUpdateServer(a.noticeIds);return"NO_ACK";case d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.THREAD_META:d("WAWebThreadMetadata").setOfflineThreadMeta(a.threadMeta);return"NO_ACK";case d("WAWebHandleInfoBulletinTypes.flow").INFO_TYPE.CLIENT_EXPIRATION:d("WAWebHandleServerClientExpiration").handleServerClientExpiration(a.newClientExpirationTime);return"NO_ACK";default:return}});return l.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebHandleMediaRetryNotification",["WABase64","WADeprecatedWapParser","WALogger","WANullthrows","WAWap","WAWebCommsWapMd","WAWebCryptoMediaRetry","WAWebProtobufsMmsRetry.pb","WAWebRequestMediaReuploadManager","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleMediaRetryNotification: ",": id mismatch"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleMediaRetryNotification: ",": mediaKey is not found"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleMediaRetryNotification: ",": received error code: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleMediaRetryNotification: received from not self-primary"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleMediaRetryNotification: received from not self-primary: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleMediaRetryNotification: parsing error: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleMediaRetryNotification: error while parsing: ",""]);n=function(){return a};return a}var o=new(c("WADeprecatedWapParser"))("mediaRetryNotification",function(a){a.assertTag("notification");var b=a.maybeChild("error"),c=a.attrWapJid("from"),e;a.hasAttr("participant")&&(e=a.attrWapJid("participant"));if(b)return{from:c,participant:e,msgId:a.attrString("id"),ciphertext:null,iv:null,errorCode:d("WAWebProtobufsMmsRetry.pb").MediaRetryNotification$ResultType.cast(b.attrInt("code"))};b=a.child("encrypt");return{from:c,participant:e,msgId:a.attrString("id"),ciphertext:b.child("enc_p").contentBytes(),iv:b.child("enc_iv").contentBytes(d("WAWebCryptoMediaRetry").ENC_IV_SIZE),errorCode:null}});function a(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=o.parse(a);if(b.error){d("WALogger").DEV(n(),a.toString());d("WALogger").ERROR(m(),b.error.toString());throw b.error}a=b.success;var e=a.from,f=a.participant,g=a.msgId;a=a.errorCode;(e==null||!d("WAWebWidFactory").createDeviceWid(e.toString()).equals(d("WAWebUserPrefsMeUser").getMeUser()))&&(d("WALogger").LOG(l(),e),d("WALogger").WARN(k()).sendLogs("media-retry-notification-not-from-self-primary"));e=d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(g),"class":"notification",type:"mediaretry",to:e!=null?e:d("WAWebCommsWapMd").USER_JID(d("WAWebUserPrefsMeUser").getMeUser()),participant:f||d("WAWap").DROP_ATTR});if(a!=null){d("WALogger").LOG(j(),g,a);d("WAWebRequestMediaReuploadManager").RequestMediaReuploadManager.resolveMediaReupload({msgId:g,result:a});return e}f=b.success;a=f.ciphertext;b=f.iv;f=d("WAWebRequestMediaReuploadManager").RequestMediaReuploadManager.getMediaKey(g);if(!f){d("WALogger").WARN(i(),g);return e}f=(yield d("WAWebCryptoMediaRetry").decryptMediaRetryNotification(d("WABase64").decodeB64(f),g,c("WANullthrows")(b),c("WANullthrows")(a)));b=f.stanzaId;a=f.directPath;f=f.result;if(b!==g){d("WALogger").LOG(h(),g);throw c("err")("handleMediaRetryNotification: msg id does not match")}d("WAWebRequestMediaReuploadManager").RequestMediaReuploadManager.resolveMediaReupload({msgId:g,result:f,directPath:a});return e});return p.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebHandleBrigadingUpdateNotification",["WALogger","WAWebCmd","WAWebUserPrefsGeneral","WAWebUserPrefsIndexedDBStorage","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["setWABrigadingState: failed to set to indexedDB, state: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][notification][handleBrigadingNotification] unhandled state: ",""]);i=function(){return a};return a}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(a=b.xwa2_notify_brigading)==null?void 0:a.state;if(b==null)throw c("err")("[mex][notification][handleBrigadingNotification] state is null");try{switch(b){case"ENFORCED":case"NOT_ENFORCED":case"DETECTED":yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set("WABrigadingState",b);d("WAWebCmd").Cmd.onBrigadingStateChange(b);break;case"NOT_DETECTED":yield d("WAWebUserPrefsGeneral").clearBrigadingstate();d("WAWebCmd").Cmd.onBrigadingStateChange(null);break;default:d("WALogger").WARN(i(),b)}}catch(a){d("WALogger").ERROR(h(),b).devConsole(a).sendLogs("setWABrigadingState-failed")}});return j.apply(this,arguments)}g.mexHandleBrigadingNotification=a}),98);
__d("WAWebMexCommunityOwnerUpdateNotificationHandler",["WALogger","WATimeUtils","WAWebGroupType","WAWebHandleGroupNotification","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][community][notification][owner-update] Failed to update community owner"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][community][notification][owner-update] Community owner notification received with invalid role ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][community][notification][owner-update] Failed to process xwa2_notify_group_on_participants_roles_change notification, null ",""]);j=function(){return a};return a}function k(a){d("WALogger").ERROR(j(),a).tags("mex").sendLogs("mex-communitynotification-owner-update-fail")}function l(a){if(a!=null&&a.id!=null){var b=a.id;a=a.notify_name;return{authorWid:d("WAWebWidFactory").createWid(b),notifyName:a}}return{authorWid:null,notifyName:null}}function a(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=b.xwa2_notify_group_on_participants_roles_change;b=a.id;var c=a.update_time,e=a.updated_by;a=a.role_updates;if(b==null){k("id");return}if(c==null){k("update_time");return}e=l(e);var f=e.authorWid;e=e.notifyName;a=a[0];var g=a.user_jid;a=a.new_role;b=d("WAWebWidFactory").createWid(b);g=d("WAWebWidFactory").createWid(g);if(a!=="SUPERADMIN_MEMBER"){d("WALogger").ERROR(i(),a).tags("mex").sendLogs("mex-communitynotification-owner-update-fail");return}a={actionType:d("WAWebGroupType").GROUP_ACTIONS.COMMUNITY_OWNER_UPDATE,oldOwner:f,newOwner:g};g={chatId:b,ts:d("WATimeUtils").castMilliSecondsToUnixTime(Number(c)),actions:[a],author:f,authorPhoneNumber:f,isLidAddressingMode:!1,pushname:e,externalId:"",offline:null};try{yield d("WAWebHandleGroupNotification").handleAction(g,a,!1)}catch(a){d("WALogger").ERROR(h()).tags("mex").devConsole(a).sendLogs("mex-communitynotification-owner-update-fail")}});return m.apply(this,arguments)}g.mexHandleCommunityOwnerUpdate=a}),98);
__d("WAWebMexGroupPropertyUpdateNotificationHandler",["WALogger","WATimeUtils","WAWebGroupType","WAWebHandleGroupNotification","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][group-property-update][notification] Failed to changed update group property"]);h=function(){return a};return a}function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=b.xwa2_notify_group_on_prop_change;var c=b.id,e=b.update_time,f=b.updated_by;b=b.properties;var g=f.id;f=f.notify_name;var i;switch(a.OperationName){case"NotificationGroupPropertyUpdate":b.allow_non_admin_sub_group_creation!=null&&(i={actionType:d("WAWebGroupType").GROUP_ACTIONS.ALLOW_NON_ADMIN_SUB_GROUP_CREATION,value:b.allow_non_admin_sub_group_creation});break;case"NotificationGroupHiddenPropertyUpdate":i={actionType:d("WAWebGroupType").GROUP_ACTIONS.HIDDEN_GROUP,value:(a=b.hidden_group)!=null?a:!1}}if(i==null)return;b=d("WAWebWidFactory").createWid(g);a={chatId:d("WAWebWidFactory").createWid(c),ts:d("WATimeUtils").castMilliSecondsToUnixTime(Number(e)),actions:[i],author:b,authorPhoneNumber:b,isLidAddressingMode:!1,pushname:f,externalId:"",offline:null};try{yield d("WAWebHandleGroupNotification").handleAction(a,i,!1)}catch(a){d("WALogger").ERROR(h()).tags("mex").devConsole(a).sendLogs("mex-group-property-update-notification-fail")}});return i.apply(this,arguments)}g.mexHandleGroupPropertyUpdate=a}),98);
__d("WAWebMexNewsletterAdminInviteRevokeNotificationHandler",["WAJids","WALogger","WATimeUtils","WAWebApiContact","WAWebBackendApi","WAWebDBProcessMessage","WAWebJidToWid","WAWebNewsletterDBUtils","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[handleNewsletterAdminInviteRevoke] actor or user lid not mapped"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[handleNewsletterAdminInviteRevoke] actor or user is null"]);i=function(){return a};return a}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=b.xwa2_notify_newsletter_admin_invite_revoke;b=a.id;var c=a.actor;a=a.user;a=a.id;c=c.id;if(c==null||a==null){d("WALogger").ERROR(i()).tags("mex","newsletter").sendLogs("newsletter-mex-admin-invite-revoke-null-actor-or-user");return}b=d("WAJids").toNewsletterJid(b);b=d("WAWebJidToWid").newsletterJidToWid(b);a=d("WAWebWidFactory").toUserWid(d("WAWebWidFactory").createWid(a));c=d("WAWebWidFactory").toUserWid(d("WAWebWidFactory").createWid(c));var e=d("WAWebApiContact").getPhoneNumber(a);c=d("WAWebApiContact").getPhoneNumber(c);if(e==null||c==null){d("WALogger").ERROR(h()).tags("mex","newsletter").sendLogs("newsletter-mex-admin-invite-revoke-actor-or-user-lid-unmapped");return}a=d("WAWebUserPrefsMeUser").isMeAccount(a)?c:e;e=(yield d("WAWebNewsletterDBUtils").getUnexpiredNewsletterAdminInviteMessageRecordsFromChat(d("WAWebWidFactory").toNewsletterWid(b),a,c));e.forEach(function(a){var b;if(((b=a.newsletterAdminInviteInfo)==null?void 0:b.inviteExpiration)==null)return;a.newsletterAdminInviteInfo.inviteExpiration=d("WATimeUtils").castToUnixTime(0)});yield d("WAWebDBProcessMessage").updateExistingMessages(e,a);d("WAWebBackendApi").frontendFireAndForget("expireNewsletterAdminInvites",{expiredMsgData:e});return});return j.apply(this,arguments)}g.handleNewsletterAdminInviteRevoke=a}),98);
__d("WAWebNewsletterHandleMessageDeliveryUpdateNotification",["WAJobOrchestratorTypes","WALogger","WASmaxNewslettersMessageDeliveryUpdateNotificationRPC","WAWebBackendApi","WAWebJidToWid","WAWebNewsletterGatingUtils","WAWebNewsletterMessageDeliveryUpdateToModelUtils","WAWebNewsletterMetadataJob","WAWebNux","WAWebUserPrefsNuxPreferences","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][message-delivery-update-notification] Failed to update the db records"]);h=function(){return a};return a}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("WASmaxNewslettersMessageDeliveryUpdateNotificationRPC").receiveMessageDeliveryUpdateNotificationRPC(a);var b=a.makeMessageDeliveryUpdateNotificationResponseAck;a=a.parsedRequest;if(!d("WAWebNewsletterGatingUtils").isNewsletterEnabled())return b();try{yield j(a.from,a.messageDeliveryUpdatesMessagesMessage,a.t)}catch(a){d("WALogger").ERROR(h()).tags("newsletter").devConsole(a).sendLogs("newsletter-message-delivery-update-notification-db-fail")}return b()});return i.apply(this,arguments)}function j(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=d("WAWebJidToWid").newsletterJidToWid(a);b=b.reduce(function(a,b){if(b.issueCode===0)a.updatesToRemove.push(b.serverId);else{b={id:b.serverId,code:b.issueCode};c!=null&&(b.t=c);a.updatesToAdd.push(b)}return a},{updatesToAdd:[],updatesToRemove:[]});var f=b.updatesToAdd;b=b.updatesToRemove;void d("WAWebNewsletterMetadataJob").updateNewsletterMessageDeliveryUpdates(a,f,b,d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH);f=(yield d("WAWebNewsletterMessageDeliveryUpdateToModelUtils").getMessageDeliveryUpdatesModelToUpdate(a,f,b));b=f.modelUpdatesToAdd;f=f.modelUpdatesToRemove;yield d("WAWebBackendApi").frontendSendAndReceive("updateNewsletterMessageDeliveryUpdate",{id:e,modelUpdatesToAdd:b,modelUpdatesToRemove:f});e=d("WAWebNux").getNewsletterAlertsBannerNuxKey(a);d("WAWebUserPrefsNuxPreferences").resetNux(e)});return k.apply(this,arguments)}g.handleNewsletterMessageDeliveryUpdateNotification=a;g.handleNewsletterMessageDeliveryUpdateNotificationImpl=j}),98);
__d("WAWebMexNewsletterAdminNotificationHandler",["WALogger","WAWebBackendApi","WAWebCommonNewsletterEnums","WAWebCountriesUtils","WAWebJidToWid","WAWebNewsletterAdminNotificationJob","WAWebNewsletterHandleMessageDeliveryUpdateNotification","WAWebNewsletterValidationUtils","WAWebNux","WAWebUserPrefsNuxPreferences","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][newsletter][notification][admin-metadata] Failed to persist admin metadata notification information on db"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["unexpected null id in xwa2_notify_newsletter_on_admin_metadata_update"]);i=function(){return a};return a}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=b.xwa2_notify_newsletter_on_admin_metadata_update;b=a.id;var c=a.thread_metadata;a=a.messages;try{if(b==null){d("WALogger").ERROR(i()).tags("mex","newsletter").devConsole("unexpected null id in xwa2_notify_newsletter_on_admin_metadata_update").sendLogs("newsletter-mex-admin-metadata-notification-unexpected-null-id");return}yield k(b,c);yield m(b,a)}catch(a){d("WALogger").ERROR(h()).tags("mex","newsletter").devConsole(a).sendLogs("mex-newsletter-admin-metadata-notification-db-fail")}});return j.apply(this,arguments)}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if((b==null?void 0:b.geo_states)==null)return;b=b.geo_states;a=d("WAWebNewsletterValidationUtils").toNewsletterJidOrThrow(a);var c=d("WAWebJidToWid").newsletterJidToWid(a);b=b.reduce(function(a,b){var c=b.country_code!=null?d("WAWebCountriesUtils").asISOCountryCode(b.country_code):null;if(c==null)return a;d("WAWebCommonNewsletterEnums").NewsletterState.cast((b=b.state.type)==null?void 0:b.toLowerCase())===d("WAWebCommonNewsletterEnums").NewsletterState.GeoSuspended?a.countriesToAdd.push(c):a.countriesToRemove.push(c);return a},{countriesToAdd:[],countriesToRemove:[]});var e=b.countriesToAdd;b=b.countriesToRemove;if(e.length>0){yield d("WAWebNewsletterAdminNotificationJob").updateGeosuspendedCountry(a,e,!0);d("WAWebBackendApi").frontendFireAndForget("updateGeosuspendedCountry",{id:c,countryCodes:e,toAdd:!0});e=d("WAWebNux").getNewsletterAlertsBannerNuxKey(a);d("WAWebUserPrefsNuxPreferences").resetNux(e)}b.length>0&&(yield d("WAWebNewsletterAdminNotificationJob").updateGeosuspendedCountry(a,b,!1),d("WAWebBackendApi").frontendFireAndForget("updateGeosuspendedCountry",{id:c,countryCodes:b,toAdd:!1}))});return l.apply(this,arguments)}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b==null)return;a=d("WAWebNewsletterValidationUtils").toNewsletterJidOrThrow(a);b=b.edges.map(function(a){a=a.node;var b=a.message_delivery_update.issue.code,d;switch(b){case"NEEDS_REVIEW":d=1;break;case"NONE":d=0;break;default:throw c("err")("Unexpected mex issue code: "+b)}return{serverId:parseInt(a.server_id,10),issueCode:d}});yield d("WAWebNewsletterHandleMessageDeliveryUpdateNotification").handleNewsletterMessageDeliveryUpdateNotificationImpl(a,b)});return n.apply(this,arguments)}g.mexHandleNewsletterAdminNotification=a}),98);
__d("WAWebNewsletterHandleJoinNotification",["WATimeUtils","WAWebBackendApi","WAWebCreateChat","WAWebNewsletterBackendAddOnsUtils","WAWebNewsletterGetMessagesJob","WAWebNewsletterMetadataJob","WAWebNewsletterStorageUtils","WAWebNewsletterSystemMessages","WAWebNewsletterUpdateMsgsRecordsJob","WAWebNewsletterUpdateNewslettersRecordsJob","WAWebViewMode.flow","WAWebViewModeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b,c,d){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){e=(yield i({chat:a,metadata:b,newsletterJid:e}));var f=e.msgsToStore;e=e.noEarlierMsgs;yield d("WAWebNewsletterUpdateNewslettersRecordsJob").updateNewsletterChatRecords([d("WAWebCreateChat").createNewsletterObjectForStorage(a)]);yield d("WAWebNewsletterMetadataJob").updateNewsletterMetadata(d("WAWebNewsletterStorageUtils").createNewsletterMetadataObjectForStorage(b));yield d("WAWebBackendApi").frontendSendAndReceive("joinNewsletter",{newsletter:a,metadata:b,pic:c,msgs:f,noEarlierMsgs:e})});return h.apply(this,arguments)}function i(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.chat,c=a.metadata;a=a.newsletterJid;try{var e=d("WAWebNewsletterSystemMessages").genNewsletterCreationSystemMessages({id:b.id,name:b.name,t:c.creationTime,role:c.membershipType});a=(yield d("WAWebNewsletterGetMessagesJob").getNewsletterMessages(a,1));var f=a.msgs,g=f.length===0,h=f.every(function(a){return!d("WAWebViewModeUtils").isViewModeVisibleInSurface(d("WAWebViewMode.flow").ViewModeSurface.CHAT,a.viewMode)});h=f.length>0&&!h?f:[].concat(e,f);b.t=k(c.creationTime,h);f.length>0&&(yield d("WAWebNewsletterBackendAddOnsUtils").updateAddOnDbRecords(a));yield d("WAWebNewsletterUpdateMsgsRecordsJob").addNewsletterMsgsRecords(h);return{msgsToStore:h,noEarlierMsgs:g}}catch(a){return{msgsToStore:[],noEarlierMsgs:!1}}});return j.apply(this,arguments)}function k(a,b){return d("WATimeUtils").castToUnixTime(Math.min(Math.max((a=a)!=null?a:0,Math.max.apply(Math,b.map(function(a){return(a=a.t)!=null?a:0}))),Date.now()/1e3))}g.handleNewsletterJoin=a}),98);
__d("WAWebMexNewsletterJoinHandler",["Promise","WALogger","WAWebMexNewsletterParseUtils","WAWebNewsletterBackendQueues","WAWebNewsletterGatingUtils","WAWebNewsletterHandleJoinNotification","WAWebNewsletterModelUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][newsletter][notification][join]"]);i=function(){return a};return a}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){yield (h||(h=b("Promise"))).all([d("WAWebNewsletterBackendQueues").newsletterCreationQueue.wait(),d("WAWebNewsletterBackendQueues").newsletterSubscribeQueue.wait()]);if(!d("WAWebNewsletterGatingUtils").isNewsletterEnabled())return;var f=d("WAWebMexNewsletterParseUtils").parseMexNewsletterResponse(e.xwa2_notify_newsletter_on_join);if(f==null)throw c("err")("cannot parse xwa2_notify_newsletter_on_join response");a=d("WAWebNewsletterModelUtils").mapNewsletterToModels(f);var g=a.chat,j=a.metadata,k=a.pic;return d("WAWebNewsletterBackendQueues").newsletterJoinNotificatonQueue.enqueue(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{return yield d("WAWebNewsletterHandleJoinNotification").handleNewsletterJoin(g,j,k,f.idJid)}catch(a){d("WALogger").ERROR(i()).tags("mex","newsletter").devConsole(a).sendLogs("mex-newsletter-notification-join-fail")}}))});return j.apply(this,arguments)}g.mexHandleNewsletterJoin=a}),98);
__d("WAWebMexNewsletterLeaveHandler",["WAJids","WALogger","WAWebBackendApi","WAWebJidToWid","WAWebNewsletterDBUtils","WAWebNewsletterDeleteChatJob","WAWebNewsletterDeleteMessageAddOns","WAWebNewsletterMetadataJob","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][newsletter][notification][leave]"]);h=function(){return a};return a}function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=b.xwa2_notify_newsletter_on_leave.id;if(a==null)throw c("err")("unexpected null id in xwa2_notify_newsletter_on_leave");b=d("WAJids").toNewsletterJid(a);a=d("WAWebJidToWid").newsletterJidToWid(b);if(!(yield d("WAWebNewsletterDBUtils").doesNewsletterExistInStorage(b))){d("WAWebBackendApi").frontendFireAndForget("updateNewsletterSubscriberCount",{id:a,update:{increment:-1}});return}try{yield d("WAWebNewsletterMetadataJob").deleteNewsletterMetadata(b),yield d("WAWebNewsletterDeleteMessageAddOns").deleteNewsletterMessageAddOns(b),yield d("WAWebNewsletterDeleteChatJob").deleteNewsletterChat(a),d("WAWebBackendApi").frontendFireAndForget("deleteNewsletter",{id:a,keep:!0})}catch(a){d("WALogger").ERROR(h()).tags("mex","newsletter").devConsole(a).sendLogs("mex-newsletter-notification-leave-fail")}});return i.apply(this,arguments)}g.mexHandleNewsletterLeave=a}),98);
__d("WAWebNewsletterMetadataUpdateUtils",["WAWebBackendApi","WAWebContactProfilePicThumbBridge","WAWebDBBulkPersistProfilePic","WAWebNewsletterMetadataJob","WAWebNewsletterStorageUtils","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b,c){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){yield d("WAWebNewsletterMetadataJob").updateNewsletterMetadata(d("WAWebNewsletterStorageUtils").createNewsletterMetadataObjectForStorage(b));if(Object.prototype.hasOwnProperty.call(c,"eurl")){var e=d("WAWebWidFactory").createWid(c.id.toString());yield d("WAWebDBBulkPersistProfilePic").bulkPersistProfilePicChanges([d("WAWebContactProfilePicThumbBridge").mapProfilePictureToProfilePicThumbRowType(e,{id:e,tag:(e=c.tag)!=null?e:void 0,eurl:(e=c.eurl)!=null?e:void 0,previewEurl:(e=c.previewEurl)!=null?e:void 0,stale:c.stale,eurlStale:!1,timestamp:(e=c.timestamp)!=null?e:Date.now()})])}yield d("WAWebBackendApi").frontendSendAndReceive("updateNewsletterMetadata",{metadata:b,newsletter:a,pic:c})});return h.apply(this,arguments)}g.updateNewsletterMetadataAndPic=a}),98);
__d("WAWebMexNewsletterMetadataUpdateNotificationHandler",["WAJids","WALogger","WAWebApiChat","WAWebJidToWid","WAWebMexNewsletterParseUtils","WAWebNewsletterMetadataUpdateUtils","WAWebNewsletterModelUtils","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][newsletter][notification][metadata-update] Failed to update metadata change"]);h=function(){return a};return a}function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=b.xwa2_notify_newsletter_on_metadata_update;b=a.id;if(b==null)throw c("err")("unexpected null id in xwa2_notify_newsletter_on_metadata_update");b=d("WAJids").toNewsletterJid(b);b=d("WAWebJidToWid").newsletterJidToWid(b);b=(yield d("WAWebApiChat").getChatRecord(b));if(b==null)return;b=d("WAWebMexNewsletterParseUtils").parseMexNewsletterResponse(a);if(b==null)throw c("err")("Unexpected null metadata for newsletter update notification");try{a=d("WAWebNewsletterModelUtils").mapNewsletterToModels(b);b=a.chat;var e=a.metadata;a=a.pic;yield d("WAWebNewsletterMetadataUpdateUtils").updateNewsletterMetadataAndPic(b,e,a)}catch(a){d("WALogger").ERROR(h()).tags("mex","newsletter").devConsole(a).sendLogs("mex-newsletter-notification-metadata-update-fail")}});return i.apply(this,arguments)}g.mexHandleNewsletterMetadataUpdate=a}),98);
__d("WAWebMexNewsletterMutedChangeHandler",["WAJids","WALogger","WAWebBackendApi","WAWebCreateChat","WAWebNewsletterMetadataQueryJob","WAWebNewsletterModelUtils","WAWebNewsletterUpdateNewslettersRecordsJob","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][newsletter][notification][mute-unmute]"]);h=function(){return a};return a}function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=b.xwa2_notify_newsletter_on_mute_change;b=a.id;a=a.mute;if(b==null)throw c("err")("unexpected null id in xwa2_notify_newsletter_on_mute_change");var e;switch(a){case"ON":e="on";break;case"OFF":e="off";break;default:e="undefined"}a=d("WAWebNewsletterMetadataQueryJob").emptyNewsletterMetadataType(d("WAJids").toNewsletterJid(b));b=babelHelpers["extends"]({},a,{newsletterMutedMetadataMixin:{mutedState:e}});a=d("WAWebNewsletterModelUtils").mapNewsletterToModels(b);b=a.chat;var f=a.metadata;a=a.pic;try{yield d("WAWebNewsletterUpdateNewslettersRecordsJob").updateNewsletterChatRecords([d("WAWebCreateChat").createNewsletterObjectForStorage(b)]),yield d("WAWebBackendApi").frontendSendAndReceive("updateNewsletterMetadata",{metadata:f,newsletter:b,pic:a})}catch(a){d("WALogger").ERROR(h()).tags("mex","newsletter").devConsole(a).sendLogs("mex-newsletter-notification-mute-unmute-fail")}});return i.apply(this,arguments)}g.mexHandleNewsletterMutedChange=a}),98);
__d("WAWebMexNewsletterOwnerNotificationHandler",["WAJids","WALogger","WAWebBackendApi","WAWebJidToWid","WAWebMexNewsletterParseUtils","WAWebNewsletterAdminNotificationJob","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["no updates were found in xwa2_notify_newsletter_owner_on_metadata_update"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["reaction setting did not contain updated value in xwa2_notify_newsletter_owner_on_metadata_update"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["description did not contain updated value in xwa2_notify_newsletter_owner_on_metadata_update"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["name did not contain updated value in xwa2_notify_newsletter_owner_on_metadata_update"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["no user found to be making this change in xwa2_notify_newsletter_owner_on_metadata_update"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["no changes found in xwa2_notify_newsletter_owner_on_metadata_update"]);m=function(){return a};return a}function a(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=b.xwa2_notify_newsletter_owner_on_metadata_update;b=a.id;var c=a.thread_metadata;a=a.actor;if(c==null){d("WALogger").ERROR(m()).tags("mex","newsletter").sendLogs("newsletter-mex-owner-metadata-notification-no-metadata-updates");return}yield o(b,c,a);a=a==null?void 0:a.id;if(a==null){d("WALogger").ERROR(l()).tags("mex","newsletter").sendLogs("newsletter-mex-owner-metadata-notification-no-actor");return}var e=[],f=c.name,g=c.description,n=c.picture,p=c.preview;c=c.settings;(n!=null||p!=null)&&e.push({item:"profile_picture"});if(f!=null){n=f.text;n==null?d("WALogger").ERROR(k()).tags("mex","newsletter").devConsole(f).sendLogs("newsletter-mex-owner-metadata-notification-no-updated-name-value"):e.push({item:"name",value:n})}if(g!=null){p=g.text;p==null?d("WALogger").ERROR(j()).tags("mex","newsletter").devConsole(g).sendLogs("newsletter-mex-owner-metadata-notification-no-updated-name-value"):e.push({item:"description",value:p})}f=c==null?void 0:c.reaction_codes;if(c!=null&&f!=null){n=d("WAWebMexNewsletterParseUtils").toReactionCodesSettingMixin(f.value);n==null?d("WALogger").ERROR(i()).tags("mex","newsletter").devConsole(f).sendLogs("newsletter-mex-owner-metadata-notification-no-updated-name-value"):e.push({item:"reaction_setting",value:n})}if(e.length===0){d("WALogger").ERROR(h()).tags("mex","newsletter").sendLogs("newsletter-mex-owner-metadata-notification-no-updates");return}g=d("WAJids").toNewsletterJid(b);p=d("WAWebJidToWid").newsletterJidToWid(g);c=d("WAWebWidFactory").createWid(a);f={newsletterId:d("WAWebWidFactory").toNewsletterWid(p),actorId:d("WAWebWidFactory").toUserWid(c),updates:e};d("WAWebBackendApi").frontendFireAndForget("displayNewsletterMetadataUpdateNotification",{notification:f})});return n.apply(this,arguments)}function o(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){if(((b=b.preview)==null?void 0:b.direct_path)!==""||c!=null)return;b=d("WAJids").toNewsletterJid(a);c=d("WAWebJidToWid").newsletterJidToWid(b);yield d("WAWebNewsletterAdminNotificationJob").updateProfilePictureDeletionAlertState(b);d("WAWebBackendApi").frontendFireAndForget("updateProfilePictureDeletionAlertState",{newsletterWid:d("WAWebWidFactory").toNewsletterWid(c)})});return p.apply(this,arguments)}g.mexHandleNewsletterOwnerNotification=a}),98);
__d("WAWebMexNewsletterRoleChangeNotificationHandler",["WALogger","WAWebBackendApi","WAWebMexNewsletterUtils","WAWebNewsletterMetadataJob","WAWebNewsletterStorageUtils","WAWebNewsletterValidationUtils","WAWebUserPrefsMeUser","WAWebUserPrefsNewsletter","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][newsletter][notification][admin-","] Failed to process "," notification, error parsing jid"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][newsletter][notification][admin-","] Failed to process "," notification, null payload"]);i=function(){return a};return a}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c;a=b.xwa2_notify_newsletter_admin_promote!=null?"promote":"demote";c=(c=b.xwa2_notify_newsletter_admin_promote)!=null?c:b.xwa2_notify_newsletter_admin_demote;if(c==null){d("WALogger").ERROR(i(),a,a).tags("mex","newsletter").sendLogs("mex-newsletternotification-state-change-fail");return}try{var e=d("WAWebNewsletterValidationUtils").toNewsletterJidOrThrow(c.id),f=c.user.pn;if(f==null)return;f=d("WAWebWidFactory").createWid(f);c=d("WAWebMexNewsletterUtils").mapRoleToMembership(c.user_new_role);if(c==null)return;f.equals(d("WAWebUserPrefsMeUser").getMeUser())?(yield d("WAWebNewsletterMetadataJob").updateNewsletterMetadata({id:e,membershipType:d("WAWebNewsletterStorageUtils").mapNewsletterMembershipTypeForStorage(c)}),d("WAWebBackendApi").frontendFireAndForget("handleMyRoleChangeNotification",{jid:e})):f.equals(d("WAWebUserPrefsMeUser").getMeUser())||d("WAWebBackendApi").frontendFireAndForget("handleOtherUserRoleChangeNotification",{jid:e,userId:f,newRole:c});yield d("WAWebUserPrefsNewsletter").flushCachedNewsletterSubscribers(e);d("WAWebBackendApi").frontendFireAndForget("displayRoleChangeDesktopNotification",{notification:b})}catch(b){d("WALogger").ERROR(h(),a,a).tags("mex","newsletter").devConsole(b).sendLogs("mex-newsletternotification-state-change-fail-"+a)}});return j.apply(this,arguments)}g.mexHandleNewsletterRoleChange=a}),98);
__d("WAWebMexNewsletterStateChangeHandler",["WAJids","WALogger","WAWebApiChat","WAWebBackendApi","WAWebJidToWid","WAWebNewsletterBackendQueues","WAWebNewsletterDeleteChatJob","WAWebNewsletterMetadataJob","WAWebNewsletterMetadataQueryJob","WAWebNewsletterModelUtils","WAWebNewsletterStorageUtils","WAWebNewsletterSystemMessages","WAWebNewsletterUpdateMsgsRecordsJob","WAWebNux","WAWebUserPrefsNuxPreferences","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][newsletter][notification][state-change] Failed to update to "," state"]);h=function(){return a};return a}function i(a){switch(a){case"ACTIVE":return"active";case"SUSPENDED":return"suspended";case"GEOSUSPENDED":return"geosuspended"}}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield d("WAWebNewsletterBackendQueues").newsletterJoinNotificatonQueue.wait();a=b.xwa2_notify_newsletter_on_state_change;b=a.id;var e=a.is_requestor;a=a.state;if(b==null)throw c("err")("unexpected null id in xwa2_notify_newsletter_on_state_change");b=d("WAJids").toNewsletterJid(b);var f=d("WAWebJidToWid").newsletterJidToWid(b);e=e===!0;a=a==null?void 0:a.type;var g=(yield d("WAWebApiChat").getChatRecord(f));if(g==null)return;try{switch(a){case"DELETED":yield d("WAWebNewsletterBackendQueues").newsletterDeleteQueue.wait();return yield k(e,b,f,g.name);case"ACTIVE":case"SUSPENDED":case"GEOSUSPENDED":e=i(a);f=d("WAWebNewsletterMetadataQueryJob").emptyNewsletterMetadataType(b);g=babelHelpers["extends"]({},f,{newsletterStateMetadataMixin:{stateType:e}});b=d("WAWebNewsletterModelUtils").mapNewsletterToModels(g);f=b.chat;e=b.metadata;g=b.pic;yield d("WAWebNewsletterMetadataJob").updateNewsletterMetadata(d("WAWebNewsletterStorageUtils").createNewsletterMetadataObjectForStorage(e));if(e.suspended===!0){b=d("WAWebNux").getNewsletterAlertsBannerNuxKey(e.id.toString());d("WAWebUserPrefsNuxPreferences").resetNux(b)}yield d("WAWebBackendApi").frontendSendAndReceive("updateNewsletterMetadata",{metadata:e,newsletter:f,pic:g});break;default:b=a==null?"null or undefined":a;throw c("err")("Unexpected state change type: "+b)}}catch(b){d("WALogger").ERROR(h(),a).tags("mex","newsletter").devConsole(b).sendLogs("mex-newsletternotification-state-change-fail")}});return j.apply(this,arguments)}function k(a,b,c,d){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){return a?m(b,c):o(b,c,d)});return l.apply(this,arguments)}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield d("WAWebNewsletterMetadataJob").deleteNewsletterMetadata(a.toString()),yield d("WAWebNewsletterDeleteChatJob").deleteNewsletterChat(b),yield d("WAWebNewsletterMetadataJob").deleteNewsletterPicture(a.toString()),yield d("WAWebBackendApi").frontendSendAndReceive("deleteNewsletter",{id:b,keep:!0})});return n.apply(this,arguments)}function o(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c=d("WAWebNewsletterSystemMessages").genNewsletterDeletionSystemMessages({id:a,name:c});yield d("WAWebNewsletterMetadataJob").updateNewsletterMetadata({id:a,terminated:!0});yield d("WAWebNewsletterUpdateMsgsRecordsJob").addNewsletterMsgsRecords(c);yield d("WAWebBackendApi").frontendSendAndReceive("terminateNewsletter",{id:b,msgs:c})});return p.apply(this,arguments)}g.mexHandleNewsletterStateChange=a}),98);
__d("WAWebMexTextStatusUpdateNotificationHandler",["WALogger","WAWebContactTextStatusBridge","WAWebLidAwareContactsDB","WAWebTextStatusGatingUtils","WAWebTextStatusParseUtils","WAWebUpdateTextStatusForContact","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][textStatus][notification][side-sub] Could not find side contact hash for text status update side sub operation"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][textStatus][notification][text-status-update] Failed to update text status change"]);i=function(){return a};return a}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=b.xwa2_notify_text_status_on_update;b=a.jid;if(!d("WAWebTextStatusGatingUtils").receiveTextStatusEnabled())return;if(b==null)throw c("err")("unexpected null id in xwa2_notify_text_status_on_update");a=d("WAWebTextStatusParseUtils").parseTextStatusServerResponse(a);try{void d("WAWebUpdateTextStatusForContact").updateTextStatusForContact(d("WAWebWidFactory").createWid(b),a.textStatusString,a.textStatusEmoji,a.textStatusEphemeralDuration,a.textStatusLastUpdateTime)}catch(a){d("WALogger").ERROR(i()).tags("mex").devConsole(a).sendLogs("mex-text-status-notification-update-fail")}});return j.apply(this,arguments)}function e(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=b.xwa2_notify_text_status_on_update_side_sub;b=(yield c("WAWebLidAwareContactsDB").equals(["contactHash"],a.hash));if(b.length===0)d("WALogger").WARN(h());else{a=d("WAWebWidFactory").createWid(b[0].id);b=b[0].textStatusLastUpdateTime;return d("WAWebContactTextStatusBridge").getTextStatus(a,b).then(function(a){var b=a.text,c=a.emoji,e=a.ephemeralDurationSeconds,f=a.lastUpdateTime;a=a.id;return d("WAWebUpdateTextStatusForContact").updateTextStatusForContact(a,b,c,e,f)})}});return k.apply(this,arguments)}g.mexHandleTextStatusUpdate=a;g.mexHandleTextStatusUpdateSideSub=e}),98);
__d("WAWebMexUsernameAccountSyncNotificationHandler",["WALogger","WAWebGetUsernameQueryJob","WAWebSetUsernameJob","WAWebUserPrefsMeUser","WAWebUsernameGatingUtils","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][username][notification][username-account-sync] wrong LID is sent for self user"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][username][notification][username-account-sync] lid is null"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][username][notification][username-account-sync] received username account sync notification"]);j=function(){return a};return a}function a(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c;if(!d("WAWebUsernameGatingUtils").usernameSupported())return;d("WALogger").LOG(j());a=b.xwa2_notify_wa_user;b=a.lid_jid;if(b==null){d("WALogger").WARN(i());return}b=d("WAWebWidFactory").createUserWid(b);var e=d("WAWebUserPrefsMeUser").assertGetMeUser();if(b!==d("WAWebUserPrefsMeUser").getMeLidUser()){d("WALogger").WARN(h());return}c=(c=a.username_info)==null?void 0:c.username;c!=null?yield d("WAWebSetUsernameJob").setUsernamesJob([{userId:e,username:c},{userId:b,username:c}]):a.username_info!=null&&c==null?yield d("WAWebSetUsernameJob").setUsernamesJob([{userId:e,username:void 0},{userId:b,username:void 0}]):a.username_info==null&&(yield d("WAWebGetUsernameQueryJob").getUsernameJob())});return k.apply(this,arguments)}g.mexHandleUsernameAccountSync=a}),98);
__d("WAWebMexUsernameUpdateNotificationHandler",["Promise","WALogger","WAWebApiContact","WAWebChatCollection","WAWebContactSystemMsg","WAWebHandleSingleMsg","WAWebLidAwareContactsDB","WAWebQueryExistsJob","WAWebSetUsernameJob","WAWebUsernameGatingUtils","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["could not find side contact hash for username change notification."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][username][notification][username-change-side-subscriber] Received username change notification for side subscriber"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][username][notification][username-delete] Received username delete notification"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][username][notification][username-set] Received username change notification"]);l=function(){return a};return a}function a(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){if(!d("WAWebUsernameGatingUtils").usernameDisplayedEnabled())return;d("WALogger").LOG(l());a=c.xwa2_notify_username_on_change;c=a.username;a=a.lid;a=d("WAWebWidFactory").createUserWid(a);var e=d("WAWebApiContact").getPhoneNumber(a);yield (h||(h=b("Promise"))).all([d("WAWebSetUsernameJob").setUsernamesJob([{userId:a,username:c}].concat(e!=null?[{userId:e,username:c}]:[])),p(a,c)])});return m.apply(this,arguments)}function e(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){if(!d("WAWebUsernameGatingUtils").usernameDisplayedEnabled())return;d("WALogger").LOG(k());a=c.xwa2_notify_username_delete;c=a.lid;a=a.display_name;c=d("WAWebWidFactory").createUserWid(c);var e=d("WAWebApiContact").getPhoneNumber(c);yield (h||(h=b("Promise"))).all([d("WAWebSetUsernameJob").deleteUsernamesJob([{userId:c,displayNameLID:a}].concat(e!=null?[{userId:e,displayNameLID:a}]:[])),p(c,"")])});return n.apply(this,arguments)}function f(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(!d("WAWebUsernameGatingUtils").usernameDisplayedEnabled())return;d("WALogger").LOG(j());a=e.xwa2_notify_username_on_update_side_sub.hash;e=(yield c("WAWebLidAwareContactsDB").equals(["contactHash"],a));if(e.length===0){d("WALogger").WARN(i());return}e=d("WAWebWidFactory").createUserWid((a=e[0])==null?void 0:a.id);a=(yield d("WAWebQueryExistsJob").queryWidUsernameExists(e));if(a!=null){yield (h||(h=b("Promise"))).all([p(e,(e=a)!=null?e:"")])}});return o.apply(this,arguments)}function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=d("WAWebChatCollection").ChatCollection.get(a);if(c!=null){c=d("WAWebContactSystemMsg").genUsernameChangeSystemMsg(a,b);yield d("WAWebHandleSingleMsg").handleSingleMsg(a,c,"username_change_notification")}});return q.apply(this,arguments)}g.mexHandleUsernameChange=a;g.mexHandleUsernameDelete=e;g.mexHandleUsernameChangeForSideSub=f}),98);
__d("WAWebHandleMexNotification",["Promise","WADeprecatedWapParser","WALogger","WAParsableWapNode","WAWap","WAWebHandleBrigadingUpdateNotification","WAWebMexCommunityOwnerUpdateNotificationHandler","WAWebMexGroupPropertyUpdateNotificationHandler","WAWebMexNewsletterAdminInviteRevokeNotificationHandler","WAWebMexNewsletterAdminNotificationHandler","WAWebMexNewsletterJoinHandler","WAWebMexNewsletterLeaveHandler","WAWebMexNewsletterMetadataUpdateNotificationHandler","WAWebMexNewsletterMutedChangeHandler","WAWebMexNewsletterOwnerNotificationHandler","WAWebMexNewsletterRoleChangeNotificationHandler","WAWebMexNewsletterStateChangeHandler","WAWebMexRelayEnvironment","WAWebMexTextStatusUpdateNotificationHandler","WAWebMexUsernameAccountSyncNotificationHandler","WAWebMexUsernameUpdateNotificationHandler","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][notification] handle MexNotificationEvent"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][notification][error]"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mex][notification] handled ",""]);k=function(){return a};return a}var l="mexNotificationParser",m=new(c("WADeprecatedWapParser"))(l,function(a){a.assertTag("notification");a.assertAttr("type","mex");var b=a.child("update"),c=a.attrString("id");a=a.attrWapJid("from");var e=b.attrString("op_name");b=b.contentString();var f;try{f=JSON.parse(b)}catch(a){throw new(d("WAParsableWapNode").XmppParsingFailure)(l,"JSON parsing error: "+a)}return{stanzaId:c,from:a,OperationName:e,mexResponse:f}});function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=m.parseOrThrow(a);try{var c=(yield o(b));d("WALogger").DEV(k(),b.OperationName).tags("mex").devConsole(c,b);return c}catch(c){d("WALogger").ERROR(j()).tags("mex","notification").devConsole(a,c).sendLogs("mex-notification-error-"+b.OperationName);if(c instanceof d("WAParsableWapNode").XmppParsingFailure)throw c;throw new(d("WAParsableWapNode").XmppParsingFailure)(l,"unexpected error: "+c)}});return n.apply(this,arguments)}function o(a){switch(a.OperationName){case"MexNotificationEvent":return p(a,s);case"NotificationNewsletterMuteChange":return p(a,d("WAWebMexNewsletterMutedChangeHandler").mexHandleNewsletterMutedChange);case"NotificationNewsletterJoin":return p(a,d("WAWebMexNewsletterJoinHandler").mexHandleNewsletterJoin);case"NotificationNewsletterLeave":return p(a,d("WAWebMexNewsletterLeaveHandler").mexHandleNewsletterLeave);case"NotificationNewsletterStateChange":return p(a,d("WAWebMexNewsletterStateChangeHandler").mexHandleNewsletterStateChange);case"NotificationNewsletterAdminMetadataUpdate":return p(a,d("WAWebMexNewsletterAdminNotificationHandler").mexHandleNewsletterAdminNotification);case"NotificationNewsletterOwnerUpdate":return p(a,d("WAWebMexNewsletterOwnerNotificationHandler").mexHandleNewsletterOwnerNotification);case"NotificationNewsletterUpdate":return p(a,d("WAWebMexNewsletterMetadataUpdateNotificationHandler").mexHandleNewsletterMetadataUpdate);case"NotificationNewsletterAdminPromote":return p(a,d("WAWebMexNewsletterRoleChangeNotificationHandler").mexHandleNewsletterRoleChange);case"NotificationNewsletterAdminDemote":return p(a,d("WAWebMexNewsletterRoleChangeNotificationHandler").mexHandleNewsletterRoleChange);case"NotificationNewsletterAdminInviteRevoke":return p(a,d("WAWebMexNewsletterAdminInviteRevokeNotificationHandler").handleNewsletterAdminInviteRevoke);case"TextStatusUpdateNotification":return p(a,d("WAWebMexTextStatusUpdateNotificationHandler").mexHandleTextStatusUpdate);case"TextStatusUpdateNotificationSideSub":return p(a,d("WAWebMexTextStatusUpdateNotificationHandler").mexHandleTextStatusUpdateSideSub);case"NotificationGroupPropertyUpdate":case"NotificationGroupHiddenPropertyUpdate":return p(a,d("WAWebMexGroupPropertyUpdateNotificationHandler").mexHandleGroupPropertyUpdate);case"NotificationCommunityOwnerUpdate":return p(a,d("WAWebMexCommunityOwnerUpdateNotificationHandler").mexHandleCommunityOwnerUpdate);case"UsernameSetNotification":return p(a,d("WAWebMexUsernameUpdateNotificationHandler").mexHandleUsernameChange);case"UsernameDeleteNotification":return p(a,d("WAWebMexUsernameUpdateNotificationHandler").mexHandleUsernameDelete);case"UsernameUpdateNotification":return p(a,d("WAWebMexUsernameUpdateNotificationHandler").mexHandleUsernameChangeForSideSub);case"AccountSyncUsernameNotification":return p(a,d("WAWebMexUsernameAccountSyncNotificationHandler").mexHandleUsernameAccountSync);case"NotificationUserBrigadingUpdate":return p(a,d("WAWebHandleBrigadingUpdateNotification").mexHandleBrigadingNotification);default:return(h||(h=b("Promise"))).reject(new(d("WAParsableWapNode").XmppParsingFailure)(l,"no concrete handler for: "+a.OperationName))}}function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.mexResponse,e=d("WAWebMexRelayEnvironment").parseFatalExtensionError(c.errors);if(e!=null)throw new(d("WAParsableWapNode").XmppParsingFailure)(l,"errors list in parsed json has fatal error");if(c.data!=null){yield b(a,c.data);return r(a.stanzaId,a.from)}throw new(d("WAParsableWapNode").XmppParsingFailure)(l,"null data in parsed json")});return q.apply(this,arguments)}function r(a,b){return d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(a),to:b,"class":"notification",type:"mex"})}function s(a,b){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){d("WALogger").DEV(i()).tags("mex").devConsole(a.from,b)});return t.apply(this,arguments)}g.handleMexNotification=a}),98);
__d("WAWebNewsletterDeleteNotification",["WALogger","WASmaxNewslettersDeleteNotificationRPC","WAWebApiChat","WAWebBackendApi","WAWebJidToWid","WAWebNewsletterBackendQueues","WAWebNewsletterDeleteChatJob","WAWebNewsletterGatingUtils","WAWebNewsletterMetadataJob","WAWebNewsletterSystemMessages","WAWebNewsletterUpdateMsgsRecordsJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][metadata-notification] Failed to update the db records"]);h=function(){return a};return a}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebNewsletterBackendQueues").newsletterDeleteQueue.wait();a=d("WASmaxNewslettersDeleteNotificationRPC").receiveDeleteNotificationRPC(a);var b=a.makeDeleteNotificationResponseAck;a=a.parsedRequest;var c=a.from,e=d("WAWebJidToWid").newsletterJidToWid(c),f=(yield d("WAWebApiChat").getChatRecord(e));if(!d("WAWebNewsletterGatingUtils").isNewsletterEnabled()||f==null)return b();try{a=a.isSender==="true";if(a){yield d("WAWebNewsletterMetadataJob").deleteNewsletterMetadata(c.toString());yield d("WAWebNewsletterDeleteChatJob").deleteNewsletterChat(e);yield d("WAWebNewsletterMetadataJob").deleteNewsletterPicture(c.toString());yield d("WAWebBackendApi").frontendSendAndReceive("deleteNewsletter",{id:e,keep:!1});return b()}a=d("WAWebNewsletterSystemMessages").genNewsletterDeletionSystemMessages({id:c,name:f.name});yield d("WAWebNewsletterMetadataJob").updateNewsletterMetadata({id:c,terminated:!0});yield d("WAWebNewsletterUpdateMsgsRecordsJob").addNewsletterMsgsRecords(a);yield d("WAWebBackendApi").frontendSendAndReceive("terminateNewsletter",{id:e,msgs:a})}catch(a){d("WALogger").ERROR(h()).tags("newsletter").devConsole(a).sendLogs("newsletter-delete-notification-db-fail")}return b()});return i.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebNewsletterHandleAdminNotification",["WALogger","WASmaxNewslettersAdminNotificationRPC","WAWebBackendApi","WAWebCountriesUtils","WAWebJidToWid","WAWebNewsletterAdminNotificationJob","WAWebNux","WAWebUserPrefsNuxPreferences","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][admin-notification] Failed to update the db records"]);h=function(){return a};return a}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("WASmaxNewslettersAdminNotificationRPC").receiveAdminNotificationRPC(a);var b=a.makeAdminNotificationResponseAck;a=a.parsedRequest;var c=a.from,e=d("WAWebJidToWid").newsletterJidToWid(c);try{a=(a=a.adminAdminGeosuspendNotificationPayloadMixin)==null?void 0:a.adminNotificationGeosuspendedOrGeounsuspendedStateMixinMixinGroup;if(a==null)return b();switch(a.name){case"AdminNotificationGeosuspendedStateMixin":var f=a.value;f=f.geosuspendedCountry.map(function(a){a=a.isoCode;return d("WAWebCountriesUtils").asISOCountryCode(a)}).filter(Boolean);if(f.length>0){yield d("WAWebNewsletterAdminNotificationJob").updateGeosuspendedCountry(c,f,!0);d("WAWebBackendApi").frontendFireAndForget("updateGeosuspendedCountry",{id:e,countryCodes:f,toAdd:!0});f=d("WAWebNux").getNewsletterAlertsBannerNuxKey(c);d("WAWebUserPrefsNuxPreferences").resetNux(f)}break;case"AdminNotificationGeounsuspendedStateMixin":f=a.value;a=f.geounsuspendedCountry.map(function(a){a=a.isoCode;return d("WAWebCountriesUtils").asISOCountryCode(a)}).filter(Boolean);a.length>0&&(yield d("WAWebNewsletterAdminNotificationJob").updateGeosuspendedCountry(c,a,!1),d("WAWebBackendApi").frontendFireAndForget("updateGeosuspendedCountry",{id:e,countryCodes:a,toAdd:!1}));break}}catch(a){d("WALogger").ERROR(h()).tags("newsletter").devConsole(a).sendLogs("newsletter-admin-notification-db-fail")}return b()});return i.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebNewsletterHandleLeaveNotification",["WALogger","WASmaxNewslettersLeaveNotificationRPC","WAWebBackendApi","WAWebJidToWid","WAWebNewsletterDBUtils","WAWebNewsletterDeleteChatJob","WAWebNewsletterDeleteMessageAddOns","WAWebNewsletterGatingUtils","WAWebNewsletterMetadataJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][leave-notification] Failed to update the db"]);h=function(){return a};return a}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("WASmaxNewslettersLeaveNotificationRPC").receiveLeaveNotificationRPC(a);var b=a.makeLeaveNotificationResponseAck;a=a.parsedRequest;a=a.from;if(!d("WAWebNewsletterGatingUtils").isNewsletterEnabled())return b();var c=d("WAWebJidToWid").newsletterJidToWid(a);if(!(yield d("WAWebNewsletterDBUtils").doesNewsletterExistInStorage(a))){d("WAWebBackendApi").frontendFireAndForget("updateNewsletterSubscriberCount",{id:c,update:{increment:-1}});return b()}try{yield d("WAWebNewsletterMetadataJob").deleteNewsletterMetadata(a),yield d("WAWebNewsletterDeleteMessageAddOns").deleteNewsletterMessageAddOns(a),yield d("WAWebNewsletterDeleteChatJob").deleteNewsletterChat(c),d("WAWebBackendApi").frontendFireAndForget("deleteNewsletter",{id:c,keep:!0})}catch(a){d("WALogger").ERROR(h()).tags("newsletter").devConsole(a).sendLogs("newsletter-leave-notification-db-fail")}return b()});return i.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebNewsletterHandleLiveUpdatesNotification",["WALogger","WANullthrows","WASmaxNewslettersLiveUpdatesNotificationRPC","WAWebBackendApi","WAWebNewsletterBackendAddOnsUtils","WAWebNewsletterGatingUtils","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][live-updates-notification] Failed to handle the notification"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[liveUpdate] start"]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(i());a=d("WASmaxNewslettersLiveUpdatesNotificationRPC").receiveLiveUpdatesNotificationRPC(a);var b=a.makeLiveUpdatesNotificationResponseAck;a=a.parsedRequest;try{if(!d("WAWebNewsletterGatingUtils").isNewsletterReactionEnabled())return b();var e=a.liveUpdatesMessagesNewsletterMessageResponsePayloadMixin.message,f=a.from;a=a.t;e=(yield d("WAWebNewsletterBackendAddOnsUtils").getMsgsAndAddOnsFromUpdates(e,d("WAWebWidFactory").createWid(c("WANullthrows")(f)),a));yield d("WAWebNewsletterBackendAddOnsUtils").updateAddOnDbRecords(babelHelpers["extends"]({},e,{timestamp:a}));d("WAWebBackendApi").frontendFireAndForget("updateNewsletterMessages",e);return b()}catch(a){d("WALogger").ERROR(h()).tags("newsletter").devConsole(a).sendLogs("newsletter-live-updates-db");return b()}});return j.apply(this,arguments)}g.handleNewsletterLiveUpdatesNotification=a}),98);
__d("WAWebNewsletterHandleMetadataNotification",["WALogger","WASmaxNewslettersSetMetadataNotificationRPC","WAWebCreateChat","WAWebNewsletterGatingUtils","WAWebNewsletterMetadataUpdateUtils","WAWebNewsletterModelUtils","WAWebNewsletterUpdateNewslettersRecordsJob","WAWebNux","WAWebUserPrefsNuxPreferences","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][metadata-notification] Failed to process metadata notification: ",""]);h=function(){return a};return a}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("WASmaxNewslettersSetMetadataNotificationRPC").receiveSetMetadataNotificationRPC(a);var b=a.makeSetMetadataNotificationResponseAck;a=a.parsedRequest;if(!d("WAWebNewsletterGatingUtils").isNewsletterEnabled())return b();a=babelHelpers["extends"]({},a.metadataCommonNewsletterMetadataMixin,{idJid:a.from,newsletterCreationTimeMetadataMixin:null});a=d("WAWebNewsletterModelUtils").mapNewsletterToModels(a);var c=a.chat,e=a.metadata;a=a.pic;try{yield d("WAWebNewsletterUpdateNewslettersRecordsJob").updateNewsletterChatRecords([d("WAWebCreateChat").createNewsletterObjectForStorage(c)]);yield d("WAWebNewsletterMetadataUpdateUtils").updateNewsletterMetadataAndPic(c,e,a);if(e.suspended===!0){c=d("WAWebNux").getNewsletterAlertsBannerNuxKey(e.id.toString());d("WAWebUserPrefsNuxPreferences").resetNux(c)}}catch(a){d("WALogger").ERROR(h(),a).tags("newsletter").devConsole(a).sendLogs("newsletter-metadata-notification-fail")}return b()});return i.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebNewsletterNotificationQueue",["WAPromiseQueue"],(function(a,b,c,d,e,f,g){a=new(d("WAPromiseQueue").PromiseQueueMap)();g["default"]=a}),98);
__d("WAWebHandleNewsletterNotification",["$InternalEnum","WADeprecatedWapParser","WALogger","WAParsableWapNode","WAWebNewsletterDeleteNotification","WAWebNewsletterHandleAdminNotification","WAWebNewsletterHandleLeaveNotification","WAWebNewsletterHandleLiveUpdatesNotification","WAWebNewsletterHandleMessageDeliveryUpdateNotification","WAWebNewsletterHandleMetadataNotification","WAWebNewsletterNotificationQueue","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][notification] Failed to parse notification"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][notification] Unexpected from "]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][notification] Failed to cast ",""]);j=function(){return a};return a}var k=b("$InternalEnum")({Metadata:"metadata",Leave:"leave",Delete:"delete",LiveUpdates:"live_updates",MessageDeliveryUpdates:"message_delivery_updates",Admin:"admin"}),l=new(c("WADeprecatedWapParser"))("incomingNewsletterNotificationParser",function(a){var b=a.mapFirstChild(function(a){return a.tag()}),e=k.cast(b),f=a.attrFromJid();if(e==null){d("WALogger").ERROR(j(),b).tags("newsletter").devConsole(a,b).sendLogs("newsletter-failed-to-cast-notification");throw c("err")("Failed to cast "+b)}if(f.type!=="newsletter"){d("WALogger").ERROR(i()).tags("newsletter").devConsole(f).sendLogs("newsletter-wrong-notification-sender-type-"+f.type);throw c("err")("Unexpected from "+f.type)}return{firstChildTag:e,from:f.newsletterJid}});function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{var b=l.parseOrThrow(a),e=b.firstChildTag;b=b.from;return yield c("WAWebNewsletterNotificationQueue").enqueue(b,function(){switch(e){case k.Metadata:return c("WAWebNewsletterHandleMetadataNotification")(a);case k.Leave:return c("WAWebNewsletterHandleLeaveNotification")(a);case k.Delete:return c("WAWebNewsletterDeleteNotification")(a);case k.LiveUpdates:return d("WAWebNewsletterHandleLiveUpdatesNotification").handleNewsletterLiveUpdatesNotification(a);case k.MessageDeliveryUpdates:return d("WAWebNewsletterHandleMessageDeliveryUpdateNotification").handleNewsletterMessageDeliveryUpdateNotification(a);case k.Admin:return c("WAWebNewsletterHandleAdminNotification")(a)}})}catch(a){d("WALogger").ERROR(h()).tags("newsletter").devConsole(a).sendLogs("failed-to-parse-newsletter-notification");throw new(d("WAParsableWapNode").XmppParsingFailure)("incomingNewsletterNotificationParser",a instanceof Error?a.name:typeof a+" was thrown rather than an Error")}});return m.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebHandlePairDevice",["Promise","WABinary","WALogger","WAShiftTimer","WASmaxMdSetToCompanionRPC","WAWebAdvSignatureApi","WAWebConnModel","WAWebNetworkStatus","WAWebSocketConstants","WAWebSocketModel","WAWebUserPrefsMultiDevice","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handlePairDevice: error: ",""]);i=function(){return a};return a}var j=60*1e3,k=20*1e3,l=[],m=null;function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c;try{c=d("WASmaxMdSetToCompanionRPC").receiveSetToCompanionRPC(a)}catch(a){d("WALogger").ERROR(i(),a.toString());return(h||(h=b("Promise"))).reject(a)}a=c;var e=a.parsedRequest;a=a.makeSetToCompanionResponseClientResponse;e=e.pairDeviceRef.map(function(a){a=new(d("WABinary").Binary)(a.elementValue);return a.readString(a.size())});void o(e);return a()});return n.apply(this,arguments)}function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebAdvSignatureApi").generateADVSecretKey(),l=a,m||(m=new(d("WAShiftTimer").ShiftTimer)(function(){if(d("WAWebUserPrefsMultiDevice").isRegistered()||!c("WAWebNetworkStatus").online)m&&m.cancel(),m=null;else if(!l||!l.length)m&&m.cancel(),m=null,d("WAWebSocketModel").Socket.state=d("WAWebSocketConstants").SOCKET_STATE.UNPAIRED_IDLE;else{var a=l.length===6?j:k,b=l.shift();d("WAWebConnModel").Conn.set({ref:b,refTTL:a});d("WAWebSocketModel").Socket.state=d("WAWebSocketConstants").SOCKET_STATE.UNPAIRED;m&&m.onOrAfter(a)}})),m.forceRunNow()});return p.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebCompanionRegUtils",["WALogger","WAShiftTimer","WATimeUtils","WAWebAdvSignatureApi","WAWebCmd","WAWebLogoutReasonConstants","WAWebSocketLogoutJob","WAWebSocketModel","WAWebUserPrefsIsLoggedIn","WAWebWamDeviceLinkReporter","WAWebWamEnumMdLinkDeviceCompanionStage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][reg] main screen unblocked in ","ms"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync][reg] begin device pairing latency measurement"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["logout due to initial history sync timeout"]);j=function(){return a};return a}var k=!1,l=!1,m=1e3,n=6e4*3;function o(){d("WALogger").ERROR(j()),void d("WAWebSocketLogoutJob").socketLogout(d("WAWebLogoutReasonConstants").LogoutReason.HistorySyncTimeout)}function a(){k=!1,l=!1}function c(){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(k||l)return;yield d("WAWebWamDeviceLinkReporter").setDeviceLinkPairStage(d("WAWebWamEnumMdLinkDeviceCompanionStage").MD_LINK_DEVICE_COMPANION_STAGE.FIRST_CONNECT);k=!0;yield d("WAWebAdvSignatureApi").clearADVSecretKey();d("WAWebUserPrefsIsLoggedIn").setIsConnectedAsRegistered(!0)});return p.apply(this,arguments)}function q(){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(k||l)return;l=!0;yield d("WAWebSocketModel").Socket.clearCredentialsAndStoredData();yield d("WAWebAdvSignatureApi").clearADVSecretKey()});return r.apply(this,arguments)}function e(){new(d("WAShiftTimer").ShiftTimer)(function(){q()}).onOrAfter(m)}var s;function f(){s==null&&(s=self.setTimeout(o,n),d("WAWebCmd").Cmd.on("on_initial_chat_synced",function(){self.clearTimeout(s)}))}function t(){var a=d("WATimeUtils").unixTimeMs();d("WALogger").LOG(i());d("WAWebCmd").Cmd.on("on_critical_sync_done",function(){d("WALogger").LOG(h(),d("WATimeUtils").unixTimeMs()-a)})}g.resetCompanionReg=a;g.startLogin=c;g.startLogout=q;g.logoutAfterValidationFail=e;g.startInitialHistorySyncTimeout=f;g.initDevicePairingLatencyMeasurement=t}),98);
__d("WAWebHandlePairSuccess",["invariant","Promise","WABase64","WABinary","WACryptoHmac","WALogger","WANullthrows","WAQplTypes","WASmaxMdSetRegRPC","WATimeUtils","WAWebAdvSignatureApi","WAWebAltDeviceLinkingApi","WAWebBizAgentAction","WAWebBizCoexGatingUtils","WAWebCompanionRegUtils","WAWebConnModel","WAWebContactsDbLidMigrationUtils","WAWebCryptoCurve25519","WAWebE2ETestPairingConstants","WAWebJidToWid","WAWebLocalStorage","WAWebLogoutReasonConstants","WAWebMobilePlatforms","WAWebProtobufsAdv.pb","WAWebSignalCommonUtils","WAWebSignalStoreApi","WAWebSingleSignalSession","WAWebSocketLogoutJob","WAWebUserPrefsGeneral","WAWebUserPrefsHistorySync","WAWebUserPrefsMeUser","WAWebUserPrefsMultiDevice","WAWebWamDeviceLinkReporter","WAWebWamEnumMdLinkDeviceCompanionStage","WAWebWidFactory","asyncToGeneratorRuntime","decodeProtobuf","encodeProtobuf","gkx"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["error in handlePairSuccess, ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["isSignalStorageUsingAccountIdentifierJustKnobx is true - the whole session will be using AccountIdentifierForSignalStorage"]);m=function(){return a};return a}var n=!1;function a(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){c("gkx")("26256")&&(c("WAWebLocalStorage")==null?void 0:c("WAWebLocalStorage").removeItem(d("WAWebE2ETestPairingConstants").PAIRING_ATTEMPT_ONGOING_KEY));if(n||d("WAWebUserPrefsMultiDevice").isRegistered())return;d("WAWebSingleSignalSession").isSignalStorageUsingAccountIdentifierJustKnobx()&&(d("WALogger").WARN(m()),yield d("WAWebSingleSignalSession").setIsUsingAccountIdentifierForSignalStorage(!0));(d("WAWebContactsDbLidMigrationUtils").isContactsDbReadIsUsingLidJustKnobx()||d("WAWebUserPrefsGeneral").getContactsDbReadIsUsingLid_LS())&&(yield d("WAWebUserPrefsGeneral").setContactsDbReadIsUsingLid(!0));n=!0;var e=d("WATimeUtils").unixTimeWithoutClockSkewCorrection(),f=null;try{f=d("WASmaxMdSetRegRPC").receiveSetRegRPC(a)}catch(c){d("WALogger").DEV(l(),a.toString());d("WALogger").ERROR(k(),c.toString());n=!1;return(i||(i=b("Promise"))).reject(c)}a=f;f=a.parsedRequest;var g=a.makeSetRegResponseClientResponse;a=a.makeSetRegResponseError;try{d("WAWebCompanionRegUtils").resetCompanionReg();d("WAWebUserPrefsMultiDevice").setPairingTimestamp(e);if(d("WAWebAltDeviceLinkingApi").getPairingType()===d("WAWebAltDeviceLinkingApi").PairingType.ALT_DEVICE_LINKING){var o;(o=d("WAWebAltDeviceLinkingApi").getCurrentMarker())==null?void 0:o.addPoint("alt_linking_pair_success");(o=d("WAWebAltDeviceLinkingApi").getCurrentMarker())==null?void 0:o.end(d("WAQplTypes").QuickLogActionType.SUCCESS)}o=f.pairSuccessDeviceJid;var p=f.pairSuccessDeviceIdentityElementValue,q=f.pairSuccessPlatformName;f=f.pairSuccessDeviceLid;d("WAWebConnModel").Conn.blockStoreAdds=!1;d("WAWebConnModel").Conn.platform=q;yield d("WAWebMobilePlatforms").setMobilePlatform(q);d("WAWebUserPrefsMeUser").setMe(d("WAWebJidToWid").deviceJidToDeviceWid(o));f!=null&&d("WAWebUserPrefsMeUser").setMeLid(d("WAWebJidToWid").deviceJidToDeviceWid(f));q=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsAdv.pb").ADVSignedDeviceIdentityHMACSpec,p);f=q.details;p=q.hmac;f!=null&&p!=null||h(0,56299);var r=new(d("WABinary").Binary)(f).readByteArray();d("WAWebBizCoexGatingUtils").smbHostedPrimaryPairingAllowed()&&(q.accountType===d("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED&&(yield d("WAWebUserPrefsMultiDevice").setIsHostedMeAccount(),r=d("WABinary").Binary.build(d("WAWebAdvSignatureApi").ADV_HOSTED_PREFIX_DEVICE_IDENTITY_ACCOUNT_SIGNATURE,c("WANullthrows")(f)).readByteArray()));q=(yield d("WAWebAdvSignatureApi").getADVSecretKey());q=(yield d("WACryptoHmac").hmacSha256(q,r));r=d("WABase64").encodeB64(q);q=d("WABase64").encodeB64(p);if(r!==q){d("WAWebCompanionRegUtils").logoutAfterValidationFail();n=!1;return a()}p=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsAdv.pb").ADVSignedDeviceIdentitySpec,f);r=p.accountSignatureKey;r!=null||h(0,56344);q=p.accountSignature;q!=null||h(0,56295);f=(yield d("WAWebSignalStoreApi").waSignalStore.getRegistrationInfo());f!=null||h(0,56296);yield d("WAWebWamDeviceLinkReporter").initDeviceLinkEvent(r,f.identityKeyPair.pubKey,e);yield d("WAWebWamDeviceLinkReporter").setDeviceLinkPairStage(d("WAWebWamEnumMdLinkDeviceCompanionStage").MD_LINK_DEVICE_COMPANION_STAGE.PAIR_SUCCESS_RECEIVED);d("WAWebCompanionRegUtils").initDevicePairingLatencyMeasurement();q=d("WAWebAdvSignatureApi").verifyDeviceIdentityAccountSignature(p,f.identityKeyPair.pubKey,null);if(!q){yield d("WAWebWamDeviceLinkReporter").commitDeviceLinkEvent(401);d("WAWebCompanionRegUtils").logoutAfterValidationFail();n=!1;return a()}p.deviceSignature=(yield d("WAWebAdvSignatureApi").generateDeviceSignature(p,f.identityKeyPair,r));yield d("WAWebSignalStoreApi").waSignalStore.putIdentity(d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(d("WAWebWidFactory").toUserWid(d("WAWebJidToWid").deviceJidToDeviceWid(o))).toString(),d("WAWebSignalCommonUtils").bufferToStr(d("WAWebCryptoCurve25519").toSignalCurvePubKey(r)));yield d("WAWebAdvSignatureApi").setADVSignedIdentity(p);q=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsAdv.pb").ADVDeviceIdentitySpec,p.details);a=q.keyIndex;a!=null||h(0,56297);p.accountSignatureKey=void 0;f=d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsAdv.pb").ADVSignedDeviceIdentitySpec,p).readByteArray();o=g({deviceIdentityElementValue:f,deviceIdentityKeyIndex:a});yield d("WAWebWamDeviceLinkReporter").setDeviceLinkPairStage(d("WAWebWamEnumMdLinkDeviceCompanionStage").MD_LINK_DEVICE_COMPANION_STAGE.PAIR_DEVICE_SIGN_SENT);r=(yield d("WAWebUserPrefsHistorySync").getInitialHistorySyncComplete());r!==!0&&d("WAWebCompanionRegUtils").startInitialHistorySyncTimeout();n=!1;d("WAWebBizAgentAction").setShouldLogAgentLogin({loginTimestamp:e});return o}catch(a){d("WALogger").ERROR(j(),a).verbose().devConsole(a).sendLogs("error in handlePairSuccess"),yield d("WAWebWamDeviceLinkReporter").commitDeviceLinkEvent(-1),yield d("WAWebSocketLogoutJob").socketLogout(d("WAWebLogoutReasonConstants").LogoutReason.UnknownCompanion)}});return o.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebHandlePreKeyLow",["WADeprecatedWapParser","WALogger","WAWap","WAWebEventsWaitForOfflineDeliveryEnd","WAWebSignalStoreApi","WAWebUploadPreKeysJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["handlePreKeyLow: Parsing Error: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handlePreKeyLow: error while parsing: ",""]);i=function(){return a};return a}var j=new Set(),k=new(c("WADeprecatedWapParser"))("lowKeyParser",function(a){a.assertTag("notification");a.assertAttr("type","encrypt");a.assertFromServer();return{stanzaId:a.attrString("id"),numRemaining:a.child("count").attrInt("value")}});function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=k.parse(a);if(c.error){d("WALogger").DEV(i(),a.toString());d("WALogger").ERROR(h(),c.error.toString());throw c.error}else{a=c.success;var e=d("WAWap").wap("ack",{to:d("WAWap").S_WHATSAPP_NET,id:d("WAWap").CUSTOM_STRING(a.stanzaId),"class":"notification"});if(j.has(b))return e;j.add(b);d("WAWebSignalStoreApi").waSignalStore.setServerHasPreKeys(!1);yield d("WAWebEventsWaitForOfflineDeliveryEnd").waitForOfflineDeliveryEnd();return d("WAWebUploadPreKeysJob").uploadPreKeys().then(function(){return e})["finally"](function(){return void j["delete"](b)})}});return l.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebHandlePresence",["Promise","WALogger","WASmaxPresenceServerUpdateRPC","WATimeUtils","WAWebChangePresenceHandlerAction","WAWebJidToWid"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);j=function(){return a};return a}function k(a){if(a!=null){if(!["deny","none","error"].includes(a))return d("WATimeUtils").castToUnixTime(Number(a))}else return d("WATimeUtils").unixTime()}function a(a){try{var e=d("WASmaxPresenceServerUpdateRPC").receiveServerUpdateRPC(a);e=e.parsedRequest.availableOrLastSeenWithOtherValueOrUserUnavailableMixinGroup;e={id:d("WAWebJidToWid").chatJidToChatWid(e.value.from),type:e.value.type||"available",deny:e.value.last==="deny"||void 0,t:e.value.type==="unavailable"?k(e.value.last):void 0};return c("WAWebChangePresenceHandlerAction")(e)}catch(c){d("WALogger").DEV(j(),a.toString());d("WALogger").ERROR(i(),c.toString());return(h||(h=b("Promise"))).reject(c)}}g["default"]=a}),98);
__d("WAWebSetTcTokenChatAction",["WAArrayBufferUtils","WAWebApiOrphanTcToken","WAWebChatGetExistingBridge","WAWebSchemaChat","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b,c){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){if(c==null)return;if(!a.isUserNotPSA())return;var e=(yield d("WAWebChatGetExistingBridge").getExisting(a));if(e==null){yield d("WAWebApiOrphanTcToken").createOrUpdateOrphanTcToken(a.toString(),{tcToken:c,tcTokenTimestamp:b});return}if(e.tcToken!=null&&d("WAArrayBufferUtils").arrayBuffersEqualUNSAFE(e.tcToken,c)||e.tcTokenTimestamp!=null&&e.tcTokenTimestamp>b)return;c={tcToken:c,tcTokenTimestamp:b};e.set(c);yield d("WAWebSchemaChat").getChatTable().merge(a.toString(),c)});return h.apply(this,arguments)}g.setTcToken=a}),98);
__d("WAWebHandlePrivacyTokensNotification",["Promise","WAByteArray","WADeprecatedWapParser","WALogger","WAWap","WAWebEventsWaitForOfflineDeliveryEnd","WAWebJidToWid","WAWebPresenceCollection","WAWebSetTcTokenChatAction","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["incomingPrivacyTokensParser - receiving an unknown type: ",""]);k=function(){return a};return a}var l=function(a){var b=d("WAByteArray").uint8ArrayToBuffer(a.contentBytes());return{type:"trusted_contact",content:b,ts:a.attrTime("t")}},m=new(c("WADeprecatedWapParser"))("incomingPrivacyTokensParser",function(a){a.assertTag("notification");var b=a.attrString("id"),c=a.attrUserJid("from");a=a.child("tokens");var e=[];a.forEachChildWithTag("token",function(a){var b=a.attrString("type");switch(b){case"trusted_contact":e.push(l(a));break;default:d("WALogger").LOG(k(),b)}});return{id:b,from:c,privacyTokens:e}});function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.ts;a=d("WAWebJidToWid").userJidToUserWid(a.from);b.type==="trusted_contact"&&(yield d("WAWebSetTcTokenChatAction").setTcToken(a,c,b.content),yield d("WAWebPresenceCollection").PresenceCollection.reSubscribeWhenActive(a))});return o.apply(this,arguments)}function a(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=m.parse(a);if(c.error){d("WALogger").LOG(j(),a.toString());d("WALogger").ERROR(i(),c.error.toString());throw c.error}var e=c.success;a=d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(e.id),"class":"notification",to:d("WAWap").JID(e.from),type:"privacy_token"});yield d("WAWebEventsWaitForOfflineDeliveryEnd").waitForOfflineDeliveryEnd();yield (h||(h=b("Promise"))).all(e.privacyTokens.map(function(a){return n(e,a)}));return a});return p.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebHandleProfilePicNotification",["Promise","WADeprecatedWapParser","WALogger","WAWap","WAWebBackendJobsCommon","WAWebChangeProfilePicThumb","WAWebCommsWapMd","WAWebGroupSystemMsg","WAWebHandleSingleMsg","WAWebJidToWid","WAWebLidAwareContactsDB","WAWebOrchestratorNonPersistedJob","WAWebProfilePicConstants","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid type received"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["could not find side contact hash for profile pic update operation"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);l=function(){return a};return a}var m=new(c("WADeprecatedWapParser"))("incomingProfilePicNotificationParser",function(a){a.assertTag("notification");var b,c;if(a.hasChild("delete"))b="delete",c=a.child("delete");else if(a.hasChild("set"))b="set",c=a.child("set");else if(a.hasChild("request"))b="request",c=a.child("request"),c.assertAttr("jid",d("WAWebUserPrefsMeUser").assertGetMe().toJid());else return a["throw"]("Expected child type to be one of: set, delete, request");var e=a.attrString("id");return c.hasAttr("jid")?{type:b,from:d("WAWebJidToWid").chatJidToChatWid(a.attrChatJid("from")),jid:d("WAWebJidToWid").chatJidToChatWid(c.attrChatJid("jid")),author:c.hasAttr("author")?d("WAWebJidToWid").userJidToUserWid(c.attrUserJid("author")):null,ts:a.attrTime("t"),rawTs:a.attrString("t"),stanzaId:e,picId:b==="set"?c.attrInt("id",1):0}:{from:d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("from")),jid:null,type:b,hash:c.attrString("hash"),ts:a.attrTime("t"),stanzaId:e}});function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=m.parse(a);if(e.error){d("WALogger").DEV(l(),a.toString());d("WALogger").ERROR(k(),e.error.toString());return(h||(h=b("Promise"))).reject(e.error)}var f=e.success;a=(h||(h=b("Promise"))).resolve();if(f.jid||f.hash){var g;if(f.jid)g=f.jid;else{e=(yield c("WAWebLidAwareContactsDB").equals(["contactHash"],f.hash));e.length===0?d("WALogger").WARN(j()):g=d("WAWebWidFactory").createWid(e[0].id)}switch(f.type){case"delete":case"set":var n=f.type==="delete"?d("WAWebProfilePicConstants").ProfilePicCommand.Remove:d("WAWebProfilePicConstants").ProfilePicCommand.Set;g&&(a=d("WAWebChangeProfilePicThumb").changeProfilePicThumb(g,n).then(function(){if(!g.isGroup())return;if(f.ts!=null){var a=d("WAWebGroupSystemMsg").genGroupPicChangeNotificationMsg(g,n,f.ts,f.author||d("WAWebUserPrefsMeUser").getMeUser());return d("WAWebHandleSingleMsg").handleSingleMsg(g,a,"profilePicNotification")}}));break;case"request":break;default:d("WALogger").WARN(i()).devConsole(f.type)}}return a.then(function(){return d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(f.stanzaId),to:d("WAWebCommsWapMd").JID(f.from),"class":"notification",type:"picture"})})});return o.apply(this,arguments)}function a(a){var b=d("WAWebBackendJobsCommon").getNonCriticalNotificationPriority(Boolean(a.attrs.offline));return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("handleProfilePicNotification",function(a){return n(a.node)},{priority:b}).waitUntilCompleted({node:a})}g.handleProfilePicNotificationJob=a}),98);
__d("WAWebRevokeStatusPsaMsgAction",["Promise","WALogger","WAWebDBMessageDelete","WAWebStatusCollection","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["revokeStatusPSA completed"]);i=function(){return a};return a}function j(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b.length>0&&(a.revokeMsgs(b),yield d("WAWebDBMessageDelete").removeMessagesFromHistory(b),d("WALogger").LOG(i()).tags("revoke-status-psa"))});return k.apply(this,arguments)}function a(){var a=d("WAWebStatusCollection").StatusCollection.getPSAStatus();if(!a)return(h||(h=b("Promise"))).resolve();var c=a.msgs.map(function(a){return a.id.toString()});return j(a,c)}function c(a){var c=d("WAWebStatusCollection").StatusCollection.getPSAStatus();if(!c)return(h||(h=b("Promise"))).resolve();var e=c.msgs.filter(function(b){return b.campaignId===a}).map(function(a){return a.id.toString()});return j(c,e)}g.revokeAllStatusPSA=a;g.revokeStatusPSA=c}),98);
__d("WAWebHandlePsa",["$InternalEnum","Promise","WAByteArray","WADeprecatedWapParser","WAJids","WALogger","WAWap","WAWebABProps","WAWebBackendJobs.flow","WAWebCommsWapMd","WAWebHandleMsgProcess","WAWebHandleMsgTypes.flow","WAWebJidToWid","WAWebRevokeStatusPsaMsgAction","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["PSA notification received, node: ",""]);k=function(){return a};return a}var l=b("$InternalEnum")({Image:"image",Video:"video",Text:"text"}),m=new(c("WADeprecatedWapParser"))("incomingCampaignParser",function(a){a.assertTag("notification");a.assertAttr("from",d("WAJids").STATUS_JID);var b=a.attrString("id"),c=d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("participant")),e=a.attrTime("t");a=a.child("campaign");var f=a.hasChild("revoke"),g=a.attrString("id"),h=a.maybeAttrInt("duration");a=a.mapChildrenWithTag("message",function(a){var b=a.child("media");b.attrEnumValues("mediatype",l.members());a={id:a.attrString("id"),ts:e,body:d("WAByteArray").uint8ArrayToBuffer(b.contentBytes())};return a});return{participant:c,stanzaId:b,campaignId:g,campaignDuration:h,revoke:f,ts:e,messages:a}});function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.participant,e=a.campaignId;a=a.campaignDuration;var f=b.id,g=b.ts;b=b.body;f={type:d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.OTHER_STATUS,externalId:f,ts:g,edit:-1,isHsm:!1,count:null,chat:d("WAWebWidFactory").createWid(d("WAJids").STATUS_JID),author:c,pushname:null,isDirect:!1,campaignId:e,campaignDuration:a};g={retryCount:0,e2eType:d("WAWebBackendJobs.flow").CiphertextType.Msg,encMediaType:d("WAWebBackendJobs.flow").EncMediaType.Image,hideFail:!1};c={nativeFlowName:null,verifiedNameSerial:null,verifiedLevel:null,verifiedNameCert:null,privacyMode:null,campaignId:null};yield d("WAWebHandleMsgProcess").processDecryptedMessageProto({decrypted:b,info:f,e2eInfo:g,bizInfo:c,hsmInfo:null,isPadded:!1})});return o.apply(this,arguments)}function a(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(k(),a);var c=m.parse(a);if(c.error){d("WALogger").LOG(j(),a.toString());d("WALogger").ERROR(i(),c.error.toString());throw c.error}var e=c.success;a=d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(e.stanzaId),participant:d("WAWebCommsWapMd").JID(e.participant),"class":"notification",type:"psa",to:d("WAWebCommsWapMd").JID(d("WAWebWidFactory").createWid(d("WAJids").STATUS_JID))});if(!d("WAWebABProps").getABPropConfigValue("web_status_psa"))return a;e.revoke?yield d("WAWebRevokeStatusPsaMsgAction").revokeStatusPSA(e.campaignId):yield (h||(h=b("Promise"))).all(e.messages.map(function(a){return n(e,a)}));return a});return p.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebHandleQPPrefetchTimestampNotification",["WASmaxPsaResetSmbLastQpPrefetchTimestampRPC","WAWebBizGatingUtils","WAWebWorkerSafeBackendApi"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxPsaResetSmbLastQpPrefetchTimestampRPC").receiveResetSmbLastQpPrefetchTimestampRPC(a);a=a.makeResetSmbLastQpPrefetchTimestampResponseAck;a=a();d("WAWebBizGatingUtils").qpGraphQLEnabled()&&d("WAWebWorkerSafeBackendApi").workerSafeFireAndForget("fetchQuickPromotionsNow");return a}g.handleQPPrefetchTimestampNotification=a}),98);
__d("WAWebParseQPSurfacesNotification",["WALogger","WASmaxQpSurfacesQPNotificationRPC","WATimeUtils","WAWebProtobufsQuickPromotionSurfaces.pb","decodeProtobuf"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["loadQuickPromotions: Malformed filter rules node. Skipping the promotion"]);h=function(){return a};return a}function a(a){a=d("WASmaxQpSurfacesQPNotificationRPC").receiveQPNotificationRPC(a);var b=a.parsedRequest;a=a.makeQPNotificationResponseAck;var c=b.surfacesQPSurfacesMixin;b=b.t;c=c.surface;c=c.map(function(a){var b=a.promotion.reduce(function(a,b){var c=b.qpConfigFilterRules;if(c==null){b.qpConfigFilterRules;var e=babelHelpers.objectWithoutPropertiesLoose(b,["qpConfigFilterRules"]);a.push(e);return a}try{e=d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsQuickPromotionSurfaces.pb").QP$FilterClauseSpec,c.elementValue);b.qpConfigFilterRules;c=babelHelpers.objectWithoutPropertiesLoose(b,["qpConfigFilterRules"]);b=babelHelpers["extends"]({},c,{qpConfigFilterRules:e});a.push(b)}catch(a){d("WALogger").WARN(h())}return a},[]);return{id:a.id,promotions:b}});return{surfaces:c,ts:d("WATimeUtils").castToUnixTime(b),makeAck:a}}g.parseQPSurfacesNotification=a}),98);
__d("WAWebHandleQPSurfacesNotification",["WALogger","WAWebBizGatingUtils","WAWebCTWAConstants","WAWebJobUpdateQPSurfaces","WAWebParseQPSurfacesNotification","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleQPSurfacesNotification: skipping QP surface ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleQPSurfacesNotification: unknown QP surface ",""]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("WAWebParseQPSurfacesNotification").parseQPSurfacesNotification(a);var b=a.surfaces,c=a.makeAck;a=a.ts;c=c();if(!d("WAWebBizGatingUtils").qpSDKProcessingEnabled())return c;var e;d("WAWebBizGatingUtils").qpGraphQLEnabled()?e=b.filter(function(a){var b=d("WAWebCTWAConstants").KNOWN_QP_SURFACES.get(a.id);if(b==null){d("WALogger").WARN(i(),a.id);return!1}b=!d("WAWebBizGatingUtils").qpSurfaceIdsUsingGraphQL().has(b);b||d("WALogger").WARN(h(),a.id);return b}):e=b;yield d("WAWebJobUpdateQPSurfaces").updateQPSurfacesFromNotification(e,a);return c});return j.apply(this,arguments)}g.handleQPSurfacesNotification=a}),98);
__d("WAWebProcessRetryKeyBundle",["WALogger","WAWebAddonRetryRequestUtils","WAWebApiMessageInfoStore","WAWebApiParticipantStore","WAWebChatCollection","WAWebDBMessageSerialization","WAWebE2eRetryRejectWamEvent","WAWebLidFoundationalGatingUtils","WAWebMsgKey","WAWebMsgModel","WAWebMsgType","WAWebSchemaMessage","WAWebSendMsgTypes","WAWebSignal","WAWebStatusGatingUtils","WAWebUserPrefsMeUser","WAWebUserPrefsStatus","WAWebWamEnumDeviceType","WAWebWamEnumRetryRejectReason","WAWebWamMsgUtils","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateLocalSession: delete local session due to same base key"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateLocalSession: delete session because reg does not match, saved: ",", received: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateLocalSession: retryCount: ",", offline: ",", has keyBundle: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["processKeyBundle: update local session with the retry key bundle"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["processKeyBundle: update local session with the retry key bundle (offline)"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["processKeyBundle: delete session because reg does not match, saved: ",", received: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["processKeyBundle: missing session for retry"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["processKeyBundle: skip due to missing key bundle"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMsgIfAuthorized: ",", "," retry eligibility ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMsgIfAuthorized: msg missing rowId ","."]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["getMsgIfAuthorized: can not find msg ","."]);r=function(){return a};return a}function a(a,b,c,d,e,f){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h){var i=d("WAWebUserPrefsMeUser").getMaybeMeLidUser(),j=d("WAWebUserPrefsMeUser").getMeUser();(e.isLid()||f)&&i!=null?f=i:f=j;i=new(c("WAWebMsgKey"))({id:a,remote:b,fromMe:!0,participant:b.isUser()?void 0:f});j=(yield d("WAWebAddonRetryRequestUtils").getSentAddonMsgRecord(i));if(j!=null)b=h==null?void 0:h.sentAddonRowId,f=j.selfMsgRow.rowId,j={type:d("WAWebSendMsgTypes").SendMessageRecordType.Addon,data:j.msgData};else{var k=(yield d("WAWebSchemaMessage").getMessageTable().get(String(i)));if(!k){d("WALogger").WARN(r(),i.toString());return null}b=h==null?void 0:h.rowId;f=k.type===d("WAWebMsgType").MSG_TYPE.REVOKED?k.protocolMessageRowId:k.rowId;h=new(d("WAWebMsgModel").Msg)(d("WAWebDBMessageSerialization").messageFromDbRow(k));j={type:d("WAWebSendMsgTypes").SendMessageRecordType.Message,data:h}}if(f==null){d("WALogger").WARN(q(),i.toString());return null}k=(yield d("WAWebApiMessageInfoStore").isRetryEligible(i,e,b,f));j.type===d("WAWebSendMsgTypes").SendMessageRecordType.Message&&(yield j.data.waitForPrep());d("WALogger").LOG(p(),a,String(e),k).tags("messaging");h=d("WAWebWamEnumRetryRejectReason").RETRY_REJECT_REASON.OTHER;i=!1;j.data.type===d("WAWebMsgType").MSG_TYPE.REVOKED&&(i=!0,j.data.type="protocol",j.data.subtype=j.data.subtype==="admin"?"admin_revoke":"sender_revoke");switch(k){case d("WAWebApiMessageInfoStore").RetryEligibilityResult.ELIGIBLE:return j;case d("WAWebApiMessageInfoStore").RetryEligibilityResult.INELIGIBLE_ALREADY_DELIVERED:h=d("WAWebWamEnumRetryRejectReason").RETRY_REJECT_REASON.DOUBLE_CHECKMARK;break;case d("WAWebApiMessageInfoStore").RetryEligibilityResult.INELIGIBLE_CHANGED_IDENTITY:h=d("WAWebWamEnumRetryRejectReason").RETRY_REJECT_REASON.IDENTITY_CHANGE;break;default:h=d("WAWebWamEnumRetryRejectReason").RETRY_REJECT_REASON.OTHER;break}new(d("WAWebE2eRetryRejectWamEvent").E2eRetryRejectWamEvent)({senderDeviceType:e.isCompanion()?d("WAWebWamEnumDeviceType").DEVICE_TYPE.COMPANION:d("WAWebWamEnumDeviceType").DEVICE_TYPE.PRIMARY,messageType:d("WAWebWamMsgUtils").getWamMessageType(j.data),msgRetryCount:g,retryRevoke:i,retryRejectReason:h}).commit();return null});return s.apply(this,arguments)}function t(a,b,c,d,e){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){if(c==null||!a||a.type==="regular_retry"&&!a.key){d("WALogger").LOG(o());return!1}if(f){if(e==null){d("WALogger").LOG(n());yield d("WAWebSignal").Session.deleteRemoteInfo(b);return!1}else if(e!==c){d("WALogger").LOG(m(),e,c);yield d("WAWebSignal").Session.deleteRemoteInfo(b);return!1}d("WALogger").LOG(l())}else d("WALogger").LOG(k());yield d("WAWebSignal").Session.createSignalSession({wid:b,regId:c,identity:a.identity,deviceIdentity:a.deviceIdentity,key:a.key,skey:a.skey},d("WAWebLidFoundationalGatingUtils").shouldUseDeprecatedSessionWhenCreatingNewSessions(b));return!0});return u.apply(this,arguments)}function e(a,b){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=b.from,f=b.keyBundle,g=b.offline,k=b.originalMsgId,l=b.participant,m=b.regId;b=b.retryCount;l=l||e;d("WALogger").LOG(j(),b,g.toString(),(!!f).toString());if(a.isGroup()){e=d("WAWebChatCollection").ChatCollection.get(a);e&&(l&&d("WAWebApiParticipantStore").markForgetSenderKey(e.id,[l]))}d("WAWebStatusGatingUtils").isStatusPostingEnabled()&&a.isStatus()&&(l&&void c("WAWebUserPrefsStatus").markForgetStatusSenderKey([l]));e=(yield d("WAWebSignal").Session.getRemoteRegId(l));if(d("WAWebUserPrefsMeUser").isMeAccount(d("WAWebWidFactory").toUserWid(l))&&e!==m)throw c("err")("updateLocalSession: detect registration Id change remote: "+m+", local: "+String(e)+" for peer device");a=(yield t(f,l,m,e,g));a||e!=null&&e!==m&&(d("WALogger").LOG(i(),e,m),yield d("WAWebSignal").Session.deleteRemoteSession(l));f=2;if(b===f)return d("WAWebSignal").Session.saveSessionBaseKey(l,k);else if(b>f){g=(yield d("WAWebSignal").Session.hasSameBaseKey(l,k));if(g){d("WALogger").LOG(h());return d("WAWebSignal").Session.deleteRemoteSession(l)}}});return v.apply(this,arguments)}g.getMsgIfAuthorized=a;g.processKeyBundle=t;g.updateLocalSession=e}),98);
__d("WAWebRetryRequestParser",["WADeprecatedWapParser","WAWebJidToWid","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){a=new(c("WADeprecatedWapParser"))("retryRequestParser",function(a){a.assertTag("receipt");a.assertAttr("type","retry");a.hasAttr("to")&&a.assertAttr("to",d("WAWebUserPrefsMeUser").assertGetMe().toJid());var b=d("WAWebJidToWid").jidWithTypeToWid(a.attrJidWithType("from")),c=a.hasAttr("participant")?d("WAWebJidToWid").deviceJidToDeviceWid(a.attrDeviceJid("participant")):null,e=!1;(c==null?void 0:c.isBot())&&a.hasAttr("is_lid")&&(e=a.attrString("is_lid")==="true");var f=a.hasAttr("recipient")?d("WAWebJidToWid").deviceJidToUserWid(a.attrDeviceJid("recipient")):null,g=a.child("retry"),h=a.maybeChild("keys"),i=null;if(h!=null){var j,k=h.child("skey");j={identity:h.child("identity").contentBytes(32),deviceIdentity:(j=h.maybeChild("device-identity"))==null?void 0:j.contentBytes(),skey:{id:k.child("id").contentUint(3),pubkey:k.child("value").contentBytes(32),signature:k.child("signature").contentBytes(64)}};if(b.isFbidBot()){k=null;var l=h.maybeChild("key");l!=null&&(k={id:l.child("id").contentUint(3),pubkey:l.child("value").contentBytes(32)});i=babelHelpers["extends"]({type:"bot_retry"},j,{key:k})}else{l=h.child("key");i=babelHelpers["extends"]({type:"regular_retry"},j,{key:{id:l.child("id").contentUint(3),pubkey:l.child("value").contentBytes(32)}})}}return{stanzaId:a.attrString("id"),originalMsgId:g.attrString("id"),ts:a.attrTime("t"),retryCount:g.hasAttr("count")?g.attrInt("count"):0,regId:a.child("registration").contentUint(4),offline:a.hasAttr("offline"),from:b,participant:c,isLid:e,recipient:f,keyBundle:i}});b=a;g["default"]=b}),98);
__d("WAWebSendRetryMsgJob",["invariant","WADeprecatedSendIq","WALogger","WAWebBotMessageSecret","WAWebCommsAckParser","WAWebOutgoingMessage","WAWebSendMsgCreateDeviceStanza","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendRetry: sending "," to ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendRetry: id "," to ",", requester: ",", count: ",""]);j=function(){return a};return a}function a(a,b,c,d,e,f){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g){var k;g===void 0&&(g=!1);var l=e.data.id.id,m=b||a;k=e==null?void 0:(k=e.data)==null?void 0:k.messageSecret;k=k?new Uint8Array(yield d("WAWebBotMessageSecret").genBotMsgSecretFromMsgSecret(k)):null;d("WALogger").LOG(j(),l,a.toString(),m.toString(),f).tags("messaging");m=d("WAWebOutgoingMessage").createOutgoingMessageProtobuf(d("WAWebOutgoingMessage").OutgoingMessageOriginType.Retry,e);f={type:d("WAWebSendMsgCreateDeviceStanza").MsgType.Retry,retryCount:f};f={to:a,option:f,botMessageSecret:k};a.isUser()?k=(yield d("WAWebSendMsgCreateDeviceStanza").createUserDeviceMsgStanza(e,m,babelHelpers["extends"]({},f,{recipient:c}))):(b!=null||h(0,56263),k=(yield d("WAWebSendMsgCreateDeviceStanza").createGroupDeviceMsgStanza(e,m,babelHelpers["extends"]({},f,{isLidBot:g,participant:b}))));d("WALogger").LOG(i(),l,a.toString()).tags("messaging");e=b;m=a;a.isBot()&&c!=null&&!(c==null?void 0:c.isBot())&&(e=a,c!=null||h(0,75958),m=c);return d("WADeprecatedSendIq").deprecatedSendStanzaAndWaitForAck(k,d("WAWebCommsAckParser").toCoreAckTemplate({id:l,"class":"message",from:m,participant:e}))});return k.apply(this,arguments)}g.sendRetry=a}),98);
__d("WAWebHandleRetryRequest",["Promise","WAJids","WALogger","WAWap","WAWebApiDeviceList","WAWebCommsWapMd","WAWebManageE2ESessionsJob","WAWebMdRetryFromUnknownDeviceWamEvent","WAWebMessageQueue","WAWebPostMessageHighRetryCountMetric","WAWebProcessRetryKeyBundle","WAWebRetryRequestParser","WAWebSendMsgQueueMap","WAWebSendRetryMsgJob","WAWebSignalCommonUtils","WAWebSignalProtocolStore","WAWebUserPrefsMeUser","WAWebWamEnumDeviceType","WAWebWidFactory","asyncToGeneratorRuntime","cr:10198","err","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleRetryRequest error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleRetryRequest: no device "," found for "," for incoming retry request ."]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleRetryRequest: no requester found for incoming retry request."]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleRetryRequest: no chat found for incoming retry request."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleRetryRequest refusing retry attempt #",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["getActualChatId: from is a peer device, but without recipient"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleMessageRetryRequest error: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleMessageRetryRequest "," retry not authorized"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Received null stanzaID when handling message retry request"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);r=function(){return a};return a}function a(a){a=c("WAWebRetryRequestParser").parse(a);if(a.error){d("WALogger").ERROR(r(),a.error.toString());return(h||(h=b("Promise"))).reject(a.error)}var e=a.success,f=e.from,g=e.participant,i=e.recipient,j=e.retryCount;a=e.stanzaId;if(a==null){d("WALogger").WARN(q());return(h||(h=b("Promise"))).reject(c("err")("Received null stanzaID when handling message retry request"))}var k=d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(a),to:d("WAWebCommsWapMd").JID(f),participant:g?d("WAWebCommsWapMd").DEVICE_JID(g):d("WAWap").DROP_ATTR,"class":"receipt",type:"retry"});a=u(f,i);return!a?(h||(h=b("Promise"))).resolve(k):d("WAWebMessageQueue").onMessageQueue(String(a),!1,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield s(e));if(a==null)return k;var h=a.originalMsgId,l=a.chat,m=a.requester,n=a.isLidBot;a=a.identity;c("gkx")("26258")||(b("cr:10198")==null?void 0:b("cr:10198").injectDebug(l,"RetryReceiptReceived","originalMsgId:"+h+" - requester:"+m.toString()));try{h=(yield d("WAWebProcessRetryKeyBundle").getMsgIfAuthorized(h,l,m,n,j,a));if(!h){d("WALogger").WARN(p(),h==null?void 0:h.type);return k}yield d("WAWebSendRetryMsgJob").sendRetry(f,g,i,h,j,n)}catch(a){d("WALogger").WARN(o(),a)}return k}))}function s(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.originalMsgId,e=a.isLid,f=e===void 0?!1:e;e=a.from;var g=a.participant,h=a.recipient,n=a.retryCount,o=a.offline;if(n>=d("WAWebPostMessageHighRetryCountMetric").MAX_RETRY){d("WALogger").LOG(m(),n);return}var p=u(e,h);if(!p){d("WALogger").WARN(l());return}var q=p.isUser()?e:g;if(!q){d("WALogger").WARN(k());return}n=q.device||0;try{h=(yield d("WAWebApiDeviceList").hasDevice(q,n));if(!h){d("WALogger").WARN(j(),n,q.user);new(d("WAWebMdRetryFromUnknownDeviceWamEvent").MdRetryFromUnknownDeviceWamEvent)({offline:o,senderType:n===d("WAJids").DEFAULT_DEVICE_ID?d("WAWebWamEnumDeviceType").DEVICE_TYPE.PRIMARY:d("WAWebWamEnumDeviceType").DEVICE_TYPE.COMPANION}).commit();return}return yield d("WAWebSendMsgQueueMap").sendMsgQueueMap.enqueue(p.toString(),b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebProcessRetryKeyBundle").updateLocalSession(p,a);yield d("WAWebManageE2ESessionsJob").ensureE2ESessions([q]);var b=(yield d("WAWebSignalProtocolStore").getPersistSignalProtocolStore().getIdentityWithRowId(d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(q).toString()));return{originalMsgId:c,chat:p,requester:q,isLidBot:f,identity:b}}))}catch(a){d("WALogger").WARN(i(),a)}});return t.apply(this,arguments)}function u(a,b){if(a.isBot()&&b!=null)return b;if(a.isUser()){if(d("WAWebUserPrefsMeUser").isMeAccount(d("WAWebWidFactory").toUserWid(a))){if(!b){d("WALogger").WARN(n());return null}return b}return d("WAWebWidFactory").toUserWid(a)}return a}g.handleMessageRetryRequest=a}),98);
__d("WAWebHandleServerNotification",["$InternalEnum","Promise","WADeprecatedWapParser","WALogger","WAWap","WAWebAbPropsSyncJob","WAWebCrashlog","WAWebUpdateServerPropsJob"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(['Unsupported notification with type "server",\n    blindly ack-ing it and doing nothing']);k=function(){return a};return a}var l=b("$InternalEnum")({LOG:"log",PROPS:"props",ABPROPS:"abprops"}),m=new(c("WADeprecatedWapParser"))("incomingServerNotificationParser",function(a){a.assertTag("notification");var b=a.attrString("id"),c=a.attrWapJid("from");if(a.hasChild(l.LOG))return{type:l.LOG,stanzaId:b,from:c};if(a.hasChild(l.PROPS))return{type:l.PROPS,stanzaId:b,from:c};return a.hasChild(l.ABPROPS)?{type:l.ABPROPS,stanzaId:b,from:c}:{type:null,stanzaId:b,from:c}});function n(a){var c=d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(a.stanzaId),"class":"notification",type:"server",to:a.from});if(a.type==null){d("WALogger").WARN(k());return(h||(h=b("Promise"))).resolve(c)}switch(a.type){case l.LOG:void d("WAWebCrashlog").upload({reason:d("WAWebCrashlog").SERVER_REQUESTED,immediate:!0,isHighPri:!0});return(h||(h=b("Promise"))).resolve(c);case l.PROPS:return d("WAWebUpdateServerPropsJob").queryServerProps().then(function(){return c});case l.ABPROPS:return d("WAWebAbPropsSyncJob").syncABPropsTask(!1).then(function(){return c})}}function a(a){var c=m.parse(a);if(c.error){d("WALogger").DEV(j(),a.toString());d("WALogger").ERROR(i(),c.error.toString());return(h||(h=b("Promise"))).reject(c.error)}return n(c.success)}g.handleServerNotification=a}),98);
__d("WAWebHandleSuccess",["Promise","WACustomError","WADeprecatedWapParser","WALogger","WAPromiseTimeout","WAWebABPropsLocalStorage","WAWebAbPropsSyncJob","WAWebCmd","WAWebCryptoEncKeyHelper","WAWebDbEncryptionKey","WAWebMediaHosts","WAWebPageLoadLogging","WAWebPassiveModeManager","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebUpdateClockSkewUtils","WAWebUpdateMeLidUtils","WAWebUpdateServerPropsJob","WAWebUserPrefsGeneral","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime","cr:6167","justknobx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetching mms4 hosts on startup failed: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetching mms4 hosts on startup exceeded timeout"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleSuccess: failed to parse ",""]);k=function(){return a};return a}var l=new(c("WADeprecatedWapParser"))("successParser",function(a){a.assertTag("success");return{ts:a.attrTime("t"),propsVersion:a.attrInt("props"),companionEncStatic:a.maybeAttrString("companion_enc_static")||"NULL",lid:a.maybeAttrString("lid"),displayName:a.maybeAttrString("display_name"),abpropsRefreshId:a.maybeAttrInt("abprops")}});function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WAWebPageLoadLogging").addPageLoadQplPoint("success_received");d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"SuccessReceived");a=l.parse(a);if(a.error){d("WALogger").ERROR(k(),a.error);return(h||(h=b("Promise"))).reject(a.error)}a=a.success;d("WAWebUpdateClockSkewUtils").updateClockSkew(a.ts);d("WAWebUpdateMeLidUtils").updateMeLid(a.lid!=null?d("WAWebWidFactory").createWid(a.lid):null);a.displayName!=null&&d("WAWebUserPrefsMeUser").setMeDisplayName(a.displayName);d("WAWebCmd").Cmd.onTemporaryBan({banned:!1});d("WAWebPassiveModeManager").PassiveTaskManager.executePassiveTasks();void d("WAWebUserPrefsGeneral").setOfflinePushDisabled(!1);var e=a.companionEncStatic;void d("WAWebDbEncryptionKey").DbEncKeyStore.generateFinalDbEncryptionAndFtsKey(e);void d("WAWebCryptoEncKeyHelper").generateFinalDbEncryptionAndFtsKeyForInvoker(e);b("cr:6167")==null?void 0:b("cr:6167").setDatabaseIsReady();e=(yield d("WAWebUserPrefsGeneral").getServerPropsAttributes());((e=e==null?void 0:e.version)!=null?e:-1)<a.propsVersion&&(yield d("WAWebUpdateServerPropsJob").queryServerProps());a=(e=a.abpropsRefreshId)!=null?e:0;e=d("WAWebABPropsLocalStorage").getRefreshId();var f=c("justknobx")._("2086"),g=d("WAWebABPropsLocalStorage").getWebRefreshId();if(e<a||g<f){g<f&&d("WAWebABPropsLocalStorage").setWebRefreshId(f);e=d("WAWebABPropsLocalStorage").isABPropsAfterFirstSync();e&&(yield d("WAWebAbPropsSyncJob").syncABPropsTask())}yield n(1e3)});return m.apply(this,arguments)}function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{yield d("WAPromiseTimeout").promiseTimeout(d("WAWebMediaHosts").mediaHosts.forceRefresh(new AbortController().signal),a)}catch(a){a instanceof d("WACustomError").TimeoutError?d("WALogger").LOG(j()).sendLogs("mms4-fetch-host-timeout",{sampling:0}):d("WALogger").ERROR(i(),a).sendLogs("mms4-fetch-host-failed")}});return o.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebIncomingOfferNoticeVoipHandlerAction",["WALogger","WATimeUtils","WAWebCallCollection","WAWebCmd","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["voip:handleIncomingCallOfferNotice: Ignoring stale offer_notice"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["voip:handleIncomingCallOfferNotice: callId ",""]);i=function(){return a};return a}var j=45;function a(a,b,e,f,g){d("WALogger").LOG(i(),b);if(d("WATimeUtils").unixTime()-e>j){d("WALogger").LOG(h());return}c("WAWebCallCollection").add({id:b,isVideo:f,isGroup:g,offerTime:e,peerJid:a,isSilenced:!1},{merge:!0});d("WAWebCmd").Cmd.alertCall(d("WAWebWidFactory").toUserWid(a),b,f,g,!1);self.setTimeout(function(){d("WAWebCmd").Cmd.cancelCall(a);var e=c("WAWebCallCollection").get(b);e&&c("WAWebCallCollection").remove(e)},j*1e3)}g["default"]=a}),98);
__d("WAWebHandleVoipOfferNotice",["Promise","WADeprecatedWapParser","WALogger","WAWap","WAWebCommsWapMd","WAWebIncomingOfferNoticeVoipHandlerAction","WAWebJidToWid"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);j=function(){return a};return a}var k=new(c("WADeprecatedWapParser"))("callOfferNoticeParser",function(a){a.assertTag("call");var b=a.attrString("id"),c=d("WAWebJidToWid").jidWithTypeToWid(a.attrJidWithType("from")),e=a.child("offer_notice"),f=d("WAWebJidToWid").deviceJidToDeviceWid(e.attrDeviceJid("call-creator")),g=e.attrString("call-id"),h=e.attrString("type");e=e.attrString("media");a=a.attrTime("t");return{stanzaId:b,fromWid:c,callCreator:f,callId:g,isGroup:h==="group",isVideo:e==="video",t:a}});function a(a){var e=k.parse(a);if(e.error){d("WALogger").DEV(j(),a.toString());d("WALogger").ERROR(i(),e.error.toString());return(h||(h=b("Promise"))).resolve("NO_ACK")}a=e.success;e=a.stanzaId;var f=a.fromWid,g=a.callCreator,l=a.callId,m=a.isGroup,n=a.isVideo;a=a.t;c("WAWebIncomingOfferNoticeVoipHandlerAction")(g,l,a,n,m);return(h||(h=b("Promise"))).resolve(d("WAWap").wap("ack",{to:d("WAWebCommsWapMd").JID(f),id:d("WAWap").CUSTOM_STRING(e),"class":"call",type:d("WAWap").CUSTOM_STRING("offer_notice")}))}g["default"]=a}),98);
__d("WAWebVoipHandleIncomingSignalingMessage",["Promise","WALogger","WAWebBackendApi","WAWebEnvironment","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleVoipIncomingSignalingMessage: not yet implemented on Windows"]);i=function(){return a};return a}function a(a,b){if(c("WAWebEnvironment").isWindows){d("WALogger").WARN(i());return}d("WAWebBackendApi").frontendFireAndForget("handleVoipWebIncomingSignalingMessageAction",{msg:a,payload:b})}function e(a,d){return(h||(h=b("Promise"))).reject(c("err")("incoming enc rekey is not expected in web"))}g.handleVoipIncomingSignalingMessage=a;g.handleVoipIncomingEncRekey=e}),98);
__d("WAWebVoipSendGroupCallRekeyRetryReceiptJob",["WADeprecatedSendIq","WAWap","WAWebCommsWapMd","WAWebSignalStoreApi","WAWebVoipSignalingEnums","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function a(a,b,c){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e===void 0&&(e=0);var f=(yield d("WAWebSignalStoreApi").waSignalStore.getRegistrationInfo());if(!f)throw c("err")("No registration info found");a=d("WAWap").wap("receipt",{to:d("WAWebCommsWapMd").DEVICE_JID(b.peer_jid),id:d("WAWap").CUSTOM_STRING(a),type:d("WAWap").CUSTOM_STRING(d("WAWebVoipSignalingEnums").ENC_RETRY_RECEIPT_ATTRS.GROUP_CALL)},d("WAWap").wap("enc_rekey",{"call-creator":d("WAWebCommsWapMd").DEVICE_JID(b.call_creator),"call-id":d("WAWap").CUSTOM_STRING(b.call_id),count:d("WAWap").INT(e+1)}),d("WAWap").wap("registration",null,d("WAWap").BIG_ENDIAN_CONTENT(f.registrationId)));d("WADeprecatedSendIq").deprecatedCastStanza(a)});return h.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebHandleVoipCall",["Promise","WADeprecatedSendIq","WADeprecatedWapParser","WALogger","WAWap","WAWebCommsWapMd","WAWebDBCreateLidPnMappings","WAWebHandleVoipOfferNotice","WAWebJidToWid","WAWebUserPrefsMeUser","WAWebVoipHandleIncomingSignalingMessage","WAWebVoipSendGroupCallRekeyRetryReceiptJob","WAWebVoipSignalingEnums","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleVoipIncomingEncRekey: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);k=function(){return a};return a}function l(a){return d("WAWebVoipSignalingEnums").TYPE[a.tag().toUpperCase()]||d("WAWebVoipSignalingEnums").TYPE.NONE}var m=new(c("WADeprecatedWapParser"))("callParser",function(a){a.assertTag("call");var b=d("WAWebJidToWid").jidWithTypeToWid(a.attrJidWithType("from")),e=a.mapFirstChild(function(a){return a});if(e){var f=e.attrString("call-id"),g=d("WAWebJidToWid").jidWithTypeToWid(e.attrJidWithType("call-creator")),h=e.hasAttr("group-jid")?d("WAWebJidToWid").jidWithTypeToWid(e.attrJidWithType("group-jid")):null,i=e.hasAttr("caller_pn")?d("WAWebJidToWid").jidWithTypeToWid(e.attrJidWithType("caller_pn")):null;i={call_id:f,call_creator:g,caller_pn:i,peer_jid:b,peer_platform:a.hasAttr("platform")?a.attrString("platform"):void 0,peer_app_version:a.hasAttr("version")?a.attrString("version"):void 0,epoch_msec:a.hasAttr("t")?String(a.attrInt("t")*1e3):void 0,elapsed_msec:a.hasAttr("e")?String(a.attrInt("e")*1e3):void 0,is_offline:a.hasAttr("offline"),type:l(e),common:{call_id:f,peer_jid:b.toString(),type:String(l(e))},group_jid:h,isVideoCall:e.hasChild("video"),isSilenced:e.hasChild("silence"),t:a.attrTime("t")};return{from:d("WAWebJidToWid").jidWithTypeToWid(a.attrJidWithType("from")),stanzaId:a.attrString("id"),payloadTag:e.tag(),message:i,callCreator:g}}throw c("err")("Unrecognized call stanza")});function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=m.parse(a);if(e.error){d("WALogger").DEV(k(),a.toString());d("WALogger").ERROR(j(),e.error.toString());return(h||(h=b("Promise"))).resolve("NO_ACK")}e=e.success;var f=e.callCreator,g=e.from,l=e.message,n=e.payloadTag;e=e.stanzaId;var q=d("WAWebCommsWapMd").wapNodeToVoipXml(a);q={elapsed_msec:l.elapsed_msec,epoch_msec:l.epoch_msec,is_offline:l.is_offline,payload:q[2][0],peer_app_version:l.peer_app_version,peer_platform:l.peer_platform,peer_jid:l.peer_jid?l.peer_jid.toString({legacy:!0}):void 0};var r=l.caller_pn;f.isLid()&&r!=null&&(yield d("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:[{lid:d("WAWebWidFactory").toUserWid(f),pn:d("WAWebWidFactory").toUserWid(r)}],flushImmediately:!Boolean(q.is_offline)}));r=l.call_id;switch(l.type){case d("WAWebVoipSignalingEnums").TYPE.OFFER:o(g,e,r,f,l.type);void d("WAWebVoipHandleIncomingSignalingMessage").handleVoipIncomingSignalingMessage(l,q);return(h||(h=b("Promise"))).resolve("NO_ACK");case d("WAWebVoipSignalingEnums").TYPE.ENC_REKEY:try{var s=(yield d("WAWebVoipHandleIncomingSignalingMessage").handleVoipIncomingEncRekey(l,q)),t=s.shouldRetry;s=s.retryCount;t?yield c("WAWebVoipSendGroupCallRekeyRetryReceiptJob")(e,l,s):o(g,e,r,f,d("WAWebVoipSignalingEnums").TYPE.ENC_REKEY)}catch(a){d("WALogger").ERROR(i(),a).devConsole(a)}return(h||(h=b("Promise"))).resolve("NO_ACK");case d("WAWebVoipSignalingEnums").TYPE.ACCEPT:case d("WAWebVoipSignalingEnums").TYPE.REJECT:o(g,e,r,f,l.type);d("WAWebVoipHandleIncomingSignalingMessage").handleVoipIncomingSignalingMessage(l,q);return(h||(h=b("Promise"))).resolve("NO_ACK");case d("WAWebVoipSignalingEnums").TYPE.OFFER_NOTICE:return c("WAWebHandleVoipOfferNotice")(a);default:d("WAWebVoipHandleIncomingSignalingMessage").handleVoipIncomingSignalingMessage(l,q);return(h||(h=b("Promise"))).resolve(p(g,e,n))}});return n.apply(this,arguments)}function o(a,b,c,e,f){var g;switch(f){case d("WAWebVoipSignalingEnums").TYPE.OFFER:g=d("WAWap").wap("offer",{"call-id":d("WAWap").CUSTOM_STRING(c),"call-creator":d("WAWebCommsWapMd").JID(e)});break;case d("WAWebVoipSignalingEnums").TYPE.ENC_REKEY:g=d("WAWap").wap("enc_rekey",{"call-id":d("WAWap").CUSTOM_STRING(c),"call-creator":d("WAWebCommsWapMd").JID(e)});break;case d("WAWebVoipSignalingEnums").TYPE.ACCEPT:g=d("WAWap").wap("accept",{"call-id":d("WAWap").CUSTOM_STRING(c),"call-creator":d("WAWebCommsWapMd").JID(e)});break;case d("WAWebVoipSignalingEnums").TYPE.REJECT:g=d("WAWap").wap("reject",{"call-id":d("WAWap").CUSTOM_STRING(c),"call-creator":d("WAWebCommsWapMd").JID(e)});break}d("WADeprecatedSendIq").deprecatedCastStanza(d("WAWap").wap("receipt",{to:d("WAWebCommsWapMd").JID(a),id:d("WAWap").CUSTOM_STRING(b),from:a.isLid()?d("WAWebCommsWapMd").JID(d("WAWebUserPrefsMeUser").getMaybeMeLidUser()):d("WAWebCommsWapMd").JID(d("WAWebUserPrefsMeUser").getMaybeMeUser())},g))}function p(a,b,c){return d("WAWap").wap("ack",{to:d("WAWebCommsWapMd").JID(a),id:d("WAWap").CUSTOM_STRING(b),"class":"call",type:d("WAWap").MAYBE_CUSTOM_STRING(c)})}g.handleCall=a}),98);
__d("WAWebHandleWaChat",["Promise","WAByteArray","WADeprecatedWapParser","WAJids","WALogger","WAWap","WAWebBackendJobs.flow","WAWebCommsWapMd","WAWebDBMessageDelete","WAWebHandleMsgProcess","WAWebHandleMsgTypes.flow","WAWebMsgCollection","WAWebMsgKey","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["WA Chat notification received, node: ",""]);k=function(){return a};return a}var l=new(c("WADeprecatedWapParser"))("incomingWAChatNotificationParser",function(a){a.assertTag("notification");a.assertAttr("from",d("WAJids").PSA_JID);var b=a.attrString("id"),e=a.attrTime("t");if(a.hasChild("messages")){var f=a.child("messages"),g=f.attrString("campaign_id");f=f.mapChildrenWithTag("message",function(a){var b=a.attrString("id");if(a.hasAttr("type")){var c=a.attrString("type");c=c==="text"?a:a.child("media")}else c=a;a={id:b,body:d("WAByteArray").uint8ArrayToBuffer(c.contentBytes())};return a});return{type:"messages",stanzaId:b,ts:e,campaignId:g,messages:f}}g=a.child("revoke");g.attrString("campaign_id");f=g.mapChildrenWithTag("message",function(a){a=new(c("WAWebMsgKey"))({fromMe:!1,remote:d("WAWebWidFactory").createWid(d("WAJids").PSA_JID),id:a.attrString("id")});return a.toString()});return{type:"revoke",stanzaId:b,ts:e,revokeMessageIds:f}});function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.campaignId;a=a.ts;var e=b.id;b=b.body;var f=d("WAWebWidFactory").createWid(d("WAJids").PSA_JID);e={type:d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.OTHER_STATUS,externalId:e,ts:a,edit:-1,isHsm:!1,count:null,chat:f,author:f,pushname:null,isDirect:!1,campaignId:c};a={retryCount:0,e2eType:d("WAWebBackendJobs.flow").CiphertextType.Msg,encMediaType:d("WAWebBackendJobs.flow").EncMediaType.Image,hideFail:!1};f={nativeFlowName:null,verifiedNameSerial:null,verifiedLevel:null,verifiedNameCert:null,privacyMode:null,campaignId:null};yield d("WAWebHandleMsgProcess").processDecryptedMessageProto({decrypted:b,info:e,e2eInfo:a,bizInfo:f,hsmInfo:null,isPadded:!1})});return n.apply(this,arguments)}function a(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").DEV(k(),a);var c=l.parse(a);if(c.error){d("WALogger").LOG(j(),a.toString());d("WALogger").ERROR(i(),c.error.toString());throw c.error}var e=c.success;a=d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(e.stanzaId),"class":"notification",type:"psa",to:d("WAWebCommsWapMd").JID(d("WAWebWidFactory").createWid(d("WAJids").PSA_JID))});switch(e.type){case"revoke":c=e.revokeMessageIds;c.length>0&&(yield d("WAWebDBMessageDelete").removeMessagesFromHistory(c),c.forEach(function(a){a=d("WAWebMsgCollection").MsgCollection.get(a);a&&a["delete"]()}));break;default:e.type;yield (h||(h=b("Promise"))).all(e.messages.map(function(a){return m(e,a)}));break}return a});return o.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebCommsHandleStanza",["WABackendHandleError","WACreateHandleChatState","WAHandleDecisionTreeResult","WAJids","WALogger","WAParsableWapNode","WAWap","WAWebABProps","WAWebAltDeviceLinkingHandleNotification","WAWebCommsHandleWorkerCompatibleStanza","WAWebCreateNackFromStanza","WAWebHandleAboutNotification","WAWebHandleAccountSyncNotification","WAWebHandleBusinessNotification","WAWebHandleChatState","WAWebHandleContactNotification","WAWebHandleDeviceNotification","WAWebHandleDeviceSwitchingNotification","WAWebHandleDigestKey","WAWebHandleDisappearingModeNotification","WAWebHandleFailure","WAWebHandleGrowthNotification","WAWebHandleInfoBulletin","WAWebHandleMediaRetryNotification","WAWebHandleMexNotification","WAWebHandleNewsletterNotification","WAWebHandlePairDevice","WAWebHandlePairSuccess","WAWebHandlePreKeyLow","WAWebHandlePresence","WAWebHandlePrivacyTokensNotification","WAWebHandleProfilePicNotification","WAWebHandlePsa","WAWebHandleQPPrefetchTimestampNotification","WAWebHandleQPSurfacesNotification","WAWebHandleRetryRequest","WAWebHandleServerNotification","WAWebHandleServerSyncNotification","WAWebHandleStreamError","WAWebHandleSuccess","WAWebHandleVoipCall","WAWebHandleWaChat","WAWebOfflineHandler","WAWebPaymentNotificationHandler","WAWebPostUnknownStanzaMetric","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[handleStanza] ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[handleStanza] exception for tag:"," type:"," id:",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms.handleStanza unrecognized stanza ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms.handleStanza received xmlstreamend, return NO_ACK"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms.handleStanza unrecognized notification stanza ",""]);l=function(){return a};return a}var m=d("WACreateHandleChatState").createHandleChatState({groupMessage:{handleGroupChatState:d("WAWebHandleChatState").handleGroupChatState},individualMessage:{handleIndividualChatState:d("WAWebHandleChatState").handleIndividualChatState}});function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=a.attrs;if(f.offline){var g=parseInt(f.t,10),h=parseInt(f.offline,10);d("WAWebOfflineHandler").OfflineMessageHandler.newOfflineStanza(g,e,h)}g=d("WAWebCommsHandleWorkerCompatibleStanza").handleWorkerCompatibleStanza(a);if(g!=null)return g;switch(a.tag){case"iq":return q(a);case"receipt":try{if(f.type==="retry")return yield d("WAWebHandleRetryRequest").handleMessageRetryRequest(a);break}catch(b){if(b instanceof d("WAParsableWapNode").XmppParsingFailure){d("WAWebPostUnknownStanzaMetric").postUnknownStanzaMetric(a);return d("WAWebCreateNackFromStanza").createNackFromStanza(a,d("WAWebCreateNackFromStanza").NackReason.ParsingError)}return d("WAWebCreateNackFromStanza").createNackFromStanza(a,d("WAWebCreateNackFromStanza").NackReason.UnhandledError)}case"notification":try{switch(f.type){case"server_sync":return yield d("WAWebHandleServerSyncNotification").handleServerSyncNotification(a);case"picture":return yield d("WAWebHandleProfilePicNotification").handleProfilePicNotificationJob(a);case"business":return yield d("WAWebHandleBusinessNotification").handleBusinessNotificationJob(a);case"contacts":e=a.content;if(!Array.isArray(e)||!e.length)break;h=e[0].tag;return h==="invite"?yield c("WAWebHandleGrowthNotification")(a):yield c("WAWebHandleContactNotification")(a);case"devices":return yield d("WAWebHandleDeviceNotification").handleDevicesNotification(a);case"disappearing_mode":return yield d("WAWebHandleDisappearingModeNotification").handleDisappearingModeNotificationJob(a);case"mediaretry":g=(yield c("WAWebHandleMediaRetryNotification")(a));return g;case"encrypt":e=a.content;if(!Array.isArray(e)||!e.length)break;h=e[0].tag;switch(h){case"count":return yield c("WAWebHandlePreKeyLow")(a,b);case"digest":return yield c("WAWebHandleDigestKey")(a)}break;case"server":return yield d("WAWebHandleServerNotification").handleServerNotification(a);case"status":return yield d("WAWebHandleAboutNotification").handleAboutNotification(a);case"account_sync":return yield d("WAWebHandleAccountSyncNotification").handleAccountSyncNotification(a);case"pay":return yield d("WAWebPaymentNotificationHandler").handlePaymentNotification(a);case"psa":if(f.from!=null&&f.from.toString()===d("WAJids").PSA_JID){g=a.content;if(!Array.isArray(g)||!g.length)break;e=g[0].tag;if(e==="surfaces")return yield d("WAWebHandleQPSurfacesNotification").handleQPSurfacesNotification(a);if(e==="reset_smb_last_qp_prefetch_timestamp")return d("WAWebHandleQPPrefetchTimestampNotification").handleQPPrefetchTimestampNotification(a);if(d("WAWebABProps").getABPropConfigValue("enable_client_chat_psa"))return yield c("WAWebHandleWaChat")(a);break}return yield c("WAWebHandlePsa")(a);case"privacy_token":return yield c("WAWebHandlePrivacyTokensNotification")(a);case"link_code_companion_reg":return yield d("WAWebAltDeviceLinkingHandleNotification").handleAltDeviceLinkingNotification(a);case"newsletter":return yield c("WAWebHandleNewsletterNotification")(a);case"w:growth":return yield c("WAWebHandleGrowthNotification")(a);case"registration":return yield c("WAWebHandleDeviceSwitchingNotification")(a);case"mex":return yield d("WAWebHandleMexNotification").handleMexNotification(a)}}catch(b){if(b instanceof d("WAParsableWapNode").XmppParsingFailure){d("WAWebPostUnknownStanzaMetric").postUnknownStanzaMetric(a);return d("WAWebCreateNackFromStanza").createNackFromStanza(a,d("WAWebCreateNackFromStanza").NackReason.ParsingError)}return d("WAWebCreateNackFromStanza").createNackFromStanza(a,d("WAWebCreateNackFromStanza").NackReason.UnhandledError)}d("WALogger").DEV_XMPP(l(),a);return d("WAWebCreateNackFromStanza").createNackFromStanza(a,d("WAWebCreateNackFromStanza").NackReason.UnrecognizedStanza);case"chatstate":return d("WAHandleDecisionTreeResult").handleDecisionTreeResult(a,m(a));case"presence":return c("WAWebHandlePresence")(a);case"ib":return c("WAWebHandleInfoBulletin")(a);case"stream:error":return c("WAWebHandleStreamError")(a);case"failure":return c("WAWebHandleFailure")(a);case"success":return c("WAWebHandleSuccess")(a);case"call":return d("WAWebHandleVoipCall").handleCall(a);case"error":return d("WABackendHandleError").handleError(a);case"xmlstreamend":d("WALogger").LOG(k());return"NO_ACK"}d("WALogger").DEV_XMPP(j(),a);return d("WAWebCreateNackFromStanza").createNackFromStanza(a,d("WAWebCreateNackFromStanza").NackReason.UnrecognizedStanza)});return o.apply(this,arguments)}function a(a,b,c){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c===void 0&&(c=0);try{b=(yield n(a,b,c));if(b!=null)return b}catch(e){d("WALogger").LOG(i(),a.tag,(c=a.attrs)==null?void 0:c.type,(b=a.attrs)==null?void 0:b.id);d("WALogger").ERROR(h(),e.stack).sendLogs("handle-stanza")}return"NO_ACK"});return p.apply(this,arguments)}function q(a){var b=a.attrs,e=a.content;if(b.xmlns==="urn:xmpp:ping")return d("WAWap").wap("iq",{type:"result",to:b.from});else if(b.xmlns==="md"){if(!Array.isArray(e)||!e.length)return;b=e[0].tag;switch(b){case"pair-device":return c("WAWebHandlePairDevice")(a);case"pair-success":return c("WAWebHandlePairSuccess")(a)}}else throw c("err")("handleIq unrecognized "+a.toString())}g["default"]=a}),98);
__d("WAWebHandleStreamError",["Promise","WAComms","WADeprecatedWapParser","WALogger","WAWebCmd","WAWebCompanionRegUtils","WAWebJestE2ELogUtils","WAWebSocketModel","WAWebStartBackend","WAWebUserPrefsTabMutex","WAWebWamDeviceLinkReporter","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleStreamError: sent xml not well formed, closing the socket:"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleStreamError: sent xml not well formed, closing the socket"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleStreamError: session replaced while we have a mutex, closing the socket"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["stream error due to device removed, logging out"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unrecognized stream:error: ",""]);o=function(){return a};return a}var p=new(c("WADeprecatedWapParser"))("streamErrorParser",function(a){a.assertTag("stream:error");if(a.hasChild("conflict")){var b=a.child("conflict");b=b.attrString("type");switch(b){case"replaced":return{type:"replaced"};case"device_removed":default:return{type:"device_removed"}}}else if(a.hasAttr("code"))return{type:"code",code:a.attrInt("code")};else if(a.hasChild("ack"))return{type:"ack",id:a.child("ack").hasAttr("id")?a.child("ack").attrString("id"):null};else if(a.hasChild("xml-not-well-formed"))return{type:"xml-not-well-formed"};else{d("WALogger").WARN(o(),a.toString());return{type:"other"}}});function a(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=p.parse(a);if(e.error){d("WALogger").DEV(n(),a.toString());d("WALogger").ERROR(m(),e.error.toString());return(h||(h=b("Promise"))).reject(e.error)}e=e.success;if(e.type==="code"&&e.code>=500&&e.code<600){if(e.code===515){d("WAComms").stopComms();yield d("WAWebCompanionRegUtils").startLogin();void d("WAWebStartBackend").startBackend();return(h||(h=b("Promise"))).resolve("NO_ACK")}else if(e.code===516){d("WAComms").stopComms();yield d("WAWebWamDeviceLinkReporter").commitDeviceLinkEvent(516);yield d("WAWebCompanionRegUtils").startLogout();void d("WAWebStartBackend").startBackend();return(h||(h=b("Promise"))).resolve("NO_ACK")}d("WAComms").onStreamErrorReceived()}else if(e.type==="device_removed"){d("WAWebCmd").Cmd.onStartingLogout();d("WAComms").stopComms();yield d("WAWebSocketModel").Socket.clearCredentialsAndStoredData();d("WALogger").LOG(l());d("WAWebJestE2ELogUtils").maybeLogToJestE2eJSConsole("stream error due to device removed, logging out");d("WAWebCmd").Cmd.logout();return(h||(h=b("Promise"))).resolve("NO_ACK")}else if(e.type==="replaced"){d("WAWebUserPrefsTabMutex").currentTabHasMutex()&&d("WALogger").ERROR(k()).sendLogs("invalid-session-replacement",{sampling:.01});d("WAComms").stopComms();return(h||(h=b("Promise"))).resolve("NO_ACK")}else e.type==="xml-not-well-formed"&&(c("gkx")("26258")?d("WALogger").WARN(j()):d("WALogger").WARN(i()).devConsole(a.toString()).sendLogs("sent-xml-not-well-formed"));return(h||(h=b("Promise"))).resolve("CLOSE_SOCKET")});return q.apply(this,arguments)}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("WACert.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};a.internalSpec={details:[1,(d=d("WAProtoConst")).TYPES.BYTES],signature:[2,d.TYPES.BYTES]};b.internalSpec={serial:[1,d.TYPES.UINT32],issuer:[2,d.TYPES.STRING],expires:[3,d.TYPES.UINT64],subject:[4,d.TYPES.STRING],key:[5,d.TYPES.BYTES]};c.internalSpec={leaf:[1,d.TYPES.MESSAGE,e],intermediate:[2,d.TYPES.MESSAGE,e]};e.internalSpec={details:[1,d.TYPES.BYTES],signature:[2,d.TYPES.BYTES]};f.internalSpec={serial:[1,d.TYPES.UINT32],issuerSerial:[2,d.TYPES.UINT32],key:[3,d.TYPES.BYTES],notBefore:[4,d.TYPES.UINT64],notAfter:[5,d.TYPES.UINT64]};g.NoiseCertificateSpec=a;g.NoiseCertificate$DetailsSpec=b;g.CertChainSpec=c;g.CertChain$NoiseCertificateSpec=e;g.CertChain$NoiseCertificate$DetailsSpec=f}),98);
__d("WAHandleChatStateProtocol",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b;a.name==="Paused"?b="idle":(a.name,b=a.value.composingMedia==="audio"?"recording_audio":"typing");return b}f.parseChatStatus=a}),66);
__d("WASmaxInChatstateComposingMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"chatstate");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"composing");if(!b.success)return b;a=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,b.value,"media","audio");return!a.success?a:d("WAResultOrError").makeResult({composingMedia:a.value})}g.parseComposingMixin=a}),98);
__d("WASmaxInChatstatePausedMixin",["WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"chatstate");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"paused");return!b.success?b:d("WASmaxParseUtils").voidSuccess}g.parsePausedMixin=a}),98);
__d("WASmaxInChatstateComposingOrPausedMixinGroup",["WAResultOrError","WASmaxInChatstateComposingMixin","WASmaxInChatstatePausedMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInChatstateComposingMixin").parseComposingMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"Composing",value:b.value});var c=d("WASmaxInChatstatePausedMixin").parsePausedMixin(a);return c.success?d("WAResultOrError").makeResult({name:"Paused",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["Composing","Paused"],[b,c])}g.parseComposingOrPausedMixinGroup=a}),98);
__d("WASmaxInChatstateFromGroupMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"chatstate");if(!b.success)return b;b=d("WASmaxParseJid").attrGroupJid(a,"from");if(!b.success)return b;var c=d("WASmaxParseJid").attrUserJid(a,"participant");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrUserJid,a,"participant_pn");return!a.success?a:d("WAResultOrError").makeResult({from:b.value,participant:c.value,participantPn:a.value})}g.parseFromGroupMixin=a}),98);
__d("WASmaxInChatstateFromUserMixin",["WAResultOrError","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"chatstate");if(!b.success)return b;b=d("WASmaxParseJid").attrUserJid(a,"from");return!b.success?b:d("WAResultOrError").makeResult({from:b.value})}g.parseFromUserMixin=a}),98);
__d("WASmaxInChatstateFromUserOrGroupMixinGroup",["WAResultOrError","WASmaxInChatstateFromGroupMixin","WASmaxInChatstateFromUserMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInChatstateFromUserMixin").parseFromUserMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"FromUser",value:b.value});var c=d("WASmaxInChatstateFromGroupMixin").parseFromGroupMixin(a);return c.success?d("WAResultOrError").makeResult({name:"FromGroup",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["FromUser","FromGroup"],[b,c])}g.parseFromUserOrGroupMixinGroup=a}),98);
__d("WASmaxInChatstateInternalTestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").flattenedChildWithTag(a,"test");if(!a.success)return a;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,a.value,"config");return!a.success?a:d("WAResultOrError").makeResult({testConfig:a.value})}g.parseInternalTestMixin=a}),98);
__d("WASmaxInChatstateServerNotificationRequest",["WAResultOrError","WASmaxInChatstateComposingOrPausedMixinGroup","WASmaxInChatstateFromUserOrGroupMixinGroup","WASmaxInChatstateInternalTestMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"chatstate");if(!b.success)return b;b=d("WASmaxInChatstateInternalTestMixin").parseInternalTestMixin(a);var c=d("WASmaxInChatstateFromUserOrGroupMixinGroup").parseFromUserOrGroupMixinGroup(a);if(!c.success)return c;a=d("WASmaxInChatstateComposingOrPausedMixinGroup").parseComposingOrPausedMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult({internalTestMixin:b.success?b.value:null,fromUserOrGroupMixinGroup:c.value,composingOrPausedMixinGroup:a.value})}g.parseServerNotificationRequest=a}),98);
__d("WASmaxChatstateServerNotificationRPC",["WASmaxInChatstateServerNotificationRequest","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxInChatstateServerNotificationRequest").parseServerNotificationRequest(a);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("ServerNotification",{Request:a}));return{parsedRequest:a.value}}g.receiveServerNotificationRPC=a}),98);
__d("WACreateHandleChatState",["Promise","WAHandleChatStateProtocol","WAResultOrError","WASmaxChatstateServerNotificationRPC"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||b("Promise")).resolve(d("WAResultOrError").makeResult("NO_ACK"));function a(a){var b,c=(b=a.individualMessage)==null?void 0:b.handleIndividualChatState,e=(b=a.groupMessage)==null?void 0:b.handleGroupChatState;return function(a){if(c==null&&e==null)return i;a=d("WASmaxChatstateServerNotificationRPC").receiveServerNotificationRPC(a);a=a.parsedRequest;var b=a.composingOrPausedMixinGroup;a=a.fromUserOrGroupMixinGroup;b=d("WAHandleChatStateProtocol").parseChatStatus(b);if(a.name==="FromUser"){var f;return(f=c==null?void 0:c({status:b,jid:a.value.from}).then(d("WAResultOrError").makeResult))!=null?f:i}else{a.name;return(f=e==null?void 0:e({status:b,jid:a.value.from,participant:a.value.participant,participantPn:a.value.participantPn}).then(d("WAResultOrError").makeResult))!=null?f:i}}}g.createHandleChatState=a}),98);
__d("WAFrameSocket",["WABinary","WAErrors","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["FrameSocket: queueing partial frame of "," bytes"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Buffer to send: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["FrameSocket closed"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["FrameSocket error"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["FrameSocket closed, waiting for pending processing"]);l=function(){return a};return a}var m=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c="SocketClosed";a=b.call(this,(a=a)!=null?a:c)||this;a.name=c;return a}return a}(babelHelpers.wrapNativeSuper(Error));a=function(){function a(a,b){var c=this;this.$3=new(d("WABinary").Binary)();this.closed=!1;this.$4=!1;this.onFrame=null;this.onClose=null;this.$5=function(a){c.$3.writeByteArray(a),c.convertBufferedToFrames()};this.$6=function(){if(c.$3.peek(n)){d("WALogger").LOG(l());c.$4=!0;return}c.$9()};this.$7=function(a){d("WALogger").DEV(k()).devConsole(a)};this.$2=b;this.$1=a;a.onData=this.$5;a.onClose=this.$6;a.onError=this.$7}var b=a.prototype;b.sendFrame=function(a){if(this.$4)return;this.throwIfClosed();var b=this.$2,c=a.byteLength;this.$8(c);var d=this.$1.dataToSend;b?(this.$2=null,d.ensureAdditionalCapacity(b.length+3+c),d.writeByteArray(b)):d.ensureAdditionalCapacity(3+c);d.writeUint8(c>>16);d.writeUint16(c&65535);d.write(a);this.$1.requestSend()};b.$9=function(){if(this.closed)return;d("WALogger").LOG(j());this.$4=!1;this.closed=!0;var a=this.onClose;a&&a()};b.$8=function(a){if(a>=1<<24){d("WALogger").WARN(i(),a);throw new(d("WAErrors").BufferTooLargeError)("Buffer too large: "+a)}};b.convertBufferedToFrames=function(){var a=this.$3,b=this.onFrame;while(b&&a.peek(n)){var c=o(a);c=a.readByteArray(c);b(c);b=this.onFrame}this.$4&&!a.peek(n)&&this.$9();b&&a.size()&&d("WALogger").LOG(h(),a.size())};b.throwIfClosed=function(){if(this.closed)throw new m()};b.close=function(){this.$1.close()};return a}();function n(a){if(a.size()<3)return!1;var b=o(a);return b<=a.size()}function o(a){return a.readUint8()<<16|a.readUint16()}g.SocketClosed=m;g.FrameSocket=a}),98);
__d("WASmaxInAbPropsIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInAbPropsIQErrorFeatureNotImplementedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","feature-not-implemented");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",501);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorFeatureNotImplementedMixin=a}),98);
__d("WASmaxInAbPropsIQErrorBadRequestOrFeatureNotImplementedMixinGroup",["WAResultOrError","WASmaxInAbPropsIQErrorBadRequestMixin","WASmaxInAbPropsIQErrorFeatureNotImplementedMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInAbPropsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInAbPropsIQErrorFeatureNotImplementedMixin").parseIQErrorFeatureNotImplementedMixin(a);return c.success?d("WAResultOrError").makeResult({name:"IQErrorFeatureNotImplemented",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorFeatureNotImplemented"],[b,c])}g.parseIQErrorBadRequestOrFeatureNotImplementedMixinGroup=a}),98);
__d("WASmaxInAbPropsIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInAbPropsGetExperimentConfigResponseErrorNoRetry",["WAResultOrError","WASmaxInAbPropsIQErrorBadRequestOrFeatureNotImplementedMixinGroup","WASmaxInAbPropsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInAbPropsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInAbPropsIQErrorBadRequestOrFeatureNotImplementedMixinGroup").parseIQErrorBadRequestOrFeatureNotImplementedMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorBadRequestOrFeatureNotImplementedMixinGroup:b.value}))}g.parseGetExperimentConfigResponseErrorNoRetry=a}),98);
__d("WASmaxInAbPropsIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInAbPropsGetExperimentConfigResponseErrorRetry",["WAResultOrError","WASmaxInAbPropsIQErrorInternalServerErrorMixin","WASmaxInAbPropsIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;c=d("WASmaxInAbPropsIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(c.value);if(!c.success)return c;a=d("WASmaxInAbPropsIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({errorIQErrorInternalServerErrorMixin:c.value},a.value))}g.parseGetExperimentConfigResponseErrorRetry=a}),98);
__d("WASmaxInAbPropsExperimentConfigMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"prop");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"config_code",1,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrString(a,"config_value");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"config_expo_key",0,void 0);return!a.success?a:d("WAResultOrError").makeResult({configCode:b.value,configValue:c.value,configExpoKey:a.value})}g.parseExperimentConfigMixin=a}),98);
__d("WASmaxInAbPropsSamplingConfigMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"prop");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"event_code",1,void 0);if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(a,"sampling_weight",-1e4,1e4);return!a.success?a:d("WAResultOrError").makeResult({eventCode:b.value,samplingWeight:a.value})}g.parseSamplingConfigMixin=a}),98);
__d("WASmaxInAbPropsExperimentOrSamplingConfigMixinGroup",["WAResultOrError","WASmaxInAbPropsExperimentConfigMixin","WASmaxInAbPropsSamplingConfigMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInAbPropsExperimentConfigMixin").parseExperimentConfigMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"ExperimentConfig",value:b.value});var c=d("WASmaxInAbPropsSamplingConfigMixin").parseSamplingConfigMixin(a);return c.success?d("WAResultOrError").makeResult({name:"SamplingConfig",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ExperimentConfig","SamplingConfig"],[b,c])}g.parseExperimentOrSamplingConfigMixinGroup=a}),98);
__d("WASmaxInAbPropsIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInAbPropsGetExperimentConfigResponseSuccess",["WAResultOrError","WASmaxInAbPropsExperimentOrSamplingConfigMixinGroup","WASmaxInAbPropsIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"prop");if(!b.success)return b;b=d("WASmaxInAbPropsExperimentOrSamplingConfigMixinGroup").parseExperimentOrSamplingConfigMixinGroup(a);return!b.success?b:d("WAResultOrError").makeResult({experimentOrSamplingConfigMixinGroup:b.value})}function i(a){var b=d("WASmaxParseUtils").assertTag(a,"erid");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytesRange(a,1,100);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"props");if(!c.success)return c;var e=d("WASmaxParseUtils").optionalChildWithTag(a,"erid",i);if(!e.success)return e;var f=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"protocol","1");if(!f.success)return f;var g=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,c.value,"ab_key");if(!g.success)return g;var j=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrString,c.value,"hash");if(!j.success)return j;var k=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,c.value,"refresh",0,void 0);if(!k.success)return k;var l=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,c.value,"refresh_id",0,void 0);if(!l.success)return l;a=d("WASmaxInAbPropsIQResultResponseMixin").parseIQResultResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(c.value,"prop",0,Infinity,h);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({propsProtocol:f.value,propsAbKey:g.value,propsHash:j.value,propsRefresh:k.value,propsRefreshId:l.value},a.value,{erid:e.value,propsProp:b.value}))}g.parseGetExperimentConfigResponseSuccessPropsProp=h;g.parseGetExperimentConfigResponseSuccessErid=i;g.parseGetExperimentConfigResponseSuccess=a}),98);
__d("WASmaxOutAbPropsBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"get"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutAbPropsGetExperimentConfigRequest",["WASmaxAttrs","WASmaxJsx","WASmaxOutAbPropsBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){a=a.propsHash;a=d("WASmaxOutAbPropsBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{xmlns:"abt",to:d("WAWap").S_WHATSAPP_NET},d("WASmaxJsx").smax("props",{protocol:"1",hash:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,a)})));return a}g.makeGetExperimentConfigRequest=a}),98);
__d("WASmaxAbPropsGetExperimentConfigRPC",["WAComms","WASmaxInAbPropsGetExperimentConfigResponseErrorNoRetry","WASmaxInAbPropsGetExperimentConfigResponseErrorRetry","WASmaxInAbPropsGetExperimentConfigResponseSuccess","WASmaxOutAbPropsGetExperimentConfigRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:e=d("WASmaxOutAbPropsGetExperimentConfigRequest").makeGetExperimentConfigRequest(a);j.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=j.sent;g=d("WASmaxInAbPropsGetExperimentConfigResponseSuccess").parseGetExperimentConfigResponseSuccess(f,e);if(!g.success){j.next=7;break}return j.abrupt("return",{name:"GetExperimentConfigResponseSuccess",value:g.value});case 7:h=d("WASmaxInAbPropsGetExperimentConfigResponseErrorNoRetry").parseGetExperimentConfigResponseErrorNoRetry(f,e);if(!h.success){j.next=10;break}return j.abrupt("return",{name:"GetExperimentConfigResponseErrorNoRetry",value:h.value});case 10:i=d("WASmaxInAbPropsGetExperimentConfigResponseErrorRetry").parseGetExperimentConfigResponseErrorRetry(f,e);if(!i.success){j.next=13;break}return j.abrupt("return",{name:"GetExperimentConfigResponseErrorRetry",value:i.value});case 13:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GetExperimentConfig",{Success:g,ErrorNoRetry:h,ErrorRetry:i}));case 14:case"end":return j.stop()}},null,this)}g.sendGetExperimentConfigRPC=a}),98);
__d("WAGetAbPropsProtocol",["WALogger","WAResultOrError","WASmaxAbPropsGetExperimentConfigRPC","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getAbPropsProtocol failed ",""]);h=function(){return a};return a}function a(a){var c,e,f,g,j,k,l,m,n,o,p;return b("regeneratorRuntime").async(function(q){while(1)switch(q.prev=q.next){case 0:q.next=2;return b("regeneratorRuntime").awrap(d("WASmaxAbPropsGetExperimentConfigRPC").sendGetExperimentConfigRPC({propsHash:a}));case 2:c=q.sent;if(!(c.name==="GetExperimentConfigResponseSuccess")){q.next=7;break}e=c.value,f=e.propsAbKey,g=e.propsHash,j=e.propsRefresh,k=e.propsRefreshId,l=e.propsProp,m=e.erid;n=i(l),o=n.newProps,p=n.samplingConfigs;return q.abrupt("return",d("WAResultOrError").makeResult({abKey:f,hash:g,refresh:j,refreshId:k,props:o,samplingConfigs:p,erid:m==null?void 0:m.elementValue}));case 7:d("WALogger").WARN(h(),c.value);return q.abrupt("return",d("WAResultOrError").makeError());case 9:case"end":return q.stop()}},null,this)}function i(a){var b=[],c=[];a.forEach(function(a){a=a.experimentOrSamplingConfigMixinGroup;if(a.name==="ExperimentConfig"){var d;b.push({configCode:a.value.configCode,configValue:a.value.configValue,configExpoKey:(d=a.value.configExpoKey)==null?void 0:d.toString()})}else a.name==="SamplingConfig"&&c.push({eventCode:a.value.eventCode,samplingWeight:a.value.samplingWeight})});return{newProps:b,samplingConfigs:c}}g.getAbPropsProtocol=a}),98);
__d("WAHandleDecisionTreeResult",["WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] unexpected-runtime-error: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] runtime-error ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["unrecognized stanza: ",""]);j=function(){return a};return a}function a(a,b){var c=d("WATagsLogger").TAGS(["decision tree"]);return b.then(function(b){if(b.success)return b.value;else if(b.error.type==="unknown-stanza"){c.ERROR(j(),a);return"NO_ACK"}else{b.error.type;c.ERROR(i(),a.tag,b.error.error);return"NO_ACK"}})["catch"](function(b){c.ERROR(h(),a.tag,b);return"NO_ACK"})}g.handleDecisionTreeResult=a}),98);
__d("WANoiseSocket",["Promise","WACryptoDependencies","WALogger","WAPromiseQueue","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendFrame adding to queue with frame size: "," bytes"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["NoiseSocket socket closed while encrypting frame"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Sending encrypted frame to web socket"]);k=function(){return a};return a}a=(h||(h=b("Promise"))).reject("UNINITIALIZED HANDSHAKE");var l=new Uint8Array(0);a["catch"](function(){});c=function(){function a(a,b,c){var e=this;this.$4=[];this.$5=new(d("WAPromiseQueue").PromiseQueue)();this.$6=new(d("WAPromiseQueue").PromiseQueue)();this.$7=0;this.$8=0;this.$9=!1;this.$14=function(a){!e.$1.closed?(d("WALogger").DEV(k()).tags("WANoiseSocket"),e.$1.sendFrame(a)):d("WALogger").LOG(j())};this.$12=function(a){var b=e.$7++;e.$5.enqueueHandlers(o(e.$2,b,void 0,a),e.$15)};this.$13=function(){e.$9=!0,e.$5.wait().then(function(){e.$9=!1;var a=e.$11;a&&a()})};this.$15=function(a){e.$10?e.$10(a):e.$4.push(a)};this.$1=a;this.$3=b;this.$2=c;a.onFrame=this.$12;this.$1.onClose=this.$13;a.convertBufferedToFrames()}var c=a.prototype;c.sendFrameAsync=function(a){var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(this.sendFrame(a));case 2:c=d.sent;return d.abrupt("return",c);case 4:case"end":return d.stop()}},null,this)};c.sendFrame=function(a){if(this.$9)return(h||(h=b("Promise"))).resolve();this.$1.throwIfClosed();var c=this.$8++;d("WALogger").DEV(i(),a.length).tags("WANoiseSocket");return this.$6.enqueueHandlers(n(this.$3,c,void 0,a),this.$14)};c.setOnFrame=function(a){this.$10=a};c.setOnClose=function(a){this.$11=a};c.close=function(){this.$1.close()};return a}();function m(a){var b=new ArrayBuffer(12),c=new DataView(b);c.setUint32(8,a);return new Uint8Array(b)}function n(a,b,c,e){return d("WACryptoDependencies").getCrypto().subtle.encrypt({name:"AES-GCM",iv:m(b),additionalData:c?new Uint8Array(c):l},a,e)}function o(a,b,c,e){return d("WACryptoDependencies").getCrypto().subtle.decrypt({name:"AES-GCM",iv:m(b),additionalData:c?new Uint8Array(c):l},a,e)}g.NoiseSocket=c}),98);
__d("WANoiseHandshake",["Promise","WABinary","WACryptoDependencies","WACryptoHkdf","WACryptoSha256","WAErrors","WANoiseSocket","WAResolvable"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=b("Promise"))).reject("UNINITIALIZED HANDSHAKE"),j=new Uint8Array(0);i["catch"](function(){});a=function(){function a(a){var b=this;this.$2=i;this.$3=i;this.$4=i;this.$5=0;this.$1=a;this.$6=new(d("WAResolvable").Resolvable)();a.onClose=function(){b.$6.reject(new(d("WAErrors").Disconnected)("NoiseHandshake: SocketClosed"))};p(this.$6.promise)}var c=a.prototype;c.start=function(a,c){a=d("WABinary").Binary.build(a).readBuffer();a=a.byteLength===32?(h||(h=b("Promise"))).resolve(a):d("WACryptoSha256").sha256(a);this.$2=a;this.$3=a;this.$4=a.then(l);this.authenticate(c)};c.sendAndReceive=function(a){var c=this.$1,d=new(h||(h=b("Promise")))(function(b){c.onFrame=function(a){c.onFrame=null,b(a)},c.sendFrame(a)});return this.$7(d)};c.send=function(a){this.$1.sendFrame(a)};c.authenticate=function(a){this.$2=(h||(h=b("Promise"))).all([this.$2,a]).then(function(a){var b=a[0];a=a[1];b=d("WABinary").Binary.build(b,a).readByteArray();return d("WACryptoSha256").sha256(b)})};c.encrypt=function(a){var c=this.$5++;a=(h||(h=b("Promise"))).all([this.$4,this.$2,a]).then(function(a){var b=a[0],d=a[1];a=a[2];return m(b,c,d,a)});this.authenticate(a);return this.$7(a)};c.decrypt=function(a){var c=this.$5++,d=(h||(h=b("Promise"))).all([this.$4,this.$2]).then(function(b){var d=b[0];b=b[1];return n(d,c,b,a)});this.authenticate(a);return this.$7(d)};c.finish=function(){var a=this,c=this.$3.then(function(a){return o(a,new Uint8Array(0))}).then(function(a){var c=a[0];a=a[1];return(h||(h=b("Promise"))).all([l(c,["encrypt"]),l(a,["decrypt"])])}).then(function(b){var c=b[0];b=b[1];return new(d("WANoiseSocket").NoiseSocket)(a.$1,c,b)});return this.$7(c)};c.mixIntoKey=function(a){this.$5=0;a=(h||(h=b("Promise"))).all([this.$3,a]).then(function(a){var b=a[0];a=a[1];return o(b,new Uint8Array(a))});this.$3=a.then(function(a){return a[0]});this.$4=a.then(function(a){return l(a[1])});p(this.$3);p(this.$4)};c.$7=function(a){var c=this;return(h||(h=b("Promise"))).race([a,this.$6.promise]).then(function(a){return c.$6.resolveWasCalled()?c.$6.promise:a})};return a}();function k(a){var b=new ArrayBuffer(12),c=new DataView(b);c.setUint32(8,a);return new Uint8Array(b)}function l(a,b){b===void 0&&(b=["encrypt","decrypt"]);return d("WACryptoDependencies").getCrypto().subtle.importKey("raw",new Uint8Array(a),"AES-GCM",!1,b)}function m(a,b,c,e){return d("WACryptoDependencies").getCrypto().subtle.encrypt({name:"AES-GCM",iv:k(b),additionalData:c?new Uint8Array(c):j},a,e)}function n(a,b,c,e){return d("WACryptoDependencies").getCrypto().subtle.decrypt({name:"AES-GCM",iv:k(b),additionalData:c?new Uint8Array(c):j},a,e)}function o(a,b){return d("WACryptoHkdf").extractWithSaltAndExpand(b,new Uint8Array(a),"",64).then(function(a){return[a.slice(0,32),a.slice(32)]})}function p(a){a["catch"](function(){})}g.NoiseHandshake=a}),98);
__d("WASmaxInPassiveModeActiveIQResponseSuccess",["WAResultOrError","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"active");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");if(!c.success)return c;b=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");return!b.success?b:d("WAResultOrError").makeResult({type:c.value,from:b.value})}g.parseActiveIQResponseSuccess=a}),98);
__d("WASmaxOutPassiveModeActiveIQRequest",["WASmaxJsx","WAWap"],(function(a,b,c,d,e,f,g){function a(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"set",xmlns:"passive",to:d("WAWap").S_WHATSAPP_NET},d("WASmaxJsx").smax("active",null));return a}g.makeActiveIQRequest=a}),98);
__d("WASmaxPassiveModeActiveIQRPC",["WAComms","WASmaxInPassiveModeActiveIQResponseSuccess","WASmaxOutPassiveModeActiveIQRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){var c,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:c=d("WASmaxOutPassiveModeActiveIQRequest").makeActiveIQRequest();g.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(c,a));case 3:e=g.sent;f=d("WASmaxInPassiveModeActiveIQResponseSuccess").parseActiveIQResponseSuccess(e,c);if(!f.success){g.next=7;break}return g.abrupt("return",{name:"ActiveIQResponseSuccess",value:f.value});case 7:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("ActiveIQ",{Success:f}));case 8:case"end":return g.stop()}},null,this)}g.sendActiveIQRPC=a}),98);
__d("WASmaxInPassiveModePassiveIQResponseSuccess",["WAResultOrError","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"passive");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");if(!c.success)return c;b=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");return!b.success?b:d("WAResultOrError").makeResult({type:c.value,from:b.value})}g.parsePassiveIQResponseSuccess=a}),98);
__d("WASmaxOutPassiveModePassiveIQRequest",["WASmaxJsx","WAWap"],(function(a,b,c,d,e,f,g){function a(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"set",xmlns:"passive",to:d("WAWap").S_WHATSAPP_NET},d("WASmaxJsx").smax("passive",null));return a}g.makePassiveIQRequest=a}),98);
__d("WASmaxPassiveModePassiveIQRPC",["WAComms","WASmaxInPassiveModePassiveIQResponseSuccess","WASmaxOutPassiveModePassiveIQRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){var c,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:c=d("WASmaxOutPassiveModePassiveIQRequest").makePassiveIQRequest();g.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(c,a));case 3:e=g.sent;f=d("WASmaxInPassiveModePassiveIQResponseSuccess").parsePassiveIQResponseSuccess(e,c);if(!f.success){g.next=7;break}return g.abrupt("return",{name:"PassiveIQResponseSuccess",value:f.value});case 7:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("PassiveIQ",{Success:f}));case 8:case"end":return g.stop()}},null,this)}g.sendPassiveIQRPC=a}),98);
__d("WASendPassiveModeProtocol",["WALogger","WASmaxPassiveModeActiveIQRPC","WASmaxPassiveModePassiveIQRPC","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["sendPassiveModeIq: passive mode set to '","'"]);h=function(){return a};return a}function a(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:if(!(a==="active")){c.next=5;break}c.next=3;return b("regeneratorRuntime").awrap(d("WASmaxPassiveModeActiveIQRPC").sendActiveIQRPC());case 3:c.next=7;break;case 5:c.next=7;return b("regeneratorRuntime").awrap(d("WASmaxPassiveModePassiveIQRPC").sendPassiveIQRPC());case 7:d("WALogger").LOG(h(),a);case 8:case"end":return c.stop()}},null,this)}g.sendPassiveModeProtocol=a}),98);
__d("WASmaxInGroupsServerNotificationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!b.success)return b;var c=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!c.success)return c;a=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrIntRange,a,"offline",0,1024);return!a.success?a:d("WAResultOrError").makeResult({t:b.value,id:c.value,offline:a.value})}g.parseServerNotificationMixin=a}),98);
__d("WASmaxInMdBaseIQSetRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"iq");if(!b.success)return b;b=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","set");return!a.success?a:d("WAResultOrError").makeResult({id:b.value,type:a.value})}g.parseBaseIQSetRequestMixin=a}),98);
__d("WASmaxInMdIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInMdIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInMdIQErrorInternalServerErrorOrBadRequestMixinGroup",["WAResultOrError","WASmaxInMdIQErrorBadRequestMixin","WASmaxInMdIQErrorInternalServerErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMdIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:b.value});var c=d("WASmaxInMdIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);return c.success?d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorInternalServerError","IQErrorBadRequest"],[b,c])}g.parseIQErrorInternalServerErrorOrBadRequestMixinGroup=a}),98);
__d("WASmaxInMdIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxInMdCompanionFinishResponseError",["WAResultOrError","WASmaxInMdIQErrorInternalServerErrorOrBadRequestMixinGroup","WASmaxInMdIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInMdIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInMdIQErrorInternalServerErrorOrBadRequestMixinGroup").parseIQErrorInternalServerErrorOrBadRequestMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorInternalServerErrorOrBadRequestMixinGroup:b.value}))}g.parseCompanionFinishResponseError=a}),98);
__d("WASmaxInMdIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQResultResponseMixin=a}),98);
__d("WASmaxInMdCompanionFinishResponseSuccess",["WASmaxInMdIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxInMdIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!c.success?c:c}g.parseCompanionFinishResponseSuccess=a}),98);
__d("WASmaxInMdIQErrorNonSupportedPrimaryMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",452);if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","primary-too-old");return!a.success?a:d("WAResultOrError").makeResult({code:b.value,text:a.value})}g.parseIQErrorNonSupportedPrimaryMixin=a}),98);
__d("WASmaxInMdIQErrorNotAllowedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","not-allowed");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",405);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorNotAllowedMixin=a}),98);
__d("WASmaxInMdIQErrorResourceLimitMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","resource-limit");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",419);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorResourceLimitMixin=a}),98);
__d("WASmaxInMdPrimarySetIQErrorCompanionNotConnectedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",454);if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","companion-not-connected");return!a.success?a:d("WAResultOrError").makeResult({code:b.value,text:a.value})}g.parsePrimarySetIQErrorCompanionNotConnectedMixin=a}),98);
__d("WASmaxInMdIqMixinErrors",["WAResultOrError","WASmaxInMdIQErrorBadRequestMixin","WASmaxInMdIQErrorInternalServerErrorMixin","WASmaxInMdIQErrorNonSupportedPrimaryMixin","WASmaxInMdIQErrorNotAllowedMixin","WASmaxInMdIQErrorResourceLimitMixin","WASmaxInMdPrimarySetIQErrorCompanionNotConnectedMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMdIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:b.value});var c=d("WASmaxInMdIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:c.value});var e=d("WASmaxInMdIQErrorResourceLimitMixin").parseIQErrorResourceLimitMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"IQErrorResourceLimit",value:e.value});var f=d("WASmaxInMdIQErrorNonSupportedPrimaryMixin").parseIQErrorNonSupportedPrimaryMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"IQErrorNonSupportedPrimary",value:f.value});var g=d("WASmaxInMdPrimarySetIQErrorCompanionNotConnectedMixin").parsePrimarySetIQErrorCompanionNotConnectedMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"PrimarySetIQErrorCompanionNotConnected",value:g.value});var h=d("WASmaxInMdIQErrorNotAllowedMixin").parseIQErrorNotAllowedMixin(a);return h.success?d("WAResultOrError").makeResult({name:"IQErrorNotAllowed",value:h.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorInternalServerError","IQErrorBadRequest","IQErrorResourceLimit","IQErrorNonSupportedPrimary","IQErrorCompanionNotConnected","IQErrorNotAllowed"],[b,c,e,f,g,h])}g.parseIqMixinErrors=a}),98);
__d("WASmaxInMdCompanionHelloResponseError",["WAResultOrError","WASmaxInMdIQErrorResponseMixin","WASmaxInMdIqMixinErrors","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInMdIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInMdIqMixinErrors").parseIqMixinErrors(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIqMixinErrors:b.value}))}g.parseCompanionHelloResponseError=a}),98);
__d("WASmaxInMdCompanionHelloResponseNotifyCompanion",["WAResultOrError","WASmaxInMdIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"link_code_companion_reg");if(!c.success)return c;var e=d("WASmaxParseUtils").flattenedChildWithTag(c.value,"link_code_pairing_ref");if(!e.success)return e;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,c.value,"stage","companion_hello");if(!c.success)return c;e=d("WASmaxParseUtils").contentBytes(e.value);if(!e.success)return e;a=d("WASmaxInMdIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({linkCodeCompanionRegStage:c.value,linkCodeCompanionRegLinkCodePairingRefElementValue:e.value},a.value))}g.parseCompanionHelloResponseNotifyCompanion=a}),98);
__d("WASmaxInMdEnums",[],(function(a,b,c,d,e,f){a={"false":"false","true":"true"};f.ENUM_FALSE_TRUE=a}),66);
__d("WASmaxInMdSetRegRequest",["WAResultOrError","WASmaxInMdBaseIQSetRequestMixin","WASmaxInMdEnums","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"biz");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(a,"name");return!b.success?b:d("WAResultOrError").makeResult({name:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"iq");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"pair-success");if(!b.success)return b;var c=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"device-identity");if(!c.success)return c;var e=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"device");if(!e.success)return e;var f=d("WASmaxParseUtils").flattenedChildWithTag(b.value,"platform");if(!f.success)return f;b=d("WASmaxParseUtils").optionalChildWithTag(b.value,"biz",h);if(!b.success)return b;var g=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!g.success)return g;var i=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"xmlns","md");if(!i.success)return i;c=d("WASmaxParseUtils").contentBytesRange(c.value,1,500);if(!c.success)return c;var j=d("WASmaxParseJid").attrDeviceJid(e.value,"jid");if(!j.success)return j;var k=d("WASmaxParseUtils").optional(d("WASmaxParseJid").attrDeviceJid,e.value,"lid");if(!k.success)return k;e=d("WASmaxParseUtils").optional(d("WASmaxParseUtils").attrStringEnum,e.value,"beta",d("WASmaxInMdEnums").ENUM_FALSE_TRUE);if(!e.success)return e;f=d("WASmaxParseUtils").attrString(f.value,"name");if(!f.success)return f;a=d("WASmaxInMdBaseIQSetRequestMixin").parseBaseIQSetRequestMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({from:g.value,xmlns:i.value,pairSuccessDeviceIdentityElementValue:c.value,pairSuccessDeviceJid:j.value,pairSuccessDeviceLid:k.value,pairSuccessDeviceBeta:e.value,pairSuccessPlatformName:f.value},a.value,{pairSuccessBiz:b.value}))}g.parseSetRegRequestPairSuccessBiz=h;g.parseSetRegRequest=a}),98);
__d("WASmaxInMdSetToCompanionRequest",["WAResultOrError","WASmaxInMdBaseIQSetRequestMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"ref");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytes(a);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"iq");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"pair-device");if(!b.success)return b;var c=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","s.whatsapp.net");if(!c.success)return c;var e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"xmlns","md");if(!e.success)return e;a=d("WASmaxInMdBaseIQSetRequestMixin").parseBaseIQSetRequestMixin(a);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"ref",6,6,h);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({from:c.value,xmlns:e.value},a.value,{pairDeviceRef:b.value}))}g.parseSetToCompanionRequestPairDeviceRef=h;g.parseSetToCompanionRequest=a}),98);
__d("WASmaxInMessageDeliverAdminEditMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"edit","3");return!b.success?b:d("WAResultOrError").makeResult({edit:b.value})}g.parseAdminEditMixin=a}),98);
__d("WASmaxInMessageDeliverAdminRevokeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"edit","8");return!b.success?b:d("WAResultOrError").makeResult({edit:b.value})}g.parseAdminRevokeMixin=a}),98);
__d("WASmaxInMessageDeliverContentTypeMediaMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","media");return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parseContentTypeMediaMixin=a}),98);
__d("WASmaxInMessageDeliverContentTypePollCreationMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","poll");if(!a.success)return a;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,b.value,"polltype","creation");return!b.success?b:d("WAResultOrError").makeResult({type:a.value,metaPolltype:b.value})}g.parseContentTypePollCreationMixin=a}),98);
__d("WASmaxInMessageDeliverContentTypePollResultSnapshotMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","poll");if(!a.success)return a;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,b.value,"polltype","result_snapshot");return!b.success?b:d("WAResultOrError").makeResult({type:a.value,metaPolltype:b.value})}g.parseContentTypePollResultSnapshotMixin=a}),98);
__d("WASmaxInMessageDeliverContentTypePollVoteMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","poll");if(!a.success)return a;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,b.value,"polltype","vote");return!b.success?b:d("WAResultOrError").makeResult({type:a.value,metaPolltype:b.value})}g.parseContentTypePollVoteMixin=a}),98);
__d("WASmaxInMessageDeliverContentTypeReactionMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","reaction");return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parseContentTypeReactionMixin=a}),98);
__d("WASmaxInMessageDeliverContentTypeTextMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","text");return!b.success?b:d("WAResultOrError").makeResult({type:b.value})}g.parseContentTypeTextMixin=a}),98);
__d("WASmaxInMessageDeliverContentTypeTextOrMediaOrPollCreationMixinGroup",["WAResultOrError","WASmaxInMessageDeliverContentTypeMediaMixin","WASmaxInMessageDeliverContentTypePollCreationMixin","WASmaxInMessageDeliverContentTypeTextMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverContentTypeTextMixin").parseContentTypeTextMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"ContentTypeText",value:b.value});var c=d("WASmaxInMessageDeliverContentTypeMediaMixin").parseContentTypeMediaMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"ContentTypeMedia",value:c.value});var e=d("WASmaxInMessageDeliverContentTypePollCreationMixin").parseContentTypePollCreationMixin(a);return e.success?d("WAResultOrError").makeResult({name:"ContentTypePollCreation",value:e.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["ContentTypeText","ContentTypeMedia","ContentTypePollCreation"],[b,c,e])}g.parseContentTypeTextOrMediaOrPollCreationMixinGroup=a}),98);
__d("WASmaxInMessageDeliverEnums",["WAJids"],(function(a,b,c,d,e,f,g){a={0:"0",1:"1"};b={"1p_sticker":"1p_sticker",audio:"audio",avatar_sticker:"avatar_sticker",buttons_response:"buttons_response",cataloglink:"cataloglink",collection:"collection",contact:"contact",contact_array:"contact_array",document:"document",genai_sticker:"genai_sticker",gif:"gif",history:"history",image:"image",list_response:"list_response",location:"location",native_flow_response:"native_flow_response",order:"order",product:"product",productlink:"productlink",ptt:"ptt",ptv:"ptv",sticker:"sticker",sticker_pack:"sticker_pack",url:"url",user_created_sticker:"user_created_sticker",vcard:"vcard",video:"video",xma:"xma"};c={"1p_sticker":"1p_sticker",audio:"audio",avatar_sticker:"avatar_sticker",cataloglink:"cataloglink",document:"document",genai_sticker:"genai_sticker",gif:"gif",image:"image",productlink:"productlink",ptt:"ptt",sticker:"sticker",sticker_pack:"sticker_pack",url:"url",user_created_sticker:"user_created_sticker",vcard:"vcard",video:"video"};e={1:"1",2:"2"};f={1:"1",3:"3"};var h={ACCEPT:"ACCEPT",REJECT:"REJECT",UNKNOWN:"UNKNOWN"},i={address_message:"address_message",call_permission_request:"call_permission_request",form_message:"form_message",galaxy_message:"galaxy_message",menu_options:"menu_options"},j={address_message:"address_message",galaxy_message:"galaxy_message"},k={ads_manager:"ads_manager",graph_api:"graph_api",marketing_messages_with_optimizations:"marketing_messages_with_optimizations",unified_inbox:"unified_inbox"},l={allowlist:"allowlist",contacts:"contacts",denylist:"denylist"},m={allow:"allow",bypass:"bypass",deny:"deny",error:"error"},n={ASPRESENTED:"ASPRESENTED",BIMONTHLY:"BIMONTHLY",DAILY:"DAILY",FORTNIGHTLY:"FORTNIGHTLY",HALFYEARLY:"HALFYEARLY",MONTHLY:"MONTHLY",ONETIME:"ONETIME",QUARTERLY:"QUARTERLY",UNKNOWN:"UNKNOWN",WEEKLY:"WEEKLY",YEARLY:"YEARLY"},o={audio:"audio",avatar_sticker:"avatar_sticker",buttons_response:"buttons_response",cataloglink:"cataloglink",contact:"contact",contact_array:"contact_array",document:"document",gif:"gif",history:"history",image:"image",list_response:"list_response",location:"location",native_flow_response:"native_flow_response",order:"order",product:"product",productlink:"productlink",ptt:"ptt",ptv:"ptv",sticker:"sticker",url:"url",vcard:"vcard",video:"video",xma:"xma"},p={br:"br",incentive:"incentive",p2m:"p2m",p2m_lite:"p2m_lite",p2p:"p2p",payout:"payout",upi:"upi"},q={buyer:"buyer",seller:"seller"},r={call_permission_request:"call_permission_request",catalog_message:"catalog_message",laneline_call:"laneline_call",menu_options:"menu_options",novi_complete_transaction:"novi_complete_transaction",novi_hub:"novi_hub",novi_login:"novi_login",novi_report_transaction:"novi_report_transaction",novi_view_bank_detail:"novi_view_bank_detail",novi_view_card_detail:"novi_view_card_detail",novi_view_code:"novi_view_code",novi_view_transaction:"novi_view_transaction",order_details:"order_details",order_status:"order_status",otp:"otp",payment_info:"payment_info",payment_method:"payment_method",payment_status:"payment_status",voice_call:"voice_call"},s={card:"card","net-banking":"net-banking",upi:"upi",wallet:"wallet"},t={creation:"creation",edit:"edit"},u={creation:"creation",edit:"edit",response:"response"},v={ctwa:"ctwa",username:"username"},w={delivery:"delivery",impressions:"impressions",link_clicks:"link_clicks",no_optimization:"no_optimization",offsite_conversions:"offsite_conversions",replies:"replies"},x={EXACT:"EXACT",MAX:"MAX"},y={FAILURE:"FAILURE",INIT:"INIT",SUCCESS:"SUCCESS"},z={"false":"false","true":"true"},A={FBPAY:"FBPAY",NOVI:"NOVI",P2M_LITE:"P2M_LITE",UPI:"UPI"},B={first:"first",full:"full",inner:"inner",last:"last"},C={FULL:"FULL",MISSING_FIELD_NOT_PARTIAL:"MISSING_FIELD_NOT_PARTIAL",PARTIAL:"PARTIAL"},D={high:"high",high_force:"high_force",low:"low"},E={high:"high",low:"low",unknown:"unknown"},F={hosted:"hosted",view_once:"view_once"},G={hpp_payment_link:"hpp_payment_link",upi:"upi"},H={lid:"lid",pn:"pn"},I={matched:"matched",unmatched:"unmatched"},J={msg:"msg",pkmsg:"pkmsg"},K={on_demand:"on_demand",scheduled:"scheduled"},L={p2m:"p2m",p2p:"p2p"},M={request:"request",send:"send"},N={smb_mm:"smb_mm",smb_promo:"smb_promo"},O={tier3:"tier3",tier6_matched:"tier6_matched",tier6_unmatched:"tier6_unmatched"},P={validators:[(d=d("WAJids")).validateDeviceJid,d.validateBroadcastJid,d.validateDeviceJid,d.validateGroupJid,d.validateInteropDeviceJid,d.validateInteropDeviceJid,d.validateStatusJid],typeName:"DeviceJid|BroadcastJid|DeviceJid|GroupJid|InteropDeviceJid|InteropDeviceJid|StatusJid"},Q={validators:[d.validateDeviceJid,d.validateDeviceJid],typeName:"DeviceJid|DeviceJid"},R={validators:[d.validateDeviceJid,d.validateDeviceJid,d.validateDeviceJid],typeName:"DeviceJid|DeviceJid|DeviceJid"},S={validators:[d.validateDeviceJid,d.validateDeviceJid,d.validateInteropDeviceJid,d.validateInteropDeviceJid],typeName:"DeviceJid|DeviceJid|InteropDeviceJid|InteropDeviceJid"},T={validators:[d.validateGroupJid,d.validateUserJid],typeName:"GroupJid|UserJid"};d={validators:[d.validateUserJid,d.validateUserJid],typeName:"UserJid|UserJid"};g.ENUM_0_1=a;g.ENUM_1PSTICKER_AUDIO_AVATARSTICKER_BUTTONSRESPONSE_CATALOGLINK_COLLECTION_CONTACT_CONTACTARRAY_DOCUMENT_GENAISTICKER_GIF_HISTORY_IMAGE_LISTRESPONSE_LOCATION_NATIVEFLOWRESPONSE_ORDER_PRODUCT_PRODUCTLINK_PTT_PTV_STICKER_STICKERPACK_URL_USERCREATEDSTICKER_VCARD_VIDEO_XMA=b;g.ENUM_1PSTICKER_AUDIO_AVATARSTICKER_CATALOGLINK_DOCUMENT_GENAISTICKER_GIF_IMAGE_PRODUCTLINK_PTT_STICKER_STICKERPACK_URL_USERCREATEDSTICKER_VCARD_VIDEO=c;g.ENUM_1_2=e;g.ENUM_1_3=f;g.ENUM_ACCEPT_REJECT_UNKNOWN=h;g.ENUM_ADDRESSMESSAGE_CALLPERMISSIONREQUEST_FORMMESSAGE_GALAXYMESSAGE_MENUOPTIONS=i;g.ENUM_ADDRESSMESSAGE_GALAXYMESSAGE=j;g.ENUM_ADSMANAGER_GRAPHAPI_MARKETINGMESSAGESWITHOPTIMIZATIONS_UNIFIEDINBOX=k;g.ENUM_ALLOWLIST_CONTACTS_DENYLIST=l;g.ENUM_ALLOW_BYPASS_DENY_ERROR=m;g.ENUM_ASPRESENTED_BIMONTHLY_DAILY_FORTNIGHTLY_HALFYEARLY_MONTHLY_ONETIME_QUARTERLY_UNKNOWN_WEEKLY_YEARLY=n;g.ENUM_AUDIO_AVATARSTICKER_BUTTONSRESPONSE_CATALOGLINK_CONTACT_CONTACTARRAY_DOCUMENT_GIF_HISTORY_IMAGE_LISTRESPONSE_LOCATION_NATIVEFLOWRESPONSE_ORDER_PRODUCT_PRODUCTLINK_PTT_PTV_STICKER_URL_VCARD_VIDEO_XMA=o;g.ENUM_BR_INCENTIVE_P2M_P2MLITE_P2P_PAYOUT_UPI=p;g.ENUM_BUYER_SELLER=q;g.ENUM_CALLPERMISSIONREQUEST_CATALOGMESSAGE_LANELINECALL_MENUOPTIONS_NOVICOMPLETETRANSACTION_NOVIHUB_NOVILOGIN_NOVIREPORTTRANSACTION_NOVIVIEWBANKDETAIL_NOVIVIEWCARDDETAIL_NOVIVIEWCODE_NOVIVIEWTRANSACTION_ORDERDETAILS_ORDERSTATUS_OTP_PAYMENTINFO_PAYMENTMETHOD_PAYMENTSTATUS_VOICECALL=r;g.ENUM_CARD_NETBANKING_UPI_WALLET=s;g.ENUM_CREATION_EDIT=t;g.ENUM_CREATION_EDIT_RESPONSE=u;g.ENUM_CTWA_USERNAME=v;g.ENUM_DELIVERY_IMPRESSIONS_LINKCLICKS_NOOPTIMIZATION_OFFSITECONVERSIONS_REPLIES=w;g.ENUM_EXACT_MAX=x;g.ENUM_FAILURE_INIT_SUCCESS=y;g.ENUM_FALSE_TRUE=z;g.ENUM_FBPAY_NOVI_P2MLITE_UPI=A;g.ENUM_FIRST_FULL_INNER_LAST=B;g.ENUM_FULL_MISSINGFIELDNOTPARTIAL_PARTIAL=C;g.ENUM_HIGH_HIGHFORCE_LOW=D;g.ENUM_HIGH_LOW_UNKNOWN=E;g.ENUM_HOSTED_VIEWONCE=F;g.ENUM_HPPPAYMENTLINK_UPI=G;g.ENUM_LID_PN=H;g.ENUM_MATCHED_UNMATCHED=I;g.ENUM_MSG_PKMSG=J;g.ENUM_ONDEMAND_SCHEDULED=K;g.ENUM_P2M_P2P=L;g.ENUM_REQUEST_SEND=M;g.ENUM_SMBMM_SMBPROMO=N;g.ENUM_TIER3_TIER6MATCHED_TIER6UNMATCHED=O;g.DEVICEJID_BROADCASTJID_DEVICEJID_GROUPJID_INTEROPDEVICEJID_INTEROPDEVICEJID_STATUSJID=P;g.DEVICEJID_DEVICEJID=Q;g.DEVICEJID_DEVICEJID_DEVICEJID=R;g.DEVICEJID_DEVICEJID_INTEROPDEVICEJID_INTEROPDEVICEJID=S;g.GROUPJID_USERJID=T;g.USERJID_USERJID=d}),98);
__d("WASmaxInMessageDeliverPayloadMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"plaintext");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytesRange(a,1,1048576);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}g.parsePayloadMixin=a}),98);
__d("WASmaxInMessageDeliverWAMOSubMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,b.value,"is_wamo_sub","true");return!a.success?a:d("WAResultOrError").makeResult({metaIsWamoSub:a.value})}g.parseWAMOSubMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterMediaMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypeMediaMixin","WASmaxInMessageDeliverEnums","WASmaxInMessageDeliverPayloadMixin","WASmaxInMessageDeliverWAMOSubMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"plaintext");if(!b.success)return b;var c=d("WASmaxParseUtils").attrStringEnum(b.value,"mediatype",d("WASmaxInMessageDeliverEnums").ENUM_1PSTICKER_AUDIO_AVATARSTICKER_CATALOGLINK_DOCUMENT_GENAISTICKER_GIF_IMAGE_PRODUCTLINK_PTT_STICKER_STICKERPACK_URL_USERCREATEDSTICKER_VCARD_VIDEO);if(!c.success)return c;b=d("WASmaxInMessageDeliverPayloadMixin").parsePayloadMixin(b.value);if(!b.success)return b;var e=d("WASmaxInMessageDeliverContentTypeMediaMixin").parseContentTypeMediaMixin(a);if(!e.success)return e;a=d("WASmaxInMessageDeliverWAMOSubMixin").parseWAMOSubMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({plaintextMediatype:c.value,plaintextPayloadMixin:b.value},e.value,{wAMOSubMixin:a.success?a.value:null}))}g.parseNewsletterMediaMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterTextMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypeTextMixin","WASmaxInMessageDeliverPayloadMixin","WASmaxInMessageDeliverWAMOSubMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"plaintext");if(!b.success)return b;b=d("WASmaxInMessageDeliverPayloadMixin").parsePayloadMixin(b.value);if(!b.success)return b;var c=d("WASmaxInMessageDeliverContentTypeTextMixin").parseContentTypeTextMixin(a);if(!c.success)return c;a=d("WASmaxInMessageDeliverWAMOSubMixin").parseWAMOSubMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({plaintextPayloadMixin:b.value},c.value,{wAMOSubMixin:a.success?a.value:null}))}g.parseNewsletterTextMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterTextOrMediaMixinGroup",["WAResultOrError","WASmaxInMessageDeliverNewsletterMediaMixin","WASmaxInMessageDeliverNewsletterTextMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverNewsletterTextMixin").parseNewsletterTextMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NewsletterText",value:b.value});var c=d("WASmaxInMessageDeliverNewsletterMediaMixin").parseNewsletterMediaMixin(a);return c.success?d("WAResultOrError").makeResult({name:"NewsletterMedia",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["NewsletterText","NewsletterMedia"],[b,c])}g.parseNewsletterTextOrMediaMixinGroup=a}),98);
__d("WASmaxInMessageDeliverNewsletterEditMixin",["WAResultOrError","WASmaxInMessageDeliverAdminEditMixin","WASmaxInMessageDeliverNewsletterTextOrMediaMixinGroup","WASmaxInMessageDeliverWAMOSubMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInMessageDeliverAdminEditMixin").parseAdminEditMixin(a);if(!b.success)return b;var c=d("WASmaxInMessageDeliverWAMOSubMixin").parseWAMOSubMixin(a);a=d("WASmaxInMessageDeliverNewsletterTextOrMediaMixinGroup").parseNewsletterTextOrMediaMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{wAMOSubMixin:c.success?c.value:null,newsletterTextOrMediaMixinGroup:a.value}))}g.parseNewsletterEditMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterPollCreationMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypePollCreationMixin","WASmaxInMessageDeliverPayloadMixin","WASmaxInMessageDeliverWAMOSubMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"plaintext");if(!b.success)return b;b=d("WASmaxInMessageDeliverPayloadMixin").parsePayloadMixin(b.value);if(!b.success)return b;var c=d("WASmaxInMessageDeliverContentTypePollCreationMixin").parseContentTypePollCreationMixin(a);if(!c.success)return c;a=d("WASmaxInMessageDeliverWAMOSubMixin").parseWAMOSubMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({plaintextPayloadMixin:b.value},c.value,{wAMOSubMixin:a.success?a.value:null}))}g.parseNewsletterPollCreationMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterPollResultSnapshotMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypePollResultSnapshotMixin","WASmaxInMessageDeliverPayloadMixin","WASmaxInMessageDeliverWAMOSubMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"plaintext");if(!b.success)return b;b=d("WASmaxInMessageDeliverPayloadMixin").parsePayloadMixin(b.value);if(!b.success)return b;var c=d("WASmaxInMessageDeliverContentTypePollResultSnapshotMixin").parseContentTypePollResultSnapshotMixin(a);if(!c.success)return c;a=d("WASmaxInMessageDeliverWAMOSubMixin").parseWAMOSubMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({plaintextPayloadMixin:b.value},c.value,{wAMOSubMixin:a.success?a.value:null}))}g.parseNewsletterPollResultSnapshotMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterPollVoteMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypePollVoteMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"vote");if(!b.success)return b;b=d("WASmaxParseUtils").contentBytesRange(a,32,32);return!b.success?b:d("WAResultOrError").makeResult({elementValue:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"votes");if(!b.success)return b;a=d("WASmaxInMessageDeliverContentTypePollVoteMixin").parseContentTypePollVoteMixin(a);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"vote",0,1e3,h);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{votesVote:b.value}))}g.parseNewsletterPollVoteVotesVote=h;g.parseNewsletterPollVoteMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterReactionMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypeReactionMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"reaction");if(!b.success)return b;b=d("WASmaxParseUtils").attrString(b.value,"code");if(!b.success)return b;a=d("WASmaxInMessageDeliverContentTypeReactionMixin").parseContentTypeReactionMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({reactionCode:b.value},a.value))}g.parseNewsletterReactionMixin=a}),98);
__d("WASmaxInMessageDeliverRevokeMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"edit","7");return!b.success?b:d("WAResultOrError").makeResult({edit:b.value})}g.parseRevokeMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterReactionRevokeMixin",["WAResultOrError","WASmaxInMessageDeliverContentTypeReactionMixin","WASmaxInMessageDeliverRevokeMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"reaction");if(!b.success)return b;b=d("WASmaxInMessageDeliverRevokeMixin").parseRevokeMixin(a);if(!b.success)return b;a=d("WASmaxInMessageDeliverContentTypeReactionMixin").parseContentTypeReactionMixin(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,a.value))}g.parseNewsletterReactionRevokeMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterRevokeMixin",["WAResultOrError","WASmaxInMessageDeliverAdminRevokeMixin","WASmaxInMessageDeliverContentTypeTextMixin","WASmaxInMessageDeliverWAMOSubMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"plaintext");if(!b.success)return b;b=d("WASmaxInMessageDeliverAdminRevokeMixin").parseAdminRevokeMixin(a);if(!b.success)return b;var c=d("WASmaxInMessageDeliverContentTypeTextMixin").parseContentTypeTextMixin(a);if(!c.success)return c;a=d("WASmaxInMessageDeliverWAMOSubMixin").parseWAMOSubMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,c.value,{wAMOSubMixin:a.success?a.value:null}))}g.parseNewsletterRevokeMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterWAMOEmptyMixin",["WAResultOrError","WASmaxInMessageDeliverAdminEditMixin","WASmaxInMessageDeliverAdminRevokeMixin","WASmaxInMessageDeliverContentTypeTextOrMediaOrPollCreationMixinGroup","WASmaxInMessageDeliverWAMOSubMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"plaintext");if(!b.success)return b;b=d("WASmaxInMessageDeliverWAMOSubMixin").parseWAMOSubMixin(a);if(!b.success)return b;var c=d("WASmaxInMessageDeliverAdminRevokeMixin").parseAdminRevokeMixin(a),e=d("WASmaxInMessageDeliverAdminEditMixin").parseAdminEditMixin(a);a=d("WASmaxInMessageDeliverContentTypeTextOrMediaOrPollCreationMixinGroup").parseContentTypeTextOrMediaOrPollCreationMixinGroup(a);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({},b.value,{adminRevokeMixin:c.success?c.value:null,adminEditMixin:e.success?e.value:null,contentTypeTextOrMediaOrPollCreationMixinGroup:a.value}))}g.parseNewsletterWAMOEmptyMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterMessageFanoutContent",["WAResultOrError","WASmaxInMessageDeliverNewsletterEditMixin","WASmaxInMessageDeliverNewsletterMediaMixin","WASmaxInMessageDeliverNewsletterPollCreationMixin","WASmaxInMessageDeliverNewsletterPollResultSnapshotMixin","WASmaxInMessageDeliverNewsletterPollVoteMixin","WASmaxInMessageDeliverNewsletterReactionMixin","WASmaxInMessageDeliverNewsletterReactionRevokeMixin","WASmaxInMessageDeliverNewsletterRevokeMixin","WASmaxInMessageDeliverNewsletterTextMixin","WASmaxInMessageDeliverNewsletterWAMOEmptyMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverNewsletterEditMixin").parseNewsletterEditMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"NewsletterEdit",value:b.value});var c=d("WASmaxInMessageDeliverNewsletterRevokeMixin").parseNewsletterRevokeMixin(a);if(c.success)return d("WAResultOrError").makeResult({name:"NewsletterRevoke",value:c.value});var e=d("WASmaxInMessageDeliverNewsletterTextMixin").parseNewsletterTextMixin(a);if(e.success)return d("WAResultOrError").makeResult({name:"NewsletterText",value:e.value});var f=d("WASmaxInMessageDeliverNewsletterMediaMixin").parseNewsletterMediaMixin(a);if(f.success)return d("WAResultOrError").makeResult({name:"NewsletterMedia",value:f.value});var g=d("WASmaxInMessageDeliverNewsletterReactionMixin").parseNewsletterReactionMixin(a);if(g.success)return d("WAResultOrError").makeResult({name:"NewsletterReaction",value:g.value});var h=d("WASmaxInMessageDeliverNewsletterReactionRevokeMixin").parseNewsletterReactionRevokeMixin(a);if(h.success)return d("WAResultOrError").makeResult({name:"NewsletterReactionRevoke",value:h.value});var i=d("WASmaxInMessageDeliverNewsletterPollCreationMixin").parseNewsletterPollCreationMixin(a);if(i.success)return d("WAResultOrError").makeResult({name:"NewsletterPollCreation",value:i.value});var j=d("WASmaxInMessageDeliverNewsletterPollVoteMixin").parseNewsletterPollVoteMixin(a);if(j.success)return d("WAResultOrError").makeResult({name:"NewsletterPollVote",value:j.value});var k=d("WASmaxInMessageDeliverNewsletterPollResultSnapshotMixin").parseNewsletterPollResultSnapshotMixin(a);if(k.success)return d("WAResultOrError").makeResult({name:"NewsletterPollResultSnapshot",value:k.value});var l=d("WASmaxInMessageDeliverNewsletterWAMOEmptyMixin").parseNewsletterWAMOEmptyMixin(a);return l.success?d("WAResultOrError").makeResult({name:"NewsletterWAMOEmpty",value:l.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["NewsletterEdit","NewsletterRevoke","NewsletterText","NewsletterMedia","NewsletterReaction","NewsletterReactionRevoke","NewsletterPollCreation","NewsletterPollVote","NewsletterPollResultSnapshot","NewsletterWAMOEmpty"],[b,c,e,f,g,h,i,j,k,l])}g.parseNewsletterMessageFanoutContent=a}),98);
__d("WASmaxInMessageDeliverNewsletterMessageLastEditTimestampMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(b.value,"msg_edit_t",15778656e5,41024736e5);return!a.success?a:d("WAResultOrError").makeResult({metaMsgEditT:a.value})}g.parseNewsletterMessageLastEditTimestampMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterMessageOriginalTimestampMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"meta");if(!b.success)return b;a=d("WASmaxParseUtils").attrIntRange(b.value,"original_msg_t",1577865600,4102473600);return!a.success?a:d("WAResultOrError").makeResult({metaOriginalMsgT:a.value})}g.parseNewsletterMessageOriginalTimestampMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterMessageFanoutMixin",["WAResultOrError","WASmaxInMessageDeliverNewsletterMessageFanoutContent","WASmaxInMessageDeliverNewsletterMessageLastEditTimestampMixin","WASmaxInMessageDeliverNewsletterMessageOriginalTimestampMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseUtils").attrStanzaId(a,"id");if(!b.success)return b;var c=d("WASmaxParseUtils").attrIntRange(a,"server_id",99,2147476647);if(!c.success)return c;var e=d("WASmaxParseUtils").attrIntRange(a,"t",0,void 0);if(!e.success)return e;var f=d("WASmaxParseUtils").optionalLiteral(d("WASmaxParseUtils").attrString,a,"is_sender","true");if(!f.success)return f;var g=d("WASmaxInMessageDeliverNewsletterMessageOriginalTimestampMixin").parseNewsletterMessageOriginalTimestampMixin(a),h=d("WASmaxInMessageDeliverNewsletterMessageLastEditTimestampMixin").parseNewsletterMessageLastEditTimestampMixin(a);a=d("WASmaxInMessageDeliverNewsletterMessageFanoutContent").parseNewsletterMessageFanoutContent(a);return!a.success?a:d("WAResultOrError").makeResult({id:b.value,serverId:c.value,t:e.value,isSender:f.value,newsletterMessageOriginalTimestampMixin:g.success?g.value:null,newsletterMessageLastEditTimestampMixin:h.success?h.value:null,newsletterMessageFanoutContent:a.value})}g.parseNewsletterMessageFanoutMixin=a}),98);
__d("WASmaxInMessageDeliverOfflineMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseUtils").attrIntRange(a,"offline",0,12);return!a.success?a:d("WAResultOrError").makeResult({offline:a.value})}g.parseOfflineMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterMessageWithJIDMixin",["WAResultOrError","WASmaxInMessageDeliverNewsletterMessageFanoutMixin","WASmaxInMessageDeliverOfflineMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxParseJid").attrNewsletterJid(a,"from");if(!b.success)return b;var c=d("WASmaxInMessageDeliverNewsletterMessageFanoutMixin").parseNewsletterMessageFanoutMixin(a);if(!c.success)return c;a=d("WASmaxInMessageDeliverOfflineMixin").parseOfflineMixin(a);return d("WAResultOrError").makeResult(babelHelpers["extends"]({from:b.value},c.value,{offlineMixin:a.success?a.value:null}))}g.parseNewsletterMessageWithJIDMixin=a}),98);
__d("WASmaxInMessageDeliverNewsletterRequest",["WASmaxInMessageDeliverNewsletterMessageWithJIDMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"message");if(!b.success)return b;b=d("WASmaxInMessageDeliverNewsletterMessageWithJIDMixin").parseNewsletterMessageWithJIDMixin(a);return!b.success?b:b}g.parseNewsletterRequest=a}),98);
__d("WASmaxInMessageFallbackEnums",["WAJids"],(function(a,b,c,d,e,f,g){b={validators:[(a=d("WAJids")).validateBroadcastJid,a.validateCallJid,a.validateDeviceJid,a.validateDomainJid,a.validateGroupJid,a.validateStatusJid,a.validateUserJid],typeName:"BroadcastJid|CallJid|DeviceJid|DomainJid|GroupJid|StatusJid|UserJid"};g.BROADCASTJID_CALLJID_DEVICEJID_DOMAINJID_GROUPJID_STATUSJID_USERJID=b}),98);
__d("WASmaxOutMdBaseIQSetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"set"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQSetRequestMixin=a}),98);
__d("WASmaxOutMdCompanionFinishRequest",["WASmaxJsx","WASmaxOutMdBaseIQSetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b,c=a.linkCodeCompanionRegJid,e=a.linkCodePairingWrappedKeyBundleElementValue,f=a.companionIdentityPublicElementValue;a=a.linkCodePairingRefElementValue;c=d("WASmaxOutMdBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin((b=d("WASmaxJsx")).smax("iq",{xmlns:"md",to:d("WAWap").S_WHATSAPP_NET},b.smax("link_code_companion_reg",{jid:d("WAWap").USER_JID(c),stage:"companion_finish"},b.smax("link_code_pairing_wrapped_key_bundle",null,e),b.smax("companion_identity_public",null,f),b.smax("link_code_pairing_ref",null,a))));return c}g.makeCompanionFinishRequest=a}),98);
__d("WASmaxMdCompanionFinishRPC",["WAComms","WASmaxInMdCompanionFinishResponseError","WASmaxInMdCompanionFinishResponseSuccess","WASmaxOutMdCompanionFinishRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:e=d("WASmaxOutMdCompanionFinishRequest").makeCompanionFinishRequest(a);i.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=i.sent;g=d("WASmaxInMdCompanionFinishResponseSuccess").parseCompanionFinishResponseSuccess(f,e);if(!g.success){i.next=7;break}return i.abrupt("return",{name:"CompanionFinishResponseSuccess",value:g.value});case 7:h=d("WASmaxInMdCompanionFinishResponseError").parseCompanionFinishResponseError(f,e);if(!h.success){i.next=10;break}return i.abrupt("return",{name:"CompanionFinishResponseError",value:h.value});case 10:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("CompanionFinish",{Success:g,Error:h}));case 11:case"end":return i.stop()}},null,this)}g.sendCompanionFinishRPC=a}),98);
__d("WASmaxOutMdCompanionHelloRequest",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxOutMdBaseIQSetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function h(a){a=a.linkCodePairingNonceElementValue;a=d("WASmaxJsx").smax("link_code_pairing_nonce",null,a);return a}function a(a){var b,c=a.linkCodePairingNonceArgs,e=a.linkCodeCompanionRegJid,f=a.linkCodeCompanionRegShouldShowPushNotification,g=a.linkCodePairingWrappedCompanionEphemeralPubElementValue,i=a.companionServerAuthKeyPubElementValue,j=a.companionPlatformIdElementValue;a=a.companionPlatformDisplayElementValue;e=d("WASmaxOutMdBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin((b=d("WASmaxJsx")).smax("iq",{xmlns:"md",to:d("WAWap").S_WHATSAPP_NET},b.smax("link_code_companion_reg",{jid:d("WAWap").USER_JID(e),stage:"companion_hello",should_show_push_notification:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,f)},b.smax("link_code_pairing_wrapped_companion_ephemeral_pub",null,g),b.smax("companion_server_auth_key_pub",null,i),b.smax("companion_platform_id",null,j),b.smax("companion_platform_display",null,a),d("WASmaxChildren").OPTIONAL_CHILD(h,c))));return e}g.makeCompanionHelloRequestLinkCodeCompanionRegLinkCodePairingNonce=h;g.makeCompanionHelloRequest=a}),98);
__d("WASmaxMdCompanionHelloRPC",["WAComms","WASmaxInMdCompanionHelloResponseError","WASmaxInMdCompanionHelloResponseNotifyCompanion","WASmaxOutMdCompanionHelloRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,c){var e,f,g,h;return b("regeneratorRuntime").async(function(i){while(1)switch(i.prev=i.next){case 0:e=d("WASmaxOutMdCompanionHelloRequest").makeCompanionHelloRequest(a);i.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(e,c));case 3:f=i.sent;g=d("WASmaxInMdCompanionHelloResponseNotifyCompanion").parseCompanionHelloResponseNotifyCompanion(f,e);if(!g.success){i.next=7;break}return i.abrupt("return",{name:"CompanionHelloResponseNotifyCompanion",value:g.value});case 7:h=d("WASmaxInMdCompanionHelloResponseError").parseCompanionHelloResponseError(f,e);if(!h.success){i.next=10;break}return i.abrupt("return",{name:"CompanionHelloResponseError",value:h.value});case 10:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("CompanionHello",{NotifyCompanion:g,Error:h}));case 11:case"end":return i.stop()}},null,this)}g.sendCompanionHelloRPC=a}),98);
__d("WASmaxOutMdRegularCompanionSetRegResponseBundleMixin",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=a.keyAttestationKeyId;a=a.keyAttestationElementValue;b=d("WASmaxJsx").smax("key_attestation",{key_id:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,b)},a);return b}function i(a){a=a.gpiaElementValue;a=d("WASmaxJsx").smax("gpia",null,a);return a}function j(a){var b=a.keyAttestationArgs,c=a.gpiaArgs,e=a.deviceIdentityKeyIndex;a=a.deviceIdentityElementValue;e=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("pair-device-sign",null,d("WASmaxJsx").smax("device-identity",{"key-index":d("WAWap").INT(e)},a),d("WASmaxChildren").OPTIONAL_CHILD(h,b),d("WASmaxChildren").OPTIONAL_CHILD(i,c)));return e}function a(a,b){b=j(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.makeRegularCompanionSetRegResponseBundlePairDeviceSignKeyAttestation=h;g.makeRegularCompanionSetRegResponseBundlePairDeviceSignGpia=i;g.mergeRegularCompanionSetRegResponseBundleMixin=a}),98);
__d("WASmaxOutMdSetRegResponseClientResponse",["WASmaxJsx","WASmaxOutMdRegularCompanionSetRegResponseBundleMixin","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a,b){b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,b,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);b=d("WASmaxOutMdRegularCompanionSetRegResponseBundleMixin").mergeRegularCompanionSetRegResponseBundleMixin(d("WASmaxJsx").smax("iq",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").S_WHATSAPP_NET,type:"result"}),a);return b}g.makeSetRegResponseClientResponse=a}),98);
__d("WASmaxOutMdIQErrorNotAuthorizedMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("error",{text:"not-authorized",code:d("WAWap").INT(401)});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeIQErrorNotAuthorizedMixin=a}),98);
__d("WASmaxOutMdSetRegResponseError",["WASmaxJsx","WASmaxOutMdIQErrorNotAuthorizedMixin","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);a=d("WASmaxJsx").smax("iq",{id:d("WAWap").STANZA_ID(a.value),to:d("WAWap").S_WHATSAPP_NET,type:"error"},d("WASmaxOutMdIQErrorNotAuthorizedMixin").mergeIQErrorNotAuthorizedMixin(d("WASmaxJsx").smax("error",null)));return a}g.makeSetRegResponseError=a}),98);
__d("WASmaxOutMdHostedCompanionSetRegResponseBundleMixin",["WASmaxJsx","WASmaxMixins"],(function(a,b,c,d,e,f,g){function h(a){a=a.deviceIdentityElementValue;a=d("WASmaxJsx").smax("smax$any",null,d("WASmaxJsx").smax("hosted-pair-set",null,d("WASmaxJsx").smax("device-identity",null,a)));return a}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeHostedCompanionSetRegResponseBundleMixin=a}),98);
__d("WASmaxOutMdSetRegResponseHostedClientResponse",["WASmaxJsx","WASmaxOutMdHostedCompanionSetRegResponseBundleMixin","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a,b){b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,b,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);b=d("WASmaxOutMdHostedCompanionSetRegResponseBundleMixin").mergeHostedCompanionSetRegResponseBundleMixin(d("WASmaxJsx").smax("iq",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").S_WHATSAPP_NET,type:"result"}),a);return b}g.makeSetRegResponseHostedClientResponse=a}),98);
__d("WASmaxMdSetRegRPC",["WASmaxInMdSetRegRequest","WASmaxOutMdSetRegResponseClientResponse","WASmaxOutMdSetRegResponseError","WASmaxOutMdSetRegResponseHostedClientResponse","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMdSetRegRequest").parseSetRegRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("SetReg",{Request:b}));return{parsedRequest:b.value,makeSetRegResponseClientResponse:function(b){return d("WASmaxOutMdSetRegResponseClientResponse").makeSetRegResponseClientResponse(b,a)},makeSetRegResponseHostedClientResponse:function(b){return d("WASmaxOutMdSetRegResponseHostedClientResponse").makeSetRegResponseHostedClientResponse(b,a)},makeSetRegResponseError:function(){return d("WASmaxOutMdSetRegResponseError").makeSetRegResponseError(a)}}}g.receiveSetRegRPC=a}),98);
__d("WASmaxOutMdSetToCompanionResponseClientResponse",["WASmaxJsx","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrDomainJid,a,["from"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("iq",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").DOMAIN_JID(a.value),type:"result"});return b}g.makeSetToCompanionResponseClientResponse=a}),98);
__d("WASmaxMdSetToCompanionRPC",["WASmaxInMdSetToCompanionRequest","WASmaxOutMdSetToCompanionResponseClientResponse","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMdSetToCompanionRequest").parseSetToCompanionRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("SetToCompanion",{Request:b}));return{parsedRequest:b.value,makeSetToCompanionResponseClientResponse:function(){return d("WASmaxOutMdSetToCompanionResponseClientResponse").makeSetToCompanionResponseClientResponse(a)}}}g.receiveSetToCompanionRPC=a}),98);
__d("WASmaxOutMessageDeliverCommonAckMixin",["WASmaxJsx","WASmaxMixins","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrNewsletterJid,a,["from"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{to:d("WAWap").JID(b.value),"class":"message",id:d("WAWap").STANZA_ID(c.value),type:d("WAWap").CUSTOM_STRING(a.value)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeCommonAckMixin=a}),98);
__d("WASmaxOutMessageDeliverNewsletterResponseError",["WASmaxJsx","WASmaxOutMessageDeliverCommonAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutMessageDeliverCommonAckMixin").mergeCommonAckMixin(d("WASmaxJsx").smax("ack",{error:"406"}),a);return a}g.makeNewsletterResponseError=a}),98);
__d("WASmaxOutMessageDeliverNewsletterResponseSuccess",["WASmaxJsx","WASmaxOutMessageDeliverCommonAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutMessageDeliverCommonAckMixin").mergeCommonAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeNewsletterResponseSuccess=a}),98);
__d("WASmaxMessageDeliverNewsletterRPC",["WASmaxInMessageDeliverNewsletterRequest","WASmaxOutMessageDeliverNewsletterResponseError","WASmaxOutMessageDeliverNewsletterResponseSuccess","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMessageDeliverNewsletterRequest").parseNewsletterRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("Newsletter",{Request:b}));return{parsedRequest:b.value,makeNewsletterResponseError:function(){return d("WASmaxOutMessageDeliverNewsletterResponseError").makeNewsletterResponseError(a)},makeNewsletterResponseSuccess:function(){return d("WASmaxOutMessageDeliverNewsletterResponseSuccess").makeNewsletterResponseSuccess(a)}}}g.receiveNewsletterRPC=a}),98);
__d("WASmaxOutGroupsNotificationClientAckMixin",["WASmaxInGroupsEnums","WASmaxJsx","WASmaxMixins","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,a,["id"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrJidEnum,a,["from"],d("WASmaxInGroupsEnums").DOMAINJID_GROUPJID);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);a=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrString,a,["type"]);if(!a.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(a.error);b=d("WASmaxJsx").smax("ack",{id:d("WAWap").STANZA_ID(b.value),to:d("WAWap").JID(c.value),"class":"notification",type:d("WAWap").CUSTOM_STRING(a.value)});return b}function a(a,b){b=h(b);return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeNotificationClientAckMixin=a}),98);
__d("WASmaxOutMessageFallbackDeliverResponseBadStanza",["WASmaxAttrs","WASmaxInMessageFallbackEnums","WASmaxJsx","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils","WASmaxParsingFailure","WAWap"],(function(a,b,c,d,e,f,g){function a(a,b){a=a.ackError;var c=d("WASmaxParseReference").attrFromReference(d("WASmaxParseUtils").attrStanzaId,b,["id"]);if(!c.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(c.error);var e=d("WASmaxParseReference").attrFromReference(d("WASmaxParseJid").attrJidEnum,b,["from"],d("WASmaxInMessageFallbackEnums").BROADCASTJID_CALLJID_DEVICEJID_DOMAINJID_GROUPJID_STATUSJID_USERJID);if(!e.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(e.error);var f=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseJid").attrJidEnum,b,["participant"],d("WASmaxInMessageFallbackEnums").BROADCASTJID_CALLJID_DEVICEJID_DOMAINJID_GROUPJID_STATUSJID_USERJID);if(!f.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(f.error);b=d("WASmaxParseReference").optionalAttrFromReference(d("WASmaxParseUtils").attrString,b,["type"]);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(b.error);c=d("WASmaxJsx").smax("ack",{"class":"message",id:d("WAWap").STANZA_ID(c.value),to:d("WAWap").JID(e.value),participant:d("WASmaxAttrs").OPTIONAL(d("WAWap").JID,f.value),type:d("WASmaxAttrs").OPTIONAL(d("WAWap").CUSTOM_STRING,b.value),error:d("WAWap").INT(a)});return c}g.makeDeliverResponseBadStanza=a}),98);
__d("WATaskScheduler",["Promise","WALogger","WAPromiseBackoffs","WAResolvable","WATimeUtils","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["taskScheduler: reschedule eventually failed for task ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["startScheduler invoked"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Task "," failed, try again later: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Task "," will try again later"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Task "," complete, waiting ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Task "," complete, deactivating"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Firing task ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Scheduling task "," in ","ms"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Task "," deactivated"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Tried to start task "," before registering its implementation"]);r=function(){return a};return a}var s="no_reschedule",t=function(){function a(a){this.$1=!1,this.$2={},this.$3={},this.$4={},this.$5=new Map(),this.$6=a.scheduledTimeResolver}var c=a.prototype;c.$7=function(a){var c=this,e=this.$5.get(a);if(e==null){d("WALogger").ERROR(r(),a).devConsole("start-task-without-impl");return}this.$6.get(a).then(function(f){var g=f==null,i=!g&&f===d("WATimeUtils").DEFAULT_UNIXTIME;if(i){d("WALogger").LOG(q(),a);return}i=f==null?0:f*1e3-d("WATimeUtils").unixTimeMs();i=Math.max(0,i);i=Math.min(i,~(1<<31));d("WALogger").LOG(p(),a,i);c.$4[a]=setTimeout(function(){delete c.$4[a],d("WALogger").LOG(o(),a),e(g).then(function(e){if(e==="no_reschedule")return new(h||(h=b("Promise")))(function(){});var f;e===d("WATimeUtils").DEFAULT_UNIXTIME?(d("WALogger").LOG(n(),a),delete c.$3[a],f=d("WATimeUtils").DEFAULT_UNIXTIME):e>=0?(d("WALogger").LOG(m(),a,e),delete c.$3[a],f=d("WATimeUtils").futureUnixTime(e)):(d("WALogger").LOG(l(),a),f=c.$8(a));return c.$6.set(a,f)}).then(function(){c.$7(a),c.$2[a]&&(c.$2[a].forEach(function(a){return a()}),delete c.$2[a])})["catch"](function(b){d("WALogger").LOG(k(),a,b);return c.$6.set(a,c.$8(a)).then(function(){c.$7(a)})})},i)})};c.$8=function(a){this.$3[a]||(this.$3[a]=d("WAPromiseBackoffs").createTimer({jitter:.1,max:d("WATimeUtils").HOUR_SECONDS*1e3,algo:{type:"fibonacci",first:1e3,second:2e3}}));return d("WATimeUtils").futureUnixTime(Math.round(this.$3[a]()/1e3))};c.$9=function(a,b){this.$2[a]||(this.$2[a]=[]),this.$2[a].push(b)};c.awaitTaskPromise=function(a){var c=this;return new(h||(h=b("Promise")))(function(b){c.$9(a,b)})};c.reschedule=function(a,b){this.$1?(this.$6.set(a,b),this.$4[a]!=null&&clearTimeout(this.$4[a]),this.$7(a)):this.$6.set(a,b)};c.registerTask=function(a,b){this.$1||(this.$1=!0),this.$5.set(a,b),this.$7(a)};c.getScheduledTime=function(a){return this.$6.get(a)};return a}(),u=null,v=new(d("WAResolvable").Resolvable)();function a(a){d("WALogger").LOG(j()),u||(u=new t(a),v.resolve())}function e(a){var b=B("awaitTaskPromise");return b.awaitTaskPromise(a)}function w(a,b){var c=B("reschedule");c.reschedule(a,b)}function x(a,b){v.resolveWasCalled()?w(a,b):v.promise.then(function(){w(a,b)})["catch"](function(b){d("WALogger").ERROR(i(),a).devConsole(b).sendLogs("task-scheduler-reschedule-failed")})}function f(a){x(a,d("WATimeUtils").unixTime())}function y(a){x(a,d("WATimeUtils").DEFAULT_UNIXTIME)}function z(a){var b=B("getScheduledTime");return b.getScheduledTime(a)}function A(a,b){var c=B("registerTask");c.registerTask(a,b)}function B(a){if(u)return u;else throw c("err")("TaskScheduler::"+a+" called before startScheduler")}g.DO_NOT_RESCHEDULE=s;g.startScheduler=a;g.awaitTaskPromise=e;g._doReschedule=w;g.reschedule=x;g.rescheduleNow=f;g.deactivate=y;g.getScheduledTime=z;g.registerTask=A}),98);
__d("WAVerifyChainCertificateWA6",["WACert.pb","WACryptoUtils","WAHex","WALogger","WAResultOrError","WASignalKeys","WASignalOther","WASignalSignatures","decodeProtobuf"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['parseCertificateWA6 certificate is missing "key"']);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(['parseCertificateWA6 certificate is missing "serial"']);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(['parseCertificateWA6 certificate is missing "issuer_serial"']);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(['parseCertificateWA6 certificate is missing "signature"']);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(['parseCertificateWA6 certificate is missing "details"']);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6 leafCert.key does not match handshake server.hello.static"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: leaf certificate is poorly signed"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6 leaf certificate was not issued by RootCA"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: invalid leaf certificate"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifying leaf certificate"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: intermediate certificate is poorly signed"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6 intermediate certificate was not issued by RootCA"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: invalid intermediate certificate"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifying intermediate certificate"]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: missing leaf and/or intermediate certificate"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: extract leaf and intermediate certificate"]);w=function(){return a};return a}b="142375574d0a587166aae71ebe516437c4a28b73e3695c6ce1f7f9545da8ee6b";var x={SERIAL:0,ISSUER:"WhatsAppLongTerm1",PUBLIC_KEY:d("WASignalKeys").serializeIdentity(new Uint8Array(d("WAHex").parseHex(b)))};function a(a,b){d("WALogger").LOG(w());a=d("decodeProtobuf").decodeProtobuf(d("WACert.pb").CertChainSpec,a);var c=a.intermediate;a=a.leaf;if(c==null||a==null){d("WALogger").ERROR(v());return d("WAResultOrError").makeError("missing-certificate")}d("WALogger").LOG(u());c=y(c);if(!c.success){d("WALogger").ERROR(t());return d("WAResultOrError").makeError("invalid-certificate")}if(c.value.issuerSerial!==x.SERIAL){d("WALogger").ERROR(s());return d("WAResultOrError").makeError("invalid-certificate")}if(!z(c.value,x.PUBLIC_KEY)){d("WALogger").ERROR(r());return d("WAResultOrError").makeError("invalid-certificate")}d("WALogger").LOG(q());a=y(a);if(!a.success){d("WALogger").ERROR(p());return d("WAResultOrError").makeError("invalid-certificate")}if(a.value.issuerSerial!==c.value.serial){d("WALogger").ERROR(o());return d("WAResultOrError").makeError("invalid-certificate")}var e=d("WASignalKeys").serializeIdentity(new Uint8Array(c.value.key));if(!z(a.value,e)){d("WALogger").ERROR(n());return d("WAResultOrError").makeError("invalid-certificate")}if(!d("WACryptoUtils").arrayBuffersEqual(a.value.key,b)){d("WALogger").ERROR(m());return d("WAResultOrError").makeError("invalid-certificate")}return d("WAResultOrError").makeResult({leaf:a.value,intermediate:c.value})}function y(a){var b=a.details;a=a.signature;if(!b){d("WALogger").ERROR(l());return d("WAResultOrError").makeError("invalid-certificate")}if(!a){d("WALogger").ERROR(k());return d("WAResultOrError").makeError("invalid-certificate")}var c=d("decodeProtobuf").decodeProtobuf(d("WACert.pb").CertChain$NoiseCertificate$DetailsSpec,b),e=c.issuerSerial,f=c.serial,g=c.key,m=c.notAfter;c=c.notBefore;if(e==null){d("WALogger").ERROR(j());return d("WAResultOrError").makeError("invalid-certificate")}if(f==null){d("WALogger").ERROR(i());return d("WAResultOrError").makeError("invalid-certificate")}if(g==null){d("WALogger").ERROR(h());return d("WAResultOrError").makeError("invalid-certificate")}a=d("WASignalOther").ensureSize(new Uint8Array(a),64);return d("WAResultOrError").makeResult({serial:f,issuerSerial:e,key:g,notBefore:c,notAfter:m,details:b,signature:a})}function z(a,b){return d("WASignalSignatures").verifyMsgSignalVariant(b,new Uint8Array(a.details),a.signature)}g.ROOT_CA=x;g.verifyChainCertificateWA6=a;g.parseCertificateWA6=y}),98);
__d("WAWebABPropsUpdateFromStorage",["WALogger","WAWebABPropsCache","WAWebABPropsConfigs","WAWebApiAbPropConfig","WAWebUserPrefsGeneral","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[abprops] Failed to update ABProps configs cache from storage: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[abprops] ABProp (code: ",") exists in storage but no longer available for this client version"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[abprops][dev] Web Beta joined, using NON-DEBUG default AB prop values (to simulate intern env)"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[abprops][intern] Web Beta joined, using DEBUG default AB prop values"]);k=function(){return a};return a}function a(){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var a=!1,b=a;if(!c("gkx")("26258")){var e=(yield d("WAWebUserPrefsGeneral").getWhatsAppWebExternalBetaJoinedIdb());c("gkx")("26259")&&e?(d("WALogger").LOG(k()),b=!0):a&&e&&(d("WALogger").LOG(j()),b=!1)}a=(yield d("WAWebApiAbPropConfig").getABPropConfigs());e=a.map(function(a){var e=d("WAWebABPropsCache").getABPropConfigNameFromCode(Number(a.configCode));if(e==null)d("WALogger").WARN(i(),a.configCode);else{e=d("WAWebABPropsConfigs").ABPropConfigs[e];var f=e[0],g=e[1],h=e[2];e=e[3];e=b?e:h;h=d("WAWebApiAbPropConfig").parseConfigValue(a.configValue,g,e);var j;!c("gkx")("26258")&&a.overriddenConfigValue!=null&&(j=d("WAWebApiAbPropConfig").parseConfigValue(a.overriddenConfigValue,g,e));return{configCode:f,configValue:h,configExpoKey:a.configExpoKey,hasAccessed:a.hasAccessed,overriddenConfigValue:j}}}).filter(function(a){return!!a});d("WAWebABPropsCache").bulkCreateOrReplaceABPropConfigs(e)}catch(a){d("WALogger").ERROR(h(),a).verbose().sendLogs("[abprops] Failed to update ABProps configs cache from storage: "+a)}});return l.apply(this,arguments)}g.updateABPropsFromStorage=a}),98);
__d("WAWebABPropsWamGlobals",["WAWebABProps","WAWebWamGlobals"],(function(a,b,c,d,e,f,g){function a(){d("WAWebWamGlobals").Global.set({serviceImprovementOptOut:d("WAWebABProps").getABPropConfigValue("service_improvement_opt_out_flag")})}g.setAbPropDependingGlobalWamAttributes=a}),98);
__d("WAWebAbPropsParsingJob",["WAWebABPropsConfigs"],(function(a,b,c,d,e,f,g){function a(a){var b=new Map();a.forEach(function(a){var c=a.configCode,d=a.configValue;a=a.configExpoKey;b.set(c,{configValue:d,configExpoKey:a})});var c=new Map();Object.keys(d("WAWebABPropsConfigs").ABPropConfigs).map(function(a){a=d("WAWebABPropsConfigs").ABPropConfigs[a][0];var e=b.get(a),f=e==null?void 0:e.configValue;e=e==null?void 0:e.configExpoKey;c.set(a,{configValue:f,configExpoKey:e==null?null:e.toString()})});return c}g.parseABProps=a}),98);
__d("WAWebApiAbPropEventSamplingConfig",["Promise","WAWebModelStorageInitialize","WAWebModelStorageUtils","WAWebSchemaAbPropEventSamplingConfig"],(function(a,b,c,d,e,f,g){var h;function a(){return d("WAWebModelStorageInitialize").initializeWithoutGKs().then(function(){return d("WAWebSchemaAbPropEventSamplingConfig").getAbpropEventSamplingConfigsTable().all().then(function(a){return a})})}function c(a){return d("WAWebModelStorageInitialize").initializeWithoutGKs().then(function(){return d("WAWebSchemaAbPropEventSamplingConfig").getAbpropEventSamplingConfigsTable().get(a).then(function(a){return a==null?void 0:a.samplingWeight})})}function e(a){if(a==null||a.length===0)return(h||(h=b("Promise"))).resolve(!1);var c=[];a.forEach(function(a){c.push({eventCode:a.eventCode,samplingWeight:a.samplingWeight})});return d("WAWebModelStorageUtils").getStorage().lock(["abprop-event-sampling-configs"],function(a){var b=a[0];return b.clear().then(function(){return b.bulkCreate(c).then(function(){return!0})})})}g.getEventSamplingConfigs=a;g.getEventSamplingWeight=c;g.updateEventSamplingConfigs=e}),98);
__d("WAWebEncryptedRid",["WABase64","WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsMultiDevice"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set("WAWebEncryptedRid",d("WABase64").encodeB64(a))}function b(){return!d("WAWebUserPrefsMultiDevice").isRegistered()?null:d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get("WAWebEncryptedRid")}g.setEncryptedRid=a;g.getEncryptedRid=b}),98);
__d("WAWebEventSamplingCache",["WAWebApiAbPropEventSamplingConfig","WAWebEventSampling","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=!1;function j(a){return!i?null:h.get(a)}function a(){d("WAWebEventSampling").setGetEventSamplingConfigValueImpl(j)}function c(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebApiAbPropEventSamplingConfig").getEventSamplingConfigs());a.forEach(function(a){h.set(a.eventCode,a.samplingWeight)});i=!0});return k.apply(this,arguments)}g.initializeEventSamplingCache=a;g.updateEventSamplingFromStorage=c}),98);
__d("WAWebSyncOnABProps",["WALogger","WAWebABProps","WAWebABPropsWamGlobals","WAWebProtobufsE2E.pb","WAWebSendNonMessageDataRequest","WAWebUserPrefsAppStateSync","WAWebUserPrefsCTWA","WAWebUserPrefsTypes","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Recent Stickers: request peer message for recent sticker bootstrap."]);h=function(){return a};return a}function a(a){a!==d("WAWebABProps").getABPropConfigValue("service_improvement_opt_out_flag")&&d("WAWebABPropsWamGlobals").setAbPropDependingGlobalWamAttributes()}function c(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(d("WAWebABProps").getABPropConfigValue("recent_sticker_rollout_phase")<3)return;var a=(yield d("WAWebUserPrefsAppStateSync").getNonCriticalDataSyncStatus());(a==null?void 0:a[d("WAWebUserPrefsTypes").NonCriticalDataSyncStatusType.RECENT_STICKER_INITIALIZED])===d("WAWebUserPrefsTypes").RecentStickerInitializedStatusType.NEED_REQUEST_BOOTSTRAP&&(d("WALogger").LOG(h()),yield d("WAWebSendNonMessageDataRequest").sendPeerDataOperationRequest(d("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.SEND_RECENT_STICKER_BOOTSTRAP,{}))});return i.apply(this,arguments)}function e(a){var b=d("WAWebABProps").getABPropConfigValue("ctwa_ad_account_token_storage_kill_switch_web");b===!0&&a===!1&&d("WAWebUserPrefsCTWA").clearAdAccountToken()}g.handleServiceImprovementOptOutFlagABPropConfigValueChange=a;g.ensureNonCriticalDataSyncIsInitialized=c;g.handleAdAccountTokenStorageKillSwitchABPropConfigValueChange=e}),98);
__d("WAWebAbPropsSyncJob",["Promise","WAGetAbPropsProtocol","WALogger","WAPromiseDelays","WAWebABProps","WAWebABPropsGlobals","WAWebABPropsLocalStorage","WAWebABPropsUpdateFromStorage","WAWebAbPropsParsingJob","WAWebApiAbPropConfig","WAWebApiAbPropEventSamplingConfig","WAWebCmd","WAWebEncryptedRid","WAWebEventSamplingCache","WAWebSyncOnABProps","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["failed to sync ABProps"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["update ABProps config table failed"]);j=function(){return a};return a}d("WAWebCmd").Cmd.on("on_ab_props_update",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.service_improvement_opt_out_flag;a=a.ctwa_ad_account_token_storage_kill_switch_web;yield d("WAWebSyncOnABProps").ensureNonCriticalDataSyncIsInitialized();d("WAWebSyncOnABProps").handleServiceImprovementOptOutFlagABPropConfigValueChange(b);d("WAWebSyncOnABProps").handleAdAccountTokenStorageKillSwitchABPropConfigValueChange(a)});return function(b){return a.apply(this,arguments)}}());function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c;a===void 0&&(a=!0);var e;a&&(e=d("WAWebABPropsLocalStorage").getHash());a=(yield d("WAGetAbPropsProtocol").getAbPropsProtocol(e));if(!a.success)return!1;a=a.value;var f=a.abKey,g=a.hash,i=a.refresh,k=a.refreshId,l=a.props,m=a.samplingConfigs;a=a.erid;a=a==null?(h||(h=b("Promise"))).resolve():d("WAWebEncryptedRid").setEncryptedRid(a);var n=Date.now();d("WAWebABPropsGlobals").updateGlobalABKey((c=f)!=null?c:"");d("WAWebABPropsLocalStorage").updateAttributesLocalStorage(f,e,i,n);k!=null&&d("WAWebABPropsLocalStorage").setRefreshId(k);if(g==null)return!1;try{yield (h||(h=b("Promise"))).all([d("WAWebApiAbPropEventSamplingConfig").updateEventSamplingConfigs(m),d("WAWebApiAbPropConfig").updateABPropConfigs(d("WAWebAbPropsParsingJob").parseABProps(l)),a]);return!0}catch(a){d("WALogger").ERROR(j()).verbose().devConsole(a).sendLogs("update ABProps config table failed when syncing ABProps")}return!1});return l.apply(this,arguments)}function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=!0);var c=d("WAWebABPropsLocalStorage").isABPropsAfterFirstSync(),e=3;while(e-->0)try{var f={service_improvement_opt_out_flag:d("WAWebABProps").getABPropConfigValue("service_improvement_opt_out_flag"),ctwa_ad_account_token_storage_kill_switch_web:d("WAWebABProps").getABPropConfigValue("ctwa_ad_account_token_storage_kill_switch_web")},g=(yield k(c&&a));if(g){yield (h||(h=b("Promise"))).all([d("WAWebABPropsUpdateFromStorage").updateABPropsFromStorage(),d("WAWebEventSamplingCache").updateEventSamplingFromStorage()]);d("WAWebCmd").Cmd.onAbPropsUpdate(f);return}}catch(a){e===0&&d("WALogger").ERROR(i()).verbose().devConsole(a).sendLogs("failed to sync ABProps"),yield d("WAPromiseDelays").delayMs(10*1e3*Math.random())}});return m.apply(this,arguments)}g.syncABProps=k;g.syncABPropsTask=a}),98);
__d("WAWebAltDeviceLinkingBase32Encode",[],(function(a,b,c,d,e,f){var g="123456789ABCDEFGHJKLMNPQRSTVWXYZ";function a(a){a=new DataView(a.buffer,a.byteOffset,a.byteLength);var b=0,c=0,d="";for(var e=0;e<a.byteLength;e++){c=c<<8|a.getUint8(e);b+=8;while(b>=5)d+=g[c>>>b-5&31],b-=5}b>0&&(d+=g[c<<5-b&31]);return d}f.bytesToCrockford=a}),66);
__d("WAWebAltDeviceLinkingAlgorithm",["WAArrayBufferUtils","WABinary","WAByteArray","WACryptoHkdf","WALogger","WAWebAltDeviceLinkingApi","WAWebAltDeviceLinkingBase32Encode","WAWebCryptoCurve25519","WAWebSignalStoreApi","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["alt pairing: encrypt key bundle"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["alt pairing: decrypt primary hello"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["alt pairing: encrypt companion hello"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["alt pairing: create adv secret material"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["alt pairing: generate random code"]);l=function(){return a};return a}function m(){d("WALogger").LOG(l());var a=new Uint8Array(5);self.crypto.getRandomValues(a);return d("WAWebAltDeviceLinkingBase32Encode").bytesToCrockford(a)}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{return yield a()}catch(c){(a=d("WAWebAltDeviceLinkingApi").getCurrentMarker())==null?void 0:a.addPoint(b);throw c}});return o.apply(this,arguments)}function p(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c===void 0&&(c=!1);b=new(d("WABinary").Binary)(b);b=(yield self.crypto.subtle.deriveKey({name:"PBKDF2",hash:"SHA-256",salt:b.readBuffer(),iterations:2<<16},a,{name:"AES-CTR",length:256},c,["encrypt","decrypt"]));return b});return q.apply(this,arguments)}function r(a,b,c){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){d("WALogger").LOG(j());b={name:"AES-CTR",length:64,counter:b};b=(yield self.crypto.subtle.encrypt(b,c,a));return b});return s.apply(this,arguments)}function t(a,b,c){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){d("WALogger").LOG(i());var e={name:"AES-CTR",length:64,counter:b};b=(yield n(function(){return self.crypto.subtle.decrypt(e,c,a)},"fail decrypt primary ephemeral pub"));return b});return u.apply(this,arguments)}function a(){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=m(),b=d("WAWebCryptoCurve25519").keyPair(),c=new Uint8Array(32);self.crypto.getRandomValues(c);var e=new Uint8Array(16);self.crypto.getRandomValues(e);b=(yield w(a,b,c,e));return babelHelpers["extends"]({},b,{linkCodePairingSecret:a})});return v.apply(this,arguments)}function w(a,b,c,d){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){a=(yield self.crypto.subtle.importKey("raw",new TextEncoder().encode(a),{name:"PBKDF2"},!1,["deriveKey"]));var f=(yield p(a,c)),g=(yield n(function(){return r(b.pubKey,e,f)},"fail encrypt companion hello")),h=new(d("WABinary").Binary)();h.writeByteArray(c);h.writeByteArray(e);h.writeByteArray(new Uint8Array(g));c=h.readBuffer();return{linkCodePairingWrappedCompanionEphemeralPub:c,linkCodeKey:a,linkCodePairingCompanionADVEphemeralKeyPair:b}});return x.apply(this,arguments)}function y(a,b){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("WACryptoHkdf").extractWithSaltAndExpand(a,b,"link_code_pairing_key_bundle_encryption_key",32));return a});return z.apply(this,arguments)}function A(a,b,c){return d("WAArrayBufferUtils").concatBuffers([a,b,d("WAByteArray").uint8ArrayToBuffer(c)])}function B(a,b,c){return C.apply(this,arguments)}function C(){C=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){d("WALogger").LOG(h());var e=(yield self.crypto.subtle.importKey("raw",a,{name:"AES-GCM"},!1,["encrypt"])),f={name:"AES-GCM",iv:b};a=(yield n(function(){return self.crypto.subtle.encrypt(f,e,c)},"fail encrypt wrapped key bundle"));return a});return C.apply(this,arguments)}function e(a,b,c){d("WALogger").LOG(k());a=d("WAArrayBufferUtils").concatBuffers([a,b,d("WAByteArray").uint8ArrayToBuffer(c)]);return a}function f(a){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WACryptoHkdf").extractWithSaltAndExpand(a,null,"adv_secret",32));return a});return D.apply(this,arguments)}function E(a,b,c,d){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){var g=(yield d("WAWebSignalStoreApi").waSignalStore.getRegistrationInfo());if(g==null)throw c("err")("alt pairing: Did not find registration info");var h=new Uint8Array(32);self.crypto.getRandomValues(h);var i=new Uint8Array(32);self.crypto.getRandomValues(i);var j=new Uint8Array(12);self.crypto.getRandomValues(j);return G(a,b,e,f,g.identityKeyPair.pubKey,g.identityKeyPair.privKey,h,i,j)});return F.apply(this,arguments)}function G(a,b,c,d,e,f,g,h,i){return H.apply(this,arguments)}function H(){H=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h,i,j,k){a=new(d("WABinary").Binary)(a);var l=a.readByteArray(32),m=a.readByteArray(16),o=a.readByteArray(),q=(yield p(e,l)),r=(yield n(function(){return t(o,m,q)},"fail decrypt primary ephemeral pub"));if(r.byteLength===0)throw c("err")("alt pairing: linkCodePairingDecryptedPrimaryEphemeralPub is an empty buffer");a=(yield n(function(){return d("WAWebCryptoCurve25519").sharedSecret(r,f.privKey)},"fail generate ephemeral shared secret"));e=(yield y(a,j));l=A(g,b,i);e=(yield B(e,k,l));l=new(d("WABinary").Binary)();l.writeByteArray(j);l.writeByteArray(k);l.writeBuffer(e);j=(yield n(function(){return d("WAWebCryptoCurve25519").sharedSecret(b,h)},"fail generate identity shared secret"));k=d("WAArrayBufferUtils").concatBuffers([a,j,d("WAByteArray").uint8ArrayToBuffer(i)]);e=(yield d("WACryptoHkdf").extractWithSaltAndExpand(k,null,"adv_secret",32));a=l.readBuffer();return{companionIdentityPublic:g,linkCodePairingWrappedKeyBundle:a,advSecret:e}});return H.apply(this,arguments)}g.generateRandomCode=m;g.deriveKey=p;g.encryptCompanionHello=r;g.decryptPrimaryHello=t;g.companionHello=a;g.companionHelloInternal=w;g.getBundleEncryptionKey=y;g.getKeyBundle=A;g.encryptKeyBundle=B;g.createAdvSecretMaterial=e;g.createAdvSecret=f;g.companionFinish=E;g.companionFinishInternal=G}),98);
__d("WAWebCompanionRegClientUtils",["$InternalEnum","WAWebMiscBrowserUtils"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum")({UNKNOWN:0,CHROME:1,EDGE:2,FIREFOX:3,IE:4,OPERA:5,SAFARI:6,ELECTRON:7,UWP:8,OTHER_WEB_CLIENT:9});d=String(a());function a(){var a=c("WAWebMiscBrowserUtils").info().name;if(!a)return h.UNKNOWN;switch(a){case"Chrome":return h.CHROME;case"Firefox":return h.FIREFOX;case"IE":return h.IE;case"Opera":return h.OPERA;case"Safari":return h.SAFARI;case"Edge":return h.EDGE;default:return h.OTHER_WEB_CLIENT}}g.DEVICE_PLATFORM=d}),98);
__d("WAWebAltDeviceLinkingIq",["WASmaxMdCompanionFinishRPC","WASmaxMdCompanionHelloRPC","WAWebCompanionRegClientUtils","WAWebMiscBrowserUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.name="CompanionHelloError";a.type=c;return a}return a}(babelHelpers.wrapNativeSuper(Error)),i=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="CompanionFinishError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error));function a(a,b,c,d){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){a=(yield d("WASmaxMdCompanionHelloRPC").sendCompanionHelloRPC({linkCodePairingNonceArgs:{linkCodePairingNonceElementValue:new Uint8Array(1)},linkCodeCompanionRegJid:a,linkCodePairingWrappedCompanionEphemeralPubElementValue:new Uint8Array(b),companionServerAuthKeyPubElementValue:new Uint8Array(e),companionPlatformIdElementValue:d("WAWebCompanionRegClientUtils").DEVICE_PLATFORM,companionPlatformDisplayElementValue:c("WAWebMiscBrowserUtils").info().name+" ("+c("WAWebMiscBrowserUtils").info().os+")",linkCodeCompanionRegShouldShowPushNotification:f?"true":"false"}));if(a.name==="CompanionHelloResponseNotifyCompanion")return a.value.linkCodeCompanionRegLinkCodePairingRefElementValue;else if(a.name==="CompanionHelloResponseError")throw new h("alt pairing: Got an error from alt paring: companion hello: "+a.value.errorIqMixinErrors.name,a.value.errorIqMixinErrors);throw new h("alt pairing: Got an unknown error from alt paring: companion hello")});return j.apply(this,arguments)}function e(a,b,c,d){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){e=(yield d("WASmaxMdCompanionFinishRPC").sendCompanionFinishRPC({linkCodeCompanionRegJid:e,linkCodePairingWrappedKeyBundleElementValue:new Uint8Array(a),companionIdentityPublicElementValue:new Uint8Array(b),linkCodePairingRefElementValue:c}));if(e.name==="CompanionFinishResponseSuccess")return;throw new i("alt pairing: Got an error from alt paring: companion finish")});return k.apply(this,arguments)}g.CompanionHelloError=h;g.CompanionFinishError=i;g.sendCompanionHello=a;g.sendCompanionFinish=e}),98);
__d("WAWebAltDeviceLinkingApi",["invariant","$InternalEnum","Promise","WABase64","WAByteArray","WACryptoUtils","WAJids","WALogger","WAQplTypes","WATimeUtils","WAWebAdvSignatureApi","WAWebAltDeviceLinkingAlgorithm","WAWebAltDeviceLinkingIq","WAWebBackendApi","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebUserPrefsInfoStore","WAWebUserPrefsMultiDevice","asyncToGeneratorRuntime","err","gkx"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["alt pairing: sent companion finish to server"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["alt pairing: completed companion finish local algorithm"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["alt pairing: cached companion hello ref: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["alt pairing: handling primary hello"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["alt pairing: companion hello ref received: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["alt pairing: sent companion hello"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["alt pairing: completed companion hello generation"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["alt pairing: start linking flow"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["alt pairing: initialize QR linking"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["alt pairing: initialize alt linking"]);s=function(){return a};return a}var t=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="MissingCachedRefError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error)),u=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="NoiseInfoIsNullError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error)),v=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="InvalidRefError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error)),w=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="OldCodeError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error)),x=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="MaxPrimaryHelloError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error)),y=b("$InternalEnum").Mirrored(["QR_CODE","ALT_DEVICE_LINKING"]),z=b("$InternalEnum").Mirrored(["NotStarted","Initialized","AfterSendCompanionHello","AfterSendCompanionFinish"]),A=function(){function a(){this.clear()}var b=a.prototype;b.clear=function(){this.helloCached=null,this.ref=null,this.phone=null,this.stage=z.NotStarted,this.codeGenerationTs=null,this.primaryHelloAttemptCount=0,this.marker!=null&&(this.marker.end(d("WAQplTypes").QuickLogActionType.ABORTED),this.marker=null)};return a}(),B=180,C=3,D=new A(),E=y.QR_CODE;function F(){return E}function G(a){E=a}function a(){return D.ref}function H(){return D.marker}function e(){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WALogger").LOG(s()),D.clear(),D.marker=d("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.ALTERNATIVE_DEVICE_LINKING),yield d("WAWebUserPrefsMultiDevice").setADVSecretKey(),D.stage=z.Initialized,G(y.ALT_DEVICE_LINKING)});return I.apply(this,arguments)}function f(){return J.apply(this,arguments)}function J(){J=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WALogger").LOG(r());if(F()===y.ALT_DEVICE_LINKING){var a;(a=H())==null?void 0:a.addPoint("switch_to_qr")}D.clear();yield d("WAWebAdvSignatureApi").generateADVSecretKey();D.stage=z.NotStarted;G(y.QR_CODE)});return J.apply(this,arguments)}function K(a,b){return L.apply(this,arguments)}function L(){L=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){d("WALogger").LOG(q());var c=(yield d("WAWebUserPrefsInfoStore").waNoiseInfo.get());if(c==null)throw new u("alt pairing: noise info is null");D.phone=a;D.codeGenerationTs=d("WATimeUtils").unixTime();return M(D,c,b)});return L.apply(this,arguments)}function M(a,b,c){return N.apply(this,arguments)}function N(){N=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f;if(!c("gkx")("26258")){var g;(g=D.marker)==null?void 0:g.annotate({string:{phone:a.phone}})}a.stage===z.Initialized||h(0,75727,a.stage);(g=D.marker)==null?void 0:g.addPoint("generate_code_start");g=(yield d("WAWebAltDeviceLinkingAlgorithm").companionHello());a.helloCached=g;(f=D.marker)==null?void 0:f.addPoint("generate_code_end");d("WALogger").LOG(p());(f=D.marker)==null?void 0:f.addPoint("send_companion_hello_start");a.phone!=null||h(0,67482);a.ref=(yield d("WAWebAltDeviceLinkingIq").sendCompanionHello(d("WAJids").toPhoneUserJid(a.phone),g.linkCodePairingWrappedCompanionEphemeralPub,b.staticKeyPair.pubKey,e));(f=D.marker)==null?void 0:f.addPoint("send_companion_hello_end");d("WALogger").LOG(o());if(a.ref==null)throw new t("alt pairing:could not get ref from companion hello");c("gkx")("26258")||d("WALogger").LOG(n(),a.ref);a.stage=z.AfterSendCompanionHello;return g.linkCodePairingSecret});return N.apply(this,arguments)}function O(a){return P.apply(this,arguments)}function P(){P=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").LOG(m());d("WAWebBackendApi").frontendFireAndForget("primaryHelloReceivedAltLinking",{});try{return yield S(a,D,d("WATimeUtils").unixTime())}catch(a){d("WAWebBackendApi").frontendFireAndForget("errorAltLinking",{});return(i||(i=b("Promise"))).reject(a)}});return P.apply(this,arguments)}function Q(a){return R.apply(this,arguments)}function R(){R=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebAdvSignatureApi").generateADVSecretKey(),a.stage=z.AfterSendCompanionHello});return R.apply(this,arguments)}function S(a,b,c){return T.apply(this,arguments)}function T(){T=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f;(f=D.marker)==null?void 0:f.addPoint("handle_primary_hello_start");b.primaryHelloAttemptCount++;if(b.stage===z.AfterSendCompanionFinish)if(b.primaryHelloAttemptCount<=C)yield Q(b);else throw new x("alt pairing: reached max allowed primary hello attempts per code");b.stage===z.AfterSendCompanionHello||h(0,75728,b.stage);c("gkx")("26258")||d("WALogger").LOG(l(),b.ref);if(b.ref==null)throw new t("alt pairing:could not get ref from companion hello");if(!d("WACryptoUtils").uint8ArraysEqual(b.ref,a.linkCodeCompanionRegLinkCodePairingRefElementValue))throw new v("alt pairing: handle primary hello: received unexpected ref");if(b.helloCached==null)throw c("err")("alt pairing: cannot find cached hello data");if(b.codeGenerationTs==null)throw c("err")("alt pairing: cannot find codeGenerationTs");if(e-b.codeGenerationTs>B)throw new w("alt pairing: cannot process primaryHello for an old code");f=b.helloCached;e=(yield d("WAWebAltDeviceLinkingAlgorithm").companionFinish(d("WAByteArray").uint8ArrayToBuffer(a.linkCodeCompanionRegLinkCodePairingWrappedPrimaryEphemeralPubElementValue),d("WAByteArray").uint8ArrayToBuffer(a.linkCodeCompanionRegPrimaryIdentityPubElementValue),f.linkCodeKey,f.linkCodePairingCompanionADVEphemeralKeyPair));d("WALogger").LOG(k());yield d("WAWebUserPrefsMultiDevice").setADVSecretKey(d("WABase64").encodeB64(e.advSecret));a=b.ref;if(a==null)throw new t("alt pairing: cannot find cached ref");f=b.phone;if(f==null)throw new t("alt pairing: phone is empty");yield d("WAWebAltDeviceLinkingIq").sendCompanionFinish(e.linkCodePairingWrappedKeyBundle,e.companionIdentityPublic,a,d("WAJids").toPhoneUserJid(f));d("WALogger").LOG(j());b.stage=z.AfterSendCompanionFinish;(e=D.marker)==null?void 0:e.addPoint("handle_primary_hello_end")});return T.apply(this,arguments)}g.MissingCachedRefError=t;g.NoiseInfoIsNullError=u;g.InvalidRefError=v;g.OldCodeError=w;g.MaxPrimaryHelloError=x;g.PairingType=y;g.AltPairingStage=z;g.PairingState=A;g.getPairingType=F;g.setPairingType=G;g.getCurrentRef=a;g.getCurrentMarker=H;g.initializeAltDeviceLinking=e;g.initializeQRLinking=f;g.startAltLinkingFlow=K;g.handlePrimaryHello=O;g.handlePrimaryHelloInternal=S}),98);
__d("WAWebApiPrivacyDisallowedList",["WALogger","WAWebSchemaPrivacyDisallowedList","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["privacy_settings_drawer: get all privacy disallowed lists failed"]);h=function(){return a};return a}function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var a=(yield d("WAWebSchemaPrivacyDisallowedList").getPrivacyDisallowedListTable().all());return j(a)}catch(a){d("WALogger").ERROR(h()).verbose().devConsole(a).sendLogs("privacy_settings_drawer: get all privacy disallowed lists failed");return{about:null,groupadd:null,last:null,profile:null}}});return i.apply(this,arguments)}function j(a){var b={about:null,groupadd:null,last:null,profile:null};a.forEach(function(a){switch(a.id){case d("WAWebSchemaPrivacyDisallowedList").PrivacyDisallowedListType.About:b.about=a;return;case d("WAWebSchemaPrivacyDisallowedList").PrivacyDisallowedListType.GroupAdd:b.groupadd=a;return;case d("WAWebSchemaPrivacyDisallowedList").PrivacyDisallowedListType.LastSeen:b.last=a;return;case d("WAWebSchemaPrivacyDisallowedList").PrivacyDisallowedListType.ProfilePicture:b.profile=a;return}});return b}g.queryDisallowedLists=a;g.disallowedRowsToLists=j}),98);
__d("WAWebApiPrivacyEphemerality",["WALogger","WAWebABProps","WAWebSchemaChat","WAWebSchemaGroupMetadata","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["ephemerality_daily_logs: retrieving current ephemerality information failed"]);h=function(){return a};return a}function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var a=(yield d("WAWebSchemaChat").getChatTable().greaterThan(["ephemeralDuration"],0,{shouldDecrypt:!1})),b=a.length;a=a.filter(function(a){return a.disappearingModeInitiatedByMe===!0}).length;var c=(yield d("WAWebSchemaGroupMetadata").getGroupMetadataTable().greaterThan(["ephemeralDuration"],0));c=d("WAWebABProps").getABPropConfigValue("dm_initiator_trigger_groups")?c.filter(function(a){return a.disappearingModeInitiatedByMe===!0}).length:0;a=a+c;return{isEphemeralMessagingUser:a>0,countEphemeralThreadsEnabledByMe:a,countEphemeralThreads:b}}catch(a){d("WALogger").ERROR(h()).verbose().devConsole(a).sendLogs("ephemerality_daily_logs: retrieving current ephemerality information failed");return{isEphemeralMessagingUser:null,countEphemeralThreadsEnabledByMe:null,countEphemeralThreads:null}}});return i.apply(this,arguments)}g.queryEphemeralityDailyLogInfo=a}),98);
__d("WAWebApiTextStatus",["Promise","WATimeUtils","WAWebLidAwareContactsDB","WAWebModelStorageUtils","WAWebTextStatusGatingUtils","WAWebTextStatusUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(){var a=d("WATimeUtils").unixTime();return!d("WAWebTextStatusGatingUtils").receiveTextStatusEnabled()?(h||(h=b("Promise"))).resolve():d("WAWebModelStorageUtils").getStorage().lock(["contact"],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield c("WAWebLidAwareContactsDB").lessThan(["textStatusExpiryTs"],a));if(!b||b.length===0)return;b=b.map(function(a){return{id:a.id,textStatusString:void 0,textStatusEmoji:void 0,textStatusExpiryTs:void 0,textStatusEphemeralDuration:void 0,textStatusLastUpdateTime:d("WAWebTextStatusUtils").CLEAR_TEXT_STATUS_LAST_UPDATE_TIME_VAL}});return c("WAWebLidAwareContactsDB").bulkCreateOrMerge(b)}))}g.updateExpiredTextStatusOfContact=a}),98);
__d("WAWebAutoLogoutGating",["WAWebEnvironment","WAWebUA","gkx"],(function(a,b,c,d,e,f,g){function a(){var a=h(),b=c("gkx")("5134");return a&&b}function h(){return c("WAWebEnvironment").isWindows?!1:d("WAWebUA").UA.hasCredentiallessIframeSupport&&!d("WAWebUA").UA.isOculusBroswer}function b(){var a=self.location!==self.parent.location;if(!a)return!1;a=new URLSearchParams(window.location.search);a=a.get("autologout");return a!=="1"?!1:!0}function e(){var a=new URL(window.location.href);a.searchParams.set("autologout","1");return a.toString()}g.isAutoLogoutEnabled=a;g.isRunningInAutoLgoutIframe=b;g.getAutoLogoutIframeUrl=e}),98);
__d("WAWebChatLockDailyWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({ChatLockDaily:[4214,{folderChatsCount:[1,a.TYPES.INTEGER],folderOpenCount:[2,a.TYPES.INTEGER],lockFolderHidden:[5,a.TYPES.BOOLEAN],newAddChatCount:[3,a.TYPES.INTEGER],newRemoveChatCount:[4,a.TYPES.INTEGER],secretCodeActive:[6,a.TYPES.BOOLEAN]},[1,1,1],"regular"]},{ChatLockDaily:[]});g.ChatLockDailyWamEvent=b}),98);
__d("WAWebCleanUtmJob",["WAJobOrchestratorTypes","WAPromiseCallSync","WAWebOrchestratorNonPersistedJob","WAWebUtmBizPrefs","WAWebUtmBizUtils"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("cleanExpiredUtm",function(){return h()},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT}).waitUntilCompleted()}function h(){return d("WAPromiseCallSync").promiseCallSync(function(){var a=d("WAWebUtmBizPrefs").getAllUtmsFromLocalStorage();Object.keys(a).forEach(function(b){var c=a[b];d("WAWebUtmBizUtils").hasUtmExpired(c)&&d("WAWebUtmBizPrefs").removeUtmFromLocalStorage(b)})})}g.cleanExpiredUtmJob=a}),98);
__d("WAWebCommunityHomeActionWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({CommunityHomeAction:[3494,{communityHomeGroupDiscoveries:[1,a.TYPES.INTEGER],communityHomeGroupJoins:[2,a.TYPES.INTEGER],communityHomeGroupNavigations:[3,a.TYPES.INTEGER],communityHomeId:[4,a.TYPES.STRING],communityHomeViews:[5,a.TYPES.INTEGER]},[1,1,1],"regular"]},{CommunityHomeAction:[]});g.CommunityHomeActionWamEvent=b}),98);
__d("WAWebCommunityTabActionWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({CommunityTabAction:[3496,{communityNoActionTabViews:[4,a.TYPES.INTEGER],communityTabGroupNavigations:[1,a.TYPES.INTEGER],communityTabToHomeViews:[2,a.TYPES.INTEGER],communityTabViews:[3,a.TYPES.INTEGER],communityTabViewsViaContextMenu:[5,a.TYPES.INTEGER]},[1,1,1],"regular"]},{CommunityTabAction:[]});g.CommunityTabActionWamEvent=b}),98);
__d("WAWebDeleteStatusAction",["Promise","WALogger","WAWebABProps","WAWebContactGetters","WAWebDBMessageDelete","WAWebStatusCollection","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["clearStatusForNonAddressBook: remove "," status "]);i=function(){return a};return a}function a(){if(!d("WAWebABProps").getABPropConfigValue("disable_status_to_non_sub"))return(h||(h=b("Promise"))).resolve();var a=d("WAWebStatusCollection").StatusCollection.filter(function(a){return!d("WAWebUserPrefsMeUser").isMeAccount(a.contact.id)&&!d("WAWebContactGetters").getIsMyContact(a.contact)&&!d("WAWebContactGetters").getIsPSA(a.contact)});a=a.reduce(function(a,b){a=a.concat(b.msgs.map(function(a){return String(a.id)}));b["delete"]();return a},[]);d("WALogger").LOG(i(),a.length);return d("WAWebDBMessageDelete").removeStatusMessage(a)}g.clearStatusForRemovedContact=a}),98);
__d("WAWebLidContactsGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("allow_lid_contacts_storage")}function b(){return d("WAWebABProps").getABPropConfigValue("allow_share_lid_contacts_vcard")}function c(){return d("WAWebABProps").getABPropConfigValue("allow_lid_contacts_add_to_group")}function e(){return d("WAWebABProps").getABPropConfigValue("allow_lid_contacts_new_1on1_chat")}g.isLidStorageEnabled=a;g.isLidVcardSharingEnabled=b;g.isLidContactAddToGroupEnabled=c;g.isLidContactOneOnOneChatEnabled=e}),98);
__d("WAWebSyncContactsJob",["WALogger","WANullthrows","WAShiftTimer","WAWebContactSyncApi","WAWebLidAwareContactsDB","WAWebLocalStorage","WAWebUserPrefsAppStateSync","WAWebUserPrefsKeys","WAWebUserPrefsMultiDevice","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["sync dirty contacts, found "," contacts to sync"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncNewContact: contact sync failed, error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["start new contact sync for "," contacts"]);j=function(){return a};return a}var k=86400,l=2e4,m=1e3,n=60,o=null,p=[];function a(a){p.push(a),!o?(o=new(d("WAShiftTimer").ShiftTimer)(function(){if(!d("WAWebUserPrefsMultiDevice").isRegistered())return;var a=p;p=[];o=null;d("WALogger").LOG(j(),a.length).tags("contact-sync");d("WAWebContactSyncApi").syncContactListInChunks({contactIds:a,shouldDelayBetweenChunks:!0,mode:"query"})["catch"](function(a){d("WALogger").ERROR(i(),a).verbose().tags("non-sad","contact-sync").sendLogs("syncNewContact: contact sync failed")})}),o.onOrBefore(l)):o.debounce(m)}function q(){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield c("WAWebLidAwareContactsDB").equals(["isContactSyncCompleted"],0));a=a.map(function(a){return d("WAWebWidFactory").createWid(a.id)});d("WALogger").LOG(h(),a.length).tags("contact-sync");return d("WAWebContactSyncApi").syncContactListInChunks({contactIds:a,shouldDelayBetweenChunks:!0,mode:"query"})});return r.apply(this,arguments)}function e(){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){(yield d("WAWebUserPrefsMultiDevice").getShouldCheckContactSyncStatus())&&self.setTimeout(function(){q()},n*1e3),yield d("WAWebUserPrefsAppStateSync").setShouldCheckContactSyncStatus()});return s.apply(this,arguments)}function f(){var a;a=(a=c("WANullthrows")(c("WAWebLocalStorage")).getItem(d("WAWebUserPrefsKeys").KEYS.CONTACT_SYNC_REFRESH))!=null?a:k;return parseInt(a,10)}g.syncNewContact=a;g.runSyncDirtyContactsJob=e;g.getContactSyncRefreshSeconds=f}),98);
__d("WAWebContactSync",["Promise","WABaseGlobals","WAJids","WALogger","WAServerSync.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WASyncdOrphan","WATimeUtils","WAWebApiContact","WAWebBotGating","WAWebContactCollection","WAWebContactShortName","WAWebDBCreateLidPnMappings","WAWebDeleteStatusAction","WAWebLidContactsGatingUtils","WAWebSyncContactsJob","WAWebSyncdActionUtils","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: added "," contacts, removed "," contacts"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: handler done"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: handler after save"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: before pn job"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: handler after loop"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["contact sync: operation not supported"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["contact sync: malformed mutation"]);o=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 2};e.getAction=function(){return d("WASyncdConst").Actions.Contact};e.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){e===void 0&&(e=!1);var f=[],g=[],p=[],q=d("WAWebLidContactsGatingUtils").isLidStorageEnabled();c=(yield (h||(h=b("Promise"))).all(a.map(function(a){try{var b=a.indexParts;b=b[1];b||d("WAWebSyncdActionUtils").throwInvalidActionIndex();var c=d("WAWebWidFactory").createUserWid(b);if(a.operation==="set"){var e=a.value.contactAction;if(!e){d("WALogger").WARN(o());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}if(c.isUser()&&c.isLid()&&!q)return{actionState:d("WASyncdConst").SyncActionState.Skipped};b={id:b,name:e.fullName||"",shortName:e.firstName||((b=d("WAWebContactShortName").getShortName(e.fullName))!=null?b:""),type:"in",syncToAddressbook:e.saveOnPrimaryAddressbook,isAddressBookContact:1,isContactSyncCompleted:0};if(c.isUser()&&!c.isLid()&&e.lidJid!=null){e=d("WAWebWidFactory").createUserWid(e.lidJid,"lid");p.push({lid:e,pn:d("WAWebWidFactory").toUserWid(c)})}f.push(b);d("WAWebContactCollection").ContactCollection.add(babelHelpers["extends"]({},b,{id:c}),{merge:!0});d("WAWebSyncContactsJob").syncNewContact(c);return{actionState:d("WASyncdConst").SyncActionState.Success}}if(a.operation==="remove"){if(c.isUser()&&c.isLid()&&!q)return{actionState:d("WASyncdConst").SyncActionState.Skipped};if(d("WAWebBotGating").isBotReceiveEnabled()&&c.isBot())return{actionState:d("WASyncdConst").SyncActionState.Skipped};e=d("WAWebContactCollection").ContactCollection.get(c);e!=null&&e.setNotMyContact();g.push(c);return{actionState:d("WASyncdConst").SyncActionState.Success}}d("WALogger").WARN(n());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}})));d("WALogger").LOG(m());d("WALogger").LOG(l());yield d("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:p,flushImmediately:!0});yield d("WAWebApiContact").createOrMergeAddressBookContacts(f);d("WALogger").LOG(k());e===!0&&(yield d("WABaseGlobals").getDbImpls().writeSyncdLog(d("WASyncdConst").CollectionName.CriticalUnblockLow,"handler after save"));d("WASyncdOrphan").checkOrphanUserStatusMutes(f.map(function(a){return a.id}));if(g.length>0){a=g.map(function(a){return a.isLid()?d("WAJids").toLidUserJid(a.user):d("WAJids").toPhoneUserJid(a.user)});yield d("WAWebApiContact").setNotAddressBookContacts(a);d("WAWebDeleteStatusAction").clearStatusForRemovedContact()}d("WALogger").LOG(j());e===!0&&(yield d("WABaseGlobals").getDbImpls().writeSyncdLog(d("WASyncdConst").CollectionName.CriticalUnblockLow,"handler done"));d("WALogger").DEV(i(),f.length,g.length);return c});function c(b,c,d){return a.apply(this,arguments)}return c}();e.getContactSyncMutation=function(a,b,c,e,f,g){g===void 0&&(g=!1);var h=d("WATimeUtils").unixTimeMs();b={contactAction:{fullName:(b=b)!=null?b:void 0,firstName:(b=c)!=null?b:void 0,lidJid:f?f.toString({legacy:!0}):void 0,saveOnPrimaryAddressbook:(c=e)!=null?c:void 0}};return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.CriticalUnblockLow,indexArgs:[a.toString({legacy:!0})],operation:g?d("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,version:this.getVersion(),value:b,timestamp:h,action:this.getAction()})};return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebContactSyncBridge",["WAWebLidAwareContactsDB","WAWebSyncContactJob","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield c("WAWebLidAwareContactsDB").all());if(b.length>0){b=b.map(function(a){return d("WAWebWidFactory").createWid(a.id)}).filter(function(a){return a.isEligibleForUSync()});return d("WAWebSyncContactJob").syncContactListInChunksJob(b,a,"full")}});return h.apply(this,arguments)}g.doFullContactSync=a}),98);
__d("WAWebDBNoteDatabaseApi",["WALogger","WAWebSchemaNote","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[getOnlyNoteByChatJid] Found more than one note for chatJid ","."]);h=function(){return a};return a}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebSchemaNote").getNoteTable().createOrReplace(a)});return i.apply(this,arguments)}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("WAWebSchemaNote").getNoteTable().equals(["chatJid"],a);return a});return k.apply(this,arguments)}function c(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield j(a));b.length>1&&d("WALogger").ERROR(h(),a).devConsole(b);return b.length>0?b[0]:null});return l.apply(this,arguments)}function e(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebSchemaNote").getNoteTable().bulkCreateOrMerge(a)});return m.apply(this,arguments)}g.addOrEditNote=a;g.getNotesByChatJid=j;g.getOnlyNoteByChatJid=c;g.bulkUpdateNotes=e}),98);
__d("WAWebDBPurgeExpiredRecords",["Promise","WAWeb-moment","WAWebDBMapOrphansToProviders","WAWebDBOrphanDbSerialization","WAWebMsgType","WAWebSchemaMessage","WAWebSchemaMessageOrphans","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){a=c("WAWeb-moment")().subtract(a,"days").unix();var f=c("WAWeb-moment")().subtract(e,"days").unix();e=(yield d("WAWebSchemaMessageOrphans").getMessageOrphanTable().between(["t"],0,a));a=new Set(e.map(function(a){return a.parentMsgKey}));a=(yield d("WAWebSchemaMessage").getMessageTable().bulkGet(Array.from(a)));var g=new Set(a.filter(function(a){return a&&a.type===d("WAWebMsgType").MSG_TYPE.UNKNOWN}).map(function(a){return a==null?void 0:a.id}));a=e.filter(function(a){return!g.has(a.parentMsgKey)||a.t<f}).map(d("WAWebDBOrphanDbSerialization").orphanFromDbRow);e=(yield d("WAWebDBMapOrphansToProviders").mapOrphansToProviders(a));var i=[];for(e of e.entries()){var j=e[0],k=e[1];j.onRecordsPurged!=null&&i.push(j.onRecordsPurged(k))}yield (h||(h=b("Promise"))).all(i);j=a.map(function(a){return a.msgKey});return d("WAWebSchemaMessageOrphans").getMessageOrphanTable().bulkRemove(j)});return i.apply(this,arguments)}g.purgeExpiredOrphanRecords=a}),98);
__d("WAWebWamEnumAndroidKeystoreStateType",[],(function(a,b,c,d,e,f){a=Object.freeze({NOT_AVAILABLE:1,SELF_TEST_FAILURE:2,ENC_KEY_READ_FAILURE:3,ENC_KEY_STORED_USED:4,ENC_KEY_PLAIN_DELETED:5,ENC_KEY_PLAIN_RECOVERED:6});f.ANDROID_KEYSTORE_STATE_TYPE=a}),66);
__d("WAWebWamEnumBackupNetworkSetting",[],(function(a,b,c,d,e,f){a=Object.freeze({WIFI_ONLY:0,WIFI_OR_CELLULAR:1});f.BACKUP_NETWORK_SETTING=a}),66);
__d("WAWebWamEnumBackupSchedule",[],(function(a,b,c,d,e,f){a=Object.freeze({OFF:0,DAILY:1,WEEKLY:2,MONTHLY:3,MANUAL:4});f.BACKUP_SCHEDULE=a}),66);
__d("WAWebWamEnumContactsPermissionAuthorizationStatusType",[],(function(a,b,c,d,e,f){a=Object.freeze({NOT_DETERMINED:1,RESTRICTED:2,DENIED:3,AUTHORIZED:4,LIMITED:5});f.CONTACTS_PERMISSION_AUTHORIZATION_STATUS_TYPE=a}),66);
__d("WAWebWamEnumEmailState",[],(function(a,b,c,d,e,f){a=Object.freeze({NOT_ADDED:1,UNVERIFIED:2,VERIFIED:3});f.EMAIL_STATE=a}),66);
__d("WAWebWamEnumGalleryPermissionState",[],(function(a,b,c,d,e,f){a=Object.freeze({FULL:1,PARTIAL:2,NONE:3});f.GALLERY_PERMISSION_STATE=a}),66);
__d("WAWebWamEnumMetaAiModelTierType",[],(function(a,b,c,d,e,f){a=Object.freeze({BASE:0,PREMIUM:1});f.META_AI_MODEL_TIER_TYPE=a}),66);
__d("WAWebWamEnumNotificationSettingType",[],(function(a,b,c,d,e,f){a=Object.freeze({ALLOWED:1,BLOCKED:2,UNKNOWN:3});f.NOTIFICATION_SETTING_TYPE=a}),66);
__d("WAWebWamEnumPrivacySettingsContactsBuckets",[],(function(a,b,c,d,e,f){a=Object.freeze({B0:1,B1:2,B5:3,B10:4,B15:5,B20:6,B30:7,B40:8,B50:9,B60:10,B70:11,B80:12,B90:13,B100:14});f.PRIVACY_SETTINGS_CONTACTS_BUCKETS=a}),66);
__d("WAWebWamEnumPrivacySettingsValueType",[],(function(a,b,c,d,e,f){a=Object.freeze({NOBODY:1,ONLY_SHARE_WITH:2,MY_CONTACTS:3,MY_CONTACTS_EXCEPT:4,EVERYONE:5});f.PRIVACY_SETTINGS_VALUE_TYPE=a}),66);
__d("WAWebDailyWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumAndroidKeystoreStateType","WAWebWamEnumBackupNetworkSetting","WAWebWamEnumBackupSchedule","WAWebWamEnumContactsPermissionAuthorizationStatusType","WAWebWamEnumEmailState","WAWebWamEnumGalleryPermissionState","WAWebWamEnumMediaQuality","WAWebWamEnumMetaAiModelTierType","WAWebWamEnumNotificationSettingType","WAWebWamEnumPrivacySettingsContactsBuckets","WAWebWamEnumPrivacySettingsValueType"],(function(a,b,c,d,e,f,g){e=(a=d("WAWebWamCodegenUtils")).defineEvents({Daily:[1158,{accessibilityVoiceover:[108,a.TYPES.BOOLEAN],addressbookSize:[11,a.TYPES.INTEGER],addressbookWhatsappSize:[12,a.TYPES.INTEGER],androidAdvertisingId:[135,a.TYPES.STRING],androidKeystoreState:[139,d("WAWebWamEnumAndroidKeystoreStateType").ANDROID_KEYSTORE_STATE_TYPE],androidXmppWorkersRuntime:[167,a.TYPES.INTEGER],appCodeHash:[103,a.TYPES.STRING],appStandbyBucket:[121,a.TYPES.INTEGER],autoDlAudioCellular:[90,a.TYPES.BOOLEAN],autoDlAudioRoaming:[91,a.TYPES.BOOLEAN],autoDlAudioWifi:[89,a.TYPES.BOOLEAN],autoDlDocCellular:[96,a.TYPES.BOOLEAN],autoDlDocRoaming:[97,a.TYPES.BOOLEAN],autoDlDocWifi:[95,a.TYPES.BOOLEAN],autoDlImageCellular:[87,a.TYPES.BOOLEAN],autoDlImageRoaming:[88,a.TYPES.BOOLEAN],autoDlImageWifi:[86,a.TYPES.BOOLEAN],autoDlVideoCellular:[93,a.TYPES.BOOLEAN],autoDlVideoRoaming:[94,a.TYPES.BOOLEAN],autoDlVideoWifi:[92,a.TYPES.BOOLEAN],backupNetworkSetting:[10,d("WAWebWamEnumBackupNetworkSetting").BACKUP_NETWORK_SETTING],backupRestoreEncryptionVersion:[138,a.TYPES.INTEGER],backupSchedule:[9,d("WAWebWamEnumBackupSchedule").BACKUP_SCHEDULE],channelsMediaFolderSize:[186,a.TYPES.INTEGER],chatDatabaseSize:[19,a.TYPES.INTEGER],chatLockFolderCount:[168,a.TYPES.INTEGER],contactsCreatedOnWhatsappSize:[200,a.TYPES.INTEGER],contactsPermissionAuthorizationStatus:[201,d("WAWebWamEnumContactsPermissionAuthorizationStatusType").CONTACTS_PERMISSION_AUTHORIZATION_STATUS_TYPE],countEphemeralThreads:[181,a.TYPES.INTEGER],countEphemeralThreadsEnabledByMe:[182,a.TYPES.INTEGER],dbAddressbookTableSize:[206,a.TYPES.INTEGER],defaultDisappearingDuration:[140,a.TYPES.INTEGER],deviceLanguage:[153,a.TYPES.STRING],emailState:[174,d("WAWebWamEnumEmailState").EMAIL_STATE],entSecurityNotificationsEnabled:[134,a.TYPES.BOOLEAN],experimentTmoPreloadGroupDaily:[166,a.TYPES.INTEGER],favoritedAnimatedStickerCount:[113,a.TYPES.INTEGER],favoritedFirstPartyStickerCount:[112,a.TYPES.INTEGER],favoritedTotalStickerCount:[111,a.TYPES.INTEGER],galleryPermission:[164,d("WAWebWamEnumGalleryPermissionState").GALLERY_PERMISSION_STATE],hasTextstatusEmojiModified24h:[175,a.TYPES.BOOLEAN],hasTextstatusModified24h:[176,a.TYPES.BOOLEAN],hasTextstatusTextModified24h:[177,a.TYPES.BOOLEAN],hasUsername:[187,a.TYPES.BOOLEAN],inNetworkContactsSize:[190,a.TYPES.INTEGER],installedAnimatedStickerPackCount:[116,a.TYPES.INTEGER],installedAnimatedThirdPartyStickerPackCount:[137,a.TYPES.INTEGER],installedFirstPartyStickerPackCount:[115,a.TYPES.INTEGER],installedTotalStickerPackCount:[114,a.TYPES.INTEGER],ipStr:[122,a.TYPES.STRING],isContactSyncToOsDefaultOn:[202,a.TYPES.BOOLEAN],isDefaultDisappearingMessagingUser:[183,a.TYPES.BOOLEAN],isEphemeralMessagingUser:[184,a.TYPES.BOOLEAN],isProfilePhotoSet:[195,a.TYPES.BOOLEAN],keyboardLanguage:[154,a.TYPES.STRING],languageCode:[5,a.TYPES.STRING],lastBackupTimestamp:[63,a.TYPES.INTEGER],lastCloudBackupSize:[185,a.TYPES.INTEGER],locationCode:[6,a.TYPES.STRING],lockFolderHidden:[171,a.TYPES.BOOLEAN],lowestAppStandbyBucket:[160,a.TYPES.INTEGER],mdPairTime:[124,a.TYPES.INTEGER],mediaFolderFileCount:[21,a.TYPES.INTEGER],mediaFolderSize:[20,a.TYPES.INTEGER],mediaQualitySetting:[188,d("WAWebWamEnumMediaQuality").MEDIA_QUALITY],metaAiModelActual:[198,d("WAWebWamEnumMetaAiModelTierType").META_AI_MODEL_TIER_TYPE],metaAiModelSelected:[199,d("WAWebWamEnumMetaAiModelTierType").META_AI_MODEL_TIER_TYPE],modifiedInternalProps:[155,a.TYPES.BOOLEAN],nativeContactsGlobalSettingEnabled:[205,a.TYPES.BOOLEAN],networkIsRoaming:[7,a.TYPES.BOOLEAN],networkOperatorName:[159,a.TYPES.STRING],numAccounts:[163,a.TYPES.INTEGER],numContactsWithTextstatus24h:[178,a.TYPES.INTEGER],numContactsWithTextstatusEmoji24h:[179,a.TYPES.INTEGER],numContactsWithTextstatusText24h:[180,a.TYPES.INTEGER],osBuildNumber:[4,a.TYPES.STRING],osNotificationSetting:[118,d("WAWebWamEnumNotificationSettingType").NOTIFICATION_SETTING_TYPE],outOfNetworkContactsSize:[191,a.TYPES.INTEGER],packageName:[102,a.TYPES.STRING],passkeyExists:[165,a.TYPES.BOOLEAN],paymentsIsEnabled:[100,a.TYPES.BOOLEAN],peripheralConnected:[209,a.TYPES.STRING],permissionAccessCoarseLocation:[57,a.TYPES.INTEGER],permissionAccessFineLocation:[58,a.TYPES.INTEGER],permissionCamera:[56,a.TYPES.INTEGER],permissionContacts:[104,a.TYPES.BOOLEAN],permissionReadExternalStorage:[53,a.TYPES.INTEGER],permissionRecordAudio:[55,a.TYPES.INTEGER],phoneCores:[156,a.TYPES.INTEGER],phoneyid:[162,a.TYPES.STRING],privacySettingsAbout:[141,(b=d("WAWebWamEnumPrivacySettingsValueType")).PRIVACY_SETTINGS_VALUE_TYPE],privacySettingsAboutExceptNum:[142,(c=d("WAWebWamEnumPrivacySettingsContactsBuckets")).PRIVACY_SETTINGS_CONTACTS_BUCKETS],privacySettingsGroups:[143,b.PRIVACY_SETTINGS_VALUE_TYPE],privacySettingsGroupsExceptNum:[144,c.PRIVACY_SETTINGS_CONTACTS_BUCKETS],privacySettingsLastSeen:[145,b.PRIVACY_SETTINGS_VALUE_TYPE],privacySettingsLastSeenExceptNum:[146,c.PRIVACY_SETTINGS_CONTACTS_BUCKETS],privacySettingsProfilePhoto:[147,b.PRIVACY_SETTINGS_VALUE_TYPE],privacySettingsProfilePhotoExceptNum:[148,c.PRIVACY_SETTINGS_CONTACTS_BUCKETS],privacySettingsStatus:[150,b.PRIVACY_SETTINGS_VALUE_TYPE],privacySettingsStatusExceptNum:[151,c.PRIVACY_SETTINGS_CONTACTS_BUCKETS],privacySettingsStatusShareNum:[152,c.PRIVACY_SETTINGS_CONTACTS_BUCKETS],receiptsEnabled:[8,a.TYPES.BOOLEAN],secretCodeActive:[172,a.TYPES.BOOLEAN],showMetaAiButtonSetting:[173,a.TYPES.BOOLEAN],simMcc:[2,a.TYPES.INTEGER],simMnc:[3,a.TYPES.INTEGER],storageAvailSize:[31,a.TYPES.INTEGER],storageTotalSize:[32,a.TYPES.INTEGER],supportedDecoders:[169,a.TYPES.STRING],supportedEncoders:[170,a.TYPES.STRING],syncedInNetworkContactsSize:[192,a.TYPES.INTEGER],totalCountInNetworkUniquePhoneNumber:[193,a.TYPES.INTEGER],totalCountSyncedInNetworkUniquePhoneNumber:[194,a.TYPES.INTEGER],videoFolderFileCount:[23,a.TYPES.INTEGER],videoFolderSize:[22,a.TYPES.INTEGER],webcContactsTableSize:[207,a.TYPES.INTEGER],webcFilteredContactsSize:[208,a.TYPES.INTEGER]},[1,1,1],"regular"]},{Daily:[]});g.DailyWamEvent=e}),98);
__d("WAWebDbUsageApiUtils",["Promise","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){var g;function a(a){return a!=null&&a!==0?Math.round(a/1e6).toString():"0"}function h(a){return new(g||(g=b("Promise")))(function(b,c){a.onsuccess=function(a){b(a.target.result)},a.onerror=function(a){c(a.target.result)}})}function c(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield h(a.open("__dbnames")));a=a.transaction(a.objectStoreNames,"readonly");a=a.objectStore(a.objectStoreNames[0]);a=(yield h(a.getAll()));return a});return i.apply(this,arguments)}function d(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield h(a.open(b)));return a});return j.apply(this,arguments)}function e(a,c){return new(g||(g=b("Promise")))(function(b,d){var e=a.openCursor(null,"prev");e.onsuccess=function(a){a=a.target.result;a&&c(a.value)?a["continue"]():b()};e.onerror=function(a){d(a.target.result)}})}f.convertToMBToString=a;f.promisifyRequest=h;f.getAllDatabases=c;f.getDatabase=d;f.objectStoreIterator=e}),66);
__d("isWAWebFeatureDetectionAppleTouchscreen",["WAWebMiscBrowserUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("WAWebMiscBrowserUtils").info();return a.os.toLowerCase()!=="mac os"?!1:!!navigator.maxTouchPoints&&navigator.maxTouchPoints>2}g["default"]=a}),98);
__d("WAWebDesktopUpsellUtils",["$InternalEnum","WAWebEnvironment","WAWebMiscBrowserUtils","asyncToGeneratorRuntime","isWAWebFeatureDetectionAppleTouchscreen"],(function(a,b,c,d,e,f,g){var h=b("$InternalEnum").Mirrored(["WINDOWS","MACOS"]),i;function a(){if(i!==void 0)return i;i=j();return i}function j(){var a=c("WAWebMiscBrowserUtils").info();switch(a.os.toLowerCase()){case"windows":return h.WINDOWS;case"mac os":return c("isWAWebFeatureDetectionAppleTouchscreen")()?null:h.MACOS}return null}var k="8.0.0",l=10,m="12.0.0",n=null,o=null;function d(){n==null&&void p();return n}function p(){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a,b;if(c("WAWebEnvironment").isWindows)return!1;if(n!=null)return n;a=(yield (a=self.navigator)==null?void 0:(a=a.userAgentData)==null?void 0:a.getHighEntropyValues(["platformVersion"]));if((a==null?void 0:a.platformVersion)!=null&&((b=a.platform)==null?void 0:b.toLowerCase())==="windows"&&a.platformVersion!=null)n=t(k,a.platformVersion)<=0;else{b=c("WAWebMiscBrowserUtils").info();n=b.os==="Windows"&&parseInt(b.version,10)>=l}return n});return q.apply(this,arguments)}function e(){o==null&&void r();return o}function r(){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a,b;if(c("WAWebEnvironment").isWindows)return!1;if(o!=null)return o;a=(yield (a=self.navigator)==null?void 0:(a=a.userAgentData)==null?void 0:a.getHighEntropyValues(["platformVersion"]));(a==null?void 0:a.platformVersion)!=null&&((b=a.platform)==null?void 0:b.toLowerCase())==="macos"&&a.platformVersion!=null&&(o=t(m,a.platformVersion)<=0);return(b=o)!=null?b:!1});return s.apply(this,arguments)}function t(a,b){return a.localeCompare(b,void 0,{numeric:!0,sensitivity:"base"})}g.UserDesktopOs=h;g.getUserDesktopOs=a;g.isWebUserOnSupportedWindowsOSForUWPSync=d;g.isWebUserOnSupportedWindowsOSForUWPAsync=p;g.isWebUserOnSupportedMacOSForCatalystSync=e;g.isWebUserOnSupportedMacOSForCatalystAsync=r}),98);
__d("WAWebDesktopUpsellPlatformAwareHooks",["WAWebDesktopUpsellUtils","WAWebMobilePlatforms","useWAWebABPropConfigValue","useWAWebAsync"],(function(a,b,c,d,e,f,g){var h={chatlist_toastbar:"desktop_upsell_win_cta_chatlist_toastbar",chatlist_dropdown:"desktop_upsell_win_cta_chatlist_dropdown",intro_panel:"desktop_upsell_win_cta_intro_panel",call_btn:"desktop_upsell_win_cta_call_btn",search_results:"desktop_upsell_win_cta_search_results_toastbar",missed_call:"desktop_upsell_win_cta_missed_call_variation_2"},i={chatlist_toastbar:"desktop_upsell_mac_cta_chatlist_toastbar",chatlist_dropdown:"desktop_upsell_mac_cta_chatlist_dropdown",intro_panel:"desktop_upsell_mac_cta_intro_panel",call_btn:"desktop_upsell_mac_cta_call_btn",search_results:"desktop_upsell_mac_cta_search_results_toastbar",missed_call:"desktop_upsell_mac_cta_missed_call"};function a(a){var b=d("WAWebDesktopUpsellUtils").getUserDesktopOs();b=d("useWAWebABPropConfigValue").useABPropConfigValue(b===d("WAWebDesktopUpsellUtils").UserDesktopOs.WINDOWS?h[a]:i[a]);return b}function b(){var a=d("WAWebDesktopUpsellUtils").getUserDesktopOs();a=j(a);return!d("WAWebMobilePlatforms").isSMB()&&a}function e(){var a=d("WAWebDesktopUpsellUtils").getUserDesktopOs(),b=!1;if(a===d("WAWebDesktopUpsellUtils").UserDesktopOs.WINDOWS){var c;b=(c=d("WAWebDesktopUpsellUtils").isWebUserOnSupportedWindowsOSForUWPSync())!=null?c:!1}else if(a===d("WAWebDesktopUpsellUtils").UserDesktopOs.MACOS){b=(c=d("WAWebDesktopUpsellUtils").isWebUserOnSupportedMacOSForCatalystSync())!=null?c:!1}return!d("WAWebMobilePlatforms").isSMB()&&b}function j(a){var b=c("useWAWebAsync")(d("WAWebDesktopUpsellUtils").isWebUserOnSupportedWindowsOSForUWPAsync,[]),e=c("useWAWebAsync")(d("WAWebDesktopUpsellUtils").isWebUserOnSupportedMacOSForCatalystAsync,[]);if(a===d("WAWebDesktopUpsellUtils").UserDesktopOs.WINDOWS&&!b.loading&&!b.error)return b.value;else if(a===d("WAWebDesktopUpsellUtils").UserDesktopOs.MACOS&&!e.loading&&!e.error)return e.value;return!1}g.useWAWebDesktopUpsellAbPropCheck=a;g.useWAWebDesktopUpsellPlatformCheck=b;g.useWAWebDesktopUpsellPlatformAwareCTACheckSynchronous=e;g.useWAWebDesktopUpsellPlatformAwareOsVersionCheck=j}),98);
__d("WAWebWamEnumWebcNativeUpsellCtaEventType",[],(function(a,b,c,d,e,f){a=Object.freeze({IMPRESSION:1,CTA_BTN_CLICK:2,CTA_DISMISS:3});f.WEBC_NATIVE_UPSELL_CTA_EVENT_TYPE=a}),66);
__d("WAWebWamEnumWebcNativeUpsellCtaSourceType",[],(function(a,b,c,d,e,f){a=Object.freeze({INTRO_PANEL:1,CHATLIST_DROPDOWN:2,BUTTERBAR:3,QR_BANNER:4,SEARCH_RESULTS:5,CALL_BTN_MODAL:6,CALL_BTN_MODAL_2:7,MISSED_CALL_MODAL:8,MISSED_CALL_MODAL_2:9,QR_BANNER_2:10,QR_DOWNLOAD_BUTTON:11});f.WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE=a}),66);
__d("WAWebWebcNativeUpsellCtaWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebcNativeUpsellCtaEventType","WAWebWamEnumWebcNativeUpsellCtaSourceType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebcNativeUpsellCta:[3934,{webcNativeUpsellCtaEventType:[2,d("WAWebWamEnumWebcNativeUpsellCtaEventType").WEBC_NATIVE_UPSELL_CTA_EVENT_TYPE],webcNativeUpsellCtaSource:[1,d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE]},[1,1,1],"regular"]},{WebcNativeUpsellCta:[]});g.WebcNativeUpsellCtaWamEvent=a}),98);
__d("WAWebDesktopUpsellStoreOpener",["WALogger","WAWebDesktopUpsellUtils","WAWebExternalLink.react","WAWebWamEnumWebcNativeUpsellCtaEventType","WAWebWamEnumWebcNativeUpsellCtaSourceType","WAWebWebcNativeUpsellCtaWamEvent","err","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["web-desktop-upsells: Failed to open Mac App Store app with error: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["web-desktop-upsells: Failed to open MS Store app with error: ",""]);i=function(){return a};return a}function a(a){var b=d("WAWebDesktopUpsellUtils").getUserDesktopOs();b===d("WAWebDesktopUpsellUtils").UserDesktopOs.WINDOWS?j(a):b===d("WAWebDesktopUpsellUtils").UserDesktopOs.MACOS&&l(a);void new(d("WAWebWebcNativeUpsellCtaWamEvent").WebcNativeUpsellCtaWamEvent)({webcNativeUpsellCtaEventType:d("WAWebWamEnumWebcNativeUpsellCtaEventType").WEBC_NATIVE_UPSELL_CTA_EVENT_TYPE.CTA_BTN_CLICK,webcNativeUpsellCtaSource:a}).commitAndWaitForFlush(!0)}function j(a){try{d("WAWebExternalLink.react").openExternalLink(k(a),{target:d("WAWebExternalLink.react").ExternalLinkTarget.DEEPLINK_IN_CURRENT_TAB})}catch(a){d("WALogger").ERROR(i(),a)}}function k(a){switch(a){case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.QR_BANNER:return d("WAWebExternalLink.react").WINDOWS_STORE_URIS.link_device_banner;case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.QR_BANNER_2:return d("WAWebExternalLink.react").WINDOWS_STORE_URIS.link_device_banner_2;case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.QR_DOWNLOAD_BUTTON:return d("WAWebExternalLink.react").WINDOWS_STORE_URIS.link_device_banner_3;case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.INTRO_PANEL:return d("WAWebExternalLink.react").WINDOWS_STORE_URIS.intro_panel;case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.BUTTERBAR:return d("WAWebExternalLink.react").WINDOWS_STORE_URIS.chatlist_toastbar;case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.SEARCH_RESULTS:return d("WAWebExternalLink.react").WINDOWS_STORE_URIS.search_results_toastbar;case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.CALL_BTN_MODAL:return d("WAWebExternalLink.react").WINDOWS_STORE_URIS.call_btn_modal;case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.CALL_BTN_MODAL_2:return d("WAWebExternalLink.react").WINDOWS_STORE_URIS.call_btn_modal_2;case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.CHATLIST_DROPDOWN:return d("WAWebExternalLink.react").WINDOWS_STORE_URIS.chatlist_dropdown_menu;case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.MISSED_CALL_MODAL:return d("WAWebExternalLink.react").WINDOWS_STORE_URIS.missed_call_modal;case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.MISSED_CALL_MODAL_2:return d("WAWebExternalLink.react").WINDOWS_STORE_URIS.missed_call_modal_2}throw c("err")("Invalid CTA source: "+a)}function l(a){try{d("WAWebExternalLink.react").openExternalLink(c("gkx")("26258")?m(a):d("WAWebExternalLink.react").MAC_INTERNAL_MSC_STORE_URI,{target:d("WAWebExternalLink.react").ExternalLinkTarget.DEEPLINK_IN_CURRENT_TAB})}catch(a){d("WALogger").ERROR(h(),a)}}function m(a){switch(a){case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.QR_BANNER:return d("WAWebExternalLink.react").MAC_STORE_URIS.link_device_banner;case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.QR_BANNER_2:return d("WAWebExternalLink.react").MAC_STORE_URIS.link_device_banner_2;case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.QR_DOWNLOAD_BUTTON:return d("WAWebExternalLink.react").MAC_STORE_URIS.link_device_banner_3;case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.INTRO_PANEL:return d("WAWebExternalLink.react").MAC_STORE_URIS.intro_panel;case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.BUTTERBAR:return d("WAWebExternalLink.react").MAC_STORE_URIS.chatlist_toastbar;case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.SEARCH_RESULTS:return d("WAWebExternalLink.react").MAC_STORE_URIS.search_results_toastbar;case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.CALL_BTN_MODAL:return d("WAWebExternalLink.react").MAC_STORE_URIS.call_btn_modal;case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.CALL_BTN_MODAL_2:return d("WAWebExternalLink.react").MAC_STORE_URIS.call_btn_modal_2;case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.CHATLIST_DROPDOWN:return d("WAWebExternalLink.react").MAC_STORE_URIS.chatlist_dropdown_menu;case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.MISSED_CALL_MODAL:return d("WAWebExternalLink.react").MAC_STORE_URIS.missed_call_modal;case d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.MISSED_CALL_MODAL_2:return d("WAWebExternalLink.react").MAC_STORE_URIS.missed_call_modal_2}throw c("err")("Invalid CTA source: "+a)}g.openExternalWhatsAppDesktopDownloadUrl=a}),98);
__d("WAWebDisableLinkPreviewsSync",["Promise","WALogger","WAServerSync.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WATimeUtils","WAWebDisableLinkPreviewsAction","WAWebSyncd","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["DisableLinkPreviewsSync: updating prefs: isPreviewsDisabled: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["DisableLinkPreviewsSync: mutation value is null"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["DisableLinkPreviewsSync: operation not supported: ",""]);k=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 8};e.getAction=function(){return d("WASyncdConst").Actions.DisableLinkPreviews};e.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;a=a.map(function(a){if(a.operation!=="set"){d("WALogger").WARN(k(),a.operation);return{actionState:d("WASyncdConst").SyncActionState.Malformed}}a=(a=a.value.privacySettingDisableLinkPreviewsAction)==null?void 0:a.isPreviewsDisabled;if(a==null){d("WALogger").WARN(j());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}b=a;return{actionState:d("WASyncdConst").SyncActionState.Success}});b!=null&&(d("WALogger").LOG(i(),b),d("WAWebDisableLinkPreviewsAction").setDisableLinkPreviewsToUserPrefs(b));return a});function c(b){return a.apply(this,arguments)}return c}();e.getMutation=function(a,b){return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.Regular,indexArgs:[],value:{privacySettingDisableLinkPreviewsAction:{isPreviewsDisabled:b}},version:this.getVersion(),operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,timestamp:a,action:this.getAction()})};e.sendMutation=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebSyncd").lockForSync([],[this.getMutation(d("WATimeUtils").unixTimeMs(),a)],function(){return(h||(h=b("Promise"))).resolve()})});function c(b){return a.apply(this,arguments)}return c}();return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebDisableLinkPreviewsAction",["WAWebDisableLinkPreviewsSync","WAWebUserPrefsGeneral"],(function(a,b,c,d,e,f,g){"use strict";function h(a){d("WAWebUserPrefsGeneral").setUserPrivacySettings(babelHelpers["extends"]({},d("WAWebUserPrefsGeneral").getUserPrivacySettings(),{disableLinkPreviews:a}))}function a(a){h(a);return c("WAWebDisableLinkPreviewsSync").sendMutation(a)}g.setDisableLinkPreviewsToUserPrefs=h;g.setDisableLinkPreviews=a}),98);
__d("WAWebE2ETestPairingConstants",[],(function(a,b,c,d,e,f){a="jest_e2e_pairing_attempt_ongoing";b="jest_e2e_first_read_done";f.PAIRING_ATTEMPT_ONGOING_KEY=a;f.FIRST_QRCODE_READ_DONE=b}),66);
__d("WAWebWamEnumStanzaType",[],(function(a,b,c,d,e,f){a=Object.freeze({MESSAGE:1,RECEIPT:2,CALL:3,NOTIFICATION:4,APPDATA:5});f.STANZA_TYPE=a}),66);
__d("WAWebE2eMessageRecvWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumAddressingMode","WAWebWamEnumAgentEngagementEnumType","WAWebWamEnumBotType","WAWebWamEnumE2eCiphertextType","WAWebWamEnumE2eDestination","WAWebWamEnumE2eDeviceType","WAWebWamEnumE2eFailureReason","WAWebWamEnumEditType","WAWebWamEnumGroupEncryptionType","WAWebWamEnumInvisibleMessageCategoryType","WAWebWamEnumMediaType","WAWebWamEnumMessageDistributionEnumType","WAWebWamEnumRevokeType","WAWebWamEnumStanzaType","WAWebWamEnumTypeOfGroupEnum"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({E2eMessageRecv:[478,{agentEngagementType:[15,d("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE],botType:[19,d("WAWebWamEnumBotType").BOT_TYPE],e2eCiphertextType:[5,d("WAWebWamEnumE2eCiphertextType").E2E_CIPHERTEXT_TYPE],e2eCiphertextVersion:[6,a.TYPES.INTEGER],e2eDestination:[4,d("WAWebWamEnumE2eDestination").E2E_DESTINATION],e2eFailureReason:[2,d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON],e2eSenderType:[8,d("WAWebWamEnumE2eDeviceType").E2E_DEVICE_TYPE],e2eSuccessful:[1,a.TYPES.BOOLEAN],editType:[13,d("WAWebWamEnumEditType").EDIT_TYPE],groupEncryptionState:[23,d("WAWebWamEnumGroupEncryptionType").GROUP_ENCRYPTION_TYPE],invisibleMessageCategory:[22,d("WAWebWamEnumInvisibleMessageCategoryType").INVISIBLE_MESSAGE_CATEGORY_TYPE],isHostedChat:[20,a.TYPES.BOOLEAN],isLid:[11,a.TYPES.BOOLEAN],localAddressingMode:[16,d("WAWebWamEnumAddressingMode").ADDRESSING_MODE],messageAddressingMode:[17,d("WAWebWamEnumAddressingMode").ADDRESSING_MODE],messageDistributionType:[21,d("WAWebWamEnumMessageDistributionEnumType").MESSAGE_DISTRIBUTION_ENUM_TYPE],messageMediaType:[7,d("WAWebWamEnumMediaType").MEDIA_TYPE],offline:[9,a.TYPES.BOOLEAN],retryCount:[3,a.TYPES.INTEGER],revokeType:[10,d("WAWebWamEnumRevokeType").REVOKE_TYPE],serverAddressingMode:[18,d("WAWebWamEnumAddressingMode").ADDRESSING_MODE],stanzaType:[14,d("WAWebWamEnumStanzaType").STANZA_TYPE],typeOfGroup:[12,d("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM]},[1,1,20],"regular"]},{E2eMessageRecv:[]});g.E2eMessageRecvWamEvent=b}),98);
__d("WAWebScanDbRowApi",["WAWebMsgType"],(function(a,b,c,d,e,f,g){var h=new Set([(e=d("WAWebMsgType")).MSG_TYPE.AUDIO,e.MSG_TYPE.CHAT,e.MSG_TYPE.DOCUMENT,e.MSG_TYPE.GROUPS_V4_INVITE,e.MSG_TYPE.HSM,e.MSG_TYPE.IMAGE,e.MSG_TYPE.INTERACTIVE,e.MSG_TYPE.LIST,e.MSG_TYPE.LOCATION,e.MSG_TYPE.MULTI_VCARD,e.MSG_TYPE.ORDER,e.MSG_TYPE.PAYMENT,e.MSG_TYPE.PRODUCT,e.MSG_TYPE.PTT,e.MSG_TYPE.STICKER,e.MSG_TYPE.TEMPLATE_BUTTON_REPLY,e.MSG_TYPE.VCARD,e.MSG_TYPE.VIDEO]);function a(a,b){if(b==="lru-media-meta-info"){b=0;a.size&&typeof a.size==="number"&&(b+=a.size);b+=i(a);return b}return i(a)}function b(a,b){return b==="message"&&!h.has(a.type)?!0:!1}function c(a,b,c){return b==="lru-media-meta-info"&&c==="lru-media-storage-idb"?1:a}function i(a){var b=0;JSON.stringify(a,function(a,c){typeof a==="string"&&(b+=2*a.length);if(c instanceof ArrayBuffer)b+=c.byteLength;else if(c instanceof Blob)b+=c.size;else if(typeof c==="number")b+=8;else if(typeof c==="boolean")b+=1;else if(typeof c==="string")b+=2*c.length;else return c});return b}g.estimateSize=a;g.skipRow=b;g.getSampleRateOverride=c}),98);
__d("WAWebEstimateFtsStorageApi",["Promise","WALogger","WANullthrows","WAWebDbUsageApiUtils","WAWebIndexedDB","WAWebScanDbRowApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Estimated FTS "," size: "," KB, fetched rows: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Estimated FTS size: "," KB, fetched rows: "," took: "," ms"]);j=function(){return a};return a}var k="fts-storage",l=15e3;function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a===void 0?{sampleRows:l}:a;a=a.sampleRows;var e=Date.now(),f=a;a=c("WANullthrows")(c("WAWebIndexedDB"));a=(yield d("WAWebDbUsageApiUtils").getDatabase(a,k));var g=a.transaction(a.objectStoreNames,"readonly"),m=0,n=0;a=function*(a){var b=g.objectStore(a),c=(yield d("WAWebDbUsageApiUtils").promisifyRequest(b.count()));if(c===0)return"continue";var e=Math.min(f,c);n=e;var h=0;yield d("WAWebDbUsageApiUtils").objectStoreIterator(b,function(b){h+=d("WAWebScanDbRowApi").estimateSize(b,a);n--;return n>0});b=Math.round(h*(c/(e-n)));m+=b;d("WALogger").DEV(i(),a,b/1e3,e-n)};for(var o of g.objectStoreNames){var p=(yield* a(o));if(p==="continue")continue}p=Date.now()-e;d("WALogger").DEV(j(),m/1e3,n,p);return(h||(h=b("Promise"))).resolve(m)});return m.apply(this,arguments)}g.getEstimatedFTSDbSize=a}),98);
__d("WAWebLinkDeviceScreenGating",["gkx"],(function(a,b,c,d,e,f,g){function a(){return c("gkx")("6969")}g.linkDeviceScreenRefreshEnabled=a}),98);
__d("WAWebLinkDeviceExperience",["WAWebAutoLogoutGating","WAWebLinkDeviceScreenGating"],(function(a,b,c,d,e,f,g){var h=1,i=2;function a(){var a=0;d("WAWebLinkDeviceScreenGating").linkDeviceScreenRefreshEnabled()&&(a|=h);d("WAWebAutoLogoutGating").isAutoLogoutEnabled()&&(a|=i);return a}g.getWebCompanionLinkDeviceExperienceId=a}),98);
__d("WAWebUserPrefsBot",["WAWebUserPrefsKeys","WAWebUserPrefsStore"],(function(a,b,c,d,e,f,g){function a(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").MD_KEYS.BOT_LIST_LAST_REQUESTED_TIMESTAMP);a=typeof a==="number"?a:0;return a}function b(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.BOT_LIST_LAST_REQUESTED_TIMESTAMP,a)}function e(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").MD_KEYS.UGC_BOT_LIST_LAST_REQUESTED_TIMESTAMP);a=typeof a==="number"?a:0;return a}function f(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.UGC_BOT_LIST_LAST_REQUESTED_TIMESTAMP,a)}function h(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").MD_KEYS.UGC_BOT_LIST_LAST_BHASH);return typeof a==="string"?a:null}function i(a){c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").MD_KEYS.UGC_BOT_LIST_LAST_BHASH,a)}g.getBotListLastRequestedTimestamp=a;g.setBotListLastRequestedTimestamp=b;g.getUgcBotListLastRequestedTimestamp=e;g.setUgcBotListLastRequestedTimestamp=f;g.getUgcBotListLastBhash=h;g.setUgcBotListLastBhash=i}),98);
__d("WAWebMessageQueue",["WACustomError","WALogger","WAPromiseQueue","WAPromiseTimeout","WAWebEventsWaitForOfflineDeliveryEnd","WAWebEventsWaitForReadyForOffline","WAWebOfflineHandler","WAWebPromiseQueue","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Online chat queue MAX_MESSAGE_DELAY exceeded"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Offline chat queue MAX_MESSAGE_DELAY exceeded"]);i=function(){return a};return a}var j=2e4,k={allChatQueue:new(d("WAWebPromiseQueue").PromiseQueue)(),chatQueue:new(d("WAPromiseQueue").PromiseQueueMap)()},l={allChatQueue:new(d("WAWebPromiseQueue").PromiseQueue)(),chatQueue:new(d("WAPromiseQueue").PromiseQueueMap)()};function a(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){if(c&&!d("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete())return l.allChatQueue.enqueue(function(){return l.chatQueue.enqueue(a,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebEventsWaitForReadyForOffline").waitForOfflineProcessReady();return d("WAPromiseTimeout").promiseTimeout(e(),j)["catch"](function(a){if(a instanceof d("WACustomError").TimeoutError)d("WALogger").LOG(i()).tags("messaging");else throw a})}))});yield d("WAWebEventsWaitForOfflineDeliveryEnd").waitForOfflineDeliveryEnd();return k.allChatQueue.enqueue(function(){return k.chatQueue.enqueue(a,function(){return d("WAPromiseTimeout").promiseTimeout(e(),j)["catch"](function(a){if(a instanceof d("WACustomError").TimeoutError)d("WALogger").LOG(h()).tags("messaging");else throw a})})})});return m.apply(this,arguments)}function c(a){a===void 0&&(a=void 0);return a?l.chatQueue.wait(a):l.allChatQueue.wait()}function e(a){a===void 0&&(a=void 0);return a?k.chatQueue.wait(a):k.allChatQueue.wait()}g.onMessageQueue=a;g.waitForOfflineMessageQueue=c;g.waitForOnlineMessageQueue=e}),98);
__d("WAWebKeepInChatNotifWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({KeepInChatNotif:[3484,{kicGroupNotificationTaps:[3,a.TYPES.INTEGER],kicGroupNotifications:[4,a.TYPES.INTEGER],kicNotificationTaps:[5,a.TYPES.INTEGER],kicNotifications:[6,a.TYPES.INTEGER]},[1,1,1],"regular"]},{KeepInChatNotif:[]});g.KeepInChatNotifWamEvent=b}),98);
__d("WAWebLidMigrationDailyWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({LidMigrationDaily:[5842,{completedMigrations:[1,d("WAWebWamCodegenUtils").TYPES.STRING]},[1,1,1],"regular"]},{LidMigrationDaily:[]});g.LidMigrationDailyWamEvent=a}),98);
__d("WAWebWamEnumInAppNotificationAlertStyle",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:1,BANNERS:2,ALERTS:3});f.IN_APP_NOTIFICATION_ALERT_STYLE=a}),66);
__d("WAWebWamEnumNotificationSoundTone",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:1,CUSTOM:2});f.NOTIFICATION_SOUND_TONE=a}),66);
__d("WAWebNotificationSettingWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumInAppNotificationAlertStyle","WAWebWamEnumNotificationSoundTone"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({NotificationSetting:[3684,{groupReactionNotification:[1,a.TYPES.BOOLEAN],groupShowNotification:[2,a.TYPES.BOOLEAN],groupSoundTone:[3,d("WAWebWamEnumNotificationSoundTone").NOTIFICATION_SOUND_TONE],inAppNotificationAlertStyle:[4,d("WAWebWamEnumInAppNotificationAlertStyle").IN_APP_NOTIFICATION_ALERT_STYLE],inAppNotificationSound:[5,a.TYPES.BOOLEAN],inAppNotificationVibrate:[6,a.TYPES.BOOLEAN],messageReactionNotification:[7,a.TYPES.BOOLEAN],messageShowNotification:[8,a.TYPES.BOOLEAN],messageSoundTone:[9,d("WAWebWamEnumNotificationSoundTone").NOTIFICATION_SOUND_TONE],offlineNotification:[11,a.TYPES.BOOLEAN],showPreview:[10,a.TYPES.BOOLEAN],statusReminderNotification:[12,a.TYPES.BOOLEAN]},[1,1,1],"regular"]},{NotificationSetting:[]});g.NotificationSettingWamEvent=b}),98);
__d("WAWebPnhDailyCtwaWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({PnhDailyCtwa:[4280,{matMessagesReceived:[1,a.TYPES.INTEGER],threadDs:[3,a.TYPES.STRING],threadId:[2,a.TYPES.STRING]},[1,1,1],"regular"]},{PnhDailyCtwa:[]});g.PnhDailyCtwaWamEvent=b}),98);
__d("WAWebPnhDailyWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumTypeOfGroupEnum"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({PnhDaily:[3806,{communityId:[1,a.TYPES.STRING],mappingMissing:[7,a.TYPES.INTEGER],pnhIndicatorClicksChat:[2,a.TYPES.INTEGER],pnhIndicatorClicksInfoScreen:[3,a.TYPES.INTEGER],reactionDeleteCount:[4,a.TYPES.INTEGER],reactionOpenTrayCount:[5,a.TYPES.INTEGER],totalContacts:[8,a.TYPES.INTEGER],typeOfGroup:[6,d("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM]},[1,1,1],"regular"]},{PnhDaily:[]});g.PnhDailyWamEvent=b}),98);
__d("WAWebWamEnumPrivacyHighlightCategoryEnum",[],(function(a,b,c,d,e,f){a=Object.freeze({E2EE:0});f.PRIVACY_HIGHLIGHT_CATEGORY_ENUM=a}),66);
__d("WAWebPrivacyHighlightDailyWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumPrivacyHighlightCategoryEnum","WAWebWamEnumPrivacyHighlightSurfaceEnum"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({PrivacyHighlightDaily:[3522,{dialogAppearCount:[1,a.TYPES.INTEGER],dialogSelectCount:[2,a.TYPES.INTEGER],narrativeAppearCount:[3,a.TYPES.INTEGER],privacyHighlightCategory:[4,d("WAWebWamEnumPrivacyHighlightCategoryEnum").PRIVACY_HIGHLIGHT_CATEGORY_ENUM],privacyHighlightSurface:[5,d("WAWebWamEnumPrivacyHighlightSurfaceEnum").PRIVACY_HIGHLIGHT_SURFACE_ENUM]},[1,1,1],"regular"]},{PrivacyHighlightDaily:[]});g.PrivacyHighlightDailyWamEvent=b}),98);
__d("WAWebPttDailyWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({PttDaily:[2938,{pttCancelBroadcast:[9,a.TYPES.INTEGER],pttCancelGroup:[8,a.TYPES.INTEGER],pttCancelIndividual:[7,a.TYPES.INTEGER],pttCancelInterop:[42,a.TYPES.INTEGER],pttCancelNewsletter:[32,a.TYPES.INTEGER],pttDraftReviewBroadcast:[15,a.TYPES.INTEGER],pttDraftReviewGroup:[14,a.TYPES.INTEGER],pttDraftReviewIndividual:[13,a.TYPES.INTEGER],pttDraftReviewInterop:[43,a.TYPES.INTEGER],pttDraftReviewNewsletter:[33,a.TYPES.INTEGER],pttFastplaybackBroadcast:[21,a.TYPES.INTEGER],pttFastplaybackGroup:[20,a.TYPES.INTEGER],pttFastplaybackIndividual:[19,a.TYPES.INTEGER],pttFastplaybackInterop:[44,a.TYPES.INTEGER],pttFastplaybackNewsletter:[34,a.TYPES.INTEGER],pttLockBroadcast:[12,a.TYPES.INTEGER],pttLockGroup:[11,a.TYPES.INTEGER],pttLockIndividual:[10,a.TYPES.INTEGER],pttLockInterop:[45,a.TYPES.INTEGER],pttLockNewsletter:[35,a.TYPES.INTEGER],pttOutOfChatBroadcast:[29,a.TYPES.INTEGER],pttOutOfChatGroup:[30,a.TYPES.INTEGER],pttOutOfChatIndividual:[31,a.TYPES.INTEGER],pttOutOfChatInterop:[46,a.TYPES.INTEGER],pttOutOfChatNewsletter:[36,a.TYPES.INTEGER],pttPausedRecordBroadcast:[22,a.TYPES.INTEGER],pttPausedRecordGroup:[23,a.TYPES.INTEGER],pttPausedRecordIndividual:[24,a.TYPES.INTEGER],pttPausedRecordInterop:[47,a.TYPES.INTEGER],pttPausedRecordNewsletter:[37,a.TYPES.INTEGER],pttPlaybackBroadcast:[18,a.TYPES.INTEGER],pttPlaybackGroup:[17,a.TYPES.INTEGER],pttPlaybackIndividual:[16,a.TYPES.INTEGER],pttPlaybackInterop:[48,a.TYPES.INTEGER],pttPlaybackNewsletter:[38,a.TYPES.INTEGER],pttRecordBroadcast:[3,a.TYPES.INTEGER],pttRecordGroup:[2,a.TYPES.INTEGER],pttRecordIndividual:[1,a.TYPES.INTEGER],pttRecordInterop:[49,a.TYPES.INTEGER],pttRecordNewsletter:[39,a.TYPES.INTEGER],pttSendBroadcast:[6,a.TYPES.INTEGER],pttSendGroup:[5,a.TYPES.INTEGER],pttSendIndividual:[4,a.TYPES.INTEGER],pttSendInterop:[50,a.TYPES.INTEGER],pttSendNewsletter:[40,a.TYPES.INTEGER],pttStopTapBroadcast:[25,a.TYPES.INTEGER],pttStopTapGroup:[26,a.TYPES.INTEGER],pttStopTapIndividual:[27,a.TYPES.INTEGER],pttStopTapInterop:[51,a.TYPES.INTEGER],pttStopTapNewsletter:[41,a.TYPES.INTEGER]},[1,1,1],"regular"]},{PttDaily:[]});g.PttDailyWamEvent=b}),98);
__d("WAWebScreenLockSettingsDataWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({ScreenLockSettingsData:[4802,{screenAutoLockDuration:[1,d("WAWebWamCodegenUtils").TYPES.INTEGER]},[1,1,1],"regular"]},{ScreenLockSettingsData:[]});g.ScreenLockSettingsDataWamEvent=a}),98);
__d("WAWebSubmitChatLockDailyStats",["WAWebChatLockDailyWamEvent","WAWebChatLockGatingUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.chatLockFolderChatsCount,c=a.chatLockFolderOpenCount,e=a.chatLockNewAddChatCount,f=a.chatLockNewRemoveChatCount,g=a.chatLockLockFolderHidden;a=a.chatLockSecretCodeActive;if(!d("WAWebChatLockGatingUtils").chatLockEnabled())return;if(b===0||c===0||e===0||f===0)return;b=new(d("WAWebChatLockDailyWamEvent").ChatLockDailyWamEvent)({folderChatsCount:b,folderOpenCount:c,newAddChatCount:e,newRemoveChatCount:f});g!=null&&b.set({lockFolderHidden:g});a!=null&&b.set({secretCodeActive:a});b.commit()}g.submitChatLockDailyStats=a}),98);
__d("WAWebUserPrefsContactManagement",["WAWebUserPrefsKeys","WAWebUserPrefsStore"],(function(a,b,c,d,e,f,g){var h=1;function i(){var a=c("WAWebUserPrefsStore").getUser(d("WAWebUserPrefsKeys").UserPrefs.SyncContactToAddressbookCounts);a=typeof a==="object"?a:null;var b=typeof (a==null?void 0:a.enabledCount)==="number"?a.enabledCount:0;a=typeof (a==null?void 0:a.disabledCount)==="number"?a.disabledCount:0;return{enabledCount:b,disabledCount:a}}function j(a){c("WAWebUserPrefsStore").setUser(d("WAWebUserPrefsKeys").UserPrefs.SyncContactToAddressbookCounts,a)}function a(a){var b=i(),c=k();c!==a?a?(b.enabledCount++,b.enabledCount>=h&&(b.disabledCount=0)):(b.disabledCount++,b.disabledCount>=h&&(b.enabledCount=0)):!a&&b.enabledCount<h?b.enabledCount=0:a&&b.disabledCount<h&&(b.disabledCount=0);j(b)}function k(){var a=i();return a.enabledCount>=h?!0:!1}g.setSyncToAddressbookLastSetting=a;g.getSyncToAddressbookDefaultSetting=k}),98);
__d("WAWebWaFsSingleEmojiMessageDailyWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WaFsSingleEmojiMessageDaily:[5602,{animatedEmojiEnabled:[1,a.TYPES.BOOLEAN],animatedEmojiReceiveCnt:[2,a.TYPES.INTEGER],animatedEmojiSendCnt:[3,a.TYPES.INTEGER],emojiClickCnt:[4,a.TYPES.INTEGER],emojiReplyCount:[5,a.TYPES.INTEGER],pauseAnimationCnt:[6,a.TYPES.INTEGER],replayAnimationCnt:[7,a.TYPES.INTEGER],singleEmojiReceiveCnt:[8,a.TYPES.INTEGER],singleEmojiSendCnt:[9,a.TYPES.INTEGER]},[1,1,1],"regular"]},{WaFsSingleEmojiMessageDaily:[]});g.WaFsSingleEmojiMessageDailyWamEvent=b}),98);
__d("WAWebWebDynamicSamplingTestEventWithSamplingWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebDynamicSamplingTestEventWithSampling:[5320,{},[100,100,1e4],"regular"]},{WebDynamicSamplingTestEventWithSampling:[]});g.WebDynamicSamplingTestEventWithSamplingWamEvent=a}),98);
__d("WAWebWebDynamicSamplingTestEventWithoutSamplingWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebDynamicSamplingTestEventWithoutSampling:[5322,{},[1,1,1],"regular"]},{WebDynamicSamplingTestEventWithoutSampling:[]});g.WebDynamicSamplingTestEventWithoutSamplingWamEvent=a}),98);
__d("WAWebWebcFtsStorageWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebcFtsStorage:[3642,{ftsTotalSize:[1,d("WAWebWamCodegenUtils").TYPES.INTEGER]},[1,1,1],"regular"]},{WebcFtsStorage:[]});g.WebcFtsStorageWamEvent=a}),98);
__d("WAWebTasksDailyStatsTask",["Promise","WALogger","WAStorageEstimator","WATimeUtils","WAWebABProps","WAWebApiPrivacyDisallowedList","WAWebApiPrivacyEphemerality","WAWebChatThreadLoggingUtils","WAWebCommunityHomeActionWamEvent","WAWebCommunityTabActionWamEvent","WAWebContactCollection","WAWebContactManagementGating","WAWebDailyAggregatedStatsCollection","WAWebDailyWamEvent","WAWebEphemeralityResolver","WAWebEstimateFtsStorageApi","WAWebKeepInChatNotifWamEvent","WAWebLidAwareContactsDB","WAWebLidContactsGatingUtils","WAWebLidMigrationDailyWamEvent","WAWebMediaStore","WAWebMuteCollection","WAWebNotificationConstants","WAWebNotificationEngagementWamEvent","WAWebNotificationSettingWamEvent","WAWebPnhDailyCtwaWamEvent","WAWebPnhDailyWamEvent","WAWebPrivacyHighlightDailyWamEvent","WAWebPttDailyWamEvent","WAWebScreenLockSettingsDataWamEvent","WAWebSingleSignalSession","WAWebSubmitChatLockDailyStats","WAWebUserPrefsContactManagement","WAWebUserPrefsGeneral","WAWebUserPrefsInfoStore","WAWebUserPrefsMultiDevice","WAWebUserPrefsNotifications","WAWebUserPrefsScreenLock","WAWebWaFsSingleEmojiMessageDailyWamEvent","WAWebWamEnumNotificationSettingType","WAWebWamEnumNotificationSoundTone","WAWebWamEnumPrivacyHighlightCategoryEnum","WAWebWamEnumPrivacyHighlightSurfaceEnum","WAWebWamEnumPrivacySettingsContactsBuckets","WAWebWamEnumPrivacySettingsValueType","WAWebWamEnumTypeOfGroupEnum","WAWebWamPrivateStatsUtils","WAWebWebDynamicSamplingTestEventWithSamplingWamEvent","WAWebWebDynamicSamplingTestEventWithoutSamplingWamEvent","WAWebWebcFtsStorageWamEvent","WAWebWebcStorageStatWamEvent","WAWebWid","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["WamDailyStats: "]);i=function(){return a};return a}function j(a){if(a.goldenBoxContactNarrativeAppearCount>0||a.goldenBoxContactDialogAppearCount>0||a.goldenBoxContactDialogSelectCount>0){var b=new(d("WAWebPrivacyHighlightDailyWamEvent").PrivacyHighlightDailyWamEvent)({privacyHighlightCategory:d("WAWebWamEnumPrivacyHighlightCategoryEnum").PRIVACY_HIGHLIGHT_CATEGORY_ENUM.E2EE,privacyHighlightSurface:d("WAWebWamEnumPrivacyHighlightSurfaceEnum").PRIVACY_HIGHLIGHT_SURFACE_ENUM.GOLDEN_BOX_CONTACT,narrativeAppearCount:a.goldenBoxContactNarrativeAppearCount,dialogAppearCount:a.goldenBoxContactDialogAppearCount,dialogSelectCount:a.goldenBoxContactDialogSelectCount});b.commit()}if(a.goldenBoxGroupNarrativeAppearCount>0||a.goldenBoxGroupDialogAppearCount>0||a.goldenBoxGroupDialogSelectCount>0){b=new(d("WAWebPrivacyHighlightDailyWamEvent").PrivacyHighlightDailyWamEvent)({privacyHighlightCategory:d("WAWebWamEnumPrivacyHighlightCategoryEnum").PRIVACY_HIGHLIGHT_CATEGORY_ENUM.E2EE,privacyHighlightSurface:d("WAWebWamEnumPrivacyHighlightSurfaceEnum").PRIVACY_HIGHLIGHT_SURFACE_ENUM.GOLDEN_BOX_GROUP,narrativeAppearCount:a.goldenBoxGroupNarrativeAppearCount,dialogAppearCount:a.goldenBoxGroupDialogAppearCount,dialogSelectCount:a.goldenBoxGroupDialogSelectCount});b.commit()}if(a.infoScreenGroupNarrativeAppearCount>0||a.infoScreenGroupDialogAppearCount>0||a.infoScreenGroupDialogSelectCount>0){b=new(d("WAWebPrivacyHighlightDailyWamEvent").PrivacyHighlightDailyWamEvent)({privacyHighlightCategory:d("WAWebWamEnumPrivacyHighlightCategoryEnum").PRIVACY_HIGHLIGHT_CATEGORY_ENUM.E2EE,privacyHighlightSurface:d("WAWebWamEnumPrivacyHighlightSurfaceEnum").PRIVACY_HIGHLIGHT_SURFACE_ENUM.INFO_SCREEN_GROUP,narrativeAppearCount:a.infoScreenGroupNarrativeAppearCount,dialogAppearCount:a.infoScreenGroupDialogAppearCount,dialogSelectCount:a.infoScreenGroupDialogSelectCount});b.commit()}if(a.chatsListNarrativeAppearCount>0||a.chatsListDialogAppearCount>0||a.chatsListDialogSelectCount>0){b=new(d("WAWebPrivacyHighlightDailyWamEvent").PrivacyHighlightDailyWamEvent)({privacyHighlightCategory:d("WAWebWamEnumPrivacyHighlightCategoryEnum").PRIVACY_HIGHLIGHT_CATEGORY_ENUM.E2EE,privacyHighlightSurface:d("WAWebWamEnumPrivacyHighlightSurfaceEnum").PRIVACY_HIGHLIGHT_SURFACE_ENUM.CHATS_LIST,narrativeAppearCount:a.chatsListNarrativeAppearCount,dialogAppearCount:a.chatsListDialogAppearCount,dialogSelectCount:a.chatsListDialogSelectCount});b.commit()}if(a.statusListNarrativeAppearCount>0||a.statusListDialogAppearCount>0||a.statusListDialogSelectCount>0){b=new(d("WAWebPrivacyHighlightDailyWamEvent").PrivacyHighlightDailyWamEvent)({privacyHighlightCategory:d("WAWebWamEnumPrivacyHighlightCategoryEnum").PRIVACY_HIGHLIGHT_CATEGORY_ENUM.E2EE,privacyHighlightSurface:d("WAWebWamEnumPrivacyHighlightSurfaceEnum").PRIVACY_HIGHLIGHT_SURFACE_ENUM.STATUS_LIST,narrativeAppearCount:a.statusListNarrativeAppearCount,dialogAppearCount:a.statusListDialogAppearCount,dialogSelectCount:a.statusListDialogSelectCount});b.commit()}if(a.callingScreenAudioNarrativeAppearCount>0||a.callingScreenAudioDialogAppearCount>0||a.callingScreenAudioDialogSelectCount>0){b=new(d("WAWebPrivacyHighlightDailyWamEvent").PrivacyHighlightDailyWamEvent)({privacyHighlightCategory:d("WAWebWamEnumPrivacyHighlightCategoryEnum").PRIVACY_HIGHLIGHT_CATEGORY_ENUM.E2EE,privacyHighlightSurface:d("WAWebWamEnumPrivacyHighlightSurfaceEnum").PRIVACY_HIGHLIGHT_SURFACE_ENUM.CALLING_SCREEN_AUDIO,narrativeAppearCount:a.callingScreenAudioNarrativeAppearCount,dialogAppearCount:a.callingScreenAudioDialogAppearCount,dialogSelectCount:a.callingScreenAudioDialogSelectCount});b.commit()}}function k(){var a=!d("WAWebMuteCollection").MuteCollection.globalReactionsMute(),b=!!d("WAWebUserPrefsNotifications").getIgnoreNondirectGroupMsg(),c=new(d("WAWebNotificationSettingWamEvent").NotificationSettingWamEvent)();c.set({groupReactionNotification:b&&a,groupShowNotification:b,groupSoundTone:d("WAWebWamEnumNotificationSoundTone").NOTIFICATION_SOUND_TONE.DEFAULT,inAppNotificationSound:d("WAWebUserPrefsNotifications").getGlobalSounds(),messageReactionNotification:a,messageShowNotification:d("WAWebUserPrefsNotifications").getGlobalNotifications(),messageSoundTone:d("WAWebWamEnumNotificationSoundTone").NOTIFICATION_SOUND_TONE.DEFAULT,showPreview:d("WAWebUserPrefsNotifications").getGlobalPreviews(),offlineNotification:d("WAWebUserPrefsNotifications").getGlobalOfflineNotifications()});c.commit()}function a(){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield m()),b=(yield p()),e=(yield t()),f=(yield v()),g=w(),h=(yield x());a=babelHelpers["extends"]({},a,b,e,g,h);d("WALogger").DEV(i()).devConsole(a);b=new(d("WAWebDailyWamEvent").DailyWamEvent)();b.set(a);b.commit();k();g=o();void new(d("WAWebLidMigrationDailyWamEvent").LidMigrationDailyWamEvent)(g).commit();h=new(d("WAWebWebcFtsStorageWamEvent").WebcFtsStorageWamEvent)();h.set({ftsTotalSize:f});h.commit();a=new(d("WAWebScreenLockSettingsDataWamEvent").ScreenLockSettingsDataWamEvent)();a.set(z());a.commit();b=d("WAWebUserPrefsMultiDevice").getPairingTimestamp();g=new(d("WAWebWebcStorageStatWamEvent").WebcStorageStatWamEvent)();g.set({webcStorageQuota:e.storageTotalSize,webcStorageUsage:e.storageUsed,webcAgeOfStorage:b!=null?d("WATimeUtils").unixTimeWithoutClockSkewCorrection()-b:-1,webcPackingEnabled:!1});void g.commit();f=(yield d("WAWebUserPrefsGeneral").getOfflineNotificationEngagement());if(f){new(d("WAWebNotificationEngagementWamEvent").NotificationEngagementWamEvent)({isWebBackgroundSyncNotif:!0,totalNotifShown:(h=f.totalNotifShown)!=null?h:0,totalNotifTapToOpen:(a=f.totalNotifTapToOpen)!=null?a:0}).commit();void d("WAWebUserPrefsGeneral").clearOfflineNotificationContentEngagement()}d("WAWebWamPrivateStatsUtils").logDailyPrivateStatsTestEvents();e=d("WAWebDailyAggregatedStatsCollection").DailyAggregatedStatsCollection.toArray().filter(function(a){return a.shouldBeSubmitted()});d("WAWebDailyAggregatedStatsCollection").DailyAggregatedStatsCollection.remove(e);e.forEach(function(a){var b=new(d("WAWebPttDailyWamEvent").PttDailyWamEvent)({pttCancelBroadcast:a.pttCancelBroadcast,pttCancelGroup:a.pttCancelGroup,pttCancelIndividual:a.pttCancelIndividual,pttCancelNewsletter:a.pttCancelNewsletter,pttDraftReviewBroadcast:a.pttDraftReviewBroadcast,pttDraftReviewGroup:a.pttDraftReviewGroup,pttDraftReviewIndividual:a.pttDraftReviewIndividual,pttDraftReviewNewsletter:a.pttDraftReviewNewsletter,pttFastplaybackBroadcast:a.pttFastplaybackBroadcast,pttFastplaybackGroup:a.pttFastplaybackGroup,pttFastplaybackIndividual:a.pttFastplaybackIndividual,pttFastplaybackNewsletter:a.pttFastplaybackNewsletter,pttLockBroadcast:a.pttLockBroadcast,pttLockGroup:a.pttLockGroup,pttLockIndividual:a.pttLockIndividual,pttLockNewsletter:a.pttLockNewsletter,pttOutOfChatBroadcast:a.pttOutOfChatBroadcast,pttOutOfChatGroup:a.pttOutOfChatGroup,pttOutOfChatIndividual:a.pttOutOfChatIndividual,pttOutOfChatNewsletter:a.pttOutOfChatNewsletter,pttPlaybackBroadcast:a.pttPlaybackBroadcast,pttPlaybackGroup:a.pttPlaybackGroup,pttPlaybackIndividual:a.pttPlaybackIndividual,pttPlaybackNewsletter:a.pttPlaybackNewsletter,pttRecordBroadcast:a.pttRecordBroadcast,pttRecordGroup:a.pttRecordGroup,pttRecordIndividual:a.pttRecordIndividual,pttRecordNewsletter:a.pttRecordNewsletter,pttSendBroadcast:a.pttSendBroadcast,pttSendGroup:a.pttSendGroup,pttSendIndividual:a.pttSendIndividual,pttSendNewsletter:a.pttSendNewsletter,pttPausedRecordBroadcast:a.pttPausedRecordBroadcast,pttPausedRecordGroup:a.pttPausedRecordGroup,pttPausedRecordIndividual:a.pttPausedRecordIndividual,pttPausedRecordNewsletter:a.pttPausedRecordNewsletter,pttStopTapBroadcast:a.pttStopTapBroadcast,pttStopTapGroup:a.pttStopTapGroup,pttStopTapIndividual:a.pttStopTapIndividual,pttStopTapNewsletter:a.pttStopTapNewsletter});b.commit();j(a);new(d("WAWebCommunityTabActionWamEvent").CommunityTabActionWamEvent)({communityTabGroupNavigations:a.communityTabGroupNavigations,communityTabToHomeViews:a.communityTabToHomeViews,communityTabViews:a.communityTabViews,communityTabViewsViaContextMenu:a.communityTabViewsViaContextMenu}).commit();a.communityHome!=null&&Object.keys(a.communityHome).forEach(function(b){var e=c("WAWebWid").user(b);if(e==null)return;b=a.communityHome[b];var f=b.communityHomeGroupDiscoveries,g=b.communityHomeGroupJoins,h=b.communityHomeGroupNavigations;b=b.communityHomeViews;new(d("WAWebCommunityHomeActionWamEvent").CommunityHomeActionWamEvent)({communityHomeId:e,communityHomeGroupDiscoveries:f,communityHomeGroupJoins:g,communityHomeGroupNavigations:h,communityHomeViews:b}).commit()});a.pnhCagActions!=null&&Object.keys(a.pnhCagActions).forEach(function(b){var c=a.pnhCagActions[b],e=c.pnhIndicatorClicksChat,f=c.pnhIndicatorClicksInfoScreen,g=c.reactionDeleteCount;c=c.reactionOpenTrayCount;new(d("WAWebPnhDailyWamEvent").PnhDailyWamEvent)({communityId:b,pnhIndicatorClicksChat:e,pnhIndicatorClicksInfoScreen:f,reactionDeleteCount:g,reactionOpenTrayCount:c,typeOfGroup:d("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM.DEFAULT_SUBGROUP}).commit()});a.pnhCtwaActions!=null&&Object.keys(a.pnhCtwaActions).forEach(function(b){new(d("WAWebPnhDailyCtwaWamEvent").PnhDailyCtwaWamEvent)({threadDs:d("WAWebChatThreadLoggingUtils").getThreadDs(a.startTime),threadId:b,matMessagesReceived:a.pnhCtwaActions[b]}).commit()});b=new(d("WAWebKeepInChatNotifWamEvent").KeepInChatNotifWamEvent)({kicGroupNotificationTaps:a.kicGroupNotificationTaps,kicGroupNotifications:a.kicGroupNotifications,kicNotificationTaps:a.kicNotificationTaps,kicNotifications:a.kicNotifications});b.commit();d("WAWebABProps").getABPropConfigValue("single_emoji_logging_enabled")&&new(d("WAWebWaFsSingleEmojiMessageDailyWamEvent").WaFsSingleEmojiMessageDailyWamEvent)({animatedEmojiSendCnt:a.animatedEmojiSend,emojiReplyCount:a.emojiReply,singleEmojiSendCnt:a.singleEmojiSend}).commit();d("WAWebSubmitChatLockDailyStats").submitChatLockDailyStats(a)});void new(d("WAWebWebDynamicSamplingTestEventWithoutSamplingWamEvent").WebDynamicSamplingTestEventWithoutSamplingWamEvent)().commit();void new(d("WAWebWebDynamicSamplingTestEventWithSamplingWamEvent").WebDynamicSamplingTestEventWithSamplingWamEvent)().commit()});return l.apply(this,arguments)}function m(){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebUserPrefsInfoStore").deviceInfo.get());return{languageCode:a.lg,locationCode:a.lc,osBuildNumber:a.osBuild,simMcc:parseInt(a.mcc,10),simMnc:parseInt(a.mnc,10)}});return n.apply(this,arguments)}function o(){var a=[];d("WAWebUserPrefsGeneral").getContactsDbReadIsUsingLid()&&a.push("con");(!c("gkx")("26258")||d("WAWebABProps").getABPropConfigValue("lid_migration_daily_logging_enabled"))&&(d("WAWebSingleSignalSession").isUsingAccountIdentifierForSignalStorage()&&(a.push("id"),a.push("ss"),a.push("sk")));return{completedMigrations:a.join(",")}}function p(){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a,b=d("WAWebUserPrefsGeneral").getUserPrivacySettings(),c={receiptsEnabled:b.readReceipts!=="none"},e=(yield d("WAWebApiPrivacyDisallowedList").queryDisallowedLists());c.privacySettingsAbout=r(b.about);c.privacySettingsAboutExceptNum=b.about==="contact_blacklist"?s((a=e.about)==null?void 0:a.disallowedList.length):null;c.privacySettingsGroups=r(b.groupAdd);c.privacySettingsGroupsExceptNum=b.groupAdd==="contact_blacklist"?s((a=e.groupadd)==null?void 0:a.disallowedList.length):null;c.privacySettingsLastSeen=r(b.lastSeen);c.privacySettingsLastSeenExceptNum=b.lastSeen==="contact_blacklist"?s((a=e.last)==null?void 0:a.disallowedList.length):null;c.privacySettingsProfilePhoto=r(b.profilePicture);c.privacySettingsProfilePhotoExceptNum=b.profilePicture==="contact_blacklist"?s((a=e.profile)==null?void 0:a.disallowedList.length):null;b=d("WAWebEphemeralityResolver").getEphemeralDurationForUser(d("WAWebContactCollection").ContactCollection.getMeContact());c.defaultDisappearingDuration=(e=b)!=null?e:0;if(d("WAWebABProps").getABPropConfigValue("dm_initiator_trigger_daily_logs")){c.isDefaultDisappearingMessagingUser=c.defaultDisappearingDuration!==0;a=(yield d("WAWebApiPrivacyEphemerality").queryEphemeralityDailyLogInfo());b=a.isEphemeralMessagingUser;e=a.countEphemeralThreadsEnabledByMe;a=a.countEphemeralThreads;c.isEphemeralMessagingUser=b;c.countEphemeralThreads=a;c.countEphemeralThreadsEnabledByMe=e}return c});return q.apply(this,arguments)}function r(a){if(a==null)return null;switch(a){case"all":return d("WAWebWamEnumPrivacySettingsValueType").PRIVACY_SETTINGS_VALUE_TYPE.EVERYONE;case"contacts":return d("WAWebWamEnumPrivacySettingsValueType").PRIVACY_SETTINGS_VALUE_TYPE.MY_CONTACTS;case"contact_blacklist":return d("WAWebWamEnumPrivacySettingsValueType").PRIVACY_SETTINGS_VALUE_TYPE.MY_CONTACTS_EXCEPT;case"none":return d("WAWebWamEnumPrivacySettingsValueType").PRIVACY_SETTINGS_VALUE_TYPE.NOBODY}}function s(a){if(a==null)return null;if(a===0)return d("WAWebWamEnumPrivacySettingsContactsBuckets").PRIVACY_SETTINGS_CONTACTS_BUCKETS.B0;if(a<5)return d("WAWebWamEnumPrivacySettingsContactsBuckets").PRIVACY_SETTINGS_CONTACTS_BUCKETS.B1;if(a<10)return d("WAWebWamEnumPrivacySettingsContactsBuckets").PRIVACY_SETTINGS_CONTACTS_BUCKETS.B5;if(a<15)return d("WAWebWamEnumPrivacySettingsContactsBuckets").PRIVACY_SETTINGS_CONTACTS_BUCKETS.B10;if(a<20)return d("WAWebWamEnumPrivacySettingsContactsBuckets").PRIVACY_SETTINGS_CONTACTS_BUCKETS.B15;if(a<30)return d("WAWebWamEnumPrivacySettingsContactsBuckets").PRIVACY_SETTINGS_CONTACTS_BUCKETS.B20;if(a<40)return d("WAWebWamEnumPrivacySettingsContactsBuckets").PRIVACY_SETTINGS_CONTACTS_BUCKETS.B30;if(a<50)return d("WAWebWamEnumPrivacySettingsContactsBuckets").PRIVACY_SETTINGS_CONTACTS_BUCKETS.B40;if(a<60)return d("WAWebWamEnumPrivacySettingsContactsBuckets").PRIVACY_SETTINGS_CONTACTS_BUCKETS.B50;if(a<70)return d("WAWebWamEnumPrivacySettingsContactsBuckets").PRIVACY_SETTINGS_CONTACTS_BUCKETS.B60;if(a<80)return d("WAWebWamEnumPrivacySettingsContactsBuckets").PRIVACY_SETTINGS_CONTACTS_BUCKETS.B70;if(a<90)return d("WAWebWamEnumPrivacySettingsContactsBuckets").PRIVACY_SETTINGS_CONTACTS_BUCKETS.B80;return a<100?d("WAWebWamEnumPrivacySettingsContactsBuckets").PRIVACY_SETTINGS_CONTACTS_BUCKETS.B90:d("WAWebWamEnumPrivacySettingsContactsBuckets").PRIVACY_SETTINGS_CONTACTS_BUCKETS.B100}function t(){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=c("WAWebLidAwareContactsDB").equals(["isAddressBookContact"],1).then(function(a){return a.filter(function(a){return!c("WAWebWid").isLid(a.id)||d("WAWebLidContactsGatingUtils").isLidContactOneOnOneChatEnabled()}).length}),e=d("WAStorageEstimator").estimateStorage(),f=d("WAWebMediaStore").LruMediaStore.count(),g=c("WAWebLidAwareContactsDB").count(),i=d("WAWebContactCollection").ContactCollection.getFilteredContacts({includeLidContacts:d("WAWebLidContactsGatingUtils").isLidContactOneOnOneChatEnabled()}).length;e=(yield (h||(h=b("Promise"))).all([e,a,f,g]));a=e[0];f=e[1];g=e[2];e=e[3];var j=0,k=0,l=0;if(a.success){a=a.value;var m=a.quota;a=a.usage;j=m-a;k=m;l=a}return{addressbookWhatsappSize:A(f,10),storageAvailSize:A(j,100),storageTotalSize:A(k,100),storageUsed:A(l,100),mediaFolderFileCount:g,webcContactsTableSize:A(e,10),webcFilteredContactsSize:i}});return u.apply(this,arguments)}function v(){return d("WAWebEstimateFtsStorageApi").getEstimatedFTSDbSize()}function w(){var a=d("WAWebWamEnumNotificationSettingType").NOTIFICATION_SETTING_TYPE.UNKNOWN;if(window.Notification!=null)switch(window.Notification.permission){case d("WAWebNotificationConstants").PERMISSION_ALLOWED:a=d("WAWebWamEnumNotificationSettingType").NOTIFICATION_SETTING_TYPE.ALLOWED;break;case d("WAWebNotificationConstants").PERMISSION_DENIED:a=d("WAWebWamEnumNotificationSettingType").NOTIFICATION_SETTING_TYPE.BLOCKED;break;default:a=d("WAWebWamEnumNotificationSettingType").NOTIFICATION_SETTING_TYPE.UNKNOWN}var b;d("WAWebContactManagementGating").contactManagementEnabled()&&(b=d("WAWebUserPrefsContactManagement").getSyncToAddressbookDefaultSetting());return{osNotificationSetting:a,isContactSyncToOsDefaultOn:b}}function x(){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=[],b=[],c=window.navigator.mediaCapabilities;if(c!=null){var d={width:800,height:600,bitrate:1e4,framerate:30},e={type:"record"},f={type:"file"},g={contentType:'video/mp4; codecs="avc1.42000a"'},h={contentType:'video/mp4; codecs="hev1.1.6.L93.B0"'},i={contentType:'video/mp4; codecs="av01.0.00M.08"'},j={contentType:'video/mp4; codecs="vp09.00.51.08.01.01.01.01.00"'},k=babelHelpers["extends"]({},e,{video:babelHelpers["extends"]({},g,d)}),l=babelHelpers["extends"]({},e,{video:babelHelpers["extends"]({},h,d)}),m=babelHelpers["extends"]({},e,{video:babelHelpers["extends"]({},i,d)});e=babelHelpers["extends"]({},e,{video:babelHelpers["extends"]({},j,d)});g=babelHelpers["extends"]({},f,{video:babelHelpers["extends"]({},g,d)});h=babelHelpers["extends"]({},f,{video:babelHelpers["extends"]({},h,d)});i=babelHelpers["extends"]({},f,{video:babelHelpers["extends"]({},i,d)});f=babelHelpers["extends"]({},f,{video:babelHelpers["extends"]({},j,d)});if(c.encodingInfo!=null){try{(yield c.encodingInfo(k)).supported&&a.push("avc")}catch(a){}try{(yield c.encodingInfo(l)).supported&&a.push("hevc")}catch(a){}try{(yield c.encodingInfo(m)).supported&&a.push("av1")}catch(a){}try{(yield c.encodingInfo(e)).supported&&a.push("vp9")}catch(a){}}if(c.decodingInfo!=null){try{(yield c.decodingInfo(g)).supported&&b.push("avc")}catch(a){}try{(yield c.decodingInfo(h)).supported&&b.push("hevc")}catch(a){}try{(yield c.decodingInfo(i)).supported&&b.push("av1")}catch(a){}try{(yield c.decodingInfo(f)).supported&&b.push("vp9")}catch(a){}}}return{supportedEncoders:a.join(","),supportedDecoders:b.join(",")}});return y.apply(this,arguments)}function z(){return{screenAutoLockDuration:d("WAWebUserPrefsScreenLock").getScreenLockDurationForLogging()}}function A(a,b){return c("gkx")("26258")?Math.round(a/b)*b:a}g.logDailyStats=a}),98);
__d("WAWebLogDailyStatsJob",["WAJobOrchestratorTypes","WAWebOrchestratorNonPersistedJob","WAWebTasksDailyStatsTask"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("logDailyStats",function(a){return d("WAWebTasksDailyStatsTask").logDailyStats()},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT}).waitUntilCompleted()}g.logDailyStatsJob=a}),98);
__d("WAWebWamEnumActiveTimeAfterPairing",[],(function(a,b,c,d,e,f){a=Object.freeze({MINS_10:1,MINS_20:2,MINS_40:3,MINS_60:4,MINS_5:5});f.ACTIVE_TIME_AFTER_PAIRING=a}),66);
__d("WAWebWamEnumMdHistorySyncStatusResult",[],(function(a,b,c,d,e,f){a=Object.freeze({SUCCESS:1,UNFINISHED:2,FAIL_TO_DOWNLOAD:3,MISSING_CHUNK:4,PROTOBUF_ERROR:5,FAIL_TO_STORE:6,OTHER_ERROR:7,IN_PROGRESS:8,FAIL_TO_RECEIVE:9,FAIL_TO_STORE_CHUNK:10,FAIL_TO_FETCH:11,FAIL_TO_PREPROCESS:12,FAIL_TO_ENCRYPT:13});f.MD_HISTORY_SYNC_STATUS_RESULT=a}),66);
__d("WAWebMdBootstrapHistorySyncStatusAfterPairingWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumActiveTimeAfterPairing","WAWebWamEnumMdBootstrapHistoryPayloadType","WAWebWamEnumMdHistorySyncStatusResult"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MdBootstrapHistorySyncStatusAfterPairing:[4652,{activeTimeAfterPairing:[1,d("WAWebWamEnumActiveTimeAfterPairing").ACTIVE_TIME_AFTER_PAIRING],isLoopRunning:[12,a.TYPES.BOOLEAN],lastProcessedNotificationChunkOrder:[2,a.TYPES.INTEGER],lastProcessedNotificationChunkProgress:[3,a.TYPES.INTEGER],mdBootstrapHistoryPayloadType:[4,d("WAWebWamEnumMdBootstrapHistoryPayloadType").MD_BOOTSTRAP_HISTORY_PAYLOAD_TYPE],mdHistorySyncStatusResult:[5,d("WAWebWamEnumMdHistorySyncStatusResult").MD_HISTORY_SYNC_STATUS_RESULT],mdSessionId:[6,a.TYPES.STRING],mdTimestamp:[7,a.TYPES.INTEGER],missingNotificationCount:[8,a.TYPES.INTEGER],nextNotificationChunkOrder:[9,a.TYPES.INTEGER],totalProcessedMessageCount:[10,a.TYPES.INTEGER],unprocessedNotificationCount:[11,a.TYPES.INTEGER]},[1,1,1],"regular"]},{MdBootstrapHistorySyncStatusAfterPairing:[]});g.MdBootstrapHistorySyncStatusAfterPairingWamEvent=b}),98);
__d("WAWebLogHistorySyncStatusAfterPairingJob",["Promise","WAJobOrchestratorTypes","WALogger","WATimeUtils","WAWebApiHistorySyncNotification","WAWebHistorySyncNotificationUtils","WAWebMdBootstrapHistorySyncStatusAfterPairingWamEvent","WAWebOrchestratorNonPersistedJob","WAWebSyncBootstrap","WAWebSyncdMdSyncFieldstatMeta","WAWebUserPrefsHistorySync","WAWebUserPrefsTypes","WAWebWamEnumActiveTimeAfterPairing","WAWebWamEnumMdBootstrapHistoryPayloadType","WAWebWamEnumMdHistorySyncStatusResult","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] do not log status as no requirment meets"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] log status for 5 minutes after pairing"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] log status for 10 minutes after pairing"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] log status for 20 minutes after pairing"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] log status for 40 minutes after pairing"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] log status for 60 minutes after pairing"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] skip sync status logging as we've logged for more than 5 times"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] skip sync status logging as it's too soon after pairing"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] log history sync status with time after pairing "," mins and logging count ",""]);q=function(){return a};return a}function a(a,c){a=(d("WATimeUtils").unixTime()-a)/60;d("WALogger").DEV(q(),a,c);if(a<5){d("WALogger").LOG(p());return(h||(h=b("Promise"))).resolve()}return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("logHistorySyncStatusAfterPairing",function(a){return r(a.timeAfterPairingMins,a.loggingCount)},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW}).waitUntilCompleted({timeAfterPairingMins:a,loggingCount:c})}function r(a,b){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b>=5){d("WALogger").LOG(o());return}if(a>=60){d("WALogger").LOG(n());yield t(d("WAWebWamEnumActiveTimeAfterPairing").ACTIVE_TIME_AFTER_PAIRING.MINS_60);void d("WAWebUserPrefsHistorySync").setHistorySyncStatusAfterPairingLoggingCount(5);return}if(b<4&&a>=40){d("WALogger").LOG(m());yield t(d("WAWebWamEnumActiveTimeAfterPairing").ACTIVE_TIME_AFTER_PAIRING.MINS_40);void d("WAWebUserPrefsHistorySync").setHistorySyncStatusAfterPairingLoggingCount(4);return}if(b<3&&a>=20){d("WALogger").LOG(l());yield t(d("WAWebWamEnumActiveTimeAfterPairing").ACTIVE_TIME_AFTER_PAIRING.MINS_20);void d("WAWebUserPrefsHistorySync").setHistorySyncStatusAfterPairingLoggingCount(3);return}if(b<2&&a>=10){d("WALogger").LOG(k());yield t(d("WAWebWamEnumActiveTimeAfterPairing").ACTIVE_TIME_AFTER_PAIRING.MINS_10);void d("WAWebUserPrefsHistorySync").setHistorySyncStatusAfterPairingLoggingCount(2);return}if(b<1&&a>=5){d("WALogger").LOG(j());yield t(d("WAWebWamEnumActiveTimeAfterPairing").ACTIVE_TIME_AFTER_PAIRING.MINS_5);void d("WAWebUserPrefsHistorySync").setHistorySyncStatusAfterPairingLoggingCount(1);return}d("WALogger").LOG(i())});return s.apply(this,arguments)}function t(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield v(a)});return u.apply(this,arguments)}function v(a){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebSyncdMdSyncFieldstatMeta").MdSyncFieldStatsMeta.getMdSessionId());b=new(d("WAWebMdBootstrapHistorySyncStatusAfterPairingWamEvent").MdBootstrapHistorySyncStatusAfterPairingWamEvent)({mdBootstrapHistoryPayloadType:d("WAWebWamEnumMdBootstrapHistoryPayloadType").MD_BOOTSTRAP_HISTORY_PAYLOAD_TYPE.RECENT_HISTORY,mdSessionId:b,mdTimestamp:d("WATimeUtils").unixTimeMs(),activeTimeAfterPairing:a,isLoopRunning:c("WAWebSyncBootstrap").getIsHistorySyncRunning()});a=(yield d("WAWebUserPrefsHistorySync").getLastHistoryRecentSyncedChunk());var e=a!=null?a.chunkOrder:-1,f=a!=null?a.progress:-1;b.lastProcessedNotificationChunkOrder=e;b.lastProcessedNotificationChunkProgress=f;f=(f=(yield d("WAWebUserPrefsHistorySync").getHistorySyncTotalProcessedMessageCount()))!=null?f:0;b.totalProcessedMessageCount=f;f=(yield d("WAWebUserPrefsHistorySync").getHistorySyncStatus());if((f==null?void 0:f.recentCompleted)===!0){b.mdHistorySyncStatusResult=d("WAWebWamEnumMdHistorySyncStatusResult").MD_HISTORY_SYNC_STATUS_RESULT.SUCCESS;b.commit();return}f=(yield d("WAWebHistorySyncNotificationUtils").getUnprocessedRecentSyncNotifications());var g=f.length;b.unprocessedNotificationCount=g;f=g>0?(g=f[0].chunkOrder)!=null?g:0:-1;b.nextNotificationChunkOrder=f;if(d("WAWebApiHistorySyncNotification").inFlightChunk.size>0){b.mdHistorySyncStatusResult=d("WAWebWamEnumMdHistorySyncStatusResult").MD_HISTORY_SYNC_STATUS_RESULT.IN_PROGRESS;b.commit();return}g=a?e+1:1;f=(yield d("WAWebUserPrefsHistorySync").getRecentSyncSingleChunkStatus());a=x(f,g);b.mdHistorySyncStatusResult=a;b.commit()});return w.apply(this,arguments)}function x(a,b){if(a==null||a[b]==null)return d("WAWebWamEnumMdHistorySyncStatusResult").MD_HISTORY_SYNC_STATUS_RESULT.FAIL_TO_RECEIVE;switch(a[b]){case d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.RECEIVED:return d("WAWebWamEnumMdHistorySyncStatusResult").MD_HISTORY_SYNC_STATUS_RESULT.FAIL_TO_STORE_CHUNK;case d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.NOTIFICATION_STORED:return d("WAWebWamEnumMdHistorySyncStatusResult").MD_HISTORY_SYNC_STATUS_RESULT.FAIL_TO_FETCH;case d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.DOWNLOADING:return d("WAWebWamEnumMdHistorySyncStatusResult").MD_HISTORY_SYNC_STATUS_RESULT.FAIL_TO_DOWNLOAD;case d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.DOWNLOADED:return d("WAWebWamEnumMdHistorySyncStatusResult").MD_HISTORY_SYNC_STATUS_RESULT.PROTOBUF_ERROR;case d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.DECODED:return d("WAWebWamEnumMdHistorySyncStatusResult").MD_HISTORY_SYNC_STATUS_RESULT.FAIL_TO_PREPROCESS;case d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.MESSAGE_PREPROCESSED:return d("WAWebWamEnumMdHistorySyncStatusResult").MD_HISTORY_SYNC_STATUS_RESULT.FAIL_TO_ENCRYPT;case d("WAWebUserPrefsTypes").HistorySyncSingleChunkStatusType.ENCRYPTED:return d("WAWebWamEnumMdHistorySyncStatusResult").MD_HISTORY_SYNC_STATUS_RESULT.FAIL_TO_STORE;default:return d("WAWebWamEnumMdHistorySyncStatusResult").MD_HISTORY_SYNC_STATUS_RESULT.OTHER_ERROR}}g.logHistorySyncStatusAfterPairingJob=a;g.logHistorySyncStatusAfterPairing=r;g.commitHistorySyncStatusData=t}),98);
__d("WAWebNewsletterCleanupTasks",["WAWebBackendApi","WAWebCommonNewsletterEnums","WAWebNewsletterDeleteChatJob","WAWebNewsletterStorageUtils","WAWebSchemaNewsletterMetadata","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=d("WAWebNewsletterStorageUtils").mapNewsletterMembershipTypeForStorage(d("WAWebCommonNewsletterEnums").NewsletterMembershipType.Guest);function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebBackendApi").frontendSendAndReceive("getActiveNewsletter")),b=a==null?void 0:a.toJid();a=(yield d("WAWebSchemaNewsletterMetadata").getNewsletterMetadataTable().all());a=a.filter(function(a){return a.membershipType===h&&a.id!==b}).map(function(a){return a.id});yield d("WAWebNewsletterDeleteChatJob").bulkDeleteNewsletterChats(a.map(d("WAWebWidFactory").createWid))});return i.apply(this,arguments)}g.deletePreviewNewsletters=a}),98);
__d("WAWebWebDbVersionNonAnonymousWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebDbNameType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebDbVersionNonAnonymous:[4816,{webDbName:[1,d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE],webDbVersionNumber:[2,d("WAWebWamCodegenUtils").TYPES.INTEGER]},[1,1,20],"regular"]},{WebDbVersionNonAnonymous:[]});g.WebDbVersionNonAnonymousWamEvent=a}),98);
__d("WAWebReportDbVerionsJob",["WAJobOrchestratorTypes","WAWebLocalSchemaVersions","WAWebOrchestratorNonPersistedJob","WAWebSchemaVersions","WAWebWebDbVersionNonAnonymousWamEvent","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("reportDbVersions",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebLocalSchemaVersions").getLocalSchemaVersions());a.forEach(function(a,b){new(d("WAWebWebDbVersionNonAnonymousWamEvent").WebDbVersionNonAnonymousWamEvent)({webDbName:d("WAWebSchemaVersions").convertDBName(b),webDbVersionNumber:a}).commit()})}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT,maxTimeoutMs:1e3*30}).waitUntilCompleted()}g.reportDbVersionsJob=a}),98);
__d("WAWebRestartRecentSyncJob",["Promise","WAJobOrchestratorTypes","WALogger","WAWebHistorySyncNotificationUtils","WAWebOrchestratorNonPersistedJob","WAWebProtobufsHistorySync.pb","WAWebSchemaHistorySyncNotification","WAWebSyncBootstrap","WAWebSyncGatingUtils","WAWebUserPrefsHistorySync","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Restart recent sync job"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Unprocessed notifications length: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] No unprocessed notifications found, skip restart recent sync job"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] Recent sync already completed, skip restart recent sync job"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] History sync is running, skip restart recent sync job"]);m=function(){return a};return a}function a(){return!d("WAWebSyncGatingUtils").isHistorySyncHandlingRestartV2Enabled()?(h||(h=b("Promise"))).resolve():d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("restartRecentSyncJob",function(){return n()},{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW}).waitUntilCompleted()}function n(){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(c("WAWebSyncBootstrap").getIsHistorySyncRunning()){d("WALogger").LOG(m());return}var a=(yield d("WAWebUserPrefsHistorySync").getHistorySyncStatus());if((a==null?void 0:a.recentCompleted)===!0){d("WALogger").LOG(l());return}a=(yield d("WAWebSchemaHistorySyncNotification").getHistorySyncNotificationTable().equals(["processed"],0,{shouldDecrypt:!1}).then(function(a){return a.filter(function(a){return a.syncType===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.RECENT||a.syncType===d("WAWebProtobufsHistorySync.pb").HistorySync$HistorySyncType.FULL})}));if(a.length===0){d("WALogger").LOG(k());return}d("WALogger").LOG(j(),a.length);d("WALogger").LOG(i());void c("WAWebSyncBootstrap").continueProgressiveHistorySyncProcessingV2(d("WAWebHistorySyncNotificationUtils").HistorySyncScheduleSource.ManualRestart)});return o.apply(this,arguments)}g.restartRecentSyncJob=a}),98);
__d("WAWebSyncdKeyCountWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({SyncdKeyCount:[3978,{keysUsedInSnapshotCount:[1,a.TYPES.INTEGER],p80MuationsPerKey:[2,a.TYPES.INTEGER],p95MuationsPerKey:[3,a.TYPES.INTEGER],syncdSessionLengthDays:[4,a.TYPES.INTEGER],totalKeyCount:[5,a.TYPES.INTEGER]},[1,1,1],"regular"]},{SyncdKeyCount:[]});g.SyncdKeyCountWamEvent=b}),98);
__d("WAWebWamEnumMutationCountBucket",[],(function(a,b,c,d,e,f){a=Object.freeze({ZERO:1,ONE:2,LT10:3,LT100:4,LT500:5,LT1K:6,LT5K:7,GTE5K:8});f.MUTATION_COUNT_BUCKET=a}),66);
__d("WAWebSyncdWamUtils",["WABase64","WAGetSyncKey","WASyncdConst","WATimeUtils","WAWebSchemaSyncActions","WAWebWamEnumMutationCountBucket","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function a(){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=new Map(),b=(yield d("WAWebSchemaSyncActions").getSyncActionsTable().all());b.map(function(b){var c,e=JSON.parse(b.index)[0];c=(c=a.get(e))!=null?c:{action:e,applied:0,invalid:0,orphan:0,unsupported:0,failed:0};switch(b.actionState){case d("WASyncdConst").SyncActionState.Success:case d("WASyncdConst").SyncActionState.Skipped:c.applied++;break;case d("WASyncdConst").SyncActionState.Malformed:c.invalid++;break;case d("WASyncdConst").SyncActionState.Orphan:c.orphan++;break;case d("WASyncdConst").SyncActionState.Unsupported:c.unsupported++;break;case d("WASyncdConst").SyncActionState.Failed:c.failed++;break}a.set(e,c)});return a});return h.apply(this,arguments)}function e(a){if(a<0)throw c("err")("cannot convert negative number to a bucket");else if(a===0)return d("WAWebWamEnumMutationCountBucket").MUTATION_COUNT_BUCKET.ZERO;else if(a===1)return d("WAWebWamEnumMutationCountBucket").MUTATION_COUNT_BUCKET.ONE;else if(a<10)return d("WAWebWamEnumMutationCountBucket").MUTATION_COUNT_BUCKET.LT10;else if(a<100)return d("WAWebWamEnumMutationCountBucket").MUTATION_COUNT_BUCKET.LT100;else if(a<500)return d("WAWebWamEnumMutationCountBucket").MUTATION_COUNT_BUCKET.LT500;else if(a<1e3)return d("WAWebWamEnumMutationCountBucket").MUTATION_COUNT_BUCKET.LT1K;else if(a<5e3)return d("WAWebWamEnumMutationCountBucket").MUTATION_COUNT_BUCKET.LT5K;else return d("WAWebWamEnumMutationCountBucket").MUTATION_COUNT_BUCKET.GTE5K}function i(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebSchemaSyncActions").getSyncActionsTable().get('["primary_version","session_start"]'));return a==null?void 0:a.timestamp});return j.apply(this,arguments)}function f(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAGetSyncKey").getAllSyncKeysInTransaction()),b=(yield d("WAWebSchemaSyncActions").getSyncActionsTable().all()),c=(yield i());c=c==null?void 0:Math.round((d("WATimeUtils").unixTimeMs()-c)/(1e3*3600*24));return l(a,b,c)});return k.apply(this,arguments)}function l(a,b,c){b=b.map(function(a){return d("WABase64").encodeB64(a.keyId)});var e=Array.from(new Set(b)),f=new Map();for(b of b)f.set(b,(f.get(b)||0)+1);b=Array.from(f.values()).sort();f=b.length;var g=Math.floor(f*.8)-1;f=Math.floor(f*.95)-1;return{totalKeyCount:a.length,keysUsedInSnapshotCount:e.length,p80MuationsPerKey:b[g],p95MuationsPerKey:b[f],syncdSessionLengthDays:c}}g.generateActionStatCounts=a;g.convertToBucket=e;g.getKeyStats=f;g.getKeyStatsInternal=l}),98);
__d("WAWebSyncdReportKeyStatsJob",["WAJobOrchestratorTypes","WAWebOrchestratorNonPersistedJob","WAWebSyncdKeyCountWamEvent","WAWebSyncdWamUtils","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("reportSyncdKeyStats",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(c("gkx")("26258"))return;var a=(yield d("WAWebSyncdWamUtils").getKeyStats()),b={keysUsedInSnapshotCount:a.keysUsedInSnapshotCount,p80MuationsPerKey:a.p80MuationsPerKey,p95MuationsPerKey:a.p95MuationsPerKey,totalKeyCount:a.totalKeyCount};a.syncdSessionLengthDays!=null&&(b.syncdSessionLengthDays=a.syncdSessionLengthDays);new(d("WAWebSyncdKeyCountWamEvent").SyncdKeyCountWamEvent)(b).commit()}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT,maxTimeoutMs:1e3*30}).waitUntilCompleted()}g.reportSyncdKeyStatsJob=a}),98);
__d("WAWebMdAppStateSyncMutationStatsWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMutationCountBucket"],(function(a,b,c,d,e,f,g){b=d("WAWebWamCodegenUtils").defineEvents({MdAppStateSyncMutationStats:[3180,{applied:[1,(a=d("WAWebWamEnumMutationCountBucket")).MUTATION_COUNT_BUCKET],failed:[2,a.MUTATION_COUNT_BUCKET],invalid:[3,a.MUTATION_COUNT_BUCKET],orphan:[4,a.MUTATION_COUNT_BUCKET],syncdAction:[5,d("WAWebWamCodegenUtils").TYPES.STRING],unsupported:[6,a.MUTATION_COUNT_BUCKET]},[1,1,100],"private",0]},{MdAppStateSyncMutationStats:[]});g.MdAppStateSyncMutationStatsWamEvent=b}),98);
__d("WAWebSyncdReportSyncdStatJob",["WAJobOrchestratorTypes","WAWebMdAppStateSyncMutationStatsWamEvent","WAWebOrchestratorNonPersistedJob","WAWebSyncdWamUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("reportSyncdStats",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebSyncdWamUtils").generateActionStatCounts());for(a of a.values()){var b;new(d("WAWebMdAppStateSyncMutationStatsWamEvent").MdAppStateSyncMutationStatsWamEvent)({syncdAction:a.action,applied:(b=d("WAWebSyncdWamUtils")).convertToBucket(a.applied),invalid:b.convertToBucket(a.invalid),orphan:b.convertToBucket(a.orphan),unsupported:b.convertToBucket(a.unsupported),failed:b.convertToBucket(a.failed)}).commit()}}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT,maxTimeoutMs:1e3*30}).waitUntilCompleted()});return h.apply(this,arguments)}g.reportSyncdStatsJob=a}),98);
__d("WAWebSyncdRequestAllSyncdMissingKeysJob",["WAJobOrchestratorTypes","WASyncdHandleMissingKeys","WASyncdStoreMissingKeys","WAWebOrchestratorNonPersistedJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("requestAllSyncdMissingKeys",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WASyncdHandleMissingKeys").requestAllMissingKeys(),self.setTimeout(d("WASyncdStoreMissingKeys").setMissingKeyTimeoutInTransaction,1e3*20)}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT,maxTimeoutMs:1e3*30}).waitUntilCompleted()}g.requestAllSyncdMissingKeysJob=a}),98);
__d("WAWebSyncdSyncAllCollectionsJob",["WAJobOrchestratorTypes","WALogger","WASyncd","WASyncdConst","WATimeUtils","WAWebOrchestratorNonPersistedJob","WAWebUserPrefsAppStateSync","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: periodic sync for all collection"]);h=function(){return a};return a}function a(){return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("syncdSyncAllCollections",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;d("WALogger").LOG(h());yield d("WASyncd").markCollectionsForSync([(a=d("WASyncdConst")).CollectionName.CriticalBlock,a.CollectionName.CriticalUnblockLow,a.CollectionName.Regular,a.CollectionName.RegularLow,a.CollectionName.RegularHigh]);yield d("WAWebUserPrefsAppStateSync").setLastPeriodicAppStateSyncTs(d("WATimeUtils").unixTime())}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW,maxTimeoutMs:1e3*30}).waitUntilCompleted()}g.syncdSyncAllCollectionsJob=a}),98);
__d("WAWebTasksDefinitions",["$InternalEnum","Promise","WALogger","WASyncdAntiTampering","WATaskScheduler","WATimeUtils","WAWebABProps","WAWebABPropsLocalStorage","WAWebAbPropsSyncJob","WAWebApiChat","WAWebApiParticipantStore","WAWebApiTasksScheduledTime","WAWebApiTextStatus","WAWebBizGatingUtils","WAWebCleanUtmJob","WAWebContactSyncBridge","WAWebDBPurgeExpiredRecords","WAWebDBReportingTokenUtils","WAWebFetchQuickPromotions","WAWebLogDailyStatsJob","WAWebLogHistorySyncStatusAfterPairingJob","WAWebMessagingGatingUtils","WAWebMobilePlatforms","WAWebNewsletterCleanupTasks","WAWebNonAddressBookContactsJob","WAWebNonMessageDataRequestMediaHandlingUtils","WAWebPersistedJobDefinitions","WAWebPersistedJobManager","WAWebReportDbVerionsJob","WAWebRestartRecentSyncJob","WAWebSyncContactsJob","WAWebSyncdReportKeyStatsJob","WAWebSyncdReportSyncdStatJob","WAWebSyncdRequestAllSyncdMissingKeysJob","WAWebSyncdSyncAllCollectionsJob","WAWebUserPrefsHistorySync","WAWebUserPrefsMultiDevice","asyncToGeneratorRuntime","cr:4857","cr:4940","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["maybeRegisterTask: registering task ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchQuickPromotions: fetching quick promotions"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to cleanup reporting token table: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[history sync] do not schedule job for logging history sync status as we've logged for more than 4 times."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to clean expired UTM: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to delete the expired orphan reactions with error: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to delete the expired orphan add-on messages with error: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: syncdPeriodicSyncDays is 0, skipping sync"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncContacts: contact sync failed, error: ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to sync non-address book contacts with error: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["RotateKeyTask skip first run"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to log daily stats: ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to update the expired text status of contacts with error: ",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["Update expired text status skip first run"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to delete the expired TcTokens with error: ",""]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["CleanTcToken skip first run"]);x=function(){return a};return a}var y=b("$InternalEnum")({CLEAN_TC_TOKENS:"cleanTcTokens",LOG_DAILY_STATS:"logDailyStats",LOG_DB_ROW_COUNTS:"logDbRowCounts",ROTATE_KEY:"rotateKey",SYNC_AB_PROPS:"syncAbProps",SYNC_CONTACTS:"syncContacts",MONITOR_DB_STORAGE:"monitorDbStorage",REPORT_SYNCD_ACTION_STAT:"reportSyncdActionStat",LT_HASH_CHECK:"ltHashCheck",REQUEST_ALL_SYNCD_MISSING_KEYS:"requestAllSyncdMissingKeys",REPORT_SYNCD_KEY_STATS:"reportSyncdKeyStats",SYNCD_SYNC_ALL_COLLECTIONS:"syncdSyncAllCollections",CLEAN_ORPHAN_ADD_ONS:"cleanOrphanAddOns",CLEAN_PAST_PARTICIPANTS:"cleanPastParticipants",CLEAN_EXPIRED_UTM:"cleanExpiredUtm",SEND_NON_MESSAGE_DATA_REQUEST:"sendNonMessageDataRequest",LOG_HISTORY_SYNC_STATUS_AFTER_PAIRING:"logHistorySyncStatusAfterPairing",DELETE_NEWSLETTER_PREVIEW_CHATS:"deleteNewsletterPreviewChats",REPORT_DB_VERSIONS:"reportDbVersions",UPDATE_EXPIRED_TEXT_STATUS:"updateExpiredTextStatus",RESTART_RECENT_SYNC:"restartRecentSync",CLEANUP_REPORTING_TABLE:"cleanupReportingTable",FETCH_QUICK_PROMOTIONS:"fetchQuickPromotions"}),z=[y.CLEAN_TC_TOKENS,y.LOG_DAILY_STATS,y.ROTATE_KEY,y.SYNC_AB_PROPS,y.SYNC_CONTACTS,y.MONITOR_DB_STORAGE,y.REPORT_SYNCD_ACTION_STAT,y.LT_HASH_CHECK,y.REQUEST_ALL_SYNCD_MISSING_KEYS,y.REPORT_SYNCD_KEY_STATS,y.SYNCD_SYNC_ALL_COLLECTIONS,y.CLEAN_ORPHAN_ADD_ONS,y.CLEAN_EXPIRED_UTM,y.SEND_NON_MESSAGE_DATA_REQUEST,y.LOG_HISTORY_SYNC_STATUS_AFTER_PAIRING,y.DELETE_NEWSLETTER_PREVIEW_CHATS,y.REPORT_DB_VERSIONS,y.UPDATE_EXPIRED_TEXT_STATUS,y.RESTART_RECENT_SYNC,y.CLEANUP_REPORTING_TABLE],A=[y.FETCH_QUICK_PROMOTIONS],B=[y.LOG_DB_ROW_COUNTS];function C(a){switch(a){case y.MONITOR_DB_STORAGE:return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(c("gkx")("26258"))return d("WATaskScheduler").DO_NOT_RESCHEDULE;a=(yield b("cr:4857")==null?void 0:b("cr:4857").shouldMonitorDbStorageUsageJob());return a?d("WATimeUtils").HOUR_SECONDS:d("WATaskScheduler").DO_NOT_RESCHEDULE});return function(b){return a.apply(this,arguments)}}();case y.CLEAN_TC_TOKENS:return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a)d("WALogger").LOG(x());else try{yield d("WAWebApiChat").pruneExpiredTcTokens(),yield d("WAWebApiChat").pruneExpiredOrphanTcTokens()}catch(a){d("WALogger").ERROR(w(),a).verbose().devConsole(a)}return d("WATimeUtils").DAY_SECONDS});return function(b){return a.apply(this,arguments)}}();case y.UPDATE_EXPIRED_TEXT_STATUS:return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a)d("WALogger").LOG(v());else try{yield d("WAWebApiTextStatus").updateExpiredTextStatusOfContact()}catch(a){d("WALogger").ERROR(u(),a).verbose().devConsole(a)}return d("WATimeUtils").DAY_SECONDS});return function(b){return a.apply(this,arguments)}}();case y.LOG_DAILY_STATS:return function(){return d("WAWebLogDailyStatsJob").logDailyStatsJob()["catch"](function(a){d("WALogger").ERROR(t(),a).verbose().devConsole(a)}).then(function(){return d("WATimeUtils").DAY_SECONDS})};case y.LOG_DB_ROW_COUNTS:if(!c("gkx")("26258")){var e=120,f=7200;return function(){self.setTimeout(function(){b("cr:4940")==null?void 0:b("cr:4940").logStorageTableRowCounts()},e*1e3);return(h||(h=b("Promise"))).resolve(f)}}else break;case y.ROTATE_KEY:return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a?d("WALogger").LOG(s()):yield d("WAWebPersistedJobManager").getJobManager().waitUntilCompleted(d("WAWebPersistedJobDefinitions").jobSerializers.rotateKey());return 27*d("WATimeUtils").DAY_SECONDS});return function(b){return a.apply(this,arguments)}}();case y.SYNC_AB_PROPS:return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a||(yield d("WAWebAbPropsSyncJob").syncABPropsTask());return d("WAWebABPropsLocalStorage").getRefresh()});return function(b){return a.apply(this,arguments)}}();case y.SYNC_CONTACTS:return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!a){try{yield d("WAWebNonAddressBookContactsJob").getNonAddressBookContactsAndMarkAllContactsDirty()}catch(a){d("WALogger").ERROR(r(),a).verbose().devConsole(a)}try{yield d("WAWebContactSyncBridge").doFullContactSync()}catch(a){d("WALogger").ERROR(q(),a).verbose().tags("non-sad","contact-sync").sendLogs("syncContacts: contact sync failed")}}return d("WAWebSyncContactsJob").getContactSyncRefreshSeconds()});return function(b){return a.apply(this,arguments)}}();case y.REPORT_SYNCD_ACTION_STAT:return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a||(yield d("WAWebSyncdReportSyncdStatJob").reportSyncdStatsJob());return d("WATimeUtils").DAY_SECONDS});return function(b){return a.apply(this,arguments)}}();case y.LT_HASH_CHECK:return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebABProps").getABPropConfigValue("lthash_check_hours");if(b===0)return 24*d("WATimeUtils").HOUR_SECONDS;a||(yield d("WASyncdAntiTampering").checkLtHash("abc"));return b*d("WATimeUtils").HOUR_SECONDS});return function(b){return a.apply(this,arguments)}}();case y.REQUEST_ALL_SYNCD_MISSING_KEYS:return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a||(yield d("WAWebSyncdRequestAllSyncdMissingKeysJob").requestAllSyncdMissingKeysJob());return d("WATimeUtils").HOUR_SECONDS*6});return function(b){return a.apply(this,arguments)}}();case y.REPORT_SYNCD_KEY_STATS:return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a||(yield d("WAWebSyncdReportKeyStatsJob").reportSyncdKeyStatsJob());return c("gkx")("26258")?d("WATimeUtils").DAY_SECONDS*3:d("WATimeUtils").DAY_SECONDS});return function(b){return a.apply(this,arguments)}}();case y.SYNCD_SYNC_ALL_COLLECTIONS:return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebABProps").getABPropConfigValue("syncd_periodic_sync_days");if(b===0){d("WALogger").LOG(p());return d("WATimeUtils").DAY_SECONDS}a||(yield d("WAWebSyncdSyncAllCollectionsJob").syncdSyncAllCollectionsJob());return d("WATimeUtils").DAY_SECONDS*b});return function(b){return a.apply(this,arguments)}}();case y.CLEAN_ORPHAN_ADD_ONS:var g=30,i=90;return b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield d("WAWebDBPurgeExpiredRecords").purgeExpiredOrphanRecords(g,i)}catch(a){d("WALogger").ERROR(o(),a).verbose().devConsole(a)}return d("WATimeUtils").DAY_SECONDS});case y.CLEAN_PAST_PARTICIPANTS:return b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield d("WAWebApiParticipantStore").pruneExpiredPastParticipants()}catch(a){d("WALogger").ERROR(n(),a).verbose().devConsole(a)}return d("WATimeUtils").DAY_SECONDS});case y.CLEAN_EXPIRED_UTM:return function(){return!d("WAWebBizGatingUtils").isUtmTrackingEnabled()?(h||(h=b("Promise"))).resolve(d("WATaskScheduler").DO_NOT_RESCHEDULE):d("WAWebCleanUtmJob").cleanExpiredUtmJob()["catch"](function(a){d("WALogger").ERROR(m(),a).verbose().devConsole(a)}).then(function(){return d("WATimeUtils").DAY_SECONDS})};case y.SEND_NON_MESSAGE_DATA_REQUEST:return b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebNonMessageDataRequestMediaHandlingUtils").retryNonMessageDataRequestJob();return d("WATimeUtils").HOUR_SECONDS*23});case y.DELETE_NEWSLETTER_PREVIEW_CHATS:return b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebNewsletterCleanupTasks").deletePreviewNewsletters();return d("WATimeUtils").HOUR_SECONDS*4});case y.REPORT_DB_VERSIONS:return b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebReportDbVerionsJob").reportDbVersionsJob();return d("WATimeUtils").DAY_SECONDS*3});case y.LOG_HISTORY_SYNC_STATUS_AFTER_PAIRING:return b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebUserPrefsMultiDevice").getPairingTimestamp();if(a!=null){var b;b=(b=(yield d("WAWebUserPrefsHistorySync").getHistorySyncStatusAfterPairingLoggingCount()))!=null?b:0;if(b>=5){d("WALogger").LOG(l());return d("WATaskScheduler").DO_NOT_RESCHEDULE}yield d("WAWebLogHistorySyncStatusAfterPairingJob").logHistorySyncStatusAfterPairingJob(a,b);return b===0?d("WATimeUtils").MINUTE_SECONDS*5:d("WATimeUtils").MINUTE_SECONDS*10}return 10});case y.RESTART_RECENT_SYNC:return b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebUserPrefsMultiDevice").getPairingTimestamp();if(a!=null){a=(d("WATimeUtils").unixTime()-a)/60;a>=5&&(yield d("WAWebRestartRecentSyncJob").restartRecentSyncJob());return d("WATimeUtils").MINUTE_SECONDS*5}return 10});case y.CLEANUP_REPORTING_TABLE:return b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield d("WAWebDBReportingTokenUtils").cleanupReportingTable(d("WAWebMessagingGatingUtils").getReportingTagCleanupDays()),yield d("WAWebDBReportingTokenUtils").cleanupReportingTokenAndContent(d("WAWebMessagingGatingUtils").getReportingTokenCleanupDays())}catch(a){d("WALogger").ERROR(k(),a).tags("messaging","wa-ice","report-token").devConsole(a)}return d("WATimeUtils").DAY_SECONDS});case y.FETCH_QUICK_PROMOTIONS:return b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WALogger").LOG(j());yield d("WAWebFetchQuickPromotions").fetchQuickPromotions();return d("WAWebBizGatingUtils").qpGraphQLFetchIntervalMinutes()*d("WATimeUtils").MINUTE_SECONDS})}}function D(){return{scheduledTimeResolver:{get:function(a){return d("WAWebApiTasksScheduledTime").getTaskScheduledTime(String(a))},set:function(a,b){return d("WAWebApiTasksScheduledTime").updateTaskScheduledTime(String(a),b)}}}}function E(a){var b=C(a);b!=null&&(d("WALogger").LOG(i(),a),d("WATaskScheduler").registerTask(a,b))}function a(){d("WATaskScheduler").startScheduler(D()),z.forEach(E),d("WAWebMobilePlatforms").isSMB()&&A.forEach(E),c("gkx")("26258")||B.forEach(E)}g.TaskType=y;g.registerTasks=a}),98);
__d("WAWebJobLoadQuickPromotions",["Promise","WATaskScheduler","WAWebBackendApi","WAWebBizGatingUtils","WAWebCTWAConstants","WAWebFetchQuickPromotions","WAWebSchemaQuickPromotions","WAWebTasksDefinitions"],(function(a,b,c,d,e,f,g){var h;function a(a){return!d("WAWebBizGatingUtils").qpSDKProcessingEnabled()?(h||(h=b("Promise"))).resolve():d("WAWebBackendApi").frontendSendAndReceive("getUserLocale").then(function(b){return d("WAWebSchemaQuickPromotions").getQuickPromotionsTable().all().then(function(c){c.sort(function(a,b){return a.data.qpConfigPriority-b.data.qpConfigPriority});if(d("WAWebBizGatingUtils").qpGraphQLEnabled()){var e=d("WAWebBizGatingUtils").qpSurfaceIdsUsingGraphQL(),f=c.filter(function(a){if(a==null)return!1;var c=d("WAWebCTWAConstants").KNOWN_QP_SURFACES.get(a.surfaceId);if(c==null)return!1;c=e.has(c);return c&&a.locale!==b});if(f.length>0){if(a==="app-launch"){void d("WAWebFetchQuickPromotions").fetchQuickPromotions().then(function(){d("WATaskScheduler").rescheduleNow(d("WAWebTasksDefinitions").TaskType.FETCH_QUICK_PROMOTIONS)});return}if(a==="fetch-success")return;a}}d("WAWebBackendApi").frontendFireAndForget("loadedQuickPromotions",{promotions:c})})})}g.loadQuickPromotions=a}),98);
__d("WAWebJobUpdateQPSurfaces",["Promise","WALogger","WATimeUtils","WAWebCTWAConstants","WAWebJobLoadQuickPromotions","WAWebModelStorageUtils","WAWebOrchestratorNonPersistedJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateQPSurfaces: found duplicated surface"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateQPSurfaces: no surfaces"]);j=function(){return a};return a}function k(a){var b;a=(a=a.qpConfigPacing)==null?void 0:a.userInfo;return{impressions:(b=a==null?void 0:a.impressionCount)!=null?b:0,primaryClicks:(b=a==null?void 0:a.primaryClickCount)!=null?b:0,secondaryClicks:(b=a==null?void 0:a.secondaryClickCount)!=null?b:0,dismisses:(b=a==null?void 0:a.dismissClickCount)!=null?b:0}}function l(a,b){var c,d,e,f;a=a.tracking;c=(c=b.qpConfigPacing)==null?void 0:c.userInfo;b=k(b);d=a.dismisses-((d=c==null?void 0:c.dismissClickCount)!=null?d:0);e=a.primaryClicks-((e=c==null?void 0:c.primaryClickCount)!=null?e:0);f=a.secondaryClicks-((f=c==null?void 0:c.secondaryClickCount)!=null?f:0);c=a.impressions-((c=c==null?void 0:c.impressionCount)!=null?c:0);d>0&&(b.dismisses+=d);e>0&&(b.primaryClicks+=e);f>0&&(b.secondaryClicks+=f);c>0&&(b.impressions+=c);d=a.lastImpressionTs;e=a.lastPrimaryClickTs;f=a.lastSecondaryClickTs;c=a.lastDismissTs;d!=null&&(b.lastImpressionTs=d);e!=null&&(b.lastPrimaryClickTs=e);f!=null&&(b.lastSecondaryClickTs=f);c!=null&&(b.lastDismissTs=c);return b}function m(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){if(a.length===0){d("WALogger").LOG(j());return(h||(h=b("Promise"))).resolve()}var f=a.map(function(a){return a.id}),g=new Set(f);if(g.size!==f.length){d("WALogger").WARN(i());return(h||(h=b("Promise"))).resolve()}var m=new Map();a.forEach(function(a){if(!d("WAWebCTWAConstants").KNOWN_QP_SURFACES.has(a.id))return;a.promotions.forEach(function(b){m.set(b.id,{promotion:b,surfaceId:a.id})})});yield d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("updateQPSurfaces",function(){return d("WAWebModelStorageUtils").getStorage().lock(["quick-promotions"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var d=a[0];a=(yield d.anyOf(["surfaceId"],f));var g=e==null?void 0:e.locale;a=a.map(function(a){var b=a.id,e=m.get(b);if(e==null)return d.remove(b);a=l(a,e.promotion);e={data:e.promotion,ts:c,tracking:a};g!=null&&(e.locale=g);m["delete"](b);return d.merge(b,e)});yield (h||(h=b("Promise"))).all(a);a=Array.from(m.values());a=a.map(function(a){var b=a.promotion;a=a.surfaceId;a={id:b.id,surfaceId:a,data:b,ts:c,tracking:k(b)};g!=null&&(a=babelHelpers["extends"]({},a,{locale:g}));return a});yield d.bulkCreate(a)});return function(b){return a.apply(this,arguments)}}())}).waitUntilCompleted();yield d("WAWebJobLoadQuickPromotions").loadQuickPromotions("fetch-success")});return n.apply(this,arguments)}function a(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return m(a,b)});return o.apply(this,arguments)}function c(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=d("WATimeUtils").unixTime();return m(a,c,{locale:b})});return p.apply(this,arguments)}g.updateQPSurfacesFromNotification=a;g.updateQPSurfacesFromGraphQLFetch=c}),98);
__d("WAWebFetchQuickPromotionsQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="9308314179183069"}),null);
__d("WAWebFetchQuickPromotionsQuery.graphql",["WAWebFetchQuickPromotionsQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"nux_ids"},{defaultValue:null,kind:"LocalArgument",name:"trigger_context"}],c=[{kind:"Literal",name:"include_holdouts",value:!0},{kind:"Literal",name:"supports_client_side_filters",value:!0},{kind:"Variable",name:"surface_nux_ids",variableName:"nux_ids"},{kind:"Variable",name:"trigger_context",variableName:"trigger_context"}],d={alias:null,args:null,kind:"ScalarField",name:"surface_nux_id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"client_ttl_seconds",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"priority",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"is_holdout",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"log_eligibility_waterfall",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"start",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"end",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"promotion_id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"is_server_force_pass",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"ab_prop_name",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"surface_delay_in_seconds",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"encrypted_logging_data",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"client_side_dry_run",storageKey:null},q=[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],r=[{kind:"InlineDataFragmentSpread",name:"WAWebFetchQuickPromotionsQuery_QPText",selections:q,args:null,argumentDefinitions:[]}],s={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:r,storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},u=[{alias:null,args:null,kind:"ScalarField",name:"jpeg_thumbnail",storageKey:null}],v={alias:null,args:null,concreteType:"WAQPMediaDetails",kind:"LinkedField",name:"wa_light_mode_media_details",plural:!1,selections:u,storageKey:null};u={alias:null,args:null,concreteType:"WAQPMediaDetails",kind:"LinkedField",name:"wa_dark_mode_media_details",plural:!1,selections:u,storageKey:null};var w={alias:null,args:null,kind:"ScalarField",name:"accessibility_text_for_image",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"is_dismissible",storageKey:null},y={alias:null,args:null,concreteType:"QPContentAttributeDescriptor",kind:"LinkedField",name:"content_attributes",plural:!1,selections:[{alias:null,args:null,concreteType:"WhatsappQPColors",kind:"LinkedField",name:"wa_banner_background_color",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"light_mode_highlight_color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dark_mode_highlight_color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"light_mode_background_color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dark_mode_background_color",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wa_primary_cta_alternative_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"wa_eligible_duration_after_impression_in_seconds",storageKey:null}],storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"value",storageKey:null},A={alias:null,args:null,concreteType:"WAQPContentAttribute",kind:"LinkedField",name:"wa_qp_content_attributes_do_not_use",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},z],storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"clause_type",storageKey:null};z=[{alias:null,args:null,kind:"ScalarField",name:"filter_name",storageKey:null},{alias:null,args:null,concreteType:"QPFilterParameter",kind:"LinkedField",name:"parameters",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"key",storageKey:null},z],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"passes_if_client_not_supported",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"filter_result",storageKey:null}];var C={kind:"InlineDataFragmentSpread",name:"WAWebFetchQuickPromotionsQuery_QPWAFilterClause",selections:[B,{alias:null,args:null,concreteType:"QuickPromotionFlattenedFilter",kind:"LinkedField",name:"filters",plural:!0,selections:[{kind:"InlineDataFragmentSpread",name:"WAWebFetchQuickPromotionsQuery_QPWAFilter",selections:z,args:null,argumentDefinitions:[]}],storageKey:null}],args:null,argumentDefinitions:[]},D={alias:null,args:null,concreteType:"QPUserInteractionInfo",kind:"LinkedField",name:"user_interaction_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"impression_max_instances",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"impression_count_for_user",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dismiss_max_instances",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dismiss_click_count_for_user",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"primary_click_max_instances",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"primary_click_count_for_user",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"secondary_click_count_for_user",storageKey:null}],storageKey:null},E={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:q,storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};z={alias:null,args:null,concreteType:"QuickPromotionFlattenedFilter",kind:"LinkedField",name:"filters",plural:!0,selections:z,storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"WAWebFetchQuickPromotionsQuery",selections:[{alias:null,args:c,concreteType:"QuickPromotionBatchFetchSurface",kind:"LinkedField",name:"quick_promotion_batch_fetch_root",plural:!0,selections:[d,{alias:null,args:null,concreteType:"QuickPromotionSurfaceEligiblePromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotionSurfaceEligiblePromotionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"RequiredField",field:e,action:"LOG",path:"quick_promotion_batch_fetch_root.eligible_promotions.edges.client_ttl_seconds"},{kind:"RequiredField",field:f,action:"LOG",path:"quick_promotion_batch_fetch_root.eligible_promotions.edges.priority"},{kind:"RequiredField",field:g,action:"LOG",path:"quick_promotion_batch_fetch_root.eligible_promotions.edges.is_holdout"},{kind:"RequiredField",field:h,action:"LOG",path:"quick_promotion_batch_fetch_root.eligible_promotions.edges.log_eligibility_waterfall"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"TimeRange",kind:"LinkedField",name:"time_range",plural:!1,selections:[{kind:"RequiredField",field:i,action:"LOG",path:"quick_promotion_batch_fetch_root.eligible_promotions.edges.time_range.start"},{kind:"RequiredField",field:j,action:"LOG",path:"quick_promotion_batch_fetch_root.eligible_promotions.edges.time_range.end"}],storageKey:null},action:"LOG",path:"quick_promotion_batch_fetch_root.eligible_promotions.edges.time_range"},{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"WAWebFetchQuickPromotionsQuery_QuickPromotion",selections:[k,l,m,n,o,p,{alias:null,args:null,concreteType:"QuickPromotionCreative",kind:"LinkedField",name:"creatives",plural:!0,selections:[{kind:"InlineDataFragmentSpread",name:"WAWebFetchQuickPromotionsQuery_QPCreative",selections:[s,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"content",plural:!1,selections:r,storageKey:null},{alias:null,args:null,concreteType:"QuickPromotionAction",kind:"LinkedField",name:"primary_action",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"WAWebFetchQuickPromotionsQuery_QPAction",selections:[s,t],args:null,argumentDefinitions:[]}],storageKey:null},v,u,w,x],args:null,argumentDefinitions:[]}],storageKey:null},y,A,{alias:null,args:null,concreteType:"QuickPromotionFlattenedFilterClause",kind:"LinkedField",name:"contextual_filters_for_wa_do_not_use",plural:!1,selections:[C,{alias:null,args:null,concreteType:"QuickPromotionFlattenedFilterClause",kind:"LinkedField",name:"clauses",plural:!0,selections:[C,{alias:null,args:null,concreteType:"QuickPromotionFlattenedFilterClause",kind:"LinkedField",name:"clauses",plural:!0,selections:[C,{alias:null,args:null,concreteType:"QuickPromotionFlattenedFilterClause",kind:"LinkedField",name:"clauses",plural:!0,selections:[C],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},D],args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"WAWebFetchQuickPromotionsQuery",selections:[{alias:null,args:c,concreteType:"QuickPromotionBatchFetchSurface",kind:"LinkedField",name:"quick_promotion_batch_fetch_root",plural:!0,selections:[d,{alias:null,args:null,concreteType:"QuickPromotionSurfaceEligiblePromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotionSurfaceEligiblePromotionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[e,f,g,h,{alias:null,args:null,concreteType:"TimeRange",kind:"LinkedField",name:"time_range",plural:!1,selections:[i,j],storageKey:null},{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"node",plural:!1,selections:[k,l,m,n,o,p,{alias:null,args:null,concreteType:"QuickPromotionCreative",kind:"LinkedField",name:"creatives",plural:!0,selections:[E,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"content",plural:!1,selections:q,storageKey:null},{alias:null,args:null,concreteType:"QuickPromotionAction",kind:"LinkedField",name:"primary_action",plural:!1,selections:[E,t],storageKey:null},v,u,w,x,F],storageKey:null},y,A,{alias:null,args:null,concreteType:"QuickPromotionFlattenedFilterClause",kind:"LinkedField",name:"contextual_filters_for_wa_do_not_use",plural:!1,selections:[B,z,{alias:null,args:null,concreteType:"QuickPromotionFlattenedFilterClause",kind:"LinkedField",name:"clauses",plural:!0,selections:[B,z,{alias:null,args:null,concreteType:"QuickPromotionFlattenedFilterClause",kind:"LinkedField",name:"clauses",plural:!0,selections:[B,z,{alias:null,args:null,concreteType:"QuickPromotionFlattenedFilterClause",kind:"LinkedField",name:"clauses",plural:!0,selections:[B,z],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},D,F],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("WAWebFetchQuickPromotionsQuery_facebookRelayOperation"),metadata:{},name:"WAWebFetchQuickPromotionsQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("WAWebFetchQuickPromotionsQuery_QPAction.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"WAWebFetchQuickPromotionsQuery_QPAction"};e.exports=a}),null);
__d("WAWebFetchQuickPromotionsQuery_QPCreative.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"WAWebFetchQuickPromotionsQuery_QPCreative"};e.exports=a}),null);
__d("WAWebFetchQuickPromotionsQuery_QPText.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"WAWebFetchQuickPromotionsQuery_QPText"};e.exports=a}),null);
__d("WAWebFetchQuickPromotionsQuery_QPWAFilter.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"WAWebFetchQuickPromotionsQuery_QPWAFilter"};e.exports=a}),null);
__d("WAWebFetchQuickPromotionsQuery_QPWAFilterClause.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"WAWebFetchQuickPromotionsQuery_QPWAFilterClause"};e.exports=a}),null);
__d("WAWebFetchQuickPromotionsQuery_QuickPromotion.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"WAWebFetchQuickPromotionsQuery_QuickPromotion"};e.exports=a}),null);
__d("WAWebProtobufsQuickPromotionSurfaces.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){a=b("$InternalEnum")({TRUE:1,FALSE:2,UNKNOWN:3});c=b("$InternalEnum")({PASS_BY_DEFAULT:1,FAIL_BY_DEFAULT:2});e=b("$InternalEnum")({AND:1,OR:2,NOR:3});f={};b={};var h={},i={};f.internalSpec={};b.internalSpec={clauseType:[1,(d=d("WAProtoConst")).FLAGS.REQUIRED|d.TYPES.ENUM,e],clauses:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,b],filters:[3,d.FLAGS.REPEATED|d.TYPES.MESSAGE,h]};h.internalSpec={filterName:[1,d.FLAGS.REQUIRED|d.TYPES.STRING],parameters:[2,d.FLAGS.REPEATED|d.TYPES.MESSAGE,i],filterResult:[3,d.TYPES.ENUM,a],clientNotSupportedConfig:[4,d.FLAGS.REQUIRED|d.TYPES.ENUM,c]};i.internalSpec={key:[1,d.TYPES.STRING],value:[2,d.TYPES.STRING]};g.QP$FilterResult=a;g.QP$FilterClientNotSupportedConfig=c;g.QP$ClauseType=e;g.QPSpec=f;g.QP$FilterClauseSpec=b;g.QP$FilterSpec=h;g.QP$FilterParametersSpec=i}),98);
__d("WAWebFetchQuickPromotions",["Promise","WABase64","WACustomError","WALogger","WAPromiseRetryLoop","WAPromiseTimeout","WAQplTypes","WAWebBackendApi","WAWebBizGatingUtils","WAWebBuildConstants","WAWebCTWAConstants","WAWebCommonCTWAQplHelpers","WAWebFetchAdAccountToken","WAWebFetchQuickPromotionsQuery.graphql","WAWebFetchQuickPromotionsQuery_QPAction.graphql","WAWebFetchQuickPromotionsQuery_QPCreative.graphql","WAWebFetchQuickPromotionsQuery_QPText.graphql","WAWebFetchQuickPromotionsQuery_QPWAFilter.graphql","WAWebFetchQuickPromotionsQuery_QPWAFilterClause.graphql","WAWebFetchQuickPromotionsQuery_QuickPromotion.graphql","WAWebJobUpdateQPSurfaces","WAWebL10NCountryCodes","WAWebNetworkStatus","WAWebOrchestratorNonPersistedJob","WAWebProtobufsQuickPromotionSurfaces.pb","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebRelayClient","WAWebUserPrefsMeUser","WAWebWebp","err"],(function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n,o;function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchQuickPromotions: failed to decode base64 for dark mode media details"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchQuickPromotions: failed to decode base64 for light mode media details"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchQuickPromotions: received unexpected nux ID ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchQuickPromotions: could not find "," in reverse mapping"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(['fetchQuickPromotions: failed as "timeout"']);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(['fetchQuickPromotions: failed as "','"']);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchQuickPromotions: failed while saving to the DB: ",""]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["fetchQuickPromotions: success"]);w=function(){return a};return a}var x={type:"error"},y=1,z=1e3,A=3e3,B=h!==void 0?h:h=b("WAWebFetchQuickPromotionsQuery.graphql"),C=i!==void 0?i:i=b("WAWebFetchQuickPromotionsQuery_QuickPromotion.graphql"),D=j!==void 0?j:j=b("WAWebFetchQuickPromotionsQuery_QPCreative.graphql"),E=k!==void 0?k:k=b("WAWebFetchQuickPromotionsQuery_QPAction.graphql"),F=l!==void 0?l:l=b("WAWebFetchQuickPromotionsQuery_QPText.graphql"),G=m!==void 0?m:m=b("WAWebFetchQuickPromotionsQuery_QPWAFilterClause.graphql"),H=n!==void 0?n:n=b("WAWebFetchQuickPromotionsQuery_QPWAFilter.graphql");function I(a){d("WAWebCommonCTWAQplHelpers").qplAnnotateGraphQLError({error:a,markerId:d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.FETCH_QUICK_PROMOTIONS,errorAnnotationName:"fetch_promotions_error",errorMessageAnnotationName:"fetch_promotions_error_message"})}function a(){return!d("WAWebBizGatingUtils").qpGraphQLEnabled()?(o||(o=b("Promise"))).resolve({type:"not-enabled"}):d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("fetchQuickPromotions",function(){return d("WAWebBackendApi").frontendSendAndReceive("getUserLocale").then(function(a){return J(a)})}).waitUntilCompleted()}function J(a){return c("WAWebNetworkStatus").waitIfOffline({signal:new AbortController().signal}).then(function(){return d("WAPromiseTimeout").promiseTimeout(K(a),S()).then(function(b){if(b.type==="success"){d("WALogger").LOG(w());return d("WAWebJobUpdateQPSurfaces").updateQPSurfacesFromGraphQLFetch(b.quickPromotions,a).then(function(){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.FETCH_QUICK_PROMOTIONS,d("WAQplTypes").QuickLogActionType.SUCCESS);return b})["catch"](function(a){d("WALogger").ERROR(v(),String(a)).devConsole(a);I(a);d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.FETCH_QUICK_PROMOTIONS,d("WAQplTypes").QuickLogActionType.FAIL);return{type:"error"}})}b.type;d("WALogger").WARN(u(),b.type);return b})["catch"](function(a){if(a instanceof d("WACustomError").TimeoutError){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.FETCH_QUICK_PROMOTIONS,"fetch_promotions_end");d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.FETCH_QUICK_PROMOTIONS,d("WAQplTypes").QuickLogActionType.ABORTED);d("WALogger").WARN(t());return{type:"timeout"}}throw a})})}function K(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.FETCH_QUICK_PROMOTIONS);d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.FETCH_QUICK_PROMOTIONS,"fetch_promotions_start");return d("WAWebFetchAdAccountToken").fetchToken().then(function(b){if(b.type==="success")return L(b.token,a).then(function(a){if(a.type==="success"){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.FETCH_QUICK_PROMOTIONS,"fetch_promotions_end");return a}d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.FETCH_QUICK_PROMOTIONS,"fetch_promotions_end");d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.FETCH_QUICK_PROMOTIONS,d("WAQplTypes").QuickLogActionType.FAIL);a.type==="auth-failure"?d("WAWebFetchAdAccountToken").markTokenAsInvalid():a.type;return a});b.type;return b})}function L(a,b){var c=y,e=function(d){return M(a,b).then(function(a){if(a.type==="success")d(a);else{var b=c>0;c--;b||d(a)}})["catch"](function(a){var b=c>0;c--;if(!b)throw a})};e=new(d("WAPromiseRetryLoop").PromiseRetryLoop)({name:"fetchQuickPromotions",timer:{algo:{type:"exponential",first:z},max:A},code:e});e.start();return e.promise()}function M(a,c){var e,f=Array.from(d("WAWebBizGatingUtils").qpSurfaceIdsUsingGraphQL());if(f.length===0)return(o||(o=b("Promise"))).resolve({type:"not-enabled"});e=(e=d("WAWebUserPrefsMeUser").getMaybeMeUser())==null?void 0:e.user;if(e==null)return(o||(o=b("Promise"))).resolve({type:"error"});e=d("WAWebL10NCountryCodes").getCountryShortcodeByPhone(e);var g;return d("WAWebRelayClient").fetchQuery(B,{nux_ids:f,trigger_context:{wa_smb_trigger_context:{is_from_wa_smb:!0,app_version:d("WAWebBuildConstants").VERSION_BASE,country:e,locale:c}}},{environmentType:"facebook",accessToken:a,getInlineDataReader:function(a){g=a}}).then(function(a){if(a==null)return x;a=a.quick_promotion_batch_fetch_root;var b=new Map();f.forEach(function(a){var c=R(a);if(c==null){d("WALogger").ERROR(s(),a).sendLogs("quick-promotions-graphql-missing-surface");return}b.set(a,{id:c,promotions:[]})});a.forEach(function(a){var c=a.surface_nux_id;a=a.eligible_promotions;if(c==null||a==null)return;var e=b.get(c);if(e==null){d("WALogger").ERROR(r(),c);return}c=a.edges;c.forEach(function(a){if(a==null)return;var b=a.node,c=a.priority,f=a.time_range,h=a.is_holdout,i=a.log_eligibility_waterfall;a=a.client_ttl_seconds;if(b==null)return;b=g(C,b);var j=b.promotion_id,k=b.creatives,l=b.is_server_force_pass,m=b.content_attributes,n=b.ab_prop_name,o=b.wa_qp_content_attributes_do_not_use,r=b.contextual_filters_for_wa_do_not_use,s=b.surface_delay_in_seconds,t=b.user_interaction_info,u=b.encrypted_logging_data;b=b.client_side_dry_run;if(j==null||l==null||m==null||s==null)return;var v=m.wa_eligible_duration_after_impression_in_seconds,w=m.wa_banner_background_color;m=m.wa_primary_cta_alternative_url;if(v==null)return;k=k.map(function(a){return g(D,a)});k=k[0];var x,y,z,A,B;if(k!=null){var G=k.primary_action,H=k.title,I=k.content,J=k.wa_dark_mode_media_details,K=k.wa_light_mode_media_details,L=k.accessibility_text_for_image;if(H==null||I==null)return;y=g(F,H).text;z=g(F,I).text;if(G!=null){H=g(E,G);I=H.title;G=H.url;if(I!=null){H=g(F,I);H.text!=null&&(x={text:H==null?void 0:H.text,deepLink:G,universalLink:m})}}A=k.is_dismissible;if(L!=null){var M;try{(K==null?void 0:K.jpeg_thumbnail)!=null&&(M={elementValue:new Uint8Array(d("WABase64").decodeB64(K.jpeg_thumbnail))})}catch(a){d("WALogger").ERROR(q())}var N;try{(J==null?void 0:J.jpeg_thumbnail)!=null&&(N={elementValue:new Uint8Array(d("WABase64").decodeB64(J.jpeg_thumbnail))})}catch(a){d("WALogger").ERROR(p())}B={description:L,light:M,dark:N}}}if(y==null||z==null||A==null)return;I=w!=null?{lightHighlight:w.light_mode_highlight_color,lightBackground:w.light_mode_background_color,darkHighlight:w.dark_mode_highlight_color,darkBackground:w.dark_mode_background_color}:void 0;H=o.reduce(function(a,b){var c=b.name;b=b.value;if(c==null||b==null)return a;a.push({key:c,value:b});return a},[]);var O;if(t!=null){G=t.dismiss_click_count_for_user;m=t.impression_count_for_user;k=t.primary_click_count_for_user;K=t.secondary_click_count_for_user;J=t.dismiss_max_instances;L=t.impression_max_instances;w=t.primary_click_max_instances;if(m==null||k==null||K==null||G==null||L==null||w==null||J==null)return;O={promotionConfig:{maxImpressions:L,maxDismisses:J,maxPrimaryClicks:w,maxSecondaryClicks:0},userInfo:{impressionCount:m,primaryClickCount:k,secondaryClickCount:K,dismissClickCount:G}}}o=r!=null?P(r,g):void 0;t=u!=null?{elementValue:d("WAWebWebp").stringToUint8(u)}:void 0;L={id:j,qpConfigPriority:c,qpConfigDismissable:A?"true":"false",qpConfigEligibilityDurationMs:v*1e3,qpConfigEndTimeSeconds:f.end,qpConfigExperimentKey:n,qpConfigExposureHoldout:h?"true":"false",qpConfigForcePass:l?"true":"false",qpConfigLogEligibilityWaterfall:i?"true":"false",qpConfigStartTimeSeconds:f.start,qpConfigSurfaceDelayTimeSeconds:s,qpConfigTtlSeconds:a,qpConfigClientSideDryRun:b===!0?"true":"false",titleElementValue:y,textElementValue:z,colors:I,contentAttributes:{attribute:H},image:B,primaryAction:x,qpConfigPacing:O,qpConfigFilterRules:o,header:void 0,instanceId:void 0,qpConfigDeterministic:"true",qpConfigImpressionCooldown:-1,qpConfigInstanceLogData:t,qpConfigMaxImpressions:-1,qpConfigTemplateName:"whatsapp_banner",qpConfigTriggersTrigger:[],secondaryAction:void 0};e.promotions.push(L)})});return{type:"success",quickPromotions:Array.from(b.values(),function(a){var b=a.id;a=a.promotions;return{id:b,promotions:[].concat(a)}})}})["catch"](function(a){I(a);return d("WAWebFetchAdAccountToken").hasGraphQLAuthError(a)?{type:"auth-failure"}:x})}function N(a){switch(a){case"AND_TYPE":return d("WAWebProtobufsQuickPromotionSurfaces.pb").QP$ClauseType.AND;case"OR_TYPE":return d("WAWebProtobufsQuickPromotionSurfaces.pb").QP$ClauseType.OR;case"NOR_TYPE":return d("WAWebProtobufsQuickPromotionSurfaces.pb").QP$ClauseType.NOR;default:a;throw c("err")("Unexpected future filter clause type")}}function O(a){switch(a){case"PASS":return d("WAWebProtobufsQuickPromotionSurfaces.pb").QP$FilterResult.TRUE;case"FAIL":return d("WAWebProtobufsQuickPromotionSurfaces.pb").QP$FilterResult.FALSE;case"UNKNOWN":return d("WAWebProtobufsQuickPromotionSurfaces.pb").QP$FilterResult.UNKNOWN;default:a;throw c("err")("Unexpected future filter result")}}function P(a,b){var c=b(G,a),d=c.clause_type;c=c.filters;a=a.clauses;if(d==null)return;a=a!=null?a.map(function(a){return P(a,b)}).filter(Boolean):[];c=c.map(function(a){return Q(a,b)}).filter(Boolean);d={clauseType:N(d),clauses:a,filters:c};return d}function Q(a,b){b=b(H,a);a=b.filter_name;var c=b.parameters,e=b.passes_if_client_not_supported;b=b.filter_result;if(a==null)return;c=c.reduce(function(a,b){var c=b.key;b=b.value;if(c==null||b==null)return a;a.push({key:c,value:b});return a},[]);a={filterName:a,parameters:c,clientNotSupportedConfig:e===!0?d("WAWebProtobufsQuickPromotionSurfaces.pb").QP$FilterClientNotSupportedConfig.PASS_BY_DEFAULT:d("WAWebProtobufsQuickPromotionSurfaces.pb").QP$FilterClientNotSupportedConfig.FAIL_BY_DEFAULT,filterResult:b!=null?O(b):void 0};return a}function R(a){for(var b=d("WAWebCTWAConstants").KNOWN_QP_SURFACES.entries(),c=Array.isArray(b),e=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(c){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;var g=f[0];f=f[1];if(f===a)return g}}function S(){return d("WAWebFetchAdAccountToken").getMaximumAdAccountFetchTimeoutSeconds()*1e3+d("WAWebCTWAConstants").QP_FETCH_TIMEOUT_MS*(y+1)}g.fetchQuickPromotions=a}),98);
__d("WAWebWamEnumBootstrapAppStateDataStageCode",[],(function(a,b,c,d,e,f){a=Object.freeze({REQUEST_BUILT:1,RESPONSE_RECEIVED:2,RESPONSE_PARSED_VALID:3,MISSING_KEYS_REQUESTED:4,MISSING_KEYS_RECEIVED:5,MUTATIONS_DECRYPTED:6,ABOUT_TO_APPLY_MUTATIONS:7,APPLIED_MUTATIONS:8,PUSHNAME_APPLIED:9,PUSHNAME_INVALID:10,ENTERED_RETRY_MODE:11});f.BOOTSTRAP_APP_STATE_DATA_STAGE_CODE=a}),66);
__d("WAWebMdBootstrapAppStateCriticalDataProcessingWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumBootstrapAppStateDataStageCode","WAWebWamEnumMdBootstrapPayloadType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MdBootstrapAppStateCriticalDataProcessing:[3164,{bootstrapAppStateDataStage:[1,d("WAWebWamEnumBootstrapAppStateDataStageCode").BOOTSTRAP_APP_STATE_DATA_STAGE_CODE],mdBootstrapPayloadType:[2,d("WAWebWamEnumMdBootstrapPayloadType").MD_BOOTSTRAP_PAYLOAD_TYPE],mdRegAttemptId:[3,a.TYPES.STRING],mdSessionId:[4,a.TYPES.STRING],mdTimestamp:[5,a.TYPES.INTEGER]},[1,1,1],"regular"]},{MdBootstrapAppStateCriticalDataProcessing:[]});g.MdBootstrapAppStateCriticalDataProcessingWamEvent=b}),98);
__d("WAWebHandlePaymentAmountUtils",["WALogger","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Amount missing in pay or transaction node"]);h=function(){return a};return a}var i=1e3;function j(a){a.assertTag("money");var b=parseFloat(a.attrString("value")),c=a.attrString("currency");a=a.maybeAttrInt("offset");a=a!=null&&a!==0?a:i;b=b*i/a;return{currency:c,amount1000:b}}function k(a){if(a.hasChild("amount")){var b=a.child("amount");return j(b.child("money"))}else if(a.hasAttr("amount")){b=parseFloat(a.attrString("amount"));return{amount1000:b*i,currency:a.attrString("currency")}}d("WALogger").WARN(h());throw c("err")("Amount missing in pay or transaction node")}function a(a){return k(a)}g.getAmount1000AndCurrency=a}),98);
__d("WAWebPaymentStatusUtils",["$InternalEnum","WALogger","WAWebProtobufsWeb.pb"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["parsePaymentTransactionType payment transaction string=",""]);h=function(){return a};return a}var i=b("$InternalEnum")({TYPE_UNSET:0,TYPE_P2P_SENT:1,TYPE_P2P_RCVD:2,TYPE_P2P_GRP:3,TYPE_P2P_NO_INFO:4,TYPE_FUTURE:5,TYPE_P2P_REQ_SENT:10,TYPE_P2P_REQ_RCVD:20,TYPE_P2P_REQ_SCHEDULED_PAYMENT_RCVD:21,TYPE_P2P_REQ_GRP:30,TYPE_P2M_SENT:100,TYPE_P2M_RCVD:200,TYPE_P2M_PAYOUT:300,TYPE_MISSING_DETAILS:400,TYPE_DEPOSIT:500,TYPE_REFUND:600,TYPE_WITHDRAWAL:700}),j=b("$InternalEnum")({STATUS_UNSET:0,REQUEST_PAY_INIT:11,REQUEST_PAY_SUCCESS:12,REQUEST_PAY_FAILED:13,REQUEST_PAY_FAILED_RISK:14,REQUEST_PAY_REJECTED:15,REQUEST_PAY_EXPIRED:16,REQUEST_PAY_FULFILLED:17,REQUEST_PAY_CANCELLED:18,REQUEST_PAY_CANCELLING:19,REQUEST_PAY_SCHEDULED_PAYMENT_SUCCESS:20,RECV_PAY_INIT:101,RECV_PAY_PENDING_SETUP:102,RECV_PAY_PENDING:103,RECV_PAY_RETRY_ON_FAILURE:104,RECV_PAY_FAILURE:105,RECV_PAY_SUCCESS:106,RECV_PAY_EXPIRED:107,RECV_PAY_FAILURE_RISK:108,RECV_PAY_WITHDRAWAL_PROCESSING:109,RECV_PAY_WITHDRAWAL_FAILURE:110,RECV_PAY_WITHDRAWAL_PERMANENT_FAILED:111,RECV_PAY_SENDER_CANCELED:112,SEND_PAY_INIT:401,SEND_PAY_PENDING_RECEIVER:402,SEND_PAY_PENDING:403,SEND_PAY_REFUND_PENDING:404,SEND_PAY_SUCCESS:405,SEND_PAY_FAILURE:406,SEND_PAY_FAILURE_RISK:407,SEND_PAY_REFUNDED:408,SEND_PAY_REFUND_FAILED:409,SEND_PAY_FAILURE_RECEIVER:410,SEND_PAY_REFUND_FAILED_PROCESSING:411,SEND_PAY_PENDING_REFUND:412,SEND_PAY_AUTH_CANCEL_FAILED_PROCESSING:413,SEND_PAY_AUTH_CANCEL_FAILED:414,SEND_PAY_AUTH_CANCELED:415,SEND_PAY_EXPIRED:416,SEND_PAY_AUTH_SUCCESS:417,SEND_PAY_AUTH_SUCCESS_CANCELING:418,SEND_PAY_IN_REVIEW:419,SEND_PAY_PENDING_PROCESSING:420,SEND_PAY_USER_CANCELED:421,WITHDRAWAL_INIT:601,WITHDRAWAL_PENDING:602,WITHDRAWAL_IN_REVIEW:603,WITHDRAWAL_SUCCESS:604,WITHDRAWAL_FAILED:605,WITHDRAWAL_USER_CANCELED:606,WITHDRAWAL_EXPIRED:607,WITHDRAWAL_ACTIVE:608}),k={TYPE_P2P:"p2p",TYPE_P2M:"p2m",TYPE_P2M_PAYOUT:"payout",TYPE_WITHDRAWAL:"withdrawal",TYPE_DEPOSIT:"deposit",TYPE_REFUND:"refund"},l={PENDING_RECEIVER_SETUP:"PENDING_RECEIVER_SETUP",PENDING_SETUP:"PENDING_SETUP",PENDING:"PENDING",INITIAL:"INITIAL",SUCCESS:"SUCCESS",COMPLETED:"COMPLETED",IN_REVIEW:"IN_REVIEW",FAILED:"FAILED",DECLINED:"DECLINED",FAILURE:"FAILURE",FAILED_RISK:"FAILED_RISK",FAILED_PROCESSING:"FAILED_PROCESSING",FAILED_RECEIVER_PROCESSING:"FAILED_RECEIVER_PROCESSING",REFUND_FAILED_PROCESSING:"REFUND_FAILED_PROCESSING",REFUNDED:"REFUNDED",REFUND_FAILED:"REFUND_FAILED",EXPIRED:"EXPIRED",CANCELED:"CANCELLED",AUTH_SUCCESS:"AUTH_SUCCESS",AUTH_CANCELED:"AUTH_CANCELED",AUTH_CANCEL_FAILED_PROCESSING:"AUTH_CANCEL_FAILED_PROCESSING",AUTH_CANCEL_FAILED:"AUTH_CANCEL_FAILED",COLLECT_SUCCESS:"COLLECT_SUCCESS",COLLECT_FAILED:"COLLECT_FAILED",COLLECT_REJECTED:"COLLECT_REJECTED",COLLECT_EXPIRED:"COLLECT_EXPIRED",COLLECT_CANCELED:"COLLECT_CANCELED",FAILED_DA:"FAILED_DA",FAILED_DA_FINAL:"FAILED_DA_FINAL",REFUND_FAILED_DA:"REFUND_FAILED_DA",COLLECT_FAILED_RISK:"COLLECT_FAILED_RISK",WITHDRAWAL_PROCESSING:"WITHDRAWAL_PROCESSING",WITHDRAWAL_FAILURE:"WITHDRAWAL_FAILURE",WITHDRAWAL_PERMANENT_FAILED:"WITHDRAWAL_PERMANENT_FAILED",WITHDRAWAL_ACTIVE:"WITHDRAWAL_ACTIVE"};function a(a,b){if(a==null)return d("WAWebProtobufsWeb.pb").PaymentInfo$Status.UNKNOWN_STATUS;switch(a){case j.SEND_PAY_INIT:case j.SEND_PAY_PENDING:case j.RECV_PAY_INIT:case j.RECV_PAY_PENDING:case j.RECV_PAY_RETRY_ON_FAILURE:case j.REQUEST_PAY_INIT:return d("WAWebProtobufsWeb.pb").PaymentInfo$Status.PROCESSING;case j.SEND_PAY_PENDING_RECEIVER:case j.SEND_PAY_FAILURE_RECEIVER:return d("WAWebProtobufsWeb.pb").PaymentInfo$Status.SENT;case j.REQUEST_PAY_SUCCESS:return b===i.TYPE_P2P_REQ_SENT?d("WAWebProtobufsWeb.pb").PaymentInfo$Status.WAITING_FOR_PAYER:d("WAWebProtobufsWeb.pb").PaymentInfo$Status.WAITING;case j.RECV_PAY_PENDING_SETUP:return d("WAWebProtobufsWeb.pb").PaymentInfo$Status.NEED_TO_ACCEPT;case j.SEND_PAY_SUCCESS:case j.RECV_PAY_SUCCESS:case j.REQUEST_PAY_FULFILLED:return d("WAWebProtobufsWeb.pb").PaymentInfo$Status.COMPLETE;case j.SEND_PAY_FAILURE:case j.SEND_PAY_FAILURE_RISK:case j.SEND_PAY_PENDING_REFUND:case j.SEND_PAY_REFUND_PENDING:case j.SEND_PAY_REFUND_FAILED:case j.SEND_PAY_REFUND_FAILED_PROCESSING:case j.RECV_PAY_FAILURE:case j.REQUEST_PAY_FAILED:case j.REQUEST_PAY_FAILED_RISK:return d("WAWebProtobufsWeb.pb").PaymentInfo$Status.COULD_NOT_COMPLETE;case j.SEND_PAY_REFUNDED:return d("WAWebProtobufsWeb.pb").PaymentInfo$Status.REFUNDED;case j.RECV_PAY_EXPIRED:case j.REQUEST_PAY_EXPIRED:case j.SEND_PAY_AUTH_CANCELED:case j.SEND_PAY_AUTH_CANCEL_FAILED:case j.SEND_PAY_AUTH_CANCEL_FAILED_PROCESSING:return d("WAWebProtobufsWeb.pb").PaymentInfo$Status.EXPIRED;case j.REQUEST_PAY_REJECTED:return d("WAWebProtobufsWeb.pb").PaymentInfo$Status.REJECTED;case j.REQUEST_PAY_CANCELLED:return d("WAWebProtobufsWeb.pb").PaymentInfo$Status.CANCELLED;case j.STATUS_UNSET:return d("WAWebProtobufsWeb.pb").PaymentInfo$Status.UNKNOWN_STATUS;case j.REQUEST_PAY_CANCELLING:return d("WAWebProtobufsWeb.pb").PaymentInfo$Status.UNKNOWN_STATUS;default:return d("WAWebProtobufsWeb.pb").PaymentInfo$Status.UNKNOWN_STATUS}}function c(a,b){if(!b)return j.STATUS_UNSET;b=b.toUpperCase();switch(a){case i.TYPE_P2P_SENT:case i.TYPE_P2M_SENT:case i.TYPE_DEPOSIT:switch(b){case l.PENDING_RECEIVER_SETUP:return j.SEND_PAY_PENDING_RECEIVER;case l.FAILED_DA:return j.SEND_PAY_PENDING;case l.REFUND_FAILED_DA:return j.SEND_PAY_REFUND_PENDING;case l.FAILED_RISK:return j.SEND_PAY_FAILURE_RISK;case l.INITIAL:return j.SEND_PAY_INIT;case l.SUCCESS:case l.COMPLETED:return j.SEND_PAY_SUCCESS;case l.FAILURE:case l.FAILED:return j.SEND_PAY_FAILURE;case l.REFUNDED:return j.SEND_PAY_REFUNDED;case l.REFUND_FAILED:return j.SEND_PAY_REFUND_FAILED;case l.FAILED_RECEIVER_PROCESSING:return j.SEND_PAY_FAILURE_RECEIVER;case l.REFUND_FAILED_PROCESSING:return j.SEND_PAY_REFUND_FAILED_PROCESSING;case l.FAILED_DA_FINAL:return j.SEND_PAY_PENDING_REFUND;case l.AUTH_CANCEL_FAILED_PROCESSING:return j.SEND_PAY_AUTH_CANCEL_FAILED_PROCESSING;case l.AUTH_CANCEL_FAILED:return j.SEND_PAY_AUTH_CANCEL_FAILED;case l.AUTH_CANCELED:return j.SEND_PAY_AUTH_CANCELED;case l.EXPIRED:return j.SEND_PAY_EXPIRED;case l.IN_REVIEW:return j.SEND_PAY_IN_REVIEW;case l.PENDING:return j.SEND_PAY_PENDING_PROCESSING;case l.CANCELED:return j.SEND_PAY_USER_CANCELED}break;case i.TYPE_P2P_RCVD:case i.TYPE_P2M_RCVD:switch(b){case l.PENDING_SETUP:return j.RECV_PAY_PENDING_SETUP;case l.FAILED_DA:return j.RECV_PAY_PENDING;case l.FAILED_PROCESSING:return j.RECV_PAY_RETRY_ON_FAILURE;case l.SUCCESS:case l.COMPLETED:return j.RECV_PAY_SUCCESS;case l.FAILURE:case l.FAILED:return j.RECV_PAY_FAILURE;case l.EXPIRED:return j.RECV_PAY_EXPIRED;case l.FAILED_RISK:return j.RECV_PAY_FAILURE_RISK;case l.WITHDRAWAL_PROCESSING:return j.RECV_PAY_WITHDRAWAL_PROCESSING;case l.WITHDRAWAL_FAILURE:return j.RECV_PAY_WITHDRAWAL_FAILURE;case l.WITHDRAWAL_PERMANENT_FAILED:return j.RECV_PAY_WITHDRAWAL_PERMANENT_FAILED;case l.CANCELED:return j.RECV_PAY_SENDER_CANCELED}break;case i.TYPE_P2P_REQ_SENT:case i.TYPE_P2P_REQ_RCVD:switch(b){case l.COLLECT_SUCCESS:return j.REQUEST_PAY_SUCCESS;case l.COLLECT_FAILED:return j.REQUEST_PAY_FAILED;case l.COLLECT_FAILED_RISK:return j.REQUEST_PAY_FAILED_RISK;case l.COLLECT_REJECTED:return j.REQUEST_PAY_REJECTED;case l.COLLECT_EXPIRED:return j.REQUEST_PAY_EXPIRED;case l.COLLECT_CANCELED:return j.REQUEST_PAY_CANCELLED}break;case i.TYPE_P2P_REQ_SCHEDULED_PAYMENT_RCVD:switch(b){case l.COLLECT_SUCCESS:return j.REQUEST_PAY_SCHEDULED_PAYMENT_SUCCESS;case l.AUTH_SUCCESS:return j.SEND_PAY_AUTH_SUCCESS}break;case i.TYPE_REFUND:switch(b){case l.SUCCESS:case l.COMPLETED:return j.RECV_PAY_SUCCESS}break;case i.TYPE_WITHDRAWAL:switch(b){case l.PENDING:return j.WITHDRAWAL_PENDING;case l.IN_REVIEW:return j.WITHDRAWAL_IN_REVIEW;case l.SUCCESS:case l.COMPLETED:return j.WITHDRAWAL_SUCCESS;case l.FAILED:case l.DECLINED:return j.WITHDRAWAL_FAILED;case l.CANCELED:return j.WITHDRAWAL_USER_CANCELED;case l.EXPIRED:return j.WITHDRAWAL_EXPIRED;case l.WITHDRAWAL_ACTIVE:return j.WITHDRAWAL_ACTIVE}break;default:return j.STATUS_UNSET}return j.STATUS_UNSET}function e(a){if(a==null)return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.UNKNOWN;switch(a){case j.RECV_PAY_EXPIRED:case j.SEND_PAY_EXPIRED:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.EXPIRED_TXN;case j.RECV_PAY_FAILURE:case j.SEND_PAY_FAILURE:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.FAILED;case j.RECV_PAY_INIT:case j.SEND_PAY_INIT:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.INIT;case j.RECV_PAY_PENDING_SETUP:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.PENDING_SETUP;case j.RECV_PAY_PENDING:case j.SEND_PAY_PENDING:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.FAILED_DA;case j.RECV_PAY_RETRY_ON_FAILURE:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.FAILED_PROCESSING;case j.RECV_PAY_SUCCESS:case j.SEND_PAY_SUCCESS:case j.REQUEST_PAY_FULFILLED:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.SUCCESS;case j.REQUEST_PAY_CANCELLED:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_CANCELED;case j.REQUEST_PAY_CANCELLING:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_CANCELLING;case j.REQUEST_PAY_EXPIRED:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_EXPIRED;case j.REQUEST_PAY_FAILED_RISK:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_FAILED_RISK;case j.REQUEST_PAY_FAILED:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_FAILED;case j.REQUEST_PAY_INIT:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_INIT;case j.REQUEST_PAY_REJECTED:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_REJECTED;case j.REQUEST_PAY_SUCCESS:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_SUCCESS;case j.SEND_PAY_AUTH_CANCELED:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.AUTH_CANCELED;case j.SEND_PAY_AUTH_CANCEL_FAILED_PROCESSING:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.AUTH_CANCEL_FAILED_PROCESSING;case j.SEND_PAY_AUTH_CANCEL_FAILED:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.AUTH_CANCEL_FAILED;case j.SEND_PAY_FAILURE_RECEIVER:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.FAILED_RECEIVER_PROCESSING;case j.SEND_PAY_FAILURE_RISK:case j.RECV_PAY_FAILURE_RISK:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.FAILED_RISK;case j.SEND_PAY_PENDING_RECEIVER:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.PENDING_RECEIVER_SETUP;case j.SEND_PAY_PENDING_REFUND:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.FAILED_DA_FINAL;case j.SEND_PAY_REFUNDED:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.REFUNDED_TXN;case j.SEND_PAY_REFUND_FAILED_PROCESSING:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.REFUND_FAILED_PROCESSING;case j.SEND_PAY_REFUND_FAILED:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.REFUND_FAILED;case j.SEND_PAY_REFUND_PENDING:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.REFUND_FAILED_DA;case j.SEND_PAY_IN_REVIEW:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.IN_REVIEW;case j.STATUS_UNSET:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.UNKNOWN;default:return d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.UNKNOWN}}function f(a,b){if(a){a=a.toLowerCase();switch(a){case k.TYPE_P2P:return b?i.TYPE_P2P_SENT:i.TYPE_P2P_RCVD;case k.TYPE_P2M:return b?i.TYPE_P2M_SENT:i.TYPE_P2M_RCVD;case k.TYPE_P2M_PAYOUT:return i.TYPE_P2M_PAYOUT;case k.TYPE_DEPOSIT:return i.TYPE_DEPOSIT;case k.TYPE_REFUND:return i.TYPE_REFUND;case k.TYPE_WITHDRAWAL:return i.TYPE_WITHDRAWAL;default:d("WALogger").LOG(h(),a)}}return b?i.TYPE_P2P_SENT:i.TYPE_P2P_RCVD}function m(a){return a===d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COMPLETED||a===d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.SUCCESS}function n(a){return m(a)?a:d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_INIT}g.PaymentTransactionType=i;g.NotificationTransactionStatus=j;g.PaymentTransactionTypeServerString=k;g.PaymentTransactionStatusServerString=l;g.getPaymentWebStatus=a;g.getNotificationTransactionStatus=c;g.getPaymentTxnWebStatus=e;g.getPaymentTransactionType=f;g.determinePaymentRequestFulfilledStatus=n}),98);
__d("WAWebPaymentNotificationParser",["WADeprecatedWapParser","WALogger","WAWebHandlePaymentAmountUtils","WAWebJidToWid","WAWebMessagingGatingUtils","WAWebMsgKey","WAWebPaymentStatusUtils","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Payment notification from Novi not supported."]);h=function(){return a};return a}function i(a){return a&&a.hasAttr("service")?a.attrString("service").toUpperCase()==="NOVI":!1}a=new(c("WADeprecatedWapParser"))("paymentNotificationParser",function(a){if(d("WAWebMessagingGatingUtils").isPaymentNotificationAckKickFixEnabled()){a.assertTag("notification");a.assertAttr("type","pay");return{stanzaId:a.attrString("id"),from:a.attrWapJid("from"),transaction:a.hasChild("transaction")?j(a.child("transaction")):null,invite:k(a)}}return{transaction:a.hasChild("transaction")?j(a.child("transaction")):null,invite:k(a)}});function j(a){if(i(a)){d("WALogger").WARN(h());return null}var b=void 0,e=void 0,f=d("WAWebUserPrefsMeUser").getMeUser(),g=d("WAWebJidToWid").jidWithTypeToWid(a.attrJidWithType("sender")),j=d("WAWebJidToWid").jidWithTypeToWid(a.attrJidWithType("receiver"));f=f.equals(g);a.hasAttr("group")?(b=d("WAWebJidToWid").jidWithTypeToWid(a.attrJidWithType("group")),e=d("WAWebJidToWid").jidWithTypeToWid(a.attrJidWithType("sender"))):f?b=j:b=g;g=new(c("WAWebMsgKey"))({id:a.attrString("message-id"),fromMe:f,remote:b,participant:e});f=d("WAWebPaymentStatusUtils").getPaymentTransactionType(a.attrString("transaction-type"),g.fromMe);b=d("WAWebHandlePaymentAmountUtils").getAmount1000AndCurrency(a);e=b.amount1000;b=b.currency;return{receiver:j,currency:b,amount1000:e,status:d("WAWebPaymentStatusUtils").getNotificationTransactionStatus(f,a.attrString("status")),ts:a.attrInt("ts"),type:f,msgKey:g}}function k(a){if(!a.hasChild("invite"))return null;var b=a.child("invite");return{type:b.maybeAttrString("type"),service:b.maybeAttrString("service"),inviteUsed:b.hasAttr("invite-used")?b.attrString("invite-used")==="1":null,from:d("WAWebJidToWid").chatJidToChatWid(a.attrChatJid("from")),timestamp:a.attrTime("t")}}g.isNoviTransaction=i;g.paymentNotificationParser=a;g.parseTransactionNode=j}),98);
__d("WAWebHandleMsgParser",["WADeprecatedWapParser","WALogger","WANullthrows","WAParsableWapNode","WAWebAck","WAWebBackendJobs.flow","WAWebBizCoexGatingUtils","WAWebBotGating","WAWebBotTypes","WAWebCreateNackFromStanza","WAWebHandleMsgCommon","WAWebHandleMsgTypes.flow","WAWebHandlePaymentAmountUtils","WAWebJidToWid","WAWebLidFoundationalGatingUtils","WAWebLidMigrationUtils","WAWebMessagingGatingUtils","WAWebPaymentNotificationParser","WAWebPaymentStatusUtils","WAWebProtobufsWeb.pb","WAWebSimpleSignalPNToFBIDMigration","WAWebStatusGatingUtils","WAWebUserPrefsMeUser","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["parseMessageInfo: forwarding "," to ",""]);h=function(){return a};return a}a=new(c("WADeprecatedWapParser"))("incomingMsgParser",function(a){a.assertTag("message");a.hasAttr("to")&&a.assertAttr("to",d("WAWebUserPrefsMeUser").assertGetMe().toJid());var b=a.maybeChild("plaintext");b!=null&&b["throw"]("not to be present in e2ee messages");b=a.mapChildrenWithTag("enc",function(a){return{e2eType:a.attrEnumValues("type",d("WAWebBackendJobs.flow").CiphertextType.members()),encMediaType:d("WAWebBackendJobs.flow").EncMediaType.cast(a.maybeAttrString("mediatype")),ciphertext:a.contentBytes(),retryCount:a.hasAttr("count")?a.attrInt("count"):0,hideFail:a.maybeAttrString("decrypt-fail")==="hide"}});var c=a.maybeChild("device-identity");c=c?c.contentBytes():null;var e=k(a),f=j(a,b),g=i(a,b,e,f),h=l(a,g),o=n(a),q=m(a),r=p(a);a=(a=(a=a.maybeChild("rcat"))==null?void 0:a.contentBytes())!=null?a:null;return{encs:b,msgInfo:g,msgMeta:f,bizInfo:h,hsmInfo:q,paymentInfo:o,deviceIdentity:c,rcat:a,msgBotInfo:e,reportingTokenInfo:r}});function i(a,b,e,f){var g={externalId:a.attrString("id"),ts:a.attrTime("t"),edit:a.hasAttr("edit")?a.attrInt("edit"):d("WAWebAck").EDIT_ATTR.NONE,isHsm:a.hasChild("hsm"),count:a.hasAttr("count")?a.attrInt("count"):null,pushname:a.hasAttr("notify")?a.attrString("notify"):null,username:a.hasAttr("username")?a.attrString("username"):null,displayName:a.hasAttr("display_name")?a.attrString("display_name"):null,senderPn:a.hasAttr("sender_pn")?d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("sender_pn")):null,senderLid:a.hasAttr("sender_lid")?d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("sender_lid")):null,recipientLid:a.hasAttr("recipient_lid")?d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("recipient_lid")):null,recipientPn:a.hasAttr("recipient_pn")?d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("recipient_pn")):null,recipientUsername:a.hasAttr("recipient_username")?a.attrString("recipient_username"):null,participantLid:a.hasAttr("participant_lid")?d("WAWebJidToWid").userJidToUserWid(a.attrLidUserJid("participant_lid")):null,participantPn:a.hasAttr("participant_pn")?d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("participant_pn")):null,category:a.hasAttr("category")?a.attrString("category"):null,offline:a.hasAttr("offline")?a.attrString("offline"):null},i=d("WAWebJidToWid").jidWithTypeToWid(a.attrJidWithType("from"));i.isNewsletter()&&a["throw"]("unexpected `from` attribute with newsletter Jid");var j=a.hasAttr("participant")?d("WAWebJidToWid").deviceJidToDeviceWid(a.attrDeviceJid("participant")):null,k=a.hasAttr("recipient")?d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("recipient")):null;if(d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()){var l=Boolean((j==null?void 0:j.isHosted())&&(i.isStatus()||i.isGroup()||i.isBroadcast()));if(l)throw new(d("WAParsableWapNode").XmppParsingFailure)("incomingMsgParser",""+d("WAWebCreateNackFromStanza").NackReason.InvalidHostedCompanionStanza)}l=b.every(function(a){return a.e2eType!==d("WAWebBackendJobs.flow").CiphertextType.Skmsg});b=b.some(function(a){return a.retryCount>0});var m=i.isGroup()||i.isBroadcast()?j:i;if(k!=null&&m!=null&&!d("WAWebUserPrefsMeUser").isMeAccount(m))return a["throw"]("Invalid recipient from non peer device");var n,o={};m=a.maybeChild("participants");if(m){var p=[];m.forEachChildWithTag("to",function(a){var b=d("WAWebJidToWid").deviceJidToDeviceWid(a.attrDeviceJid("jid"));a=a.maybeAttrString("eph_setting");p.push(b);a!=null&&(o[b.toString()]=a)});n=p}if(d("WAWebBotGating").isBotMsgParseEnabledForFutureproofOrFullRecv()&&e&&f&&i.isPnBot()&&f.targetChatJid!=null)return babelHelpers["extends"]({type:d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT},g,{chat:d("WAWebWidFactory").toUserWid(c("WANullthrows")(f.targetChatJid)),author:i,botParticipant:i});else if(e&&f&&i.isFbidBot()&&f.targetChatJid!=null)return babelHelpers["extends"]({type:d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT},g,{chat:d("WAWebWidFactory").toUserWid(c("WANullthrows")(d("WAWebLidMigrationUtils").toPn(f.targetChatJid),"parseMessageInfo: targetChatJid")),author:i,botParticipant:i});else if(i.isUser()){m=i;if(k!=null){if(!d("WAWebUserPrefsMeUser").isMeAccount(i))return a["throw"]("recipient on non peer chat message");m=k}e=d("WAWebSimpleSignalPNToFBIDMigration").getDeprecatedPnChatForFbid(m);e!=null&&(d("WALogger").LOG(h(),m.toLogString(),e.toLogString()),m=e);return babelHelpers["extends"]({type:d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT},g,{chat:d("WAWebWidFactory").toUserWid(m),author:i})}else if(i.isGroup()){if(j==null)return a["throw"]("group message with no participant");f=a.attrEnumOrDefault("addressing_mode",d("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE,d("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE.pn);return babelHelpers["extends"]({type:d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.GROUP},g,{chat:i,author:j,isDirect:l,addressingMode:f})}else if(i.isBroadcast()&&!i.isStatus()){if(j==null)return a["throw"]("broadcast message with no participant");if(d("WAWebUserPrefsMeUser").isMeAccount(j)){if(n==null){if(!b)return a["throw"]("peer broadcast message with no participants node");n=[]}return babelHelpers["extends"]({type:d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST},g,{chat:i,author:j,isDirect:l,bclParticipants:n,bclHashValidated:!1,bclEphSettings:o})}return babelHelpers["extends"]({type:d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.OTHER_BROADCAST},g,{chat:i,author:j,isDirect:l,ephSetting:a.maybeAttrString("eph_setting")})}else if(i.isBroadcast()&&i.isStatus()){if(j==null)return a["throw"]("status message with no participant");var q;if(d("WAWebStatusGatingUtils").isStatusPostingEnabled()){q=(e=(k=a.maybeChild("meta"))==null?void 0:k.maybeAttrString("status_setting"))!=null?e:void 0}return d("WAWebUserPrefsMeUser").isMeAccount(j)&&l?n==null?babelHelpers["extends"]({type:d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.DIRECT_PEER_STATUS},g,{chat:i,author:j,isDirect:l,statusSetting:q}):babelHelpers["extends"]({type:d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.DIRECT_PEER_STATUS},g,{chat:i,author:j,bclParticipants:n,bclHashValidated:!1,statusSetting:q}):babelHelpers["extends"]({type:d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.OTHER_STATUS},g,{chat:i,author:j,isDirect:l,statusSetting:q})}return a["throw"]("Unrecognized message type")}function j(a,b){var c=d("WAWebJidToWid").jidWithTypeToWid(a.attrJidWithType("from")),e=a.hasAttr("participant")?d("WAWebJidToWid").deviceJidToDeviceWid(a.attrDeviceJid("participant")):null;e=c.isGroup()||c.isBroadcast()?e:c;if(e==null)return a["throw"]("incomingMsgParser: to have a sender");c=a.hasChild("unavailable");!c&&b.length===0&&a["throw"]("incomingMsgParser: to have enc node children");b=!1;if(c){var f=a.maybeChild("unavailable");b=(f==null?void 0:f.maybeAttrString("hosted"))==="true"}f=a.attrEnum("type",d("WAWebHandleMsgCommon").STANZA_MSG_TYPES);var g=a.maybeChild("meta"),h=f===d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.poll?g==null?void 0:g.attrEnumOrNullIfUnknown("polltype",d("WAWebHandleMsgCommon").POLL_TYPES):null;e=e.isUser()&&!e.isLid();var i;(g==null?void 0:g.maybeAttrString("deprecated_lid_session"))==="true"?i=!0:(g==null?void 0:g.maybeAttrString("deprecated_lid_session"))==="false"&&(i=!1);e=e||d("WAWebLidFoundationalGatingUtils").getSingleE2eeSessionIncomingState()===d("WAWebLidFoundationalGatingUtils").SingleE2EESessionIncomingState.FEATURE_DISABLED?void 0:i;var j;d("WAWebStatusGatingUtils").isStatusPrivateMentionsReceiveEnabled()&&(j=(g==null?void 0:g.maybeAttrString("status_mentioned"))==="true");c={isUnavailable:c,isHostedMsgUnavailable:b,type:f,pollType:h,origin:g==null?void 0:g.attrEnumOrDefault("origin",d("WAWebHandleMsgCommon").STANZA_MSG_ORIGIN,null),rawTs:a.attrString("t"),urlNumber:a.hasChild("url_number"),urlText:a.hasChild("url_text"),deprecatedLidSession:e,statusMentioned:j,appdata:g==null?void 0:g.attrEnumOrDefault("appdata",d("WAWebHandleMsgCommon").APPDATA,null)};g&&g.hasAttr(d("WAWebHandleMsgCommon").BIZ_SOURCE_ATTR)&&(c.bizSource=g.attrString(d("WAWebHandleMsgCommon").BIZ_SOURCE_ATTR));g&&g.hasAttr("thread_msg_id")&&(c.threadMsgId=g.attrString("thread_msg_id"));g&&g.hasAttr("thread_msg_sender_jid")&&(c.threadMsgSenderJid=d("WAWebJidToWid").jidWithTypeToWid(g.attrJidWithType("thread_msg_sender_jid")));g&&g.hasAttr("target_id")&&(c.targetId=g.attrString("target_id"));g&&g.hasAttr("target_sender_jid")&&(c.targetSenderJid=d("WAWebJidToWid").jidWithTypeToWid(g.attrJidWithType("target_sender_jid")));g&&g.hasAttr("target_chat_jid")&&(c.targetChatJid=d("WAWebJidToWid").jidWithTypeToWid(g.attrJidWithType("target_chat_jid")));f===d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.event&&g&&g.hasAttr("event_type")&&(c.eventType=g.attrEnum("event_type",d("WAWebHandleMsgCommon").EVENT_TYPES));return c}function k(a){a=a.maybeChild("bot");if(!d("WAWebBotGating").isBotMsgParseEnabledForFutureproofOrFullRecv()||!a)return;var b=a.maybeAttrString("sender_timestamp_ms"),c=a.maybeAttrString("edit_target_id"),e=d("WAWebBotTypes").BotMsgEditType.cast(a.maybeAttrString("edit")),f;a.hasAttr("biz_bot")&&(a.attrString("biz_bot")==="1"?f=d("WAWebBotTypes").BizBotType.BIZ_1P:a.attrString("biz_bot")==="3"&&(f=d("WAWebBotTypes").BizBotType.BIZ_3P));a=d("WAWebBotTypes").BotMsgBodyType.cast(a.maybeAttrString("type"));b={botSenderTimestampMs:b,botEditTargetId:c,botEditType:e,botMsgBodyType:a,bizBotType:f};return b}function l(a,b){var c;c=Boolean(b==null?void 0:(c=b.author)==null?void 0:c.isBot());b=Boolean(b==null?void 0:(b=b.chat)==null?void 0:b.isBot());b=!b&&c;if(b)return{verifiedNameSerial:null,verifiedLevel:null,verifiedNameCert:null,privacyMode:null,nativeFlowName:null,campaignId:null};b=a.hasChild("verified_name")?a.child("verified_name").contentBytes():null;var e=a.attrEnumOrDefault("verified_level",d("WAWebHandleMsgCommon").MSG_VERIFIED_LEVEL,null),f=a.hasAttr("verified_name")?a.attrInt("verified_name"):-1,g=a.maybeChild("biz"),h=null;if(g!=null){var i=d("WAWebHandleMsgTypes.flow").ActualActorsEnumType.cast(g.maybeAttrInt("actual_actors")),j=d("WAWebHandleMsgTypes.flow").HostStorageEnumType.cast(g.maybeAttrInt("host_storage")),k=g.maybeAttrInt("privacy_mode_ts");i!=null&&j!=null&&k!=null&&!c&&(h={actualActors:i,hostStorage:j,privacyModeTs:k})}c=g==null?void 0:g.maybeAttrString("native_flow_name");i=g==null?void 0:g.maybeAttrString("campaign_id");return babelHelpers["extends"]({verifiedNameCert:b,verifiedLevel:e,verifiedNameSerial:f,privacyMode:h,nativeFlowName:c,campaignId:i},g&&{verifiedButtonsEnvelope:g.hasChild("buttons"),verifiedListEnvelope:g.hasChild("list"),verifiedHsmEnvelope:a.hasChild("hsm")})}function m(a){a=a.maybeChild("hsm");if(a!=null){var b=a.maybeAttrString("tag");a=a.maybeAttrString("category");if(b!=null||a!=null)return{tag:b,category:a}}return null}function n(a){var b=null,c=a.hasChild("pay")?a.child("pay"):null,e=a.hasChild("transaction")?a.child("transaction"):null,f=d("WAWebJidToWid").jidWithTypeToWid(a.attrJidWithType("from")).isGroup(),g=a.hasAttr("participant")?d("WAWebJidToWid").jidWithTypeToWid(a.attrJidWithType("participant")):null;if(d("WAWebPaymentNotificationParser").isNoviTransaction(c)||d("WAWebPaymentNotificationParser").isNoviTransaction(e))b={futureproofed:!0};else if(e){e=d("WAWebPaymentNotificationParser").parseTransactionNode(e);e&&(o(f,g,d("WAWebWidFactory").createWid(e.receiver.toString()))?b={receiverJid:e.receiver.toString(),currency:e.currency,amount1000:e.amount1000,transactionTimestamp:e.ts,txnStatus:d("WAWebPaymentStatusUtils").getPaymentTxnWebStatus(e.status)}:b={receiverJid:e.receiver.toString(),currency:e.currency,amount1000:e.amount1000,transactionTimestamp:e.ts})}else if(c){e=c.attrEnum("type",d("WAWebHandleMsgCommon").PAY_NODE_TYPES);switch(e){case d("WAWebHandleMsgCommon").PAY_NODE_TYPES.send:e=d("WAWebHandlePaymentAmountUtils").getAmount1000AndCurrency(c);var h=e.amount1000;e=e.currency;c=c.hasAttr("receiver")?c.attrString("receiver"):a.attrString("recipient");o(f,g,d("WAWebWidFactory").createWid(c))?b={receiverJid:c,currency:e,amount1000:h,transactionTimestamp:a.attrInt("t"),txnStatus:d("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.INIT}:b={receiverJid:c,currency:e,amount1000:h,transactionTimestamp:a.attrInt("t")};break;case d("WAWebHandleMsgCommon").PAY_NODE_TYPES.request:break;case d("WAWebHandleMsgCommon").PAY_NODE_TYPES.invite:break;default:break}}return b}function o(a,b,c){if(a&&b!=null&&c!=null){a=d("WAWebUserPrefsMeUser").getMeUser();if(!a.equals(b)&&!a.equals(c))return!1}return!0}b=new(c("WADeprecatedWapParser"))("incomingMsgParserForAckOnly",function(a){a.assertTag("message");var b=null;try{b=a.attrEnum("type",d("WAWebHandleMsgCommon").STANZA_MSG_TYPES)}catch(a){}var c=null;try{c=a.attrString("offline")!==""}catch(a){}var e=null;try{e=i(a,[],k(a))}catch(a){}return{type:b,externalId:a.attrString("id"),from:d("WAWebJidToWid").jidWithTypeToWid(a.attrJidWithType("from")),participant:a.hasAttr("participant")?d("WAWebJidToWid").deviceJidToDeviceWid(a.attrDeviceJid("participant")):null,msgInfo:e,offline:c}});function p(a){if(!d("WAWebMessagingGatingUtils").isReportingTokenReceivingEnabled())return null;a=a.maybeChild("reporting");if(a==null)return null;var b={},c=a.maybeChild("reporting_token");a=a.maybeChild("reporting_tag");c!=null&&(b.reportingToken=c.contentBytes(),b.version=c.attrInt("v"));a!=null&&(b.reportingTag=a.contentBytes());return b}g.incomingMsgParser=a;g.incomingMsgParserForAckOnly=b}),98);
__d("WAWebSendRetryReceiptJob",["$InternalEnum","Promise","WADeprecatedSendIq","WALogger","WAWap","WAWebAdvSignatureApi","WAWebCommsAckParser","WAWebCommsWapMd","WAWebConstantsDeprecated","WAWebCryptoCurve25519","WAWebHandleMsgError","WAWebMessagingGatingUtils","WAWebSignalCommonErrors","WAWebSignalKeyApi","WAWebSignalProtocolStore","WAWebSignalStoreApi","WAWebSignalUtilsApi","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime","cr:10198","cr:4533","err","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["error: ",""]);j=function(){return a};return a}var k=2,l=b("$InternalEnum")({UnknownError:0,SignalErrorNoSession:1,SignalErrorInvalidKey:2,SignalErrorInvalidKeyId:3,SignalErrorInvalidMessage:4,SignalErrorInvalidSignature:5,SignalErrorFutureMessage:6,SignalErrorBadMac:7,SignalErrorInvalidSession:8,SignalErrorInvalidMsgKey:9,BadBroadcastEphemeralSetting:10,UnknownCompanionNoPrekey:11,AdvFailure:12,StatusRevokeDelay:13});function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.retryCount,f=a.to,g=a.participant,k=a.recipient,l=a.externalId,m=a.rawTs,o=a.isPeer;o=o===void 0?!1:o;a=a.retryReason;c("gkx")("26258")||(b("cr:10198")==null?void 0:b("cr:10198").injectDebug(f,"RetryReceiptSent","externalId:"+l));if(!c("gkx")("26258")){var p=b("cr:4533")==null?void 0:b("cr:4533").getDebugDoNotSendRetryReceipt();if(p!=null&&p>0){b("cr:4533")==null?void 0:b("cr:4533").setDebugDoNotSendRetryReceipt(p-1);return(h||(h=b("Promise"))).resolve()}}try{p=d("WAWebSignalProtocolStore").getSignalProtocolStore();p=(yield (h||(h=b("Promise"))).all([p.getLocalRegistrationId(),p.getIdentityKeyPair()]));var q=p[0];p=p[1];if(q==null||p==null)throw c("err")("No registration info found");var r;try{r=(yield n(e,d("WAWebCryptoCurve25519").toCurveKeyPair(p)))}catch(a){d("WALogger").ERROR(j(),a).sendLogs("sendRetryReceipt: error while creating key section in retry receipt")}p=!f.isBot()&&Boolean(g==null?void 0:g.isBot());if(p)return;p=d("WAWap").DROP_ATTR;var s=d("WAWap").DROP_ATTR,t=d("WAWap").DROP_ATTR,u;if(f.isUser()){u=d("WAWebCommsWapMd").DEVICE_JID(f);if(d("WAWebUserPrefsMeUser").getMeUser().equals(d("WAWebWidFactory").toUserWid(f)))if(o)p=d("WAWap").CUSTOM_STRING("peer");else if(!k)return(h||(h=b("Promise"))).reject(c("err")("sendRetryReceipt: send retry to peer device without recipient"));else s=d("WAWebCommsWapMd").USER_JID(k)}else u=d("WAWebCommsWapMd").CHAT_JID(f),t=g?d("WAWebCommsWapMd").DEVICE_JID(g):d("WAWap").DROP_ATTR;o=d("WAWap").wap("receipt",{id:d("WAWap").CUSTOM_STRING(l),to:u,participant:t,recipient:s,type:"retry",category:p},d("WAWap").wap("retry",{v:"1",count:d("WAWap").INT(e),id:d("WAWap").CUSTOM_STRING(l),t:d("WAWap").CUSTOM_STRING(m),error:d("WAWebMessagingGatingUtils").isRetryReceiptErrorCodeEnabled()&&a!=null?d("WAWap").INT(a):d("WAWap").DROP_ATTR}),d("WAWap").wap("registration",null,d("WAWap").BIG_ENDIAN_CONTENT(q)),r);return d("WADeprecatedSendIq").deprecatedSendStanzaAndWaitForAck(o,d("WAWebCommsAckParser").toCoreAckTemplate({id:l,"class":"receipt",from:f,participant:g,type:"retry"}))}catch(a){d("WALogger").ERROR(i(),a).sendLogs("sendRetryReceipt: error while creating or sending the retry message")}});return m.apply(this,arguments)}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield p(a,b));b=a[0];a=a[1];a&&(yield d("WAWebSignalStoreApi").waSignalStore.markKeyAsUploaded(a.keyId),yield d("WAWebSignalStoreApi").waSignalStore.markPreKeyAsDirectDistribution(a.keyId));return b});return o.apply(this,arguments)}function p(a,b){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){if(a<k)return(h||(h=b("Promise"))).resolve([null,null]);try{a=(yield (h||(h=b("Promise"))).all([d("WAWebSignalStoreApi").waSignalStore.getSignedPreKey(),d("WAWebSignalStoreApi").waSignalStore.getOrGenSinglePreKey(d("WAWebSignalKeyApi").generatePreKeyPair),d("WAWebAdvSignatureApi").getADVEncodedIdentity().then(function(a){return d("WAWap").wap("device-identity",null,a)})]));var f=a[0],g=a[1];a=a[2];if(!f)throw c("err")("Signed pre key is not available");e=d("WAWap").wap("keys",null,d("WAWap").wap("type",null,c("WAWebConstantsDeprecated").KEY_BUNDLE_TYPE),d("WAWap").wap("identity",null,e.pubKey),d("WAWebSignalUtilsApi").xmppPreKey(g),d("WAWebSignalUtilsApi").xmppSignedPreKey(f),a);return[e,g]}catch(a){throw c("err")("Could not create keys section for retry")}});return q.apply(this,arguments)}function e(a){if(a instanceof d("WAWebHandleMsgError").UnknownDeviceMessageError)return l.UnknownCompanionNoPrekey;else if(a instanceof d("WAWebSignalCommonErrors").SignalDecryptionError)switch(a.message){case"errSignalNoSession":case"errLoadSenderKeySession":return l.SignalErrorNoSession;case"errSignalInvalidMsg":return l.SignalErrorInvalidMessage;case"errSignalInvalidKey":return l.SignalErrorInvalidKey;case"errSignalTooManyMessagesInFuture":case"errSignalGrpTooManyMessagesInFuture":return l.SignalErrorFutureMessage;case"errInvalidMacWithDecryptedPlaintext":case"errInvalidMacInvalidCipherKey":case"errInvalidMacInvalidCipherKeyNewChain":return l.SignalErrorBadMac}}g.RetryReason=l;g.sendRetryReceipt=a;g.getRetryReasonFromError=e}),98);
__d("WAWebPostE2eMessageRecvMetric",["WAWebABProps","WAWebBackendApi","WAWebBackendJobsCommon","WAWebE2eMessageRecvWamEvent","WAWebGroupType","WAWebHandleMsgCommon","WAWebWamAddressingModeUtils","WAWebWamEnumAgentEngagementEnumType","WAWebWamMsgUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.enc,c=a.from,e=a.msgMeta,f=a.msgInfo,g=a.msgBotInfo;a=a.error;var h=e.type===d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.reaction,i=f.chat;a=new(d("WAWebE2eMessageRecvWamEvent").E2eMessageRecvWamEvent)({e2eCiphertextType:d("WAWebBackendJobsCommon").getMetricE2eCiphertextType(b.e2eType),e2eCiphertextVersion:d("WAWebBackendJobsCommon").CIPHERTEXT_VERSION,e2eFailureReason:a==null?void 0:a.e2eFailureReason,e2eSuccessful:!1,messageMediaType:d("WAWebBackendJobsCommon").getMetricMediaType({encMediaType:b.encMediaType,msgType:e.type,msgPollType:e.pollType}),retryCount:b.retryCount,editType:d("WAWebBackendJobsCommon").getMetricEditType(f.edit),botType:d("WAWebWamMsgUtils").getWamBotType(i,g==null?void 0:g.bizBotType)});e=d("WAWebBackendJobsCommon").getMetricE2eDestination(c);e!=null&&(a.e2eDestination=e);d("WAWebABProps").getABPropConfigValue("web_extra_lid_group_logging_attributes")&&(f.addressingMode!=null&&(a.serverAddressingMode=d("WAWebWamAddressingModeUtils").getWamAddressingModeFromString(f.addressingMode)));if(i.isGroup()){b=(yield d("WAWebBackendApi").frontendSendAndReceive("getGroupMetadata",{groupWid:i}));if(b!=null){a.isLid=b.isCag&&h;g=d("WAWebGroupType").groupTypeToWamEnum(d("WAWebGroupType").getGroupTypeFromGroupMetadata(b));a.typeOfGroup=g;Object.assign(a,d("WAWebWamAddressingModeUtils").getAddressingModeMetricsFromGroupMetadata(b))}}else a.isLid=i.isLid();f.author.isBot()&&(f.chat.isBot()?a.agentEngagementType=d("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE.DIRECT_CHAT:a.agentEngagementType=d("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE.INVOKED);return a});return i.apply(this,arguments)}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield h(a));a.e2eSuccessful=!0;a.weight=1e3;a.commit()});return j.apply(this,arguments)}function c(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield h(a));a.e2eSuccessful=!1;a.weight=1;a.commit()});return k.apply(this,arguments)}g.postSuccessE2eMessageRecvMetric=a;g.postFailureE2eMessageRecvMetric=c}),98);
__d("WAWebMsgProcessingDecryptionHandler",["$InternalEnum","WALogger","WATimeUtils","WAWebABProps","WAWebBackendJobs.flow","WAWebBackendJobsCommon","WAWebCreateNackFromStanza","WAWebHandleMsgCommon","WAWebHandleMsgError","WAWebHandleMsgProcess","WAWebHandleMsgTypes.flow","WAWebIsOfficialClient","WAWebMessagingGatingUtils","WAWebMsgProcessingApiUtils","WAWebMsgType","WAWebPostE2eMessageRecvMetric","WAWebPostIncomingMessageDropMetric","WAWebSendRetryReceiptJob","WAWebSignalCommonErrors","WAWebWamEnumE2eFailureReason","asyncToGeneratorRuntime","cr:4122","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Dropping incoming message with "," error"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["messageDrop: insert a debug placeholder for ",", reason: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: e2eType:"," error:",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: e2eType:"," error:",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: e2eType:"," infoType:"," isDirect:"," error:",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: e2eType:"," error:",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: e2eType:"," error:",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: e2eType:"," error:",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: e2eType:"," error:",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: msgId::"," e2eType:"," error:",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: expired status has 2 encs, expired for ","s client time or for ","s with a clock skew, enc is "," and is ",""]);r=function(){return a};return a}var s=b("$InternalEnum").Mirrored(["SignalRetryable","SignalDuplicateMessage","UnknownDevice","DeviceSentMessage","InvalidProtobuf","HsmMismatch","Unknown"]),t=new Set([s.SignalRetryable]);function u(a){return a.message==="errDuplicateMsg"?s.SignalDuplicateMessage:s.SignalRetryable}function v(a){if(a instanceof d("WAWebHandleMsgError").UnknownDeviceMessageError)return s.UnknownDevice;else if(a instanceof d("WAWebSignalCommonErrors").SignalDecryptionError)return u(a);else if(a instanceof d("WAWebSignalCommonErrors").SignalMessageCounterError)return s.SignalDuplicateMessage;else if(a instanceof d("WAWebHandleMsgError").DeviceSentMessageError)return s.DeviceSentMessage;else if(a instanceof d("WAWebHandleMsgError").MessageValidationError)return s.InvalidProtobuf;else if(a instanceof d("WAWebHandleMsgCommon").HsmMismatchError)return s.HsmMismatch;return s.Unknown}function a(a){var b={accessedEncs:new Set(),pkOrMsgFailedEnc:null,skMsgFailedEnc:null};return{handleError:function(c,e){var f=v(e);c.e2eType===d("WAWebBackendJobs.flow").CiphertextType.Skmsg?b.skMsgFailedEnc={enc:c,error:e,errorType:f}:b.pkOrMsgFailedEnc={enc:c,error:e,errorType:f};B(a,{enc:c,error:e,errorType:f})},canDecryptNext:function(a){var d;c("gkx")("26258")||D();d=(d=b.pkOrMsgFailedEnc)==null?void 0:d.errorType;if(d!=null&&t.has(d))return!1;b.accessedEncs.add(a.e2eType);return!0},getResult:function(c){return y(a,b,c)}}}function w(a){a=a.ciphertext.byteLength;if(a===0)return"empty";return a<100?"small":"large"}function x(a,b,c){var e=a.msgInfo;a=a.encs;c===void 0&&(c=!1);var f=e.chat;e=e.ts;if(f.isStatus()){f=d("WATimeUtils").unixTimeWithoutClockSkewCorrection()-(e+d("WATimeUtils").DAY_SECONDS);var g=f>0;if(g&&c&&a.length===2){c=d("WATimeUtils").unixTime()-(e+d("WATimeUtils").DAY_SECONDS);d("WALogger").WARN(r(),f,c,b.enc.e2eType,w(b.enc)).tags("messaging").sendLogs("handleMsg: expired status multiple encs",{sampling:.01})}return g}return!1}function y(a,b,c){return z.apply(this,arguments)}function z(){z=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e;e=(e=b.skMsgFailedEnc)!=null?e:b.pkOrMsgFailedEnc;var f=e!=null&&b.accessedEncs.has(d("WAWebBackendJobs.flow").CiphertextType.Skmsg)&&b.skMsgFailedEnc==null;if(e==null||f||x(a,e,!0)&&d("WAWebABProps").getABPropConfigValue("web_skip_expired_status_error"))return{result:d("WAWebHandleMsgTypes.flow").E2EProcessResult.SUCCESS,hasInactiveMsg:c};A(a,b);C(a,b);f=e.enc;c=e.error;b=e.errorType;var g;(c instanceof d("WAWebSignalCommonErrors").SignalDecryptionError||c instanceof d("WAWebHandleMsgError").UnknownDeviceMessageError)&&(g=d("WAWebSendRetryReceiptJob").getRetryReasonFromError(c),b!==s.SignalDuplicateMessage&&(f.hideFail||(yield d("WAWebHandleMsgProcess").processPlaceholderMsg({type:d("WAWebMsgType").MSG_TYPE.CIPHERTEXT,msgMeta:a.msgMeta,msgInfo:a.msgInfo,placeholderType:d("WAWebHandleMsgTypes.flow").PlaceholderType.E2E,placeholderAddReason:d("WAWebBackendJobsCommon").getPlaceholderAddReason(c)}))));switch(b){case s.SignalRetryable:case s.UnknownDevice:return{result:d("WAWebHandleMsgTypes.flow").E2EProcessResult.RETRY,retryCount:f.retryCount,retryReason:g};case s.SignalDuplicateMessage:return{result:d("WAWebHandleMsgTypes.flow").E2EProcessResult.SIGNAL_OLD_COUNTER_ERROR,failedEnc:f};case s.DeviceSentMessage:return{result:d("WAWebHandleMsgTypes.flow").E2EProcessResult.PARSE_VALIDATION_ERROR};case s.InvalidProtobuf:return{result:d("WAWebHandleMsgTypes.flow").E2EProcessResult.PARSE_VALIDATION_ERROR,e2eFailureReason:c instanceof d("WAWebHandleMsgError").MessageValidationError?c.e2eFailureReason:void 0};case s.HsmMismatch:return{result:d("WAWebHandleMsgTypes.flow").E2EProcessResult.HSM_MISMATCH};case s.Unknown:return{result:d("WAWebHandleMsgTypes.flow").E2EProcessResult.PARSE_ERROR}}});return z.apply(this,arguments)}function A(a,b){var c=b.skMsgFailedEnc;b=b.pkOrMsgFailedEnc;var e=a.msgInfo,f=a.msgMeta;c=(c=c)!=null?c:b;if(c==null)return;b=c.enc;var g=c.errorType,h=c.error;if(x(a,c)){d("WAWebABProps").getABPropConfigValue("web_skip_expired_status_error")||d("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropExpired({msgInfo:e,msgMeta:f,enc:b,error:h instanceof d("WAWebHandleMsgError").MessageValidationError?h:void 0});return}switch(g){case s.SignalRetryable:case s.UnknownDevice:case s.HsmMismatch:case s.SignalDuplicateMessage:break;case s.InvalidProtobuf:case s.DeviceSentMessage:d("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropInvalidProtobuf({msgInfo:e,msgMeta:f,enc:b,error:h instanceof d("WAWebHandleMsgError").MessageValidationError?h:void 0});break;case s.Unknown:d("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropInvalidStanzaFromDecryptedMessageInfo({msgInfo:e,msgMeta:f,enc:b})}}function B(a,b){var e=a.msgInfo,f=a.msgMeta;a=a.msgBotInfo;var g=b.enc,h=b.error;b=b.errorType;var i=d("WAWebMsgProcessingApiUtils").getFrom(e);void d("WAWebPostE2eMessageRecvMetric").postFailureE2eMessageRecvMetric({enc:g,from:i,msgMeta:f,msgInfo:e,msgBotInfo:a,error:h instanceof d("WAWebHandleMsgError").MessageValidationError?h:null});d("WALogger").WARN(q(),e.externalId,g.e2eType,h.stack).tags("messaging");switch(b){case s.SignalDuplicateMessage:break;case s.SignalRetryable:case s.UnknownDevice:c("gkx")("26258")||d("WALogger").WARN(p(),g.e2eType,h).tags("messaging").sendLogs("handleMsg: decryption error");break;case s.InvalidProtobuf:h instanceof d("WAWebHandleMsgError").MessageValidationError&&(d("WAWebIsOfficialClient").isUnofficialStanzaId(e.externalId)?d("WALogger").WARN(o(),g.e2eType,h).tags("messaging").sendLogs("handleMsg from UC: "+h.name,{sampling:h.sendLogs===!0?.01:h.sendLogs}):c("gkx")("26259")&&h instanceof d("WAWebHandleMsgError").MessageProtobufInvalidMessageTypes?d("WALogger").WARN(n(),g.e2eType,h).tags("messaging").sendLogs("(intern) handleMsg: "+h.name):d("WALogger").WARN(m(),g.e2eType,h).tags("messaging").sendLogs("handleMsg: "+h.name,h.sendLogs===!0?void 0:{sampling:h.sendLogs}));break;case s.DeviceSentMessage:d("WALogger").WARN(l(),g.e2eType,e.type,e.isDirect,h).tags("messaging").sendLogs("handleMsg: parse device sent message error");break;case s.HsmMismatch:d("WALogger").WARN(k(),g.e2eType,h).tags("messaging").sendLogs("handleMsg: hsm mismatch error");break;case s.Unknown:d("WALogger").WARN(j(),g.e2eType,h).tags("messaging").sendLogs("handleMsg: parse decrypted message error");break}}function C(a,b){var c=b.skMsgFailedEnc;b=b.pkOrMsgFailedEnc;c=(c=c)!=null?c:b;if(c==null)return;if(!d("WAWebMessagingGatingUtils").isMessageDropPlaceholderEnabled())return;b=a.msgInfo.chat;if(!(b.isUser()||b.isGroup()))return;if(x(a,c))return;b=null;switch(c.errorType){case s.SignalRetryable:case s.SignalDuplicateMessage:case s.UnknownDevice:break;case s.DeviceSentMessage:case s.InvalidProtobuf:b=d("WAWebCreateNackFromStanza").NackReason.InvalidProtobuf;break;case s.HsmMismatch:case s.Unknown:b=d("WAWebCreateNackFromStanza").NackReason.ParsingError;break}if(b!=null){var e=a.msgInfo.externalId;d("WALogger").WARN(i(),e,c.errorType).tags("messaging");void d("WAWebHandleMsgProcess").processPlaceholderMsg({type:d("WAWebMsgType").MSG_TYPE.DEBUG_PLACEHOLDER,msgInfo:a.msgInfo,nackReason:b})}}function D(){if(!c("gkx")("26258")){var a;a=(a=b("cr:4122")==null?void 0:b("cr:4122").isNextMessageDropped())!=null?a:null;if(a==null)return;d("WALogger").LOG(h(),a);switch(a){case s.SignalRetryable:throw new(d("WAWebSignalCommonErrors").SignalDecryptionError)("errSignalErr");case s.SignalDuplicateMessage:throw new(d("WAWebSignalCommonErrors").SignalDecryptionError)("errDuplicateMsg");case s.InvalidProtobuf:throw new(d("WAWebHandleMsgError").MessageValidationError)("test",d("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);case s.DeviceSentMessage:throw new(d("WAWebHandleMsgError").DeviceSentMessageError)(1,1);default:return}}}g.DecryptionErrorType=s;g.createDecryptionHandler=a}),98);
__d("WAWebVoipSignalingEnums",[],(function(a,b,c,d,e,f){a={NONE:0,OFFER:1,OFFER_RECEIPT:2,ACCEPT:3,REJECT:4,TERMINATE:5,TRANSPORT:6,OFFER_ACK:7,OFFER_NACK:8,RELAY_LATENCY:9,RELAY_ELECTION:10,INTERRUPTION:11,MUTE:12,PREACCEPT:13,ACCEPT_RECEIPT:14,VIDEO_STATE:15,NOTIFY:16,GROUP_INFO:17,ENC_REKEY:18,PEER_STATE:19,VIDEO_STATE_ACK:20,FLOW_CONTROL:21,WEB_CLIENT:22,ACCEPT_ACK:23,GROUP_UPDATE:24,OFFER_NOTICE:25,MAX:26};b=["NONE","OFFER","OFFER_RECEIPT","ACCEPT","REJECT","TERMINATE","TRANSPORT","OFFER_ACK","OFFER_NACK","RELAY_LATENCY","RELAY_ELECTION","INTERRUPTION","MUTE","PREACCEPT","ACCEPT_RECEIPT","VIDEO_STATE","NOTIFY","GROUP_INFO","ENC_REKEY","PEER_STATE","VIDEO_STATE_ACK","FLOW_CONTROL","WEB_CLIENT","ACCEPT_ACK","GROUP_UPDATE","OFFER_NOTICE","MAX"];c={SINGLE_PARTICIPANT:"enc",GROUP_CALL:"enc_rekey_retry"};f.TYPE=a;f.TYPE_NAME=b;f.ENC_RETRY_RECEIPT_ATTRS=c}),66);
__d("WAWebPaymentNotificationHandler",["WALogger","WANullthrows","WAWap","WAWebCommonMsgSubtypeTypes","WAWebDBMsgUtils","WAWebDBProcessMessage","WAWebHandleSingleMsg","WAWebMessagingGatingUtils","WAWebMsgCollection","WAWebMsgKey","WAWebMsgModel","WAWebMsgType","WAWebPaymentNotificationParser","WAWebPaymentStatusUtils","WAWebSchemaOrphanPaymentNotification","WAWebStateUtils","WAWebUserPrefsMeUser","WAWebViewMode.flow","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getOrphanPaymentNotificationTable.bulkRemove: failed for: ",", error: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handlePaymentTransactionNotification: no msg found for id: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handlePaymentNotification: failed: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["createPaymentNotificationAck: invalid notification, stanzaId:",", from:",""]);k=function(){return a};return a}function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("WAWebPaymentNotificationParser").paymentNotificationParser.parse(a);if(a.error!=null){d("WALogger").WARN(j(),a.error);throw a.error}var b=a.success,c=b.transaction;b=b.invite;b!=null?yield o(b):c!=null&&(yield m(c));if(d("WAWebMessagingGatingUtils").isPaymentNotificationAckKickFixEnabled())return x(a.success)});return l.apply(this,arguments)}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=c("WANullthrows")(a.msgKey),e=d("WAWebMsgCollection").MsgCollection.get(b);e=e?d("WAWebStateUtils").unproxy(e):yield d("WAWebDBMsgUtils").getMsgByMsgKey(b);if(!e){d("WALogger").WARN(i(),b);b=babelHelpers["extends"]({},a,{msgKey:b.toString()});yield d("WAWebSchemaOrphanPaymentNotification").getTable().createOrReplace(b);return}yield q(e,a)});return n.apply(this,arguments)}function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.type!=="account-set-up")return;a=(yield v(a.from,a.timestamp));yield d("WAWebHandleSingleMsg").handleSingleMsg(a.from,a)});return p.apply(this,arguments)}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=[];s(a,b);c.push(a.id.toString());b=[a instanceof d("WAWebMsgModel").Msg?a.toJSON():a];if(a.paymentRequestMessageKey!=null){var e=d("WAWebMsgCollection").MsgCollection.get(a.paymentRequestMessageKey);e=e?d("WAWebStateUtils").unproxy(e):yield d("WAWebDBMsgUtils").getMsgByMsgKey(a.paymentRequestMessageKey||"");e&&(e.paymentStatus=a.paymentStatus,e.paymentTxnStatus=d("WAWebPaymentStatusUtils").determinePaymentRequestFulfilledStatus(a.paymentTxnStatus),b.push(e instanceof d("WAWebMsgModel").Msg?e.toJSON():e))}d("WAWebSchemaOrphanPaymentNotification").getTable().bulkRemove(c)["catch"](function(a){d("WALogger").ERROR(h(),c,a)});yield d("WAWebDBProcessMessage").updateExistingMessages(b)});return r.apply(this,arguments)}function s(a,b){b&&(b.status!=null&&(a.paymentStatus=d("WAWebPaymentStatusUtils").getPaymentWebStatus(b.status,b.type),a.paymentTxnStatus=d("WAWebPaymentStatusUtils").getPaymentTxnWebStatus(b.status)),a.paymentCurrency=b.currency||"",a.paymentAmount1000=c("WANullthrows")(b.amount1000),a.paymentMessageReceiverJid=b.receiver,a.paymentTransactionTimestamp=c("WANullthrows")(b.ts))}function e(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.map(function(a){return a.id.toString()});b=(yield d("WAWebSchemaOrphanPaymentNotification").getTable().bulkGet(b));var e=new Map();a.forEach(function(a){e.set(a.id.toString(),a)});b.forEach(function(a){if(a){var b=e.get(a.msgKey);if(!b)return;void q(b,{receiver:a.receiver,currency:a.currency,amount1000:a.amount1000,type:a.type,status:a.status,ts:a.ts,msgKey:c("WAWebMsgKey").fromString(a.msgKey)})}})});return t.apply(this,arguments)}function f(){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebSchemaOrphanPaymentNotification").getTable().all()),b=new Map(),e=[];a.forEach(function(a){var f=d("WAWebMsgCollection").MsgCollection.get(a.msgKey);f?void q(f,{receiver:a.receiver,currency:a.currency,amount1000:a.amount1000,type:a.type,status:a.status,ts:a.ts,msgKey:c("WAWebMsgKey").fromString(a.msgKey)}):(b.set(a.msgKey,a),e.push(a.msgKey))});if(e.length>0){a=(yield d("WAWebDBMsgUtils").getMsgsByMsgKey(e,function(a){var e=b.get(a.id.toString());e&&(a.paymentTxnStatus=d("WAWebPaymentStatusUtils").getPaymentTxnWebStatus(e.status),a.paymentCurrency=e.currency||"",a.paymentAmount1000=c("WANullthrows")(e.amount1000),a.paymentMessageReceiverJid=e.receiver,a.paymentTransactionTimestamp=c("WANullthrows")(e.ts))}));return d("WAWebDBProcessMessage").updateExistingMessages(a)}});return u.apply(this,arguments)}function v(a,b){return w.apply(this,arguments)}function w(){w=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return{id:new(c("WAWebMsgKey"))({remote:a,fromMe:!1,id:yield c("WAWebMsgKey").newId()}),type:d("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE,kind:d("WAWebMsgType").MsgKind.NotificationTemplate,viewMode:d("WAWebViewMode.flow").ViewModeType.VISIBLE,subtype:d("WAWebCommonMsgSubtypeTypes").MsgSubtype.PaymentInviteAccountSetUp,from:a,to:d("WAWebUserPrefsMeUser").getMeUser(),recipients:[],t:b,templateParams:[a]}});return w.apply(this,arguments)}function x(a){var b=a.stanzaId;a=a.from;if(b==null||a==null){d("WALogger").WARN(k(),b,a).sendLogs("payment-notifications-missing-stanza-id-or-from");return null}return d("WAWap").wap("ack",{"class":"notification",type:"pay",id:d("WAWap").CUSTOM_STRING(b),to:a})}g.handlePaymentNotification=a;g.processOrphanPaymentNotifications=e;g.processAllOrphanPaymentNotifications=f}),98);
__d("WAWebExternalBetaApi",["Promise","WAComms","WALogger","WAWebAbPropsSyncJob","WAWebBackendApi","WAWebStartBackend","WAWebUserPrefsGeneral","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAWebExternalBetaApi: Syncing AB Props after changing Web Beta opt-in status"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["WAWebExternalBetaApi: Restarting backend"]);j=function(){return a};return a}function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield d("WAWebUserPrefsGeneral").getWhatsAppWebExternalBetaJoinedIdb());c!==a&&(yield (h||(h=b("Promise"))).all([d("WAWebUserPrefsGeneral").setWhatsAppWebExternalBetaDirtyBitIdb(!0),d("WAWebUserPrefsGeneral").setWhatsAppWebExternalBetaJoinedIdb(a)]),yield l(),d("WAWebBackendApi").frontendFireAndForget("changeOptInStatusForExternalWebBeta",{}))});return k.apply(this,arguments)}function l(){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){d("WALogger").LOG(j()),d("WAComms").stopComms(),yield d("WAWebStartBackend").startWebComms(),yield d("WAComms").startHandlingRequests(),(yield d("WAWebUserPrefsGeneral").getWhatsAppWebExternalBetaDirtyBitIdb())&&(d("WALogger").LOG(i()),yield d("WAWebAbPropsSyncJob").syncABPropsTask(),yield d("WAWebUserPrefsGeneral").setWhatsAppWebExternalBetaDirtyBitIdb(!1))});return m.apply(this,arguments)}g.changeOptInStatusForExternalWebBeta=a}),98);
__d("WAWebExternalWebBetaSync",["Promise","WALogger","WASyncdAction","WASyncdConst","WAWebABProps","WAWebExternalBetaApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["external beta opt in sync: operation not supported"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: successfully set web external beta opt in to ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["beta setting sync: malformed mutation value"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["beta setting sync: malformed mutation"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: action not enabled"]);m=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 3};e.getAction=function(){return d("WASyncdConst").Actions.ExternalWebBeta};e.applyMutations=function(a){if(d("WAWebABProps").getABPropConfigValue("external_beta_can_join")!==!0){d("WALogger").LOG(m());return(h||(h=b("Promise"))).resolve(a.map(function(){return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}))}return(h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{if(a.operation==="set"){a=a.value;a=a.externalWebBetaAction;if(!a){d("WALogger").WARN(l());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}if(a.isOptIn!==void 0)yield d("WAWebExternalBetaApi").changeOptInStatusForExternalWebBeta(a.isOptIn);else{d("WALogger").WARN(k());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}d("WALogger").DEV(j(),a.isOptIn);return{actionState:d("WASyncdConst").SyncActionState.Success}}d("WALogger").WARN(i());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}});return function(b){return a.apply(this,arguments)}}()))};return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebGetOnlyNoteByChatJidJob",["WAJobOrchestratorTypes","WAWebDBNoteDatabaseApi","WAWebOrchestratorNonPersistedJob","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=a.chatJid;return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("getOnlyNoteByChatJid",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return d("WAWebDBNoteDatabaseApi").getOnlyNoteByChatJid(c)}),{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}).waitUntilCompleted()});return h.apply(this,arguments)}g.getOnlyNoteByChatJidJob=a}),98);
__d("WAWebHistorySyncUIText",["fbt","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");a=function(){return h._("__JHASH__Rvzc7BdERtu__JHASH__")};b=function(a){return h._("__JHASH__FlSA2SGpcxy__JHASH__",[h._implicitParam("=m2",j.jsx("button",{className:"x1a06ls3",onClick:a,children:h._("__JHASH__SxwEKW2c4EQ__JHASH__")}))])};d=function(){return h._("__JHASH__qpAmhuB53eu__JHASH__")};e=function(){return h._("__JHASH__UpOmAOPt6Nv__JHASH__")};f=function(){return h._("__JHASH__F3LeGnqMRSP__JHASH__")};c=function(a){return h._("__JHASH__gxrC0mIqCYp__JHASH__",[h._param("percentage",a,[0])])};var k=function(){return h._("__JHASH___PUy8vTodLc__JHASH__")},l=function(a){return h._("__JHASH__ghqhd9ATsr-__JHASH__",[h._param("percentage",a,[0])])},m=function(){return h._("__JHASH__3zMwBCY18-M__JHASH__")},n=function(){return h._("__JHASH__GsJLjbJZBz5__JHASH__")},o=function(){return h._("__JHASH__rxi8nJ5Birv__JHASH__")},p=function(){return h._("__JHASH__c-OJntHqL44__JHASH__")},q=function(){return h._("__JHASH__A05MT9t974___JHASH__")},r=function(){return h._("__JHASH__jXpG7qa6kWx__JHASH__")};g.SYNC_LOADING=a;g.SYNC_IN_PROGRESS_CONTEXTUAL_DRAWER=b;g.SYNC_IN_PROGRESS_CONTEXTUAL_SYSTEM_MESSAGE_TEXT=d;g.SYNCING_OLDER_MESSAGES_MODAL_TITLE=e;g.SYNCING_OLDER_MESSAGES_MODAL_TEXT=f;g.SYNCING_OLDER_MESSAGES_MODAL_PERCENT=c;g.SYNCING_OLDER_MESSAGES_SETTINGS_TITLE=k;g.SYNCING_OLDER_MESSAGES_SETTINGS_PERCENT_COMPLETE=l;g.SYNCING_PAUSED_CONTEXTUAL_SYSTEM_MESSAGE_TEXT=m;g.SYNCING_PAUSED_CONTEXTUAL_TEXT=n;g.SYNCING_PAUSED_GLOBAL_SETTINGS_TITLE=o;g.SYNCING_PAUSED_GLOBAL_SETTINGS_SUBTITLE=p;g.SYNCING_PAUSED_POPUP_TITLE=q;g.SYNCING_PAUSED_POPUP_DESC=r}),226);
__d("WAWebNoteModel",["WAWebBaseModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.type=d("WAWebBaseModel").prop(),c.chatJid=d("WAWebBaseModel").prop(),c.content=d("WAWebBaseModel").prop(),c.createdAt=d("WAWebBaseModel").prop(),c.modifiedAt=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.initialize=function(){a.prototype.initialize.call(this)};return b}(d("WAWebBaseModel").BaseModel);a.Proxy="note";b=d("WAWebBaseModel").defineModel(a);g.Note=b}),98);
__d("WAWebNoteCollection",["WAWebBaseCollection","WAWebNoteModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this)||this;b.queriedChatJids=new Set();return b}var c=b.prototype;c.maybeGetNoteByChatJid=function(a){var b=this.findFirst(function(b){return b.chatJid===a});return(b=b)!=null?b:null};c.hasCachedQueryForChatJid=function(a){return this.queriedChatJids.has(a)};c.updateCollectionFromDB=function(a,b){this.queriedChatJids.add(a);if(b==null)return;this.add(new(d("WAWebNoteModel").Note)(b),{merge:!0})};c.purgeNotesByChatJid=function(a){var b=this.where({chatJid:a});this.remove(b);this.queriedChatJids["delete"](a)};return b}(d("WAWebBaseCollection").BaseCollection);a.model=d("WAWebNoteModel").Note;b=new a();g.NoteCollection=b}),98);
__d("WAWebNoteSync",["Promise","WAJids","WALogger","WALongInt","WAServerSync.pb","WASyncAction.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WAWebBaseModel","WAWebNoteAction","WAWebNoteCollection","WAWebSchemaNote","WAWebSyncdActionUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["noteEditAction.unstructuredContent is empty"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["noteEditAction.createdAt is a non-safe integer"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["noteEditAction.createdAt is empty"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["noteEditAction.chatJid is not a valid chatJid"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["noteEditAction.chatJid is empty"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["noteEditAction.type is empty"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["note sync: malformed mutation"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["note sync: operation not supported"]);p=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 7};e.getAction=function(){return d("WASyncdConst").Actions.NoteEdit};e.applyMutations=function(a){return(h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.operation!=="set"){d("WALogger").WARN(p());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}try{var b=a.indexParts,c=a.value;b=b[1];b||d("WAWebSyncdActionUtils").throwInvalidActionIndex();c=c.noteEditAction;if(!c){d("WALogger").WARN(o());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}if(c.deleted===!0){yield d("WAWebSchemaNote").getNoteTable().remove(b);d("WAWebNoteCollection").NoteCollection.remove(b);return{actionState:d("WASyncdConst").SyncActionState.Success}}var e=c.type,f=c.chatJid,g=c.createdAt;c=c.unstructuredContent;if(e==null){d("WALogger").WARN(n());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}if(f==null){d("WALogger").WARN(m());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}f=d("WAJids").validateChatJid(f);if(f==null){d("WALogger").WARN(l());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}g==null&&d("WALogger").WARN(k());var h=d("WALongInt").maybeNumber(g);g!=null&&h==null&&d("WALogger").WARN(j());c==null&&d("WALogger").WARN(i());e={id:b,type:e===d("WASyncAction.pb").SyncActionValue$NoteEditAction$NoteType.UNSTRUCTURED?"unstructured":"structured",chatJid:f,content:(g=c)!=null?g:"",modifiedAt:Math.floor(a.timestamp/1e3),createdAt:Math.floor(((b=h)!=null?b:0)/1e3)};yield d("WAWebNoteAction").upsertFromSyncd(e);return{actionState:d("WASyncdConst").SyncActionState.Success}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}});return function(b){return a.apply(this,arguments)}}()))};e.getNoteMutation=function(a){var b={noteEditAction:{type:a.type==="unstructured"?d("WASyncAction.pb").SyncActionValue$NoteEditAction$NoteType.UNSTRUCTURED:d("WASyncAction.pb").SyncActionValue$NoteEditAction$NoteType.STRUCTURED,chatJid:a.chatJid,unstructuredContent:a.content,createdAt:a.createdAt*1e3}};return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.RegularLow,indexArgs:[d("WAWebBaseModel").idTypeToString(a.id)],value:b,version:this.getVersion(),operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,timestamp:a.modifiedAt*1e3,action:this.getAction()})};return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebNotesUtils",["WACryptoSha256","WAWebABProps","WAWebBizGatingUtils","WAWebFrontendMsgGetters","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";e=d("WAWebABProps").getABPropConfigValue("smb_notes_content_max_limit");function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WACryptoSha256").sha256Str(a)});return h.apply(this,arguments)}function i(a){return a!=null&&a.isUser()&&!a.isPSA()&&!a.isOfficialBizAccount()&&!a.isIAS()&&!a.isSupportAccount()&&!a.isCAPISupportAccount()&&!a.isBot()&&d("WAWebBizGatingUtils").smbNotesV1Enabled()}function c(a){if(a==null)return!1;var b=d("WAWebFrontendMsgGetters").getText(a);if(b==null||b.trim()==="")return!1;b=d("WAWebFrontendMsgGetters").getChat(a);return b==null?!1:i(b.id)}g.MAX_NOTE_LENGTH=e;g.generateNoteId=a;g.shouldEnableNotesForWid=i;g.shouldEnableNotesForMsg=c}),98);
__d("WAWebNoteAction",["invariant","WALogger","WATimeUtils","WAWebBaseModel","WAWebBizGatingUtils","WAWebDBNoteDatabaseApi","WAWebGetOnlyNoteByChatJidJob","WAWebNoteCollection","WAWebNoteModel","WAWebNoteSync","WAWebNotesUtils","WAWebSchemaNote","WAWebSyncd","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g,h){function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Notes] addOrEditNoteAction: id "," mutation generated"]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebNoteCollection").NoteCollection.hasCachedQueryForChatJid(a)){var b=(yield d("WAWebGetOnlyNoteByChatJidJob").getOnlyNoteByChatJidJob({chatJid:a}));d("WAWebNoteCollection").NoteCollection.updateCollectionFromDB(a,b)}return d("WAWebNoteCollection").NoteCollection.maybeGetNoteByChatJid(a)});return j.apply(this,arguments)}function e(a,b,c,d){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d){yield o({actionType:"add",noteType:a,chatJid:b,content:c},(a=d)!=null?a:!0)});return k.apply(this,arguments)}function f(a,b,c,d,e){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,d,e){yield o({actionType:"edit",id:a,noteType:b,chatJid:c,content:d,createdAt:e},!0)});return l.apply(this,arguments)}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield o({actionType:"syncdUpsert",id:d("WAWebBaseModel").idTypeToString(a.id),noteType:a.type,chatJid:a.chatJid,content:a.content,createdAt:a.createdAt,modifiedAt:a.modifiedAt},!1)});return n.apply(this,arguments)}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f;d("WAWebBizGatingUtils").smbNotesV1Enabled()||h(0,79042);var g=d("WATimeUtils").unixTime(),j=a.id;j==null&&(j=(yield d("WAWebNotesUtils").generateNoteId(a.chatJid)));var k={id:j,type:a.noteType,chatJid:a.chatJid,content:a.content,createdAt:(f=a.createdAt)!=null?f:g,modifiedAt:(f=a.modifiedAt)!=null?f:g};if(e){a=c("WAWebNoteSync").getNoteMutation(k);d("WALogger").LOG(i(),j).devConsole(a);yield d("WAWebSyncd").lockForSync(["note"],[a],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebDBNoteDatabaseApi").addOrEditNote(k)}))}else yield d("WAWebDBNoteDatabaseApi").addOrEditNote(k);d("WAWebNoteCollection").NoteCollection.add(k,{merge:!0})});return p.apply(this,arguments)}function q(a,b){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=(yield d("WAWebDBNoteDatabaseApi").getNotesByChatJid(b));c.length>0&&(yield d("WAWebSchemaNote").getNoteTable().bulkRemove(c.map(function(a){return a.id})),d("WAWebNoteCollection").NoteCollection.purgeNotesByChatJid(b));c=(yield d("WAWebDBNoteDatabaseApi").getNotesByChatJid(a));if(c.length===0)return;c=c.map(function(a){return babelHelpers["extends"]({},a,{chatJid:b})});var e=c.map(function(a){return new(d("WAWebNoteModel").Note)(a)});d("WAWebNoteCollection").NoteCollection.purgeNotesByChatJid(a);d("WAWebNoteCollection").NoteCollection.add(e,{merge:!0});return d("WAWebDBNoteDatabaseApi").bulkUpdateNotes(c)});return r.apply(this,arguments)}g.retrieveOnlyNoteForChatJid=a;g.noteAddAction=e;g.noteEditAction=f;g.upsertFromSyncd=m;g.addOrEditNoteAction=o;g.updateNoteJidAction=q}),98);
__d("WAWebProgressBar.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={progress:"_ak0k"};b=a;g["default"]=b}),98);
__d("WAWebProgressBar.react",["WAWebClassnames","WAWebProgressBar.scss","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.className,e=a.max;e=e===void 0?100:e;a=a.value;return i.jsx("progress",{value:a,max:e,className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(c("WAWebProgressBar.scss").progress,b)})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebSetPushnameLocallyConnAction",["WAWebConnModel","WAWebUserPrefsGeneral"],(function(a,b,c,d,e,f,g){function a(a){d("WAWebConnModel").Conn.pushname=a,d("WAWebUserPrefsGeneral").setPushname(a)}g.setPushnameLocally=a}),98);
__d("WAWebSyncdCriticalBootstrapProcessingApi",["WATimeUtils","WAWebMdBootstrapAppStateCriticalDataProcessingWamEvent","WAWebSyncBootstrap","WAWebSyncdMdSyncFieldstatMeta","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){c("WAWebSyncBootstrap").isSyncDCriticalDataSyncInProcess()&&new(d("WAWebMdBootstrapAppStateCriticalDataProcessingWamEvent").MdBootstrapAppStateCriticalDataProcessingWamEvent)({bootstrapAppStateDataStage:a,mdSessionId:yield d("WAWebSyncdMdSyncFieldstatMeta").MdSyncFieldStatsMeta.getMdSessionId(),mdTimestamp:d("WATimeUtils").unixTimeMs()}).commit()});return h.apply(this,arguments)}g.logCriticalBootstrapStageIfNecessary=a}),98);
__d("WAWebPushNameSync",["Promise","WALogger","WASendPresenceStatusProtocol","WAServerSync.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WAWebSetPushnameLocallyConnAction","WAWebSyncBootstrap","WAWebSyncdCriticalBootstrapProcessingApi","WAWebWamEnumBootstrapAppStateDataStageCode","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["push name sync: operation not supported"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: successfully set pushname to ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["push name sync: empty pushname"]);k=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.getVersion=function(){return 1};f.getAction=function(){return d("WASyncdConst").Actions.SettingPushName};f.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield (h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{if(a.operation==="set"){a=a.value;a=(a=a.pushNameSetting)==null?void 0:a.name;a||(d("WALogger").WARN(k()),d("WAWebSyncdCriticalBootstrapProcessingApi").logCriticalBootstrapStageIfNecessary(d("WAWebWamEnumBootstrapAppStateDataStageCode").BOOTSTRAP_APP_STATE_DATA_STAGE_CODE.PUSHNAME_INVALID),a="");void d("WASendPresenceStatusProtocol").sendPresenceStatusProtocol({name:a});d("WAWebSetPushnameLocallyConnAction").setPushnameLocally(a);yield d("WAWebSyncdCriticalBootstrapProcessingApi").logCriticalBootstrapStageIfNecessary(d("WAWebWamEnumBootstrapAppStateDataStageCode").BOOTSTRAP_APP_STATE_DATA_STAGE_CODE.PUSHNAME_APPLIED);c("WAWebSyncBootstrap").isSyncDCriticalDataSyncInProcess()&&(yield c("WAWebSyncBootstrap").setSyncDCriticalSynced(),yield c("WAWebSyncBootstrap").setSyncDCriticalDataSyncCompleted());d("WALogger").DEV(j(),a);return(h||(h=b("Promise"))).resolve({actionState:d("WASyncdConst").SyncActionState.Success})}d("WALogger").WARN(i());return(h||(h=b("Promise"))).resolve({actionState:d("WASyncdConst").SyncActionState.Unsupported})}catch(a){d("WAWebSyncdCriticalBootstrapProcessingApi").logCriticalBootstrapStageIfNecessary(d("WAWebWamEnumBootstrapAppStateDataStageCode").BOOTSTRAP_APP_STATE_DATA_STAGE_CODE.PUSHNAME_INVALID);return{actionState:d("WASyncdConst").SyncActionState.Failed}}});return function(b){return a.apply(this,arguments)}}())));return a});function e(b){return a.apply(this,arguments)}return e}();f.getPushnameMutation=function(a,b){b={pushNameSetting:{name:b}};return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.CriticalBlock,indexArgs:[],value:b,version:this.getVersion(),operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,timestamp:a,action:this.getAction()})};return e}(d("WASyncdAction").SyncActionBase);e=new a();g["default"]=e}),98);
__d("WAWebScreenLockErrorMessages",["fbt"],(function(a,b,c,d,e,f,g,h){function a(a){var b=a.onlyOneTryRemaining,c=a.emptyInputEntered,d=a.incorrectPasscode;a=a.triesExceeded;if(a)return h._("__JHASH__q4w-uv0JWqj__JHASH__");if(b){if(c==null)return h._("__JHASH__q7F26xYANt0__JHASH__");else if(c===!0)return h._("__JHASH__QmzqwUIikqb__JHASH__");if(d&&c===!1)return h._("__JHASH__atCNm2dlCEH__JHASH__")}if(c===!0)return h._("__JHASH__zY0EnLoQ16i__JHASH__");if(d)return h._("__JHASH__nGj64Jk-qZU__JHASH__")}g.getErrorMessage=a}),226);
__d("useWAWebDesktopUpsellQplImpression",["WAQplTypes","WAQuickPerformanceLogger","WAWebLinkDeviceExperience","WAWebQplQuickPerformanceLoggerMarkerIds","asyncToGeneratorRuntime","react","useWAWebCallbackOnce"],(function(a,b,c,d,e,f,g){var h,i=(h||d("react")).useEffect;function a(a){var b=c("useWAWebCallbackOnce")(j);i(function(){a&&void b("impression")},[b,a])}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{d("WAQuickPerformanceLogger").QPL.markerStart(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.DESKTOP_UPSELL_LINK_DEVICE_METRICS,{annotations:{string:{context:a},bool:{showing_content_variation:!1},"int":{md_link_device_experience_id:d("WAWebLinkDeviceExperience").getWebCompanionLinkDeviceExperienceId()}}}),yield d("WAQuickPerformanceLogger").QPL.genMarkerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.DESKTOP_UPSELL_LINK_DEVICE_METRICS,d("WAQplTypes").QuickLogActionType.SUCCESS)}catch(a){}});return k.apply(this,arguments)}g.useWAWebDesktopUpsellQplImpression=a;g.logDesktopUpsellQplEvent=j}),98);
__d("useWAWebDesktopUpsellWamImpression",["WAWebWamEnumWebcNativeUpsellCtaEventType","WAWebWebcNativeUpsellCtaWamEvent","react","useWAWebCallbackOnce"],(function(a,b,c,d,e,f,g){var h,i=(h||d("react")).useEffect;function a(a){var b=a.source,e=a.isCtaVisible,f=c("useWAWebCallbackOnce")(function(){new(d("WAWebWebcNativeUpsellCtaWamEvent").WebcNativeUpsellCtaWamEvent)({webcNativeUpsellCtaEventType:d("WAWebWamEnumWebcNativeUpsellCtaEventType").WEBC_NATIVE_UPSELL_CTA_EVENT_TYPE.IMPRESSION,webcNativeUpsellCtaSource:b}).commit()});i(function(){e&&f()},[f,e])}g.useWAWebDesktopUpsellWamImpression=a}),98);
__d("useWAWebPersistentCounterAsync",["WALogger","asyncToGeneratorRuntime","react","useWAWebAsync"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["useWAWebPersistentCounterAsync: ",""]);i=function(){return a};return a}e=h||d("react");var j=e.useCallback,k=e.useEffect,l=e.useRef,m=e.useState;function a(a,e){a=c("useWAWebAsync")(a,[]);var f=a.value,g=a.loading;a=a.error;var h=m(0),n=h[0],o=h[1],p=l(null);k(function(){!g&&f!=null&&o(f)},[g,f]);var q=j(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;(b=p.current)==null?void 0:b.abort();p.current=new AbortController();try{yield e(a,p.current.signal)}catch(a){d("WALogger").ERROR(i(),a)}p.current=null});return function(b){return a.apply(this,arguments)}}(),[e]);h=j(function(){o(function(a){a=a+1;void q(a);return a})},[q]);var r=j(function(){o(0),void q(0)},[q]);if(g)return[{loading:!0,error:null,count:null},h,r];return a?[{loading:!1,error:a,count:null},h,r]:[{loading:!1,error:null,count:n},h,r]}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("CometQPLPayloadStore",[],(function(a,b,c,d,e,f){"use strict";var g=null;function a(a){g=a}function b(){var a;return(a=g)!=null?a:window.pldmp}var h=null;function c(a){h=a}function d(){var a;return(a=h)!=null?a:window.plbs}f.storePayloadMap=a;f.getPayloadMap=b;f.storePayloadBytesSent=c;f.getPayloadBytesSent=d}),66);
__d("IntlCLDRNumberType01",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);
__d("IntlCLDRNumberType04",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){if(a>=0&&a<=1)return c("IntlVariations").NUMBER_ONE;else return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);
__d("IntlCLDRNumberType09",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){if(a===1)return c("IntlVariations").NUMBER_ONE;else return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);
__d("WADynamicRouterAsync",["Promise","WALogger","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose([""," is not defined for ",""]);i=function(){return a};return a}var j={sentinel:"RESPONSE_NAMESPACE"},k={sentinel:"NOT_HANDLED"};a=function(){function a(){var a=this;this.$2=(h||(h=b("Promise"))).resolve();this.$3=new Map();this.$5=0;this.$6=null;this.$7=null;this.$8=null;this.fireAndForget=function(b,c,d,e){e===void 0&&(e=!1),a.$4==null?void 0:a.$4(b,c,d),a.$10(b,c,d,null,e)};this.sendAndReceive=function(c,d,e,f){f===void 0&&(f=!1);a.$4==null?void 0:a.$4(c,d,e);return new(h||(h=b("Promise")))(function(b,g){a.$10(c,d,e,function(c){try{var d=n(c);d?d.call(c,function(c){a.$10(j,"",c,b,f)},function(b){a.$10(j,"",b,g,!1)}):a.$10(j,"",c,b,f)}catch(b){a.$10(j,"",b,g,!1)}},f)})};this.$9=function(){var b=a.$7;if(!b)return;var c=a.$3,d;while(b&&!(d=l(c,b)))a.$7=b=b.nextRoute;if(!b||!d)return;c=a.$11(d,b);var e=!0;if(c!==k){var f=b.prevRoute,g=b.nextRoute;a.$7===b&&(a.$7=g);f?f.nextRoute=g:a.$6=g;g?g.prevRoute=f:(e=!1,a.$8=f)}e&&a.$2.then(a.$9)["finally"](function(){});return c}}var e=a.prototype;e.setAckPayload=function(a){this.$1=a};e.getAckPayoad=function(){return this.$1};e.hasHandlerForNamespace=function(a){return this.$3.has(a)};e.getHandledNamespaces=function(){return Array.from(this.$3.keys())};e.setOnRouteCalled=function(a){this.$4=a};e.setNamespaceHandler=function(a,b){var c=this.$3,d=c.get(a);if(d===b)return;++this.$5;c.set(a,b);if(!d){c=this.$6;c&&(this.$7||this.$2.then(this.$9)["finally"](function(){}),this.$7=c)}};e.setHandlers=function(a,b){function e(e,f,g){if(b[e]==null){d("WALogger").ERROR(i(),e,a);throw c("err")(e+" is not defined for "+a)}e=b[e](f);g&&g(e)}this.setNamespaceHandler(a,e)};e.$10=function(a,b,c,d,e){var f=this.$8;a={namespace:a,route:b,arg:c,resolver:d,prevRoute:f,nextRoute:null,silentLog:e};this.$8=a;b=!0;f?(f.nextRoute=a,b=!this.$7):this.$6=a;b&&l(this.$3,a)&&(this.$7=a,this.$2.then(this.$9)["finally"](function(){}))};e.$11=function(a,d){var e=d.route,f=d.arg,g=d.resolver;d=d.silentLog;var i=this.$5,j=null,l=null;try{j=a(e,f,g,d)}catch(a){l=(h||(h=b("Promise"))).reject(a)}if(j===k)if(i===this.$5)l=(h||(h=b("Promise"))).reject(c("err")("DynamicRouter: NOT_HANDLED can only be used when updating handlers"));else return k;if(g){l&&g(l);return}else return l};return a}();function l(a,b){b=b.namespace;return b===j?m:a.get(b)}function m(a,b,c){c(b)}function n(a){if(a!=null&&(typeof a==="object"||typeof a==="function")){a=a.then;return typeof a==="function"?a:null}return null}g.NOT_HANDLED=k;g.DynamicRouter=a}),98);
__d("WASmaxInMdIQErrorBadRequestOrInternalServerErrorMixinGroup",["WAResultOrError","WASmaxInMdIQErrorBadRequestMixin","WASmaxInMdIQErrorInternalServerErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInMdIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInMdIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);return c.success?d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorInternalServerError"],[b,c])}g.parseIQErrorBadRequestOrInternalServerErrorMixinGroup=a}),98);
__d("WASmaxInMdGetCountryCodeResponseError",["WAResultOrError","WASmaxInMdIQErrorBadRequestOrInternalServerErrorMixinGroup","WASmaxInMdIQErrorResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"error");if(!c.success)return c;a=d("WASmaxInMdIQErrorResponseMixin").parseIQErrorResponseMixin(a,b);if(!a.success)return a;b=d("WASmaxInMdIQErrorBadRequestOrInternalServerErrorMixinGroup").parseIQErrorBadRequestOrInternalServerErrorMixinGroup(c.value);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({},a.value,{errorIQErrorBadRequestOrInternalServerErrorMixinGroup:b.value}))}g.parseGetCountryCodeResponseError=a}),98);
__d("WASmaxInMdGetCountryCodeResponseGetCountryCodeResponse",["WAResultOrError","WASmaxInMdIQResultResponseMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseUtils").flattenedChildWithTag(a,"country_code");if(!c.success)return c;c=d("WASmaxParseUtils").attrString(c.value,"iso");if(!c.success)return c;a=d("WASmaxInMdIQResultResponseMixin").parseIQResultResponseMixin(a,b);return!a.success?a:d("WAResultOrError").makeResult(babelHelpers["extends"]({countryCodeIso:c.value},a.value))}g.parseGetCountryCodeResponseGetCountryCodeResponse=a}),98);
__d("WASmaxOutMdBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"get"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutMdGetCountryCodeRequest",["WASmaxJsx","WASmaxOutMdBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(){var a=d("WASmaxOutMdBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET,xmlns:"md"},d("WASmaxJsx").smax("link_code_companion_reg",{stage:"get_country_code"})));return a}g.makeGetCountryCodeRequest=a}),98);
__d("WASmaxMdGetCountryCodeRPC",["WAComms","WASmaxInMdGetCountryCodeResponseError","WASmaxInMdGetCountryCodeResponseGetCountryCodeResponse","WASmaxOutMdGetCountryCodeRequest","WASmaxParsingFailure","WASmaxRpcUtils","regeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){var c,e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:c=d("WASmaxOutMdGetCountryCodeRequest").makeGetCountryCodeRequest();h.next=3;return b("regeneratorRuntime").awrap(d("WAComms").sendSmaxStanza(c,a));case 3:e=h.sent;f=d("WASmaxInMdGetCountryCodeResponseGetCountryCodeResponse").parseGetCountryCodeResponseGetCountryCodeResponse(e,c);if(!f.success){h.next=7;break}return h.abrupt("return",{name:"GetCountryCodeResponseGetCountryCodeResponse",value:f.value});case 7:g=d("WASmaxInMdGetCountryCodeResponseError").parseGetCountryCodeResponseError(e,c);if(!g.success){h.next=10;break}return h.abrupt("return",{name:"GetCountryCodeResponseError",value:g.value});case 10:throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GetCountryCode",{GetCountryCodeResponse:f,Error:g}));case 11:case"end":return h.stop()}},null,this)}g.sendGetCountryCodeRPC=a}),98);
__d("WAWeb-modernizr",[],(function(a,b,c,d,e,f){!function(a,b,c,d){function e(a,b){return typeof a===b}function f(a){var b=y.className,c=w._config.classPrefix||"";if(z&&(b=b.baseVal),w._config.enableJSClass){var d=new RegExp("(^|\\s)"+c+"no-js(\\s|$)");b=b.replace(d,"$1"+c+"js$2")}w._config.enableClasses&&(a.length>0&&(b+=" "+c+a.join(" "+c)),z?y.className.baseVal=b:y.className=b)}function g(){return"function"!=typeof c.createElement?c.createElement(arguments[0]):z?c.createElementNS.call(c,"http://www.w3.org/2000/svg",arguments[0]):c.createElement.apply(c,arguments)}function h(a,b){return!!~(""+a).indexOf(b)}function i(){var a=c.body;return a||(a=g(z?"svg":"body"),a.fake=!0),a}function j(a,b,d,e){var f,h,o="modernizr",p=g("div"),q=i();if(parseInt(d,10))for(;d--;)f=g("div"),f.id=e?e[d]:o+(d+1),p.appendChild(f);return f=g("style"),f.type="text/css",f.id="s"+o,(q.fake?q:p).appendChild(f),q.appendChild(p),f.styleSheet?f.styleSheet.cssText=a:f.appendChild(c.createTextNode(a)),p.id=o,q.fake&&(q.style.background="",q.style.overflow="hidden",h=y.style.overflow,y.style.overflow="hidden",y.appendChild(q)),e=b(p,a),q.fake?(q.parentNode.removeChild(q),y.style.overflow=h,y.offsetHeight):p.parentNode.removeChild(p),!!e}function k(a){return a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()}).replace(/^ms-/,"-ms-")}function l(a,c,d){var e;if("getComputedStyle"in b){e=getComputedStyle.call(b,a,c);var f=b.console;if(null!==e)d&&(e=e.getPropertyValue(d));else if(f){var h=f.error?"error":"log";f[h].call(f,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}}else e=!c&&a.currentStyle&&a.currentStyle[d];return e}function m(a,c){var e=a.length;if("CSS"in b&&"supports"in b.CSS){for(;e--;)if(b.CSS.supports(k(a[e]),c))return!0;return!1}if("CSSSupportsRule"in b){for(var f=[];e--;)f.push("("+k(a[e])+":"+c+")");return f=f.join(" or "),j("@supports ("+f+") { #modernizr { position: absolute; } }",function(a){return"absolute"===l(a,null,"position")})}return d}function n(a){return a.replace(/([a-z])-([a-z])/g,function(a,b,c){return b+c.toUpperCase()}).replace(/^-/,"")}function o(a,b,c,f){function o(){s&&(delete G.style,delete G.modElem)}if(f=!e(f,"undefined")&&f,!e(c,"undefined")){var r=m(a,c);if(!e(r,"undefined"))return r}for(var s,t,r,u,v,r=["modernizr","tspan","samp"];!G.style&&r.length;)s=!0,G.modElem=g(r.shift()),G.style=G.modElem.style;for(r=a.length,t=0;t<r;t++)if(u=a[t],v=G.style[u],h(u,"-")&&(u=n(u)),G.style[u]!==d){if(f||e(c,"undefined"))return o(),"pfx"!==b||u;try{G.style[u]=c}catch(a){}if(G.style[u]!==v)return o(),"pfx"!==b||u}return o(),!1}function p(a,b){return function(){return a.apply(b,arguments)}}function q(a,b,c){var d;for(var f in a)if(a[f]in b)return!1===c?a[f]:(d=b[a[f]],e(d,"function")?p(d,c||b):d);return!1}function r(a,b,c,d,f){var i=a.charAt(0).toUpperCase()+a.slice(1),j=(a+" "+E.join(i+" ")+i).split(" ");return e(b,"string")||e(b,"undefined")?o(j,b,d,f):(j=(a+" "+B.join(i+" ")+i).split(" "),q(j,b,c))}function s(a,b,c){return r(a,d,d,b,c)}function t(a,b){if("object"==typeof a)for(var c in a)I(a,c)&&t(c,a[c]);else{a=a.toLowerCase();c=a.split(".");var d=w[c[0]];if(2===c.length&&(d=d[c[1]]),void 0!==d)return w;b="function"==typeof b?b():b,1===c.length?w[c[0]]=b:(!w[c[0]]||w[c[0]]instanceof Boolean||(w[c[0]]=new Boolean(w[c[0]])),w[c[0]][c[1]]=b),f([(b&&!1!==b?"":"no-")+c.join("-")]),w._trigger(a,b)}return w}var u=[],v={_version:"3.11.4",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(a,b){var c=this;setTimeout(function(){b(c[a])},0)},addTest:function(a,b,c){u.push({name:a,fn:b,options:c})},addAsyncTest:function(a){u.push({name:null,fn:a})}},w=function(){};w.prototype=v,w=new w;var x=[],y=c.documentElement,z="svg"===y.nodeName.toLowerCase(),A="Moz O ms Webkit",B=v._config.usePrefixes?A.toLowerCase().split(" "):[];v._domPrefixes=B;var C=v._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];v._prefixes=C;var D=function(){function a(a,c){var e;return!!a&&(c&&"string"!=typeof c||(c=g(c||"div")),a="on"+a,e=a in c,!e&&b&&(c.setAttribute||(c=g("div")),c.setAttribute(a,""),e="function"==typeof c[a],c[a]!==d&&(c[a]=d),c.removeAttribute(a)),e)}var b=!("onblur"in y);return a}();v.hasEvent=D;var E=v._config.usePrefixes?A.split(" "):[];v._cssomPrefixes=E;var F={elem:g("modernizr")};w._q.push(function(){delete F.elem});var G={style:F.elem.style};w._q.unshift(function(){delete G.style}),v.testAllProps=r;var H=function(a){var c,e=C.length,f=b.CSSRule;if(void 0===f)return d;if(!a)return!1;if(a=a.replace(/^@/,""),(c=a.replace(/-/g,"_").toUpperCase()+"_RULE")in f)return"@"+a;for(var i=0;i<e;i++){var j=C[i];if(j.toUpperCase()+"_"+c in f)return"@-"+j.toLowerCase()+"-"+a}return!1};v.atRule=H;v.prefixed=function(a,b,c){return 0===a.indexOf("@")?H(a):(-1!==a.indexOf("-")&&(a=n(a)),b?r(a,b,c):r(a,"pfx"))};v.testAllProps=s;var I;v.testProp=function(a,b,c){return o([a],d,b,c)};!function(){var a={}.hasOwnProperty;I=e(a,"undefined")||e(a.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(b,c){return a.call(b,c)}}(),v._l={},v.on=function(a,b){this._l[a]||(this._l[a]=[]),this._l[a].push(b),w.hasOwnProperty(a)&&setTimeout(function(){w._trigger(a,w[a])},0)},v._trigger=function(a,b){if(this._l[a]){var c=this._l[a];setTimeout(function(){var a;for(a=0;a<c.length;a++)c[a](b)},0),delete this._l[a]}},w._q.push(function(){v.addTest=t}),w.addAsyncTest(function(){function a(a,b,c){function d(b){var d=!(!b||"load"!==b.type)&&1===e.width;t(a,"webp"===a&&d?new Boolean(d):d),c&&c(b)}var e=new Image;e.onerror=d,e.onload=d,e.src=b}var b=[{uri:"data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=",name:"webp"},{uri:"data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",name:"webp.alpha"},{uri:"data:image/webp;base64,UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA",name:"webp.animation"},{uri:"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",name:"webp.lossless"}],c=b.shift();a(c.name,c.uri,function(c){if(c&&"load"===c.type)for(c=0;c<b.length;c++)a(b[c].name,b[c].uri)})}),w.addTest("serviceworker","serviceWorker"in navigator),w.addTest("adownload",!b.externalHost&&"download"in g("a")),w.addTest("cssanimations",s("animationName","a",!0)),w.addTest("csstransitions",s("transition","all",!0)),(function(){var a,b,c,d;for(var f in u)if(u.hasOwnProperty(f)){if(a=[],b=u[f],b.name&&(a.push(b.name.toLowerCase()),b.options&&b.options.aliases&&b.options.aliases.length))for(c=0;c<b.options.aliases.length;c++)a.push(b.options.aliases[c].toLowerCase());for(c=e(b.fn,"function")?b.fn():b.fn,b=0;b<a.length;b++)d=a[b],d=d.split("."),1===d.length?w[d[0]]=c:(w[d[0]]&&(!w[d[0]]||w[d[0]]instanceof Boolean)||(w[d[0]]=new Boolean(w[d[0]])),w[d[0]][d[1]]=c),x.push((c?"":"no-")+d.join("-"))}})(),f(x),delete v.addTest,delete v.addAsyncTest;for(D=0;D<w._q.length;D++)w._q[D]();a.Modernizr=w}(window,window,document)}),null);
__d("WAWebAgentSync",["Promise","WALogger","WASyncdAction","WASyncdConst","WAWebAgentCollection","WAWebAgentModelUtils","WAWebMsgCollection","WAWebSchemaAgent","WAWebSyncdActionUtils","WAWebUnattributedMessageCollection","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["agent:syncd: operation not supported"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["agent:syncd: agentAction.name is empty"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["agent:syncd: malformed mutation"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["agent:delayed-attribution: couldn't find Agent for message id::"," with device id::",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["agent:delayed-attribution: couldn't find message id::",""]);m=function(){return a};return a}function n(){(h||(h=b("Promise"))).resolve().then(function(){d("WAWebUnattributedMessageCollection").UnattributedMessageCollection.getModelsArray().forEach(function(a){var b=a.id;a=a.deviceId;var c=d("WAWebMsgCollection").MsgCollection.get(b);if(c==null){d("WALogger").DEV(m(),b);return}var e=d("WAWebAgentCollection").AgentCollection.getByDeviceId(a);if(e==null){d("WALogger").DEV(l(),b,a);return}c.agentId=String(e.id);d("WAWebUnattributedMessageCollection").UnattributedMessageCollection.remove(b)})})}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 7};e.getAction=function(){return d("WASyncdConst").Actions.Agent};e.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=[],c=[];a=a.map(function(a){try{var e=a.indexParts;e=e[1];e||d("WAWebSyncdActionUtils").throwInvalidActionIndex();if(a.operation==="remove"){c.push(e);return{actionState:d("WASyncdConst").SyncActionState.Success}}if(a.operation==="set"){var f;a=a.value.agentAction;if(!a){d("WALogger").DEV(k());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}f=d("WAWebAgentModelUtils").getFormattedAgentName((f=a.name)!=null?f:"",(f=a.deviceID)!=null?f:-1);f===""&&d("WALogger").DEV(j());b.push({id:e,name:f,deviceId:(e=a.deviceID)!=null?e:-1,isDeleted:Boolean(a.isDeleted)});return{actionState:d("WASyncdConst").SyncActionState.Success}}d("WALogger").DEV(i());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}});yield d("WAWebSchemaAgent").getAgentTable().bulkCreateOrMerge(b);d("WAWebAgentCollection").AgentCollection.add(b,{merge:!0});yield d("WAWebSchemaAgent").getAgentTable().bulkRemove(c);d("WAWebAgentCollection").AgentCollection.remove(c);n();return a});function c(b){return a.apply(this,arguments)}return c}();return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebApp.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={wrapper:"_aiwn",stripe:"_ap4q",isQR:"_aiwl",draggableHeader:"_aiwo",isMain:"_aiwm"};b=a;g["default"]=b}),98);
__d("WAWebBridgeInitialization",["WADynamicRouterAsync"],(function(a,b,c,d,e,f,g){function a(){return new(d("WADynamicRouterAsync").DynamicRouter)()}g.makeBridge=a}),98);
__d("WAWebModelStorageInit",["WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsKeys","WAWebUserPrefsLocalStorage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=[],b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_KEYS.ROUTING_INFO);b!=null&&a.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.ROUTING_INFO,value:b});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_KEYS.INITIAL_HISTORY_SYNCED);b!=null&&a.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.INITIAL_HISTORY_SYNCED,value:b!=null});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_KEYS.HISTORY_SYNC_STATUS);b!=null&&a.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.HISTORY_SYNC_STATUS,value:b});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_KEYS.BLOCKLIST_HASH);b!=null&&a.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.BLOCKLIST_HASH,value:b});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_KEYS.CRITICAL_DATA_SYNCED);b!=null&&a.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.CRITICAL_DATA_SYNCED,value:b});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_KEYS.SHOULD_CHECK_CONTACT_SYNC_STATUS);b!=null&&a.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.SHOULD_CHECK_CONTACT_SYNC_STATUS,value:b});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_KEYS.ADV_SECRET_KEY);b!=null&&a.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.ADV_SECRET_KEY,value:b});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_KEYS.MD_UPGRADE_WAM_FLAG);b!=null&&a.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.MD_UPGRADE_WAM_FLAG,value:b===!0});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_KEYS.MD_HISTORY_LAST_CHUNK_PROCESSED);b!=null&&a.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.MD_HISTORY_LAST_CHUNK_PROCESSED,value:b});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_KEYS.UNARCHIVE_CHATS_SETTING);b!=null&&a.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.UNARCHIVE_CHATS_SETTING,value:b});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_KEYS.ARCHIVE_V2_ENABLED_SETTING);b!=null&&a.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.ARCHIVE_V2_ENABLED_SETTING,value:b});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_KEYS.MD_SYNC_ACTIONS_ACTION_SANITIZED);b!=null&&a.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.MD_SYNC_ACTIONS_ACTION_SANITIZED,value:b===!0});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_KEYS.CHAT_THREAD_LOGGING_OFFSET);b!=null&&a.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.CHAT_THREAD_LOGGING_OFFSET,value:b});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_KEYS.CHAT_THREAD_LOGGING_SECRET);b!=null&&a.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.CHAT_THREAD_LOGGING_SECRET,value:b});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_KEYS.CHAT_THREAD_LOGGING_LAST_UPLOADED_START_TS);b!=null&&a.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.CHAT_THREAD_LOGGING_LAST_UPLOADED_START_TS,value:b});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_KEYS.PAIRING_TIMESTAMP);b!=null&&a.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.PAIRING_TIMESTAMP,value:b});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_KEYS.RECENT_MAILBOX_AGE_DAYS);b!=null&&a.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.RECENT_MAILBOX_AGE_DAYS,value:b});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_KEYS.LAST_PERIODIC_APP_STATE_SYNC_TS);b!=null&&a.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.LAST_PERIODIC_APP_STATE_SYNC_TS,value:b});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").MD_KEYS.MD_LOGIN_COOKIE_REQUEST_COMPLETE);b!=null&&a.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.MD_LOGIN_COOKIE_REQUEST_COMPLETE,value:b});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").KEYS.MOBILE_PLATFORM_DEPRECATED);b!=null&&a.push({key:d("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.MOBILE_PLATFORM,value:b});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").KEYS.PRIMARY_FEATURES);b!=null&&a.push({key:d("WAWebUserPrefsKeys").KEYS.PRIMARY_FEATURES,value:b});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").HASHED_KEYS.USER_PRIVACY_SETTINGS);b!=null&&a.push({key:d("WAWebUserPrefsKeys").HASHED_KEYS.USER_PRIVACY_SETTINGS,value:b});b=c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").KEYS.INITIAL_HIST_BOUNDARY);b=i(b);b!=null&&a.push({key:d("WAWebUserPrefsKeys").HASHED_KEYS.INITIAL_HIST_BOUNDARY,value:b});return d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.bulkSetItemsToIndexedDB(a)});return h.apply(this,arguments)}function i(a){if(typeof a==="object")return a;if(typeof a!=="string")return null;var b;try{b=JSON.parse(a)}catch(a){return null}if(b==null||typeof b!=="object"||b instanceof Array)return null;b;var c={};Object.entries(b).forEach(function(a){var b=a[0];a=a[1];typeof a==="number"&&(c[b]=a)});return c}g.migrateMDUserPrefsToIndexedDB=a}),98);
__d("WAWebRegistration",["Promise","WALogger","WAWebCryptoCurve25519","WAWebCryptoLibraryUtilsApi","WAWebSignalKeyApi","WAWebSignalStoreApi","WAWebUserPrefsInfoStore","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["failed to refreshSignalCredentials: ",""]);i=function(){return a};return a}function a(){var a=d("WAWebCryptoCurve25519").keyPair(),c=new Uint8Array(24);self.crypto.getRandomValues(c);return(h||(h=b("Promise"))).resolve(d("WAWebUserPrefsInfoStore").waNoiseInfo.set({recoveryToken:c.buffer,staticKeyPair:a,certificateChainBuffer:void 0}))}function j(){return c("WAWebCryptoLibraryUtilsApi").makeRegistrationId()}function e(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=j();yield d("WAWebSignalStoreApi").waSignalStore.clearCredential();var c=(yield d("WAWebSignalKeyApi").generateIdentityKeyPair());try{yield (h||(h=b("Promise"))).all([d("WAWebSignalStoreApi").waSignalStore.setRegistrationInfo({registrationId:a,identityKeyPair:c}),d("WAWebSignalStoreApi").waSignalStore.rotateSignedPreKey(d("WAWebCryptoCurve25519").toSignalCurveKeyPair(c),d("WAWebSignalKeyApi").generateSignedKeyPair)])}catch(a){d("WALogger").ERROR(i(),a);throw a}});return k.apply(this,arguments)}g.refreshNoiseCredentials=a;g.refreshSignalCredentials=e}),98);
__d("WAWebLaunchSocket",["Promise","WAComms","WAGzip","WALogger","WAWebABPropsUpdateFromStorage","WAWebApiContact","WAWebBackendApi","WAWebBridgeInitialization","WAWebBrokerGlobalAppState","WAWebBuildConstants","WAWebCmd","WAWebCommsConfig","WAWebCommsHandleStanza","WAWebCryptoEncKeyHelper","WAWebDbRolloutUtil","WAWebEventSamplingCache","WAWebFtsClient","WAWebInitFromStorage","WAWebInvocationInterface","WAWebModelStorage","WAWebModelStorageInit","WAWebPageLoadLogging","WAWebPushNotificationsOfflineBbApi","WAWebRegistration","WAWebSchemaVersions","WAWebSignalStorage","WAWebSocketModel","WAWebStartBackend","WAWebUserPrefsGeneral","WAWebUserPrefsIsLoggedIn","WAWebUserPrefsMultiDevice","WAWebWamEnumWebcScenarioType","WAWebWamMemoryStat","WAWebWamOfflineResumeReporter","WAWebWorkerStorage","asyncToGeneratorRuntime","err","gkx","requireDeferred"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] send schema versions to fts worker"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[socket] launchSocket for registration"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[socket] launchSocket for login"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[socket] storageInitializationError triggered logout: ","."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[socket] entered legacy launchSocket flow"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[socket] entered eager launchSocket flow"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[socket] start launchSocket flow with mutexComplete promise ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["reconnect_socket triggered, resetting socket loop"]);p=function(){return a};return a}var q=c("requireDeferred")("WAWebSetFrontendHandlerApi").__setRef("WAWebLaunchSocket"),r=c("requireDeferred")("WAWebSetWorkerSafeHandlerApi").__setRef("WAWebLaunchSocket");d("WAWebCmd").Cmd.on("md_refresh_qr",function(){d("WAComms").stopComms(),s()});d("WAWebCmd").Cmd.on("reconnect_socket",function(){d("WALogger").LOG(p()),d("WAComms").closeSocket()});function s(){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebCommsConfig").getCommsConfig(void 0);d("WAComms").startComms(c("WAWebCommsHandleStanza"),a,function(a){return(h||(h=b("Promise"))).resolve(d("WAGzip").inflate(a))});yield d("WAComms").waitForConnection();return d("WAComms").startHandlingRequests()});return t.apply(this,arguments)}function a(a){d("WALogger").LOG(o(),a==null?"NULL":"not null");c("gkx")("26258")||(a!=null?d("WALogger").LOG(n()).sendLogs("intern-launchSocket-eager",{sampling:0}):d("WALogger").LOG(m()).sendLogs("intern-launchSocket-legacy",{sampling:0}));d("WAWebPageLoadLogging").startPageLoadQplMeasure("launchSocket");var e=d("WAWebBridgeInitialization").makeBridge();d("WAWebBackendApi").setApi(e);void q.load().then(function(a){a=a.setFrontendHandlers;return a(e)});void r.load().then(function(a){a=a.setWorkerSafeHandlers;return a(e)});d("WAWebFtsClient").ftsClient.initialize();return d("WAWebDbRolloutUtil").loadSchemaVersions().then(function(){return u()}).then(function(){return d("WAWebCryptoEncKeyHelper").initEncSalt()}).then(function(){return d("WAWebCryptoEncKeyHelper").initEncSaltForInvoker()}).then(function(){return d("WAWebSignalStorage").initialize()}).then(function(){return(h||(h=b("Promise"))).all([d("WAWebModelStorage").initialize(),a]).then(function(){return d("WAWebModelStorageInit").migrateMDUserPrefsToIndexedDB()})}).then(function(){return(h||(h=b("Promise"))).all([d("WAWebUserPrefsGeneral").getLogoutReason(),d("WAWebWorkerStorage").initialize(),d("WAWebUserPrefsGeneral").setAppVersionBase(d("WAWebBuildConstants").VERSION_BASE)])})["catch"](function(a){d("WALogger").ERROR(l(),(a==null?void 0:a.message)||(a==null?void 0:a.name)).tags("launch-socket"),d("WAWebCmd").Cmd.storageInitializationError()}).then(function(a){a=a==null?void 0:a[0];a&&d("WAWebSocketModel").Socket.logout(a.reason);if(c("WAWebBrokerGlobalAppState").isLogoutInProgress)throw c("err")("aborting launchSocket due to logout");if(d("WAWebUserPrefsMultiDevice").isRegistered()){d("WALogger").LOG(k());d("WAWebUserPrefsIsLoggedIn").setIsConnectedAsRegistered(!0);d("WAWebCmd").Cmd.initialLoadReady();d("WAWebWamMemoryStat").setCurrentMemoryScenario(d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.OFFLINE_RESUME);return d("WAWebModelStorage").initialize()["catch"](function(){return d("WAWebCmd").Cmd.storageInitializationError()}).then(function(){return(h||(h=b("Promise"))).all([d("WAWebABPropsUpdateFromStorage").updateABPropsFromStorage(),d("WAWebEventSamplingCache").updateEventSamplingFromStorage()])}).then(function(){d("WAWebCmd").Cmd.abPropsLoaded(),d("WAWebInitFromStorage").restoreImportantMetaData()}).then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=function(){d("WAWebPageLoadLogging").startPageLoadQplMeasure("lidCacheWarmup");return d("WAWebApiContact").warmUpAllLidPnMappings().then(function(a){return d("WAWebPageLoadLogging").endPageLoadQplMeasure("lidCacheWarmup")})};yield (h||(h=b("Promise"))).all([d("WAWebInitFromStorage").restoreBlocklist(),a()])})).then(function(){d("WAWebPushNotificationsOfflineBbApi").setStartCommsT(),d("WAWebPageLoadLogging").endPageLoadQplMeasure("launchSocket"),d("WAWebStartBackend").startBackend()})}d("WALogger").LOG(j());d("WAWebWamMemoryStat").setCurrentMemoryScenario(d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.INITIAL_PAIRING);d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.setIsInitialSync();return(h||(h=b("Promise"))).all([d("WAWebRegistration").refreshNoiseCredentials(),d("WAWebRegistration").refreshSignalCredentials()]).then(function(){d("WAWebPageLoadLogging").endPageLoadQplMeasure("launchSocket"),s()})})}function u(){d("WALogger").LOG(i()),void d("WAWebInvocationInterface").get().setSchemaVersions(d("WAWebSchemaVersions").getSchemaVersions())}g.launchSocket=a}),98);
__d("WAWebAppMutex",["Promise","WACustomError","WAFilteredCatch","WALogger","WAPromiseTimeout","WAResolvable","WAWebABProps","WAWebAlarm","WAWebCmd","WAWebEventsWaitForEvent","WAWebL10N","WAWebLaunchSocket","WAWebPageLoadLogging","WAWebSocketModel","WAWebUserPrefsKeys","WAWebUserPrefsStore","WAWebUserPrefsTabMutex","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mutex] setMutexBlockStrategy: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mutex] setPingTimeoutSeconds: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mutex] getPingTimeoutSeconds: missing value in userprefs, using default"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[app] _pingForOtherLocalSession mutex timeout after ","ms"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[app] _pingForOtherLocalSession stale mutex"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[mutex] shut down an existing instance of WA Web"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[app] takeoverLocal timeout"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[app] AppMutex setting shouldLaunchSocket: ",""]);p=function(){return a};return a}var q=10*60*1e3,r={INIT:"init",PING:"ping",PONG:"pong",TAKEOVER:"local-takeover"};a=function(){function a(){var a=this;this.$3=!1;this.$4=!0;this.$5=new(d("WAResolvable").Resolvable)();this.$7=function(){a.$8();var b=Date.now();d("WAWebUserPrefsTabMutex").setMutex(a.$1=r.INIT+"_"+b);a.$2=c("WAWebAlarm").setLocalTimeout(a.$7,b+q)};d("WAWebCmd").Cmd.on("ab_props_loaded",v);d("WAWebCmd").Cmd.on("on_ab_props_update",v)}var e=a.prototype;e.waitForCompletion=function(){return this.$5.promise};e.setShouldLaunchSocket=function(a){d("WALogger").DEV(p(),a),this.$4=a};e.init=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a===void 0&&(a=0);this.$3||(d("WAWebPageLoadLogging").startPageLoadQplMeasure("acquire_mutex"),this.$3=!0);a=a+1;if(a>3)return!0;var b=d("WAWebUserPrefsTabMutex").getNoTakeover();d("WAWebUserPrefsTabMutex").setNoTakeover();var e=(yield this.$6());if(e){this.$7();d("WAWebPageLoadLogging").endPageLoadQplMeasure("acquire_mutex");this.$4&&(yield d("WAWebLaunchSocket").launchSocket(null));this.$5.resolve();void c("WAWebL10N").checkForLocaleMismatchBetweenCookieAndUserPref();return!1}if(b)return!0;throw a});function e(b){return a.apply(this,arguments)}return e}();e.takeoverLocal=function(a){var b=this;if(d("WAWebUserPrefsTabMutex").getMutex()){d("WAWebPageLoadLogging").startPageLoadQplMeasure("mutex_takeover");d("WAWebUserPrefsTabMutex").setMutex(r.TAKEOVER);return d("WAPromiseTimeout").promiseTimeout(c("WAWebEventsWaitForEvent")(window,"storage",d("WAWebUserPrefsTabMutex").takeoverFilter),3e4,"takeoverLocalTimeout").then(function(c){d("WAWebSocketModel").Socket.mustExitLoop=!1;d("WAWebUserPrefsTabMutex").removeMutex();d("WAWebPageLoadLogging").endPageLoadQplMeasure("mutex_takeover");return b.init(a)})["catch"](d("WAFilteredCatch").filteredCatch(d("WACustomError").TimeoutError,function(){d("WALogger").WARN(o());d("WAWebSocketModel").Socket.mustExitLoop=!1;d("WAWebUserPrefsTabMutex").removeMutex();d("WAWebPageLoadLogging").addPageLoadQplAnnotation({mutex_takeover_timeout:!0});d("WAWebPageLoadLogging").endPageLoadQplMeasure("mutex_takeover");return b.init(a)}))["finally"](function(){d("WALogger").ERROR(n())})}return this.init(a)};e.unloadMutex=function(){var a=d("WAWebUserPrefsTabMutex").getMutex();a&&this.$1&&a.includes(this.$1)&&d("WAWebUserPrefsTabMutex").removeMutex()};e.storagePong=function(a){if(!d("WAWebUserPrefsTabMutex").mutexFilter(a))return;a=d("WAWebUserPrefsTabMutex").parseMutex(a.newValue);if(!a)return;if(a===r.TAKEOVER){this.$8();d("WAWebSocketModel").Socket.exitLoop();d("WAWebUserPrefsTabMutex").localTakeoverSuccess();return!0}else a.indexOf(r.PING)===0&&d("WAWebUserPrefsTabMutex").setMutex(r.PONG+Math.random())};e.$8=function(){this.$2&&c("WAWebAlarm").clearTimeout(this.$2)};e.$6=function(){var a=d("WAWebUserPrefsTabMutex").getMutex();if(a){d("WAWebPageLoadLogging").startPageLoadQplMeasure("mutex_ping");a+="";var e=t()*1e3;if(a.indexOf("_")>0){a=a.split(".");a=parseInt(a[a.length-1],10);if(Number.isFinite(a)){var f=Date.now()-q*1.5;a<f&&(d("WALogger").LOG(m()),e=1e3)}}a=d("WAPromiseTimeout").promiseTimeout(c("WAWebEventsWaitForEvent")(window,"storage",d("WAWebUserPrefsTabMutex").mutexFilter),e,"waitForOtherLocalSessionTimeout").then(function(){return!1})["catch"](d("WAFilteredCatch").filteredCatch(d("WACustomError").TimeoutError,function(){d("WALogger").WARN(l(),e);d("WAWebPageLoadLogging").addPageLoadQplAnnotation({mutex_ping_timeout:!0});return!0}));a["finally"](function(){return d("WAWebPageLoadLogging").endPageLoadQplMeasure("mutex_ping")});d("WAWebUserPrefsTabMutex").setMutex(r.PING+Math.random());return a}return(h||(h=b("Promise"))).resolve(!0)};return a}();var s=10;function t(){var a=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.MUTEX_PING_TIMEOUT_SECONDS);if(typeof a==="number")return a;d("WALogger").DEV(k());return s}function u(a){d("WALogger").DEV(j(),a),c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.MUTEX_PING_TIMEOUT_SECONDS,a)}function v(){var a=d("WAWebABProps").getABPropConfigValue("web_mutex_ping_timeout_seconds");a!=null&&u(a);a=d("WAWebABProps").getABPropConfigValue("web_mutex_block_strategy");d("WALogger").LOG(i(),a);c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").UserPrefs.MutexBlockStrategy,a)}e=new a();g["default"]=e}),98);
__d("WAWebClientExpiredDialog.react",["fbt","WAWebModal.react","WAWebSpinner.react","WAWebUpdater","react"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react"),l=(i||(i=d("react"))).useEffect;function a(){l(function(){d("WAWebUpdater").Updater.restart(!0).then(function(){d("WAWebUpdater").Updater.restart()})},[]);return k.jsxs(d("WAWebModal.react").Modal,{cover:!0,title:h._("__JHASH__bWpZgxUFgC9__JHASH__"),children:[k.jsx("div",{children:h._("__JHASH__L10niJOvrf4__JHASH__")}),k.jsx("div",{className:"x78zum5 xl56j7k x11fxgd9 x5th0yj x4n8cb0 x8zvzrc",children:k.jsx(d("WAWebSpinner.react").Spinner,{stroke:4,size:40,color:"highlight"})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebConflict.react",["WAWebConfirmPopup.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.cancelText,c=a.children,e=a.okText,f=a.onCancel;a=a.onOK;return i.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{cover:!0,children:c,cancelText:b,onCancel:f,okText:e,onOK:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebUimUieItem.react",["react"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react")),k=b.useImperativeHandle,l=b.useRef;e=j.forwardRef(a);function a(a,b){a=a.children;var c=l();k(b,function(){return{getElement:function(){return c.current}}});return j.jsx("div",{ref:c,children:a})}a.displayName=a.name+" [from "+f.id+"]";d=e;g["default"]=d}),98);
__d("WAWebContextMenuManager.react",["WAWebCmd","WAWebDropdown.react","WAWebL10N","WAWebUimContext","WAWebUimUieItem.react","WAWebVelocityTransitionGroup","react","useWAWebListener"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react")),k=b.cloneElement,l=b.useCallback,m=b.useImperativeHandle,n=b.useLayoutEffect,o=b.useRef,p=b.useState,q={MENU:"MENU",TOOLTIP:"TOOLTIP"};e=j.forwardRef(a);function a(a,b){a=a.type;var e=o(null),f=o(null),g=p(null),h=g[0],i=g[1];g=p(null);var s=g[0],t=g[1];d("useWAWebListener").useListener(d("WAWebCmd").Cmd,a===q.MENU?"open_context_menu":"open_tooltip",function(a,b){var e,g;h==null?void 0:h.uim.pop();f.current=b;b=a.menuOptions;a=a.uim;var j=b.event;j==null?void 0:j.stopPropagation();var k=j==null?0:10;t(null);e=typeof (j==null?void 0:j.clientX)==="number"?j.clientX:(e=b.offsetX)!=null?e:0;j=typeof (j==null?void 0:j.clientY)==="number"?j.clientY:(j=b.offsetY)!=null?j:0;i(babelHelpers["extends"]({},b,{type:(g=b.type)!=null?g:d("WAWebDropdown.react").MenuType.Dropdown,originX:e,originY:j,offsetX:(g=b.offsetX)!=null?g:k,offsetY:(e=b.offsetY)!=null?e:k,dirX:(j=b.dirX)!=null?j:c("WAWebL10N").isRTL()?d("WAWebDropdown.react").DirX.LEFT:d("WAWebDropdown.react").DirX.RIGHT,dirY:(g=b.dirY)!=null?g:d("WAWebDropdown.react").DirY.BOTTOM,key:Math.random(),uim:a}))});d("useWAWebListener").useListener(d("WAWebCmd").Cmd,a===q.MENU?"close_context_menu":"close_tooltip",function(a){(a==null||(h==null?void 0:h.uim)===a)&&(i(null),t(null))});n(function(){var a=e.current;if(h==null||a==null)return;if(s!=null)return;var b=a.clientWidth;a=a.clientHeight+10;t(r({anchor:h.anchor,temporaryMenuPosition:h,menuWidth:b,menuHeight:a}))},[h,s]);m(b,function(){return{isOpen:function(){return h!=null}}});g=l(function(a){if(a==null)return;f.current==null?void 0:f.current(a.getElement());f.current=null},[]);var u;if(h==null)u=j.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:"dropdown"});else{var v;a=h.menu;b=h.key;var w=h.type,x=h.autoFocus,y=h.findFirstItem,z=h.horizontal,A=h.theme,B=h.tooltipColorScheme;v=(v=s)!=null?v:h;var C=v.originX,D=v.originY,E=v.offsetX,F=v.offsetY,G=v.dirX;v=v.dirY;a=Array.isArray(a)?a.map(function(a){return k(a,{theme:A})}):a;u=j.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:w===d("WAWebDropdown.react").MenuType.Picker?"dropdown-picker":"dropdown",children:j.jsx(d("WAWebDropdown.react").Dropdown,{ref:e,origin:{x:C+E,y:D+F},type:w,dirX:G,dirY:v,horizontal:z,autoFocus:x,findFirstItem:y,isTemporaryRender:s==null,tooltipColorScheme:B,children:j.jsx(c("WAWebUimUieItem.react"),{ref:g,children:a})},"key-"+b)})}return j.jsx(c("WAWebUimContext").Consumer,{children:function(a){return j.jsx(c("WAWebUimContext").Provider,{value:(h==null?void 0:h.uim)||a,children:u})}})}a.displayName=a.name+" [from "+f.id+"]";b=e;function r(a){var b=a.anchor,c=a.temporaryMenuPosition,e=a.menuWidth;a=a.menuHeight;var f=window.innerWidth,g=window.innerHeight,h=c.originX,i=c.originY,j=c.offsetX,k=c.offsetY,l=c.dirX;c=c.dirY;var m=h;h=h;var n=i;i=i;var o=0;if(b&&b instanceof HTMLElement){var p=b.getBoundingClientRect();m=p.left;h=p.right;i=p.bottom;n=p.top;o=b.offsetWidth}p=l;p===d("WAWebDropdown.react").DirX.RIGHT&&m+e>f&&h-e>0?p=d("WAWebDropdown.react").DirX.LEFT:p===d("WAWebDropdown.react").DirX.LEFT&&h-e<0&&m+e<f?p=d("WAWebDropdown.react").DirX.RIGHT:p===d("WAWebDropdown.react").DirX.CENTER&&(h+e/2>f?p=d("WAWebDropdown.react").DirX.LEFT:m-e/2<0&&(p=d("WAWebDropdown.react").DirX.RIGHT));l=c;l===d("WAWebDropdown.react").DirY.BOTTOM&&i+a+k>g&&n-a>0?l=d("WAWebDropdown.react").DirY.TOP:l===d("WAWebDropdown.react").DirY.TOP&&n-a<0&&i+a+k<g&&(l=d("WAWebDropdown.react").DirY.BOTTOM);l===d("WAWebDropdown.react").DirY.TOP?f=n:f=i;e=j;c=k;b||(p===d("WAWebDropdown.react").DirX.LEFT&&(e=0),l===d("WAWebDropdown.react").DirY.TOP&&(c=0));return{dirX:p,dirY:l,originX:s(p,m,h,o),originY:f,offsetX:e,offsetY:c}}function s(a,b,c,e){switch(a){case d("WAWebDropdown.react").DirX.RIGHT:return b;case d("WAWebDropdown.react").DirX.LEFT:return c;case d("WAWebDropdown.react").DirX.CENTER:return b+e/2}}g.Type=q;g.ContextMenuManager=b}),98);
__d("WAWebDeepLinkClickWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({DeepLinkClick:[1156,{deepLinkHasPhoneNumber:[2,a.TYPES.BOOLEAN],deepLinkHasText:[1,a.TYPES.BOOLEAN],deepLinkSessionId:[3,a.TYPES.STRING]},[1,1,1],"regular"]},{DeepLinkClick:[]});g.DeepLinkClickWamEvent=b}),98);
__d("WAWebDeprecated.react",["fbt","WAWebConfirmPopup.react","WAWebLogoutReasonConstants","WAWebSocketModel","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k=function(){d("WAWebSocketModel").Socket.logout(d("WAWebLogoutReasonConstants").LogoutReason.UserInitiated)};function a(){return j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{cover:!0,cancelText:h._("__JHASH__3n1bF_cZdZK__JHASH__"),onCancel:k,okText:h._("__JHASH___sw1w0g68lI__JHASH__"),children:h._("__JHASH__xp5_DV0xD6g__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebNotificationIcon",["WAAbortError","WALogger","WAWebAssetLoader","WAWebAssetLoaderSingleton","WAWebFbtCommon","WAWebL10N","WAWebPwaDocumentMetadataUtils","WAWebUA","justknobx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error updating favicon: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[favicon] update aborted: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[favicon] updated: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[favicon] skipped: "," because of newer favicon: ",""]);k=function(){return a};return a}function a(a){var b=[];a>0&&b.push("("+c("WAWebL10N").n(a)+")");b.push(c("WAWebFbtCommon")("WhatsApp").toString());b=b.join(" ");d("WAWebPwaDocumentMetadataUtils").setDocumentTitle(b);d("WAWebPwaDocumentMetadataUtils").isCurrentWebSessionInsidePwa()&&d("WAWebPwaDocumentMetadataUtils").setAppBadge(a);c("justknobx")._("2268")&&m(a)}var l;function m(a){if(d("WAWebUA").UA.isSafari)return;var b;a===-1?b="favicon-error2":a===0?b="favicon":a<10?b="f0"+a:a<100?b="f"+a:b="f00";l=b;(a=document.getElementById("favicon"))==null?void 0:a.remove();a={id:b,low:{"default":"/favicon/1x/"+b+"/"},high:{"default":"/favicon/2x/"+b+"/"}};void d("WAWebAssetLoaderSingleton").AssetLoader.loadAsset(a,d("WAWebAssetLoader").LOAD_PRIORITY.NOTIFICATION_ICON,!1).then(function(a){if(l!==b){d("WALogger").LOG(k(),b,l);return}var c=document.createElement("link");c.setAttribute("id","favicon");c.setAttribute("rel","icon");c.setAttribute("type","image/png");c.setAttribute("href",a);a=document.getElementsByTagName("head");(a==null?void 0:a[0])&&a[0].appendChild(c);d("WALogger").LOG(j(),b)})["catch"](d("WAAbortError").catchAbort(function(){d("WALogger").LOG(i(),b)}))["catch"](function(a){d("WALogger").ERROR(h(),a).sendLogs("favicon-fetch-error")})}g.setTitleAndIcon=a}),98);
__d("WAWebFavicon.react",["WAWebNotificationIcon","react"],(function(a,b,c,d,e,f,g){var h,i=(h||d("react")).useEffect;function a(a){a=a.children;i(function(){d("WAWebNotificationIcon").setTitleAndIcon(0)},[]);return a}a.displayName=a.name+" [from "+f.id+"]";function b(a){a=a.children;i(function(){d("WAWebNotificationIcon").setTitleAndIcon(-1)},[]);return a}b.displayName=b.name+" [from "+f.id+"]";g.DefaultFavicon=a;g.ErrorFavicon=b}),98);
__d("WAWebDownloadOutlineIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="download-outline";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=24;m=24;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 24 24",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),fill:"none",children:[j.jsx("title",{children:k}),j.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.625 20.625C20.625 21.2463 20.1213 21.75 19.5 21.75L4.5 21.75C3.87868 21.75 3.375 21.2463 3.375 20.625C3.375 20.0037 3.87868 19.5 4.5 19.5H19.5C20.1213 19.5 20.625 20.0037 20.625 20.625Z",fill:"currentColor"}),j.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.125 3C13.125 2.37868 12.6213 1.875 12 1.875C11.3787 1.875 10.875 2.37868 10.875 3V14.3093L4.79045 8.27174C4.34942 7.8341 3.63711 7.83686 3.19948 8.2779C2.76184 8.71894 2.7646 9.43125 3.20564 9.86888L11.2056 17.8071C11.6443 18.2424 12.3518 18.2424 12.7905 17.8071L20.7905 9.86888C21.2315 9.43125 21.2343 8.71894 20.7966 8.2779C20.359 7.83687 19.6467 7.83411 19.2056 8.27174L13.125 14.3054L13.125 3Z",fill:"currentColor"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.DownloadOutlineIcon=a}),98);
__d("WAWebNativeAppDownloadButton.react",["fbt","WAWebDesktopUpsellPlatformAwareHooks","WAWebDesktopUpsellStoreOpener","WAWebDesktopUpsellUtils","WAWebDownloadOutlineIcon","WAWebFlex.react","WAWebUISpacing","WAWebUnstyledButton.react","WAWebWamEnumWebcNativeUpsellCtaSourceType","asyncToGeneratorRuntime","react","useWAWebDesktopUpsellQplImpression","useWAWebDesktopUpsellWamImpression"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k={downloadButton:{color:"x1hql6x6",fontWeight:"xk50ysn",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopColor:"xsrozwr",borderEndColor:"xsu93b8",borderBottomColor:"xmigjs0",borderStartColor:"x1b1j5rn",borderTopStartRadius:"x1x9wcxt",borderTopEndRadius:"x1f9vhhg",borderBottomEndRadius:"xsr4h3p",borderBottomStartRadius:"x1ytmua2",fontSize:"x1jchvi3",lineHeight:"x1d3mw78",height:"xdd8jsf",minWidth:"x1wfn8jh",whiteSpace:"x126k92a",backgroundColor:"xy7xkci",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",zIndex:"x1vjfegm",transition:"xeh1a47",":hover_color":"xr8f6zs",":hover_backgroundColor":"x10j0mou",":hover_transitionDelay":"xine9no","::after_content":"x1s928wv","::after_position":"x1j6awrg","::after_zIndex":"xi4xitw","::after_top":"x1m1drc7","::after_start":"x162n7g1","::after_left":null,"::after_right":null,"::after_minHeight":"x1idftlg","::after_minWidth":"x1pqwvb6","::after_backgroundColor":"xclfa2k","::after_borderTopStartRadius":"x194ut8o","::after_borderTopEndRadius":"x1vzenxt","::after_borderBottomEndRadius":"xd7ygy7","::after_borderBottomStartRadius":"xt298gk","::after_transform":"x1c5em3o","::after_transition":"x1p6ij0h",":hover::after_transform":"x8365pe",$$css:!0},downloadIcon:{marginTop:"x1kgmq87",letterSpacing:"x72az59",$$css:!0}};function a(){var a=d("WAWebDesktopUpsellUtils").getUserDesktopOs();a=d("WAWebDesktopUpsellPlatformAwareHooks").useWAWebDesktopUpsellPlatformAwareOsVersionCheck(a)===!0;var e=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("useWAWebDesktopUpsellQplImpression").logDesktopUpsellQplEvent("click"),d("WAWebDesktopUpsellStoreOpener").openExternalWhatsAppDesktopDownloadUrl(d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.QR_DOWNLOAD_BUTTON)});return function(){return a.apply(this,arguments)}}();d("useWAWebDesktopUpsellWamImpression").useWAWebDesktopUpsellWamImpression({source:d("WAWebWamEnumWebcNativeUpsellCtaSourceType").WEBC_NATIVE_UPSELL_CTA_SOURCE_TYPE.QR_DOWNLOAD_BUTTON,isCtaVisible:a});return a!==!0?null:j.jsx(c("WAWebUnstyledButton.react"),{xstyle:[k.downloadButton,d("WAWebUISpacing").uiPadding.vert10,d("WAWebUISpacing").uiPadding.horiz24],onClick:e,children:j.jsxs(d("WAWebFlex.react").FlexRow,{align:"center",justify:"center",children:[j.jsx(d("WAWebFlex.react").FlexItem,{children:h._("__JHASH__kMeNf2ZLsCO__JHASH__")}),j.jsx(d("WAWebFlex.react").FlexItem,{xstyle:[d("WAWebUISpacing").uiPadding.start14,k.downloadIcon],children:j.jsx(d("WAWebDownloadOutlineIcon").DownloadOutlineIcon,{width:16,height:16})})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebLandingHeader.react",["WAWebEnvironment","WAWebFbtCommon","WAWebFlex.react","WAWebLinkDeviceScreenGating","WAWebNativeAppDownloadButton.react","WAWebUISpacing","WAWebWaLogoIcon","WAWebWaWordmarkIcon","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j={brandColor:{color:"x1knego9",$$css:!0},headerIcon:{marginTop:"x1rdy4ex",$$css:!0},headerText:{marginStart:"x8182xy",$$css:!0}};function a(a){if(c("WAWebEnvironment").isWindows)return i.jsx("div",{className:"landing-header"});if(d("WAWebLinkDeviceScreenGating").linkDeviceScreenRefreshEnabled()&&a.surface==="link-device-screen"){return i.jsxs((a=d("WAWebFlex.react")).FlexRow,{align:"center",children:[i.jsx(a.FlexItem,{grow:0,xstyle:[d("WAWebUISpacing").uiPadding.end6,j.headerIcon],children:i.jsx(d("WAWebWaLogoIcon").WaLogoIcon,{height:30,iconXstyle:j.brandColor})}),i.jsx(a.FlexItem,{grow:1,xstyle:j.headerText,children:i.jsx(d("WAWebWaWordmarkIcon").WaWordmarkIcon,{height:20,iconXstyle:j.brandColor})}),i.jsx(a.FlexItem,{grow:0,children:i.jsx(c("WAWebNativeAppDownloadButton.react"),{})})]})}return i.jsxs("div",{className:"landing-header",children:[i.jsx(k,{}),i.jsx("div",{className:"landing-headerTitle",children:c("WAWebFbtCommon")("WhatsApp Web")})]})}a.displayName=a.name+" [from "+f.id+"]";var k=function(){return i.jsx("span",{className:"x1rg5ohu x16dsc37",children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"39",height:"39",viewBox:"0 0 39 39",children:[i.jsx("path",{fill:"#00E676",d:"M10.7 32.8l.6.3c2.5 1.5 5.3 2.2 8.1 2.2 8.8 0 16-7.2 16-16 0-4.2-1.7-8.3-4.7-11.3s-7-4.7-11.3-4.7c-8.8 0-16 7.2-15.9 16.1 0 3 .9 5.9 2.4 8.4l.4.6-1.6 5.9 6-1.5z"}),i.jsx("path",{fill:"#FFF",d:"M32.4 6.4C29 2.9 24.3 1 19.5 1 9.3 1 1.1 9.3 1.2 19.4c0 3.2.9 6.3 2.4 9.1L1 38l9.7-2.5c2.7 1.5 5.7 2.2 8.7 2.2 10.1 0 18.3-8.3 18.3-18.4 0-4.9-1.9-9.5-5.3-12.9zM19.5 34.6c-2.7 0-5.4-.7-7.7-2.1l-.6-.3-5.8 1.5L6.9 28l-.4-.6c-4.4-7.1-2.3-16.5 4.9-20.9s16.5-2.3 20.9 4.9 2.3 16.5-4.9 20.9c-2.3 1.5-5.1 2.3-7.9 2.3zm8.8-11.1l-1.1-.5s-1.6-.7-2.6-1.2c-.1 0-.2-.1-.3-.1-.3 0-.5.1-.7.2 0 0-.1.1-1.5 1.7-.1.2-.3.3-.5.3h-.1c-.1 0-.3-.1-.4-.2l-.5-.2c-1.1-.5-2.1-1.1-2.9-1.9-.2-.2-.5-.4-.7-.6-.7-.7-1.4-1.5-1.9-2.4l-.1-.2c-.1-.1-.1-.2-.2-.4 0-.2 0-.4.1-.5 0 0 .4-.5.7-.8.2-.2.3-.5.5-.7.2-.3.3-.7.2-1-.1-.5-1.3-3.2-1.6-3.8-.2-.3-.4-.4-.7-.5h-1.1c-.2 0-.4.1-.6.1l-.1.1c-.2.1-.4.3-.6.4-.2.2-.3.4-.5.6-.7.9-1.1 2-1.1 3.1 0 .8.2 1.6.5 2.3l.1.3c.9 1.9 2.1 3.6 3.7 5.1l.4.4c.3.3.6.5.8.8 2.1 1.8 4.5 3.1 7.2 3.8.3.1.7.1 1 .2h1c.5 0 1.1-.2 1.5-.4.3-.2.5-.2.7-.4l.2-.2c.2-.2.4-.3.6-.5s.4-.4.5-.6c.2-.4.3-.9.4-1.4v-.7s-.1-.1-.3-.2z"})]})})};g["default"]=a}),98);
__d("WAWebLockScreen.react",["fbt","WAPromiseDelays","WAWebABProps","WAWebButton.react","WAWebCmd","WAWebConnModel","WAWebDetailImage.react","WAWebEmojiText.react","WAWebFlex.react","WAWebFlexItem.react","WAWebLandingHeader.react","WAWebLockScreenResolver","WAWebPasswordInput.react","WAWebProfileImage.react","WAWebScreenLockErrorMessages","WAWebSocketModel","WAWebUIRefreshGatingUtils","WAWebUISpacing","WAWebUserPrefsMultiDevice","WAWebUserPrefsScreenLock","WAWebWDSText.react","asyncToGeneratorRuntime","react","stylex","useWAWebListener","useWAWebPersistentCounterAsync"],(function(a,b,c,d,e,f,g,h){var i,j,k,l=k||c("react"),m=(i||(i=d("react"))).useState,n={box:{backgroundColor:"xa03szm",minWidth:"x24d7kb",height:"x3urnb8","@media screen and (max-width: 850px)_minWidth":"xay0mn9","@media screen and (max-width: 660px)_minWidth":"xt48urr",$$css:!0},boxOverride:{backgroundColor:"x1acz5yr",$$css:!0},pushnameText:{marginBottom:"x14ler8",$$css:!0},passcodeContainer:{width:"xdzyupr",$$css:!0},incorrectPasscode:{height:"x1qx5ct2",$$css:!0},logoutButton:{marginTop:"x1tfhste",$$css:!0}},o=82;function a(){var a=m(""),e=a[0],f=a[1];a=m(null);var g=a[0],i=a[1];a=m(!1);var k=a[0],p=a[1];a=m(!1);var q=a[0],r=a[1];a=c("useWAWebPersistentCounterAsync")(d("WAWebUserPrefsScreenLock").getScreenUnlockTryCount,d("WAWebUserPrefsScreenLock").setScreenUnlockTryCount);var s=a[0],t=s.count,u=s.loading;s=s.error;var v=a[1],w=a[2];t=(a=t)!=null?a:0;var x=t>=d("WAWebABProps").getABPropConfigValue("web_screen_lock_max_retries");a=t+1===d("WAWebABProps").getABPropConfigValue("web_screen_lock_max_retries");d("useWAWebListener").useListener(d("WAWebCmd").Cmd,"correct_passcode_lock_screen",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){w()}));d("useWAWebListener").useListener(d("WAWebCmd").Cmd,"incorrect_passcode_lock_screen",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){v(),p(!0),r(!1)}));t=function(a){f(a.currentTarget.value)};var y=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){r(!0);yield d("WAPromiseDelays").delayMs(400);if(e===""){i(!0);r(!1);return}i(!1);d("WAWebLockScreenResolver").LockScreenResolvable.enterPasscode(e)});return function(){return a.apply(this,arguments)}}(),z=function(a){!x&&a.key==="Enter"&&y()};x&&d("WAWebSocketModel").Socket.logout();return l.jsxs("div",{className:"landing-wrapper",children:[l.jsx("div",{className:"landing-wrapper-before"}),l.jsx(c("WAWebLandingHeader.react"),{}),l.jsx("div",{className:"landing-window","data-testid":void 0,children:l.jsx("div",{className:(j||(j=c("stylex")))([n.box,d("WAWebUIRefreshGatingUtils").designUpdatesEnabled()&&n.boxOverride]),children:l.jsxs(d("WAWebFlex.react").FlexColumn,{align:"center",className:"landing-main",children:[l.jsx(c("WAWebFlexItem.react"),{xstyle:[d("WAWebUISpacing").uiMargin.top16,d("WAWebUISpacing").uiMargin.bottom24],children:l.jsx(c("WAWebProfileImage.react"),{thumb:d("WAWebUserPrefsMultiDevice").getCachedProfilePicEURL(),size:o,quality:d("WAWebDetailImage.react").DetailImageQuality.High})}),l.jsx(d("WAWebWDSText.react").WDSTextLarge,{xstyle:n.pushnameText,children:l.jsx(d("WAWebEmojiText.react").EmojiText,{text:d("WAWebConnModel").Conn.pushname,ellipsify:!0,titlify:!0})}),l.jsx(c("WAWebFlexItem.react"),{xstyle:d("WAWebUISpacing").uiMargin.bottom16,children:l.jsx(d("WAWebWDSText.react").WDSTextMuted,{xstyle:d("WAWebUISpacing").uiMargin.bottom6,children:h._("__JHASH__qgIdFJ97fdy__JHASH__")})}),l.jsxs(c("WAWebFlexItem.react"),{xstyle:[n.passcodeContainer,d("WAWebUISpacing").uiMargin.bottom24],children:[l.jsx(c("WAWebPasswordInput.react"),{onChange:t,onKeyDown:z,required:!0,placeholder:h._("__JHASH__xKJi4GvQVx9__JHASH__").toString(),focusOnMount:!0,enableShowPassword:!0,testid:void 0}),l.jsx(d("WAWebWDSText.react").WDSTextSmall,{color:"critical",xstyle:[n.incorrectPasscode,d("WAWebUISpacing").uiMargin.top4,d("WAWebUISpacing").uiMargin.bottom10],role:"alert",children:d("WAWebScreenLockErrorMessages").getErrorMessage({emptyInputEntered:g,incorrectPasscode:k,onlyOneTryRemaining:a,triesExceeded:x})})]}),l.jsx(c("WAWebFlexItem.react"),{xstyle:d("WAWebUISpacing").uiMargin.bottom24,children:l.jsx(c("WAWebButton.react"),{type:"primary",onClick:function(){y()},disabled:q||x||u||s!=null,spinner:q,testid:void 0,children:h._("__JHASH__ODe3uHsIv1F__JHASH__")})}),l.jsx(d("WAWebWDSText.react").WDSTextMuted,{xstyle:d("WAWebUISpacing").uiMargin.bottom6,children:h._("__JHASH__4IOi_WOkdPh__JHASH__")}),l.jsx(d("WAWebWDSText.react").WDSTextMuted,{xstyle:d("WAWebUISpacing").uiMargin.bottom6,children:h._("__JHASH__cbGxantkmY7__JHASH__")}),l.jsx(c("WAWebFlexItem.react"),{xstyle:n.logoutButton,children:l.jsx(c("WAWebButton.react"),{type:"secondary",onClick:function(){return d("WAWebSocketModel").Socket.logout()},children:h._("__JHASH__wtXSWvFZiBX__JHASH__")})})]})})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebLogoutLoadingScreen.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={background:"_al_7",mainWrapper:"_al_8",logoutTitle:"_al_9"};b=a;g["default"]=b}),98);
__d("WAWebLogoutLoadingScreen.react",["fbt","WAWebLogoutLoadingScreen.scss","WAWebSpinner.react","WAWebText_DONOTUSE.react","WAWebWDSText.react","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(){return j.jsx("div",{className:c("WAWebLogoutLoadingScreen.scss").background,children:j.jsxs("div",{className:c("WAWebLogoutLoadingScreen.scss").mainWrapper,children:[j.jsx(d("WAWebSpinner.react").Spinner,{size:50,stroke:4,color:"highlight"}),j.jsx(d("WAWebText_DONOTUSE.react").TextDiv,{className:c("WAWebLogoutLoadingScreen.scss").logoutTitle,size:"32",children:h._("__JHASH__Hbv3GKTwSY-__JHASH__")}),j.jsx(d("WAWebWDSText.react").WDSTextMuted,{children:h._("__JHASH__U5XvKl53dy4__JHASH__")})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebKeyboardRotateFocusModal.react",["WAWebKeyboardConstants","WAWebKeyboardTabUtils","react","stylex","useMergeRefs"],(function(a,b,c,d,e,f,g){var h,i,j,k=j||c("react"),l=(h||(h=d("react"))).useRef,m={container:{position:"x10l6tqk",top:"x13vifvy",end:"xds687c",bottom:"x1ey2m1c",start:"x17qophe",$$css:!0}};b=k.forwardRef(a);function a(a,b){var e=a.children,f=a.onBlur;a=a.xstyle;var g=l(null);b=c("useMergeRefs")(b,g);var h=function(a){var b=g.current;if(!b)return;var c=a.shiftKey?d("WAWebKeyboardTabUtils").TabDirection.BACKWARD:d("WAWebKeyboardTabUtils").TabDirection.FORWARD;b=d("WAWebKeyboardTabUtils").getNextTabbableElement(b,c,d("WAWebKeyboardTabUtils").FocusType.TABBABLE);if(b==null)return;a.preventDefault();b.focus()},j=function(a){if(a.metaKey||a.ctrlKey)return;if(a.key===d("WAWebKeyboardConstants").KEYBOARD_EVENT_KEY_VALUE.TAB)return h(a)};return k.jsx("div",{ref:b,className:(i||(i=c("stylex")))(m.container,a),onKeyDown:j,tabIndex:"-1",onBlur:f,children:e})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("WAWebModalManagerImpl.react",["WAUpperFirst","WAWebFocusTracer","WAWebKeyboardRotateFocusModal.react","WAWebModalManager","WAWebPopover.react","WAWebUimContext","WAWebUimUie.react","WAWebUseIsKeyboardUser","WAWebVelocityTransitionGroup","lodash","react","useWAWebListener"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react")),k=b.cloneElement,l=b.useRef,m=b.useState,n={DEFAULT:"modal",NONE:"none"},o="modal";e="media";b="alert";function a(a){var b,e,f=a.type,g=a.contextMenuRef,h=l(null),i=l(!1),p=l(null),q=c("WAWebUseIsKeyboardUser")(),r=q.isKeyboardUser;q=m(void 0);var s=q[0],t=q[1];q=m(null);var u=q[0],v=q[1];q=m(n.DEFAULT);var w=q[0],x=q[1];q=m(void 0);var y=q[0],z=q[1];q=m(!1);var A=q[0],B=q[1],C=function(){if(!h.current)return;var a=h.current.getElement();if(!a||a.contains(document.activeElement))return;c("WAWebFocusTracer").focus(a)},D=function(){if(!h.current)return;var a=h.current.getElement();if(!a)return;c("WAWebFocusTracer").focus(a)},E=function(a){var b;return(b=document.getElementById(d("WAWebPopover.react").ANCHOR_PORTAL_ID))==null?void 0:b.contains(a)},F=function(a){var b=a.relatedTarget,c=g==null?void 0:g.current;c=c?c.isOpen():!1;return b instanceof HTMLElement&&!a.currentTarget.contains(b)&&!E(b)&&!c&&i.current===!1};q=function(a){F(a)&&C()};var G=function(a,b){b===void 0&&(b={});p.current=r?document.activeElement||document.body:null;var d=b.transition||n.DEFAULT;b=b;var e=b.uim;b=b.blockClose;s&&(d=n.NONE);var g=c("lodash").uniqueId("ModalManager"+f),h=a;f===o&&(h=k(a,{requestFocus:D}));i.current=!1;t(h);v(g);x(d);z(e);B((a=b)!=null?a:!1)},H=function(a){a(i.current===!0?!1:!!s)},I=function(a){if(!s)return;t(void 0);v(null);a&&x(a);i.current=!0;c("WAWebFocusTracer").focus(p.current)},J=function(a){a===u&&(I(),d("WAWebModalManager").ModalManager.trigger("close_"+f))},K=function(a){a((a=h.current)==null?void 0:a.getElement())};(b=d("useWAWebListener")).useListener((e=d("WAWebModalManager")).ModalManager,"open_"+f,G);b.useListener(e.ModalManager,"exists_"+f,H);b.useListener(e.ModalManager,"close_"+f,I);b.useListener(e.ModalManager,"get_ref",K);var L;s&&(L=j.jsx(d("WAWebUimUie.react").UIE,{displayName:"Modal"+c("WAUpperFirst")(a.type),escapable:!A,ref:h,requestFocus:C,requestDismiss:J.bind(null,u),children:j.jsx(c("WAWebKeyboardRotateFocusModal.react"),{onBlur:q,children:s})},u));return j.jsx(c("WAWebUimContext").Consumer,{children:function(a){return j.jsx(c("WAWebUimContext").Provider,{value:y||a,children:j.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:w,children:L})})}})}a.displayName=a.name+" [from "+f.id+"]";g.ModalType=o;g.MediaType=e;g.AlertType=b;g.ModalManagerComponent=a}),98);
__d("WAWebOffline.react",["fbt","WAWebModal.react","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(){return j.jsx(d("WAWebModal.react").Modal,{title:h._("__JHASH__OhLnEH2nl6O__JHASH__"),cover:!0,children:h._("__JHASH__wGw1nGH5taU__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebProxied.react",["fbt","WAWebConfirmPopup.react","WAWebExternalLink.react","WAWebFaqUrl","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function k(){d("WAWebExternalLink.react").openExternalLink(d("WAWebFaqUrl").getCannotConnectFaqUrl())}function a(){return j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{cover:!0,title:h._("__JHASH__9rkzpxJk0r2__JHASH__"),okText:h._("__JHASH__RR1bpeluTQm__JHASH__"),onOK:k,children:h._("__JHASH__jiAY6CW3tYp__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebWamEnumWebcPwaActionType",[],(function(a,b,c,d,e,f){a=Object.freeze({INSTALL:1});f.WEBC_PWA_ACTION_TYPE=a}),66);
__d("WAWebWebcPwaEventWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebcPwaActionType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebcPwaEvent:[4116,{webcPwaAction:[2,d("WAWebWamEnumWebcPwaActionType").WEBC_PWA_ACTION_TYPE]},[1,1,1],"regular"]},{WebcPwaEvent:[]});g.WebcPwaEventWamEvent=a}),98);
__d("WAWebPwaEventListeners",["WAWebPwaDocumentMetadataUtils","WAWebWamEnumWebcPwaActionType","WAWebWamEnumWebcWebPlatformType","WAWebWamGlobals","WAWebWamPlatform","WAWebWebcPwaEventWamEvent"],(function(a,b,c,d,e,f,g){function a(){window.addEventListener("appinstalled",function(){new(d("WAWebWebcPwaEventWamEvent").WebcPwaEventWamEvent)({webcPwaAction:d("WAWebWamEnumWebcPwaActionType").WEBC_PWA_ACTION_TYPE.INSTALL}).commit()})}function b(){window.matchMedia("(display-mode: standalone)").addListener(function(){d("WAWebPwaDocumentMetadataUtils").setDocumentTitle(null),d("WAWebPwaDocumentMetadataUtils").setAppBadge(null),d("WAWebWamGlobals").Global.set({webcWebPlatform:d("WAWebWamEnumWebcWebPlatformType").WEBC_WEB_PLATFORM_TYPE[d("WAWebWamPlatform").getWamPlatform()]})})}g.registerPwaInstallListener=a;g.registerPwaDisplayModeListener=b}),98);
__d("WAWebPwaManifest",["WAWebBuildConstants","WAWebUA"],(function(a,b,c,d,e,f,g){function a(){if(d("WAWebUA").UA.os===d("WAWebUA").OS_TYPE.MAC){var a;(a=document.getElementById("whatsapp-pwa-manifest-link"))==null?void 0:a.setAttribute("href",d("WAWebBuildConstants").WEB_PUBLIC_PATH+"manifest-apple.json")}}g.updatePwaManifestOnMacOS=a}),98);
__d("WAWebSafariTakeover",["WALogger","WAWebSWBus","WAWebSWBusActions","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["error: ",""]);h=function(){return a};return a}var i=!1;function a(){i=!0}function e(){return i}function f(){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=navigator.serviceWorker;if(a==null?void 0:a.controller)try{a=(yield c("WAWebSWBus").request(a.controller,c("WAWebSWBusActions").ACTIVE_TAB));return a.some(function(a){return a.isActive===!0})}catch(a){d("WALogger").ERROR(h(),a).sendLogs("ACTIVE_TAB service worker call failed");return!1}return!1});return j.apply(this,arguments)}g.setTabActive=a;g.getIsTabActive=e;g.isAnotherTabActive=f}),98);
__d("WAWebSWBusInit",["Promise","WALogger","WAWebCmd","WAWebCrashlog","WAWebFeatureDetectionSwSupport","WAWebLoggerImpl","WAWebNoop","WAWebSWBus","WAWebSWBusActions","WAWebSafariTakeover","WAWebSocketConstants","WAWebSocketModel","asyncToGeneratorRuntime","err","gkx","requireDeferred"],(function(a,b,c,d,e,f,g){var h;function a(){var b=babelHelpers.taggedTemplateLiteralLoose(['Unable to add "error" event listener to service worker container, error: ',""]);a=function(){return b};return b}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["ServiceWorker container error: ",""]);i=function(){return a};return a}function e(){var a=babelHelpers.taggedTemplateLiteralLoose(['Unable to add "controllerchange" event listener to service worker container, error: ',""]);e=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(['Unable to add "error" event listener to service worker, error: ',""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["ServiceWorker controller error: ",""]);k=function(){return a};return a}var l=c("requireDeferred")("WAWebPipVideoStreaming").__setRef("WAWebSWBusInit");function m(){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(c("gkx")("26262"))return(yield l.load()).handleVideoStreamingRequest});return n.apply(this,arguments)}if(c("WAWebFeatureDetectionSwSupport").supported){var o=function(){try{var a=navigator.serviceWorker;(a==null?void 0:a.controller)&&a.controller.addEventListener("error",function(a){if(d("WAWebSocketModel").Socket.state===d("WAWebSocketConstants").SOCKET_STATE.UNLAUNCHED)return;d("WALogger").WARN(k(),a.error)})}catch(a){d("WALogger").WARN(j(),a)}};try{f=navigator.serviceWorker;f&&f.addEventListener("controllerchange",function(a){o()})}catch(a){d("WALogger").WARN(e(),a)}try{g=navigator.serviceWorker;g&&g.addEventListener("error",function(a){if(d("WAWebSocketModel").Socket.state===d("WAWebSocketConstants").SOCKET_STATE.UNLAUNCHED)return;d("WALogger").WARN(i(),a.error)})}catch(b){d("WALogger").WARN(a(),b)}o();var p=function(a,b){a.buffer.forEach(function(a){var c;c=(c=a.message[0])!=null?c:"";c="ServiceWorker ("+b+"): "+c;var e=a.level.match(/^(.*?)(?:Verbose)?$/i);e=q(e[1]);d("WAWebLoggerImpl").Logger.logImpl(e,c,a.error,a.attachedToSendLogs,a.extraTags)})};f=new(c("WAWebSWBus"))(function(a){var e,f=a.action,g=a.message;a=a.version;switch(f){case c("WAWebSWBusActions").REQUEST_STREAMING_INFO:case c("WAWebSWBusActions").EXP_BACKOFF:case c("WAWebSWBusActions").REQUEST_RMR:case c("WAWebSWBusActions").SEND_STREAMING_CHUNK:return(e=m())==null?void 0:e.then(function(a){return a==null?void 0:a({action:f,message:g})});case c("WAWebSWBusActions").LOG:if(d("WAWebSocketModel").Socket.state===d("WAWebSocketConstants").SOCKET_STATE.UNLAUNCHED)return;g&&p(g,a);return{test:!0};case c("WAWebSWBusActions").UPLOAD_LOGS:g&&p(g,a);return d("WAWebCrashlog").upload({reason:"Requested by Service Worker"}).then(c("WAWebNoop"));case c("WAWebSWBusActions").ACTIVE_TAB:return{isActive:d("WAWebSafariTakeover").getIsTabActive()};case c("WAWebSWBusActions").HEARTBEAT:return g;default:return(h||(h=b("Promise"))).reject(c("err")("Invalid Action: "+f))}});f.init();d("WAWebCmd").Cmd.on("logout",function(){var a=navigator.serviceWorker;(a==null?void 0:a.controller)&&c("WAWebSWBus").request(a.controller,c("WAWebSWBusActions").LOGOUT)["catch"](c("WAWebNoop"))})}function q(a){switch(a){case"info":return 1;case"log":return 2;case"warn":return 3;case"error":return 4}throw c("err")("Invalid level: "+a)}}),34);
__d("WAWebServiceUnavailable.react",["fbt","WAWebModal.react","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(){return j.jsx(d("WAWebModal.react").Modal,{title:h._("__JHASH__iqYqAmIomEj__JHASH__"),cover:!0,children:h._("__JHASH__exOMohO_Z4k__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebSmbLearnMore.react",["fbt","WAWebClickableLink.react","WAWebExternalLink.react","WAWebL10N","WAWebURLUtils","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k="https://www.whatsapp.com/legal/small-business-terms/";function a(){var a=c("WAWebURLUtils").build(k,{lg:c("WAWebL10N").getNormalizedLocale()}),b=function(b){b.preventDefault(),self.setTimeout(function(){return d("WAWebExternalLink.react").openExternalLink(a)},10)};return j.jsx(c("WAWebClickableLink.react"),{href:a,onClick:b,children:h._("__JHASH__RR1bpeluTQm__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebLoadingScreen.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={container:"_alyo",web:"_alyp",containerFixed:"_alyq",graphic:"_alyr",logo:"_alys",dots:"_alyt",laptop:"_alyu",shimmering:"_alyv",shimmeringWWW:"_aqdy",initialLoad:"_alyw",logout:"_alyx",didYouKnow:"_alyy",organizing:"_alyz",progress:"_aly-",main:"_aly_",secondary:"_alz0",warning:"_alz1",showWarning:"_alz2",connecting:"_alz3",downloading:"_alz4"};b=a;g["default"]=b}),98);
__d("WAWebLoadingScreen.react",["fbt","$InternalEnum","WAWebButton.react","WAWebClassnames","WAWebFbtCommon","WAWebHistorySyncUIText","WAWebL10N","WAWebLoadingScreen.scss","WAWebLockIcon","WAWebProgressBar.react","WAWebThemeContext","cr:10212","react","useWAWebForceUpdate","useWAWebListener"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react");e=(i||(i=d("react"))).memo;var l=b("$InternalEnum").Mirrored(["INITIAL_LOAD","CONNECTING","DOWNLOADING","ORGANIZING"]),m=b("$InternalEnum").Mirrored(["MULTI_STAGE","UNIFIED","UNIFIED_WITH_PROGRESS","LOGO"]);function a(a){var e,f,g=d("useWAWebForceUpdate").useForceUpdateDONOTUSE();d("useWAWebListener").useListener(c("WAWebL10N"),"locale_change",g);g=a.stage===l.INITIAL_LOAD;var i=a.stage===l.CONNECTING,j=a.stage===l.DOWNLOADING,q=a.stage===l.ORGANIZING,r=a.theme;r=r===void 0?m.MULTI_STAGE:r;i=r===m.LOGO?d("WAWebClassnames").classnamesConvertMeToStylexPlease(c("WAWebLoadingScreen.scss").container,c("WAWebLoadingScreen.scss").initialLoad):d("WAWebClassnames").classnamesConvertMeToStylexPlease((e={},e[c("WAWebLoadingScreen.scss").containerFixed]=!a.debug,e[c("WAWebLoadingScreen.scss").initialLoad]=g,e[c("WAWebLoadingScreen.scss").connecting]=i,e[c("WAWebLoadingScreen.scss").downloading]=j,e[c("WAWebLoadingScreen.scss").organizing]=q,e[c("WAWebLoadingScreen.scss").web]=!0,e[c("WAWebLoadingScreen.scss").container]=!0,e));e=d("WAWebClassnames").classnamesConvertMeToStylexPlease((e={},e[c("WAWebLoadingScreen.scss").showWarning]=j,e[c("WAWebLoadingScreen.scss").logout]=!0,e));j=d("WAWebClassnames").classnamesConvertMeToStylexPlease((f={},f[c("WAWebLoadingScreen.scss").showWarning]=j,f[c("WAWebLoadingScreen.scss").warning]=!0,f));var s,t;switch(r){case m.MULTI_STAGE:switch(a.stage){case l.INITIAL_LOAD:s=c("WAWebFbtCommon")("WhatsApp");break;case l.CONNECTING:s=h._("__JHASH__IRiaYmEAXw8__JHASH__");break;case l.DOWNLOADING:s=h._("__JHASH__mYOJjeEIq2e__JHASH__",[h._param("progress",a.progress)]);break;case l.ORGANIZING:s=h._("__JHASH__v76B1V7Bf3v__JHASH__");break}t=k.jsx(n,{});break;case m.UNIFIED:s=d("WAWebHistorySyncUIText").SYNC_LOADING();t=d("WAWebThemeContext").isLightTheme()?k.jsx(o,{}):k.jsx(p,{});break;case m.UNIFIED_WITH_PROGRESS:t=d("WAWebThemeContext").isLightTheme()?k.jsx(o,{}):k.jsx(p,{});switch(a.stage){case l.INITIAL_LOAD:case l.CONNECTING:s=d("WAWebHistorySyncUIText").SYNC_LOADING();break;case l.DOWNLOADING:case l.ORGANIZING:s=h._("__JHASH__fvoc12_jVo0__JHASH__",[h._param("percentage",a.progress,[0])])}break;case m.LOGO:t=k.jsx(n,{});s=c("WAWebFbtCommon")("WhatsApp");break}return k.jsxs("div",{"data-testid":void 0,className:i,children:[k.jsx("div",{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((f={},f[c("WAWebLoadingScreen.scss").shimmeringWWW]=r===m.LOGO||r===m.MULTI_STAGE&&(g||q),f[c("WAWebLoadingScreen.scss").graphic]=!0,f)),children:t}),k.jsx("div",{className:r!==m.MULTI_STAGE?"x1n2onr6 x1m258z3 xuoj239 x1tfhste xk82a7y":c("WAWebLoadingScreen.scss").progress,children:k.jsx(c("WAWebProgressBar.react"),{value:a.progress,max:100})}),k.jsx("div",{className:c("WAWebLoadingScreen.scss").main,children:s}),k.jsxs("div",{className:c("WAWebLoadingScreen.scss").secondary,children:[k.jsx(d("WAWebLockIcon").LockIcon,{width:14,height:14}),"\xa0",c("WAWebFbtCommon")("End-to-end encrypted")]}),b("cr:10212")?k.jsx("div",{className:c("WAWebLoadingScreen.scss").didYouKnow,children:k.jsx(b("cr:10212"),{})}):null,a.onLogout!=null&&k.jsx("div",{className:e,children:k.jsx(c("WAWebButton.react"),{type:"plain-white",onClick:a.onLogout,children:h._("__JHASH__3n1bF_cZdZK__JHASH__")})}),k.jsx("div",{className:j,children:h._("__JHASH__W3Kv9n3KpTs__JHASH__")})]})}a.displayName=a.name+" [from "+f.id+"]";function n(){return k.jsx("span",{children:k.jsxs("svg",{width:"250px",height:"52px",viewBox:"0 0 250 52",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[k.jsxs("g",{className:c("WAWebLoadingScreen.scss").dots,children:[k.jsx("circle",{fill:"#B6B6B6",cx:"65.7636689",cy:"21.1046108",r:"3.65625"}),k.jsx("circle",{fill:"#B6B6B6",cx:"81.0791876",cy:"19.3283142",r:"3.65625"}),k.jsx("circle",{fill:"#B6B6B6",cx:"96.3947063",cy:"17.7846275",r:"3.65625"}),k.jsx("circle",{fill:"#B6B6B6",cx:"111.710225",cy:"17.5274031",r:"3.65625"}),k.jsx("circle",{fill:"#B6B6B6",cx:"127.025744",cy:"17.6118619",r:"3.65625"}),k.jsx("circle",{fill:"#B6B6B6",cx:"142.341262",cy:"18.4196288",r:"3.65625"}),k.jsx("circle",{fill:"#B6B6B6",cx:"157.656781",cy:"19.9893339",r:"3.65625"}),k.jsx("circle",{fill:"#B6B6B6",cx:"172.9723",cy:"22.0657859",r:"3.65625"})]}),k.jsx("path",{className:c("WAWebLoadingScreen.scss").laptop,d:"M190.14097 4.7518926h48.227869l.281462-.00596781c1.058365-.00288774 2.664865.25185461 2.695721 2.87464716.142823 12.13996425 0 22.28077555 0 34.40910725 0 .06028-.024112.168784-.036168.217008l-16.394805-.0086927c-12.47317.0007215-24.136918.0136044-37.78743-.0033633l-.010915-6.2953341c-.030319-9.5718533-.105914-18.2714581.010915-28.31872515.033356-2.86867935 1.976535-2.91690333 3.013351-2.86867935zm20.097267 4.28597465l-19.256815-.00079524.002426 4.98254029c-.000422 6.5558423-.012657 12.8111695-.002954 19.3619492l.011919 4.9777941h46.536157l.008754-4.9777414c.010547-8.1882109.002637-15.913459.002637-24.3331514l-27.302124-.01059555zM179.195421 44.6572387c.397848-.036168.807752-.024112 1.2056-.024112 9.620684 0 19.241369-.012056 28.862053 0 .132616.4701838.54252 1.6393289 1.036816 1.6393289 3.255119.012056 4.510238 0 7.765357 0 .542519.036168.988591-1.1450331 1.133263-1.6513849 9.910029 0 19.820057.012056 29.730086.012056.084392.012056.265232.036168.349624.048224-.016075.2571945-.016075 1.0085894 0 2.2541846 0 1.4209691-1.193544 1.8201689-1.965128 2.1215688-.421959.1205599-.868031.1326159-1.289991.1928959h-63.560505c-.651024-.072336-1.350272-.108504-1.916904-.4701838-.566631-.2893439-1.000647-.7595278-1.350271-1.2779356v-2.8446419z",fill:"currentColor"}),k.jsx("path",{className:c("WAWebLoadingScreen.scss").logo,d:"M37.7314595,31.1612046 C37.0876293,30.8391042 33.9223475,29.2816062 33.332139,29.0666255 C32.7419305,28.8517683 32.3127104,28.7444016 31.8834903,29.3887258 C31.4542703,30.0332973 30.2204788,31.4835521 29.8447567,31.91339 C29.4692818,32.3428571 29.0936834,32.3968494 28.4499768,32.0745019 C27.8060232,31.7521544 25.7314595,31.0723707 23.272278,28.8787027 C21.3582085,27.171583 20.0661004,25.0632896 19.6905019,24.4185946 C19.315027,23.7741467 19.6505946,23.4257297 19.9729421,23.1046178 C20.2625483,22.8161235 20.6167722,22.352556 20.9386255,21.9767104 C21.2606023,21.6007413 21.3678456,21.3320154 21.5824556,20.9026718 C21.7970657,20.472834 21.6898224,20.0968649 21.528834,19.7746409 C21.3678456,19.452417 20.0801853,16.2831815 19.543722,14.993915 C19.0210965,13.7387491 18.4903166,13.9087567 18.0950733,13.8887413 C17.7199691,13.870085 17.2902548,13.8661313 16.8611583,13.8661313 C16.4319382,13.8661313 15.7343629,14.0272433 15.144278,14.6716911 C14.5540695,15.3163861 12.8908108,16.8740077 12.8908108,20.0429961 C12.8908108,23.2121081 15.1978996,26.2734826 15.5198765,26.7031969 C15.8417297,27.1330348 20.0597992,33.6360772 26.5184865,36.4250193 C28.05461,37.0883707 29.2539305,37.4846023 30.1888494,37.7811274 C31.7312742,38.2713822 33.1348263,38.2021931 34.2440772,38.0363861 C35.4810811,37.8515521 38.0533127,36.478888 38.5898996,34.9750116 C39.1263629,33.470888 39.1263629,32.1818687 38.9653745,31.91339 C38.8045097,31.6447876 38.3752896,31.4835521 37.7314595,31.1612046 M25.9838765,47.2013591 L25.9752278,47.2013591 C22.1322625,47.1998763 18.3629343,46.1674749 15.0745946,44.2160926 L14.2926332,43.7519074 L6.18674906,45.8782394 L8.35027028,37.9751042 L7.84111198,37.1648494 C5.69723552,33.7549343 4.56500386,29.8139923 4.56660833,25.767166 C4.57130502,13.9587954 14.1789652,4.35187645 25.9924016,4.35187645 C31.7128649,4.35385328 37.0902239,6.58458689 41.1338378,10.6327722 C45.1773282,14.680834 47.4028724,20.0618996 47.4007737,25.7843398 C47.3959539,37.5936988 37.7882934,47.2013591 25.9838765,47.2013591 M44.2112742,7.556695 C39.3464092,2.68614672 32.8767258,0.00271814672 25.9836293,0 C11.7809421,0 0.221652509,11.5584247 0.215969112,25.7654363 C0.21411583,30.3069652 1.40058687,34.7397683 3.65553668,38.6475984 L-4.61852778e-14,52 L13.6596757,48.4167413 C17.4233205,50.4695597 21.6607876,51.5516293 25.9733745,51.5531121 L25.9838765,51.5531121 L25.984,51.5531121 C40.1852046,51.5531121 51.7456062,39.9934517 51.7512912,25.7860695 C51.7538842,18.9011274 49.0761392,12.4271197 44.2112742,7.556695",fill:"currentColor"})]})})}n.displayName=n.name+" [from "+f.id+"]";function o(){return k.jsxs("svg",{width:"360",height:"189",viewBox:"0 0 360 189",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M263.973 169.512C296.928 158.399 321.88 127.034 318.305 81.6873C312.874 12.7907 246.61 -4.29994 205.331 15.9952C149.334 43.5266 142.242 48.0401 102.134 48.0401C72.2614 48.0401 41.8454 62.4603 38.0434 101.448C35.2875 129.708 46.373 154.375 87.3951 166.97C162.054 189.892 232.127 180.251 263.973 169.512Z",fill:"#DAF7F3"}),k.jsx("rect",{x:"0.350314",y:"0.491301",width:"36.3309",height:"71.7205",rx:"6.39808",transform:"matrix(0.986206 0.165525 -0.16491 0.986309 53.5541 83.2331)",fill:"#42CBA5",stroke:"#316474",strokeWidth:"0.853077"}),k.jsx("rect",{x:"0.353963",y:"0.496419",width:"36.322",height:"71.7116",rx:"6.39363",transform:"matrix(0.986206 0.165525 -0.16491 0.986309 53.9368 80.9482)",fill:"white",stroke:"#316474",strokeWidth:"0.861963"}),k.jsx("path",{d:"M86.853 93.0759L77.0579 151.659C76.6995 153.803 74.6715 155.249 72.5281 154.889L48.7185 150.893C46.5752 150.533 45.1282 148.504 45.4866 146.36L55.2817 87.7769C55.6401 85.6334 57.6681 84.1873 59.8115 84.5471L63.6109 85.1848L79.8216 87.9056L83.6211 88.5433C85.7644 88.903 87.2114 90.9323 86.853 93.0759Z",fill:"#EEFEFA",stroke:"#316474",strokeWidth:"0.861963"}),k.jsx("path",{d:"M58.4726 88.8221C58.3721 89.4244 58.7846 90.0018 59.3926 90.1059C60.0037 90.2105 60.5863 89.7985 60.6873 89.193C60.7878 88.5907 60.3753 88.0133 59.7674 87.9092C59.1562 87.8046 58.5736 88.2166 58.4726 88.8221Z",fill:"white",stroke:"#316474",strokeWidth:"0.853077"}),k.jsx("path",{d:"M111.421 117.587C111.208 115.535 109.372 114.046 107.321 114.262L80.1959 117.113C78.1442 117.329 76.6535 119.167 76.8665 121.219L77.9482 131.641C78.1612 133.693 79.9971 135.182 82.0488 134.966L119.624 131.017C119.884 130.99 119.976 130.658 119.767 130.501L120.285 129.811L119.767 130.501L114.076 126.232C112.861 125.321 112.081 123.944 111.924 122.433L111.421 117.587Z",fill:"#42CBA5",stroke:"#316474",strokeWidth:"1.72407"}),k.jsx("path",{d:"M81.8041 122.275C81.3306 122.324 80.9866 122.749 81.0358 123.222C81.0849 123.696 81.5086 124.039 81.9821 123.989L81.8041 122.275ZM105.64 121.503C106.113 121.453 106.457 121.029 106.408 120.555C106.359 120.082 105.935 119.738 105.462 119.788L105.64 121.503ZM81.9821 123.989L105.64 121.503L105.462 119.788L81.8041 122.275L81.9821 123.989Z",fill:"#33AF8D"}),k.jsx("path",{d:"M82.3842 127.866C81.9107 127.916 81.5667 128.34 81.6158 128.814C81.665 129.287 82.0887 129.631 82.5621 129.581L82.3842 127.866ZM106.22 127.094C106.693 127.045 107.037 126.62 106.988 126.147C106.939 125.673 106.515 125.33 106.042 125.38L106.22 127.094ZM82.5621 129.581L106.22 127.094L106.042 125.38L82.3842 127.866L82.5621 129.581Z",fill:"#33AF8D"}),k.jsx("path",{d:"M125.463 42.5443L286.19 25.6512L297.132 129.758L136.405 146.652L125.463 42.5443Z",fill:"#EEFEFA"}),k.jsx("path",{d:"M295.928 130.484L138.655 147.014C135.404 147.356 132.479 144.995 132.138 141.75L121.537 40.8838C121.196 37.6393 123.564 34.7219 126.816 34.3801L284.089 17.85C287.343 17.508 290.265 19.8695 290.606 23.114L301.207 123.981C301.548 127.225 299.182 130.142 295.928 130.484Z",fill:"white"}),k.jsx("path",{d:"M138.655 147.014C135.404 147.356 132.479 144.995 132.138 141.75L121.537 40.8838C121.196 37.6393 123.564 34.7219 126.816 34.3801L284.089 17.85C287.343 17.508 290.265 19.8695 290.606 23.114L301.207 123.981C301.548 127.225 299.182 130.142 295.928 130.484",stroke:"#316474"}),k.jsx("path",{d:"M290.245 125.898L143.148 141.359C140.368 141.651 137.899 139.694 137.619 137.032L127.978 45.2988C127.698 42.6368 129.705 40.2098 132.486 39.9174L279.583 24.457C282.366 24.1645 284.832 26.1212 285.112 28.7833L294.754 120.517C295.033 123.179 293.028 125.606 290.245 125.898Z",fill:"#EEFEFA",stroke:"#316474"}),k.jsx("path",{d:"M235.259 137.428L312.949 129.263L313.671 136.134C313.765 137.031 313.618 137.844 313.33 138.429C313.038 139.021 312.643 139.314 312.259 139.354L125.358 158.998C124.974 159.039 124.527 158.835 124.118 158.316C123.714 157.803 123.401 157.039 123.307 156.142L122.585 149.271L200.276 141.105C200.601 142.008 201.075 142.789 201.654 143.357C202.316 144.008 203.148 144.405 204.048 144.31L232.236 141.347C233.135 141.253 233.866 140.692 234.379 139.919C234.827 139.243 235.129 138.38 235.259 137.428Z",fill:"#42CBA5",stroke:"#316474"}),k.jsx("path",{d:"M235.423 136.375L314.707 128.042L315.153 132.281C315.256 133.261 314.544 134.14 313.564 134.243L122.992 154.273C122.012 154.376 121.133 153.664 121.03 152.684L120.585 148.445L199.87 140.112C200.564 141.391 201.971 142.206 203.517 142.043L232.258 139.023C233.802 138.86 235.009 137.772 235.423 136.375Z",fill:"white",stroke:"#316474"}),k.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M210.616 68.862C214.35 68.4875 218.104 69.5614 221.067 71.8379C224.102 74.1693 226.061 77.5173 226.598 81.2882C227.123 84.9707 226.202 88.7389 224.024 91.7717C221.635 95.0981 218.05 97.241 213.993 97.7845C213.854 97.8031 213.715 97.8198 213.575 97.8344C211.383 98.0649 209.159 97.8031 207.092 97.0715L199.621 99.5614C199.614 99.5636 199.607 99.565 199.6 99.5658C199.533 99.5727 199.473 99.5204 199.475 99.4512L199.962 91.6506C198.649 89.7697 197.797 87.5847 197.49 85.3032C196.972 81.4482 198 77.6213 200.383 74.5271C202.855 71.319 206.478 69.2968 210.544 68.8696L210.616 68.862ZM210.799 71.3833C210.682 71.3955 210.566 71.4094 210.449 71.4252C203.812 72.314 199.133 78.3879 200.017 84.9648C200.287 86.9731 201.068 88.8902 202.274 90.5089L202.536 90.8598L202.125 96.1616L207.191 94.4008L207.604 94.5618C209.408 95.2644 211.374 95.5254 213.311 95.3218C213.426 95.3097 213.541 95.2959 213.656 95.2805C220.292 94.3917 224.972 88.3179 224.088 81.7409C223.219 75.28 217.299 70.7001 210.799 71.3833ZM206.255 76.8888L206.27 76.8876C206.515 76.8694 206.761 76.8505 206.976 76.8437C207.239 76.8348 207.529 76.8254 207.85 77.4125C208.23 78.1097 209.078 79.8609 209.184 80.0365C209.289 80.2121 209.366 80.4206 209.262 80.6734C209.157 80.9259 209.107 81.0825 208.939 81.3091C208.771 81.5359 208.588 81.8135 208.435 81.9892C208.263 82.1849 208.087 82.3967 208.328 82.7458C208.57 83.095 209.396 84.2344 210.561 85.1202C212.058 86.2585 213.195 86.5666 213.65 86.7216C213.814 86.7776 213.948 86.7983 214.062 86.7864C214.218 86.7699 214.336 86.6921 214.443 86.5598C214.647 86.3064 215.25 85.4395 215.501 85.0434C215.633 84.8363 215.762 84.7541 215.911 84.7384C216.03 84.7259 216.162 84.756 216.316 84.7989C216.662 84.8955 218.535 85.6437 218.916 85.7988C219.298 85.9538 219.55 86.0269 219.653 86.172C219.756 86.3178 219.81 87.0481 219.567 87.9227C219.323 88.7976 217.882 89.7311 217.212 89.8421C217.016 89.8745 216.825 89.9223 216.572 89.9489C215.961 90.0131 214.992 89.9537 212.731 89.2576C208.884 88.0733 206.243 84.4473 206.041 84.2178C205.839 83.9878 204.393 82.3511 204.26 80.5558C204.128 78.7607 205.013 77.8072 205.323 77.4171C205.62 77.0429 205.993 76.9162 206.239 76.8903C206.25 76.8892 206.26 76.8883 206.27 76.8876C206.263 76.8881 206.258 76.8885 206.255 76.8888Z",fill:"#316474",fillOpacity:"0.24"}),k.jsx("path",{d:"M118.422 64.6861C118.641 62.6346 120.481 61.1464 122.533 61.3621L153.583 64.6256C155.635 64.8413 157.122 66.6791 156.903 68.7306L155.569 81.2676C155.351 83.3191 153.51 84.8073 151.459 84.5917L109.005 80.1296C108.745 80.1023 108.654 79.7705 108.864 79.6139L108.348 78.9241L108.864 79.6139L115.614 74.564C116.831 73.6532 117.614 72.2767 117.775 70.7657L118.422 64.6861Z",fill:"#42CBA5",stroke:"#316474",strokeWidth:"1.72407"}),k.jsx("path",{d:"M151.271 70.4778C151.745 70.5276 152.088 70.9517 152.037 71.4251C151.987 71.8986 151.562 72.242 151.089 72.1922L151.271 70.4778ZM124.871 69.4366C124.397 69.3868 124.054 68.9627 124.104 68.4893C124.155 68.0158 124.579 67.6724 125.053 67.7222L124.871 69.4366ZM151.089 72.1922L124.871 69.4366L125.053 67.7222L151.271 70.4778L151.089 72.1922Z",fill:"#33AF8D"}),k.jsx("path",{d:"M150.613 76.6728C151.086 76.7225 151.429 77.1467 151.379 77.6201C151.328 78.0935 150.904 78.4369 150.43 78.3872L150.613 76.6728ZM124.212 75.6315C123.738 75.5817 123.395 75.1576 123.446 74.6842C123.496 74.2108 123.921 73.8673 124.394 73.9171L124.212 75.6315ZM150.43 78.3872L124.212 75.6315L124.394 73.9171L150.613 76.6728L150.43 78.3872Z",fill:"#33AF8D"})]})}o.displayName=o.name+" [from "+f.id+"]";function p(){return k.jsxs("svg",{width:"360",height:"189",viewBox:"0 0 360 189",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M263.973 169.512C296.928 158.399 321.88 127.034 318.305 81.6873C312.874 12.7907 246.61 -4.29994 205.331 15.9952C149.334 43.5266 142.242 48.0401 102.134 48.0401C72.2614 48.0401 41.8454 62.4603 38.0434 101.448C35.2875 129.708 46.373 154.375 87.3951 166.97C162.054 189.892 232.127 180.251 263.973 169.512Z",fill:"white",fillOpacity:"0.1"}),k.jsx("rect",{x:"0.350314",y:"0.491301",width:"36.3309",height:"71.7205",rx:"6.39808",transform:"matrix(0.986206 0.165525 -0.16491 0.986309 53.5536 83.2332)",fill:"#42CBA5",stroke:"#316474",strokeWidth:"0.853077"}),k.jsx("rect",{x:"0.353963",y:"0.496419",width:"36.322",height:"71.7116",rx:"6.39363",transform:"matrix(0.986206 0.165525 -0.16491 0.986309 53.9364 80.9482)",fill:"white",stroke:"#316474",strokeWidth:"0.861963"}),k.jsx("path",{d:"M86.8525 93.0759L77.0574 151.659C76.699 153.803 74.671 155.249 72.5277 154.889L48.718 150.893C46.5747 150.533 45.1277 148.504 45.4861 146.36L55.2812 87.777C55.6396 85.6334 57.6676 84.1873 59.811 84.5471L63.6105 85.1848L79.8212 87.9056L83.6206 88.5433C85.764 88.903 87.2109 90.9323 86.8525 93.0759Z",fill:"#EEFEFA",stroke:"#316474",strokeWidth:"0.861963"}),k.jsx("path",{d:"M58.4721 88.822C58.3716 89.4244 58.7841 90.0017 59.3921 90.1058C60.0032 90.2105 60.5858 89.7985 60.6868 89.193C60.7873 88.5906 60.3749 88.0133 59.7669 87.9092C59.1557 87.8046 58.5731 88.2166 58.4721 88.822Z",fill:"white",stroke:"#316474",strokeWidth:"0.853077"}),k.jsx("path",{d:"M111.421 117.587C111.208 115.535 109.372 114.046 107.321 114.262L80.1959 117.113C78.1442 117.329 76.6535 119.167 76.8665 121.219L77.9482 131.641C78.1612 133.693 79.9971 135.182 82.0488 134.966L119.624 131.017C119.884 130.99 119.976 130.658 119.767 130.501L120.285 129.811L119.767 130.501L114.076 126.232C112.861 125.321 112.081 123.944 111.924 122.433L111.421 117.587Z",fill:"#42CBA5",stroke:"#316474",strokeWidth:"1.72407"}),k.jsx("path",{d:"M81.8036 122.275C81.3301 122.324 80.9861 122.749 81.0353 123.222C81.0844 123.696 81.5081 124.039 81.9816 123.99L81.8036 122.275ZM105.639 121.503C106.113 121.453 106.457 121.029 106.407 120.555C106.358 120.082 105.935 119.738 105.461 119.788L105.639 121.503ZM81.9816 123.99L105.639 121.503L105.461 119.788L81.8036 122.275L81.9816 123.99Z",fill:"#33AF8D"}),k.jsx("path",{d:"M82.3837 127.866C81.9102 127.916 81.5662 128.34 81.6153 128.814C81.6645 129.287 82.0882 129.631 82.5616 129.581L82.3837 127.866ZM106.219 127.094C106.693 127.045 107.037 126.62 106.988 126.147C106.938 125.673 106.515 125.33 106.041 125.38L106.219 127.094ZM82.5616 129.581L106.219 127.094L106.041 125.38L82.3837 127.866L82.5616 129.581Z",fill:"#33AF8D"}),k.jsx("path",{d:"M125.463 42.5442L286.19 25.6511L297.132 129.758L136.405 146.651L125.463 42.5442Z",fill:"#EEFEFA"}),k.jsx("path",{d:"M295.927 130.484L138.654 147.015C135.404 147.356 132.479 144.995 132.138 141.751L121.536 40.8839C121.195 37.6393 123.564 34.7219 126.816 34.3801L284.089 17.85C287.343 17.508 290.264 19.8695 290.605 23.114L301.207 123.981C301.548 127.225 299.181 130.142 295.927 130.484Z",fill:"white"}),k.jsx("path",{d:"M138.654 147.015C135.404 147.356 132.479 144.995 132.138 141.751L121.536 40.8839C121.195 37.6393 123.564 34.7219 126.816 34.3801L284.089 17.85C287.343 17.508 290.264 19.8695 290.605 23.114L301.207 123.981C301.548 127.225 299.181 130.142 295.927 130.484",stroke:"#316474"}),k.jsx("path",{d:"M290.245 125.898L143.148 141.359C140.368 141.651 137.899 139.694 137.619 137.032L127.978 45.2989C127.698 42.6369 129.705 40.2098 132.486 39.9175L279.583 24.457C282.366 24.1645 284.832 26.1213 285.112 28.7834L294.754 120.517C295.033 123.179 293.028 125.606 290.245 125.898Z",fill:"#EEFEFA",stroke:"#316474"}),k.jsx("path",{d:"M235.259 137.428L312.949 129.263L313.671 136.134C313.765 137.031 313.618 137.844 313.33 138.429C313.038 139.021 312.643 139.314 312.259 139.354L125.358 158.998C124.974 159.039 124.527 158.835 124.118 158.316C123.714 157.803 123.401 157.039 123.307 156.142L122.585 149.271L200.276 141.105C200.601 142.008 201.075 142.789 201.654 143.357C202.316 144.008 203.148 144.405 204.048 144.31L232.236 141.347C233.135 141.253 233.866 140.692 234.379 139.919C234.827 139.243 235.129 138.38 235.259 137.428Z",fill:"#42CBA5",stroke:"#316474"}),k.jsx("path",{d:"M235.423 136.375L314.707 128.042L315.153 132.281C315.256 133.261 314.544 134.14 313.564 134.243L122.992 154.273C122.012 154.376 121.133 153.664 121.03 152.684L120.585 148.445L199.87 140.112C200.564 141.391 201.971 142.206 203.517 142.043L232.258 139.023C233.802 138.86 235.009 137.772 235.423 136.375Z",fill:"white",stroke:"#316474"}),k.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M210.617 68.8619C214.35 68.4875 218.105 69.5614 221.068 71.8378C224.102 74.1693 226.062 77.5173 226.599 81.2882C227.123 84.9707 226.203 88.7389 224.024 91.7717C221.635 95.0981 218.051 97.241 213.993 97.7845C213.854 97.8031 213.715 97.8197 213.576 97.8344C211.383 98.0649 209.159 97.8031 207.093 97.0715L199.622 99.5614C199.614 99.5636 199.607 99.565 199.6 99.5658C199.534 99.5727 199.474 99.5204 199.476 99.4512L199.962 91.6506C198.65 89.7697 197.798 87.5847 197.491 85.3032C196.973 81.4482 198 77.6213 200.384 74.5271C202.856 71.319 206.479 69.2968 210.544 68.8696L210.617 68.8619ZM210.799 71.3833C210.683 71.3955 210.566 71.4094 210.449 71.4252C203.813 72.314 199.133 78.3879 200.018 84.9648C200.288 86.9731 201.068 88.8902 202.274 90.5089L202.536 90.8598L202.126 96.1615L207.191 94.4007L207.604 94.5618C209.408 95.2644 211.374 95.5254 213.311 95.3218C213.426 95.3097 213.542 95.2959 213.656 95.2805C220.293 94.3917 224.972 88.3179 224.088 81.7409C223.219 75.28 217.299 70.7001 210.799 71.3833ZM206.255 76.8888L206.271 76.8876C206.516 76.8694 206.761 76.8505 206.976 76.8437C207.239 76.8348 207.53 76.8254 207.85 77.4125C208.231 78.1097 209.079 79.8609 209.184 80.0365C209.29 80.2121 209.367 80.4206 209.262 80.6734C209.157 80.9259 209.107 81.0825 208.94 81.3091C208.771 81.5359 208.588 81.8135 208.435 81.9892C208.264 82.1849 208.087 82.3967 208.329 82.7458C208.57 83.095 209.396 84.2344 210.561 85.1202C212.059 86.2585 213.196 86.5666 213.651 86.7216C213.815 86.7776 213.949 86.7983 214.062 86.7863C214.218 86.7699 214.336 86.6921 214.443 86.5598C214.647 86.3064 215.251 85.4395 215.502 85.0434C215.633 84.8363 215.763 84.7541 215.912 84.7384C216.031 84.7259 216.162 84.756 216.316 84.7989C216.662 84.8955 218.536 85.6437 218.917 85.7988C219.298 85.9538 219.55 86.0269 219.654 86.172C219.757 86.3178 219.81 87.0481 219.567 87.9227C219.323 88.7976 217.882 89.7311 217.213 89.8421C217.016 89.8745 216.825 89.9223 216.572 89.9489C215.962 90.0131 214.992 89.9537 212.731 89.2576C208.885 88.0733 206.243 84.4473 206.042 84.2178C205.84 83.9878 204.394 82.3511 204.261 80.5558C204.128 78.7607 205.013 77.8072 205.324 77.4171C205.621 77.0429 205.993 76.9162 206.24 76.8903C206.25 76.8892 206.261 76.8883 206.271 76.8876C206.264 76.8881 206.259 76.8885 206.255 76.8888Z",fill:"#316474",fillOpacity:"0.24"}),k.jsx("path",{d:"M118.423 64.686C118.641 62.6345 120.481 61.1463 122.533 61.3619L153.584 64.6255C155.636 64.8412 157.122 66.679 156.904 68.7305L155.569 81.2675C155.351 83.319 153.511 84.8072 151.459 84.5915L109.006 80.1295C108.746 80.1022 108.655 79.7704 108.864 79.6138L108.348 78.924L108.864 79.6138L115.614 74.5639C116.832 73.653 117.615 72.2766 117.776 70.7656L118.423 64.686Z",fill:"#42CBA5",stroke:"#316474",strokeWidth:"1.72407"}),k.jsx("path",{d:"M151.271 70.4778C151.744 70.5275 152.087 70.9517 152.037 71.4251C151.987 71.8985 151.562 72.2419 151.088 72.1922L151.271 70.4778ZM124.87 69.4365C124.397 69.3867 124.054 68.9626 124.104 68.4892C124.154 68.0158 124.579 67.6723 125.052 67.7221L124.87 69.4365ZM151.088 72.1922L124.87 69.4365L125.052 67.7221L151.271 70.4778L151.088 72.1922Z",fill:"#33AF8D"}),k.jsx("path",{d:"M150.613 76.6727C151.086 76.7225 151.429 77.1466 151.379 77.62C151.328 78.0934 150.904 78.4369 150.43 78.3871L150.613 76.6727ZM124.212 75.6314C123.738 75.5817 123.395 75.1575 123.446 74.6841C123.496 74.2107 123.921 73.8673 124.394 73.917L124.212 75.6314ZM150.43 78.3871L124.212 75.6314L124.394 73.917L150.613 76.6727L150.43 78.3871Z",fill:"#33AF8D"})]})}p.displayName=p.name+" [from "+f.id+"]";f=e(a);g.Stage=l;g.LoadingScreenTheme=m;g.LoadingScreen=f}),226);
__d("WAWebDebouncedLoadingScreen.react",["$InternalEnum","WALogger","WAPromiseDelays","WAWebCmd","WAWebLoadingScreen.react","WAWebOfflineHandler","WAWebSocketModel","WAWebUserPrefsHistorySync","asyncToGeneratorRuntime","react","useWAWebListener","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g){var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["DebouncedLoadingScreen: "," - ends minimum display time"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["DebouncedLoadingScreen: "," - starts minimum display time"]);k=function(){return a};return a}e=i||d("react");var l=h||(h=c("react")),m=e.useCallback,n=e.useEffect,o=e.useRef,p=e.useState,q=500,r=1500,s=450,t=800,u=450,v=b("$InternalEnum").Mirrored(["INITIAL_LOAD","CONNECTING","FAKE_FILL","DOWNLOADING","ORGANIZING"]),w=b("$InternalEnum").Mirrored(["NOT_STARTED","STARTED","PAST_MIN_TIME"]);function a(a){var e=a.initialLoadReady,f=a.onLogout,g=a.onReady,h=c("useWAWebUnmountSignal")(),i=o(!1);a=p(e?d("WAWebLoadingScreen.react").Stage.CONNECTING:d("WAWebLoadingScreen.react").Stage.INITIAL_LOAD);var x=a[0],y=a[1];a=p(d("WAWebUserPrefsHistorySync").getInitialHistorySyncCompleteLocalStorage());a=a[0];var z=p({INITIAL_LOAD:e?w.PAST_MIN_TIME:w.NOT_STARTED,CONNECTING:w.NOT_STARTED,FAKE_FILL:w.NOT_STARTED,DOWNLOADING:w.NOT_STARTED,ORGANIZING:w.NOT_STARTED}),A=z[0],B=z[1];z=p(0);var C=z[0],D=z[1];z=p(null);var E=z[0],F=z[1];z=function(){var a=d("WAWebOfflineHandler").OfflineMessageHandler.getHasMessagesToDownload();E==null&&a!=null&&F(a);a===!0&&(A.CONNECTING===w.PAST_MIN_TIME&&D(d("WAWebOfflineHandler").OfflineMessageHandler.getOfflineDeliveryProgress()))};d("useWAWebListener").useListener(d("WAWebCmd").Cmd,"offline_progress_update",z);var G=m(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){B(function(b){return babelHelpers["extends"]({},b,(b={},b[a]=w.STARTED,b))});d("WALogger").LOG(k(),a);yield d("WAPromiseDelays").delayMs(b);if(h.aborted)return;B(function(b){return babelHelpers["extends"]({},b,(b={},b[a]=w.PAST_MIN_TIME,b))});d("WALogger").LOG(j(),a)});return function(b,c){return a.apply(this,arguments)}}(),[h]),H=A.CONNECTING,I=A.DOWNLOADING,J=A.ORGANIZING,K=A.FAKE_FILL,L=A.INITIAL_LOAD;n(function(){if(J===w.PAST_MIN_TIME)i.current||(g(),i.current=!0);else if(I===w.PAST_MIN_TIME&&C>=100&&J===w.NOT_STARTED)d("WAPromiseDelays").delayMs(u)["finally"](function(){if(h.aborted)return;y(d("WAWebLoadingScreen.react").Stage.ORGANIZING);G(v.ORGANIZING,t)});else if(H===w.PAST_MIN_TIME&&E!=null&&I===w.NOT_STARTED&&K===w.NOT_STARTED){var a=d("WAWebOfflineHandler").OfflineMessageHandler.getFinishedDownloading();E&&!a?(y(d("WAWebLoadingScreen.react").Stage.DOWNLOADING),D(d("WAWebOfflineHandler").OfflineMessageHandler.getOfflineDeliveryProgress()),G(v.DOWNLOADING,s)):(D(100),G(v.FAKE_FILL,u).then(function(){if(h.aborted)return;d("WAWebSocketModel").Socket.hasSynced?i.current||(g(),i.current=!0):(y(d("WAWebLoadingScreen.react").Stage.ORGANIZING),G(v.ORGANIZING,t))}))}else e&&L===w.PAST_MIN_TIME&&H===w.NOT_STARTED?(y(d("WAWebLoadingScreen.react").Stage.CONNECTING),G(v.CONNECTING,r)):L===w.NOT_STARTED&&G(v.INITIAL_LOAD,q)},[C,g,E,G,h,e,H,I,J,K,L]);z=d("WAWebLoadingScreen.react").LoadingScreenTheme.MULTI_STAGE;e&&(!a?z=d("WAWebLoadingScreen.react").LoadingScreenTheme.UNIFIED:E===!0?z=d("WAWebLoadingScreen.react").LoadingScreenTheme.UNIFIED_WITH_PROGRESS:z=d("WAWebLoadingScreen.react").LoadingScreenTheme.LOGO);return l.jsx(d("WAWebLoadingScreen.react").LoadingScreen,{stage:x,progress:C,onLogout:f,theme:z})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebStartup.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={startup:"_ari2",textTip:"_ari0",divider:"_ari3"};b=a;g["default"]=b}),98);
__d("WAWebStartup.react",["fbt","WALogger","WAWebConfirmPopup.react","WAWebDebouncedLoadingScreen.react","WAWebSocketModel","WAWebStartup.scss","WAWebStreamModel","react","useWAWebForceUpdate","useWAWebInterval","useWAWebListener","useWAWebTimeout"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Startup: user selected logout"]);k=function(){return a};return a}var l=j||c("react"),m=(i||(i=d("react"))).useEffect;function a(a){var b=a.initialLoadReady;a=a.onReady;var e=d("useWAWebForceUpdate").useForceUpdateDONOTUSE(),f,g;d("useWAWebListener").useListener(d("WAWebStreamModel").Stream,"change:displayInfo",e);e=c("useWAWebInterval")(e,1e3);e=e[0];e=d("useWAWebTimeout").useTimeout(e,6e3);var i=e[0];e=d("WAWebStreamModel").Stream.displayInfo;m(function(){i()},[]);var j=function(){d("WALogger").LOG(k()),d("WAWebSocketModel").Socket.logout()};switch(e){case d("WAWebStreamModel").StreamInfo.OPENING:case d("WAWebStreamModel").StreamInfo.PAIRING:case d("WAWebStreamModel").StreamInfo.TIMEOUT:f=h._("__JHASH__weKSIEgSRNQ__JHASH__");g=h._("__JHASH__wGw1nGH5taU__JHASH__");break;case d("WAWebStreamModel").StreamInfo.SYNCING:case d("WAWebStreamModel").StreamInfo.CONNECTING:return l.jsx(c("WAWebDebouncedLoadingScreen.react"),{initialLoadReady:b,onReady:a,onLogout:j});default:return d("WAWebStreamModel").Stream.mode===d("WAWebStreamModel").StreamMode.MAIN?l.jsx(c("WAWebDebouncedLoadingScreen.react"),{initialLoadReady:b,onReady:a,onLogout:j}):null}return l.jsxs(d("WAWebConfirmPopup.react").ConfirmPopup,{cover:!0,title:f,cancelText:h._("__JHASH__3n1bF_cZdZK__JHASH__"),onCancel:j,children:[l.jsx("hr",{className:c("WAWebStartup.scss").divider}),l.jsx("div",{className:c("WAWebStartup.scss").textTip,children:g})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebTempBanScreen.react",["fbt","WALogger","WAWeb-moment","WAWebConflict.react","WAWebFaqUrl","WAWebFavicon.react","WAWebSocketModel","WAWebUserPrefsMeUser","react"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Banned accounts: user selected logout"]);j=function(){return a};return a}var k=i||d("react");function a(a){a=a.banData;a=a||{};var b=a.code,e=a.expire,f=a.message;a=a.url;f=(f=f)!=null?f:m(b);b=c("WAWeb-moment").duration(e,"seconds").humanize();return k.jsx(d("WAWebFavicon.react").ErrorFavicon,{children:k.jsxs(c("WAWebConflict.react"),{cancelText:h._("__JHASH__3n1bF_cZdZK__JHASH__"),onCancel:function(){d("WALogger").LOG(j()),d("WAWebSocketModel").Socket.logout()},okText:h._("__JHASH__ofSKbj4p0iW__JHASH__"),onOK:window.open.bind(window,(e=a)!=null?e:d("WAWebFaqUrl").getFaqUrl()),children:[k.jsx("div",{children:f}),k.jsx("div",{children:h._("__JHASH__MMb6-pq3iee__JHASH__",[h._param("duration",b)])})]})})}a.displayName=a.name+" [from "+f.id+"]";var l=function(){return h._("__JHASH__q_tlnqAVgeu__JHASH__")};function m(a){var b;b=(b=d("WAWebUserPrefsMeUser").getMaybeMeUser())==null?void 0:b.user;switch(a){case 101:return b==null?l():h._("__JHASH__91QlvH6APxR__JHASH__",[h._param("phone",b)]);case 102:return h._("__JHASH__tNPU5EfuExD__JHASH__");case 103:return b==null?l():h._("__JHASH__4L6P-fwJYcF__JHASH__",[h._param("phone",b)]);case 104:return h._("__JHASH__-o2jIJ6VTm6__JHASH__");case 106:return h._("__JHASH__ZcYd7lTRWIR__JHASH__");default:return l()}}g["default"]=a}),226);
__d("WAWebCreateBugnubTaskUrl",["WAWebBuildConstants","WAWebConnModel","WAWebMobilePlatforms","WAWebUA","WAWebUserPrefsGeneral","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;b=(b=d("WAWebUserPrefsMeUser").getMaybeMeUser())==null?void 0:b.user;var c=null;switch(d("WAWebConnModel").Conn.platform){case d("WAWebMobilePlatforms").PLATFORMS.ANDROID:c="Android";break;case d("WAWebMobilePlatforms").PLATFORMS.IPHONE:c="iPhone";break;case d("WAWebMobilePlatforms").PLATFORMS.SMBA:c="SMB - Android";break;case d("WAWebMobilePlatforms").PLATFORMS.SMBI:c="SMB - iPhone";break;default:c="Choose an option"}var e="";switch(d("WAWebUA").UA.browser){case d("WAWebUA").BROWSER_TYPE.CHROME:e="Chrome";break;case d("WAWebUA").BROWSER_TYPE.SAFARI:e="Safari";break;case d("WAWebUA").BROWSER_TYPE.FIREFOX:e="Firefox";break;case d("WAWebUA").BROWSER_TYPE.EDGE:e="Microsoft Edge";break;case d("WAWebUA").BROWSER_TYPE.OPERA:e="Opera"}var f="Web (Browser)";c=["Description:\n","Link to crash logs","https://www.internalfb.com/intern/bunny/?q=waflb+"+b,"time of log: "+new Date().toString()+"\n","Primary Platform: "+c];e!==""&&c.push("Browser: "+e);a!=null&&c.push("Error string:",""+a);e=(yield d("WAWebUserPrefsGeneral").getWhatsAppWebExternalBetaJoinedIdb());f={first_question:"Messaging",platform:f,version:""+d("WAWebBuildConstants").VERSION_STR+(e?" (joined beta)":""),bug:c.join("\n"),logs:"I understand and give consent",number:(a=b)!=null?a:""};e=encodeURIComponent(JSON.stringify(f));return"https://www.internalfb.com/butterfly/form/777724432837431?default_responses="+e});return h.apply(this,arguments)}g.createBugnubTaskUrl=a}),98);
__d("WAWebOpenBugReportForm",["WAWebCrashlog","WAWebCreateBugnubTaskUrl","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WAWebCrashlog").upload({reason:"Manual task creation",immediate:!0,isHighPri:!0}),window.open(yield d("WAWebCreateBugnubTaskUrl").createBugnubTaskUrl(a))});return h.apply(this,arguments)}g.openBugReportForm=a}),98);
__d("WAWebToastManagerImpl",["WAHash","WAWebCmd","WAWebCopyToClipboard","WAWebL10N","WAWebOpenBugReportForm","WAWebSetRefCache","WAWebToast.react","WAWebToastManager","WAWebUA","WAWebVelocityTransitionGroup","asyncToGeneratorRuntime","lodash","react","stylex","useLazyRef","useWAWebListener","useWAWebOnUnmount","useWAWebPrevious"],(function(a,b,c,d,e,f,g){var h,i,j;e=j||d("react");var k=h||(h=c("react")),l=e.cloneElement,m=e.useEffect,n=e.useRef,o=e.useState,p={slide0:{transform:"xnn1q72",$$css:!0},slide1:{transform:"xvav9fi",$$css:!0},slide2:{transform:"x8r675y",$$css:!0},slide3:{opacity:"xg01cxk",transform:"x1o6clbr",$$css:!0},wrapper:{opacity:"x1hc1fzr",bottom:"x1ey2m1c",lineHeight:"xzl6hoh",marginTop:"xw7yly9",marginEnd:"xktsk01",marginBottom:"x1yztbdb",marginStart:"x1d52u69",minHeight:"xjwf9q1",position:"x10l6tqk",zIndex:"x1omtkq1",transition:"x1alf9jy",$$css:!0},center:{start:"xtzzx4i",left:null,right:null,marginStart:"x1mh8g0r",marginEnd:"x11i5rnm",maxWidth:"x65f84u",$$css:!0},transformLeft:{transform:"xuuh30",$$css:!0},transformRight:{transform:"xitnhlw",$$css:!0},right:{end:"xds687c",left:null,right:null,$$css:!0}},q=3,r=5*1e3;function a(){var a=c("useLazyRef")(function(){return new Map()}),e=function(b,c){c?a.current.set(b,c):a.current["delete"](b)},f=c("useLazyRef")(function(){return new(c("WAWebSetRefCache"))(e)}),g=n(null),h=o({}),j=h[0],s=h[1],t=c("useWAWebPrevious")(j),w=function(b,c){var d,e=(d=b.props.id)!=null?d:v();d=a.current.get(e);d?d.restartDelay==null?void 0:d.restartDelay():s(function(a){return babelHelpers["extends"]({},a,(a={},a[e]={toast:b,position:c,id:e},a))})};h=function(a){j[a]&&s(function(b){return c("lodash").omit(b,a)})};d("useWAWebListener").useListener(d("WAWebToastManager").ToastManager,"open_toast",w);d("useWAWebListener").useListener(d("WAWebToastManager").ToastManager,"close_toast",h);h=null;var x=c("useLazyRef")(function(){return new Map()});c("useWAWebOnUnmount")(function(){x.current.forEach(function(a){return self.clearTimeout(a)})});d("useWAWebListener").useListener(h,"window_error",function(a){var e=c("WAHash")(a);if(x.current.has(e))return;var f=self.setTimeout(function(){x.current["delete"](e)},r);x.current.set(e,f);w(k.jsx(d("WAWebToast.react").Toast,{msg:u(a),action:[{actionText:"Copy",onAction:function(){void d("WAWebCopyToClipboard").copyTextToClipboard(a)}},{actionText:"Report",onAction:function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebOpenBugReportForm").openBugReportForm(a)});function e(){return c.apply(this,arguments)}return e}()}]}))});m(function(){var a;g.current=Object.keys((a=t)!=null?a:{}).length>Object.keys(j).length},[j,t]);var y=g.current;h=c("lodash").sortBy(j,["toast","id"]).reverse().map(function(a,b){var e=a.toast,g=a.position;a=a.id;return k.jsx("div",{className:(i||(i=c("stylex")))(p.wrapper,g===d("WAWebToastManager").ToastPosition.CENTER&&p.center,g===d("WAWebToastManager").ToastPosition.RIGHT&&p.right,b===0&&y&&p.slide0,b===1&&p.slide1,b===2&&p.slide2,b>=q&&p.slide3),children:k.jsx("div",{className:i(g===d("WAWebToastManager").ToastPosition.CENTER&&(c("WAWebL10N").isRTL()?p.transformRight:p.transformLeft)),children:l(e,{ref:f.current.getRefSetter(a),id:a})})},a)});var z=d("WAWebUA").UA.isTrident?"fade_sifo":"toast-transition";return k.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:z,children:h})}a.displayName=a.name+" [from "+f.id+"]";var s="\ud83d\uded1",t=200;function u(a){a=a.length>t?a.slice(0,t)+"...":a;return s+" "+a}function v(a){return c("lodash").uniqueId(a||"toast")}g.ToastManagerComponent=a}),98);
__d("WAWebTos.react",["fbt","WAWebConfirmPopup.react","WAWebLogoutReasonConstants","WAWebSocketModel","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k=function(){d("WAWebSocketModel").Socket.logout(d("WAWebLogoutReasonConstants").LogoutReason.UserInitiated)};function a(a){var b=a.children;a=a.description;return j.jsxs(d("WAWebConfirmPopup.react").ConfirmPopup,{cover:!0,cancelText:h._("__JHASH__3n1bF_cZdZK__JHASH__"),onCancel:k,okText:h._("__JHASH___sw1w0g68lI__JHASH__"),children:[a,"\xa0",b]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebApp.react",["fbt","invariant","Promise","WAComms","WALogger","WAMediaWasmWorkerClient","WAMemoizeOne","WANullthrows","WAPromiseTimeout","WAShiftTimer","WAWeb-moment","WAWebAlarm","WAWebApi","WAWebApiParse","WAWebApp.scss","WAWebAppMutex","WAWebAppScreen","WAWebAssetLoader","WAWebAssetLoaderSingleton","WAWebBizGatingUtils","WAWebBrokerGlobalAppState","WAWebChatPreferenceCollection","WAWebClassnames","WAWebClientExpiredDialog.react","WAWebClock","WAWebCmd","WAWebConfirmPopup.react","WAWebConflict.react","WAWebConnModel","WAWebContextMenuManager.react","WAWebCrashlog","WAWebDeepLinkClickWamEvent","WAWebDeprecated.react","WAWebEmojiAssetLoaderCompletionTracker","WAWebErrorBoundary.react","WAWebEventsWaitForEvent","WAWebExternalLink.react","WAWebFavicon.react","WAWebFbtCommon","WAWebKeyboardContext","WAWebKeyboardHotKeys.react","WAWebL10N","WAWebLaunchSocket","WAWebListenerHoc_DEPRECATED","WAWebLockScreen.react","WAWebLoggerImpl","WAWebLogoutLoadingScreen.react","WAWebLogoutReasonConstants","WAWebMediaWorkerGatingUtils","WAWebModalManager","WAWebModalManagerImpl.react","WAWebMsgCollection","WAWebNoop","WAWebOffline.react","WAWebPopover.react","WAWebProxied.react","WAWebPwaEventListeners","WAWebPwaManifest","WAWebSWBusInit","WAWebSafariTakeover","WAWebServiceUnavailable.react","WAWebSmbLearnMore.react","WAWebSocketModel","WAWebStartup.react","WAWebStorageCmd","WAWebStreamModel","WAWebStylesEnv","WAWebSystemTheme","WAWebTempBanScreen.react","WAWebThemeContext","WAWebToastManagerImpl","WAWebTos.react","WAWebUA","WAWebUIRefreshGatingUtils","WAWebURLUtils","WAWebUim","WAWebUimUie.react","WAWebUpdater","WAWebUpdaterUpdatePoll","WAWebUserPrefsGeneral","WAWebUserPrefsInfoStore","WAWebUserPrefsKeys","WAWebUserPrefsScreenLock","WAWebUserPrefsStore","WAWebWAWCStorage","WAWebWallpaper","WAWebWamOfflineResumeReporter","WAWebWamPageLoadReporter","asyncToGeneratorRuntime","cr:6167","deferredLoadComponent","gkx","react","requireDeferred"],(function(a,b,c,d,e,f,g,h,i){var j,k,l;function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Local Clock: ",", Skew: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[app] registerYesterdayTimer:rerenderUI relative timestamps"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] closed due to take over"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to open indexeddb: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Modified a created iframe element to include sandbox attributes for security fix."]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[app]  prerendering: page is active"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[app]  prerendering: error while listening for prerenderingchange"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[app]  prerendering: waiting for page to activate"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["[app] componentDidMount:visibilityState: ",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["[app] componentDidMount:rerenderUI locale change"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["[md takeover] tab taken over. stopping comms"]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unsupported takeover] refreshing page with unsupported takeover"]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["DebouncedLoadingScreen: Ready for main screen"]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["[md takeover] refreshing page on takeover"]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["UIM Print Failed!"]);A=function(){return a};return a}function B(){var a=babelHelpers.taggedTemplateLiteralLoose(["Focus at time of upload:"]);B=function(){return a};return a}function C(){var a=babelHelpers.taggedTemplateLiteralLoose(["main:execApiCmd:",""]);C=function(){return a};return a}var D=l||d("react"),E=k||(k=c("react")),F=D.Component,G=D.createRef,H=c("requireDeferred")("WAWebEmojiAssetLoader").__setRef("WAWebApp.react"),I=c("requireDeferred")("WAWebEmojiAssetLoaderConfig").__setRef("WAWebApp.react"),J=c("requireDeferred")("WAWebMainWrapper").__setRef("WAWebApp.react"),K=c("deferredLoadComponent")(c("requireDeferred")("WAWebLinkDeviceScreen.react").__setRef("WAWebApp.react"));c("gkx")("26262")&&b("WAWebSWBusInit");var L=c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").UserPrefs.MutexBlockStrategy)===1,M;function a(){return M!=null&&M.hasPending()}function N(a){var b=a.cmdAndData,c=a.isExternal;a=a.sessionId;var e=b.resultType,f=b.data;d("WALogger").LOG(C(),e).devConsole(f);M!=null||i(0,56382);if(e==="ADVERTISE"||e==="MANAGE_ADS"||e==="OPEN_CATALOG")return!1;e;return M.execApiCmd({cmdData:b,isExternal:c,sessionId:a})}function O(a){a=a;while(a){var b;b=a instanceof HTMLElement&&((b=a.dataset)==null?void 0:b.nohandle);if(b)return!1;a=a.parentElement}return!0}function P(){d("WAWebCmd").Cmd.logSocketSummary();d("WALogger").LOG(B());try{d("WAWebUim").UIM.pprint(!0)}catch(a){d("WALogger").WARN(A()).devConsole(a)}return{platform:d("WAWebConnModel").Conn.platform,ref:d("WAWebConnModel").Conn.ref}}D=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(b=e=a.call.apply(a,[this].concat(g))||this,e.contextMenuRef=G(),e.animate=!0,e.state={mode:d("WAWebStreamModel").Stream.mode,updating:d("WAWebStreamModel").Stream.clientExpired,hardExpired:d("WAWebStreamModel").Stream.hardExpired,anotherSession:!1,takingOver:!1,isUnsupportedTakeover:!1,apiCmd:void 0,locale:c("WAWebL10N").getLocale(),mainLoaded:!1,theme:d("WAWebThemeContext").getTheme(),systemThemeMode:d("WAWebUserPrefsGeneral").getSystemThemeMode(),isKeyboardUser:!1,initialLoadReady:!1,startLogout:!1,stayInSync:!d("WAWebSocketModel").Socket.hasSynced,screenLocked:!1},e.$8=function(a){e.state.isKeyboardUser!==a&&e.setState({isKeyboardUser:a})},e.$11={up:function(){return e.$8(!0)},down:function(){return e.$8(!0)},left:function(){return e.$8(!0)},right:function(){return e.$8(!0)},home:function(){return e.$8(!0)},end:function(){return e.$8(!0)},"command+up":function(){return e.$8(!0)},"command+down":function(){return e.$8(!0)},pageUp:function(){return e.$8(!0)},pageDown:function(){return e.$8(!0)},tab:function(){return e.$8(!0)},"shift+tab":function(){return e.$8(!0)},"shift+?":function(){return e.$8(!0)}},e.$12=new(d("WAShiftTimer").ShiftTimer)(function(a){a!==e.state.mode&&e.setState({mode:a})}),e.$3=function(){var a=d("WAWebStreamModel").Stream.mode;if(e.state.mode===d("WAWebStreamModel").StreamMode.MAIN){e.$12.forceRunNow(a);return}e.$12.onOrBefore(0,a)},e.$1=function(){e.state.updating!==d("WAWebStreamModel").Stream.clientExpired&&e.setState({updating:d("WAWebStreamModel").Stream.clientExpired})},e.$2=function(){e.setState({hardExpired:d("WAWebStreamModel").Stream.hardExpired})},e.$15=function(a){a.detail!==0&&e.$8(!1),d("WAWebCmd").Cmd.windowMouseDown(a)},e.$16=function(a){d("WAWebCmd").Cmd.windowClick(a)},e.$7=function(a){var b=a.target;if(!b)return;if(b.nodeName!=="A")return;var c=b.getAttribute("href");if(!c)return;if(!O(b))return;b=d("WAWebApiParse").parseAPICmd(c);if(b.resultType==="INVALID"||b.resultType==="ADVERTISE"||b.resultType==="MANAGE_ADS"||b.resultType==="PAYMENT_LINK"||b.resultType==="OPEN_CATALOG")return;b.resultType;c=e.$14();e.$13()&&N({cmdAndData:b,isExternal:!0,sessionId:c})&&(e.$17(b,c),a.preventDefault())},e.$17=function(a,b){if(a.resultType===d("WAWebApi").APICmd.GROUP_INVITE)new(d("WAWebDeepLinkClickWamEvent").DeepLinkClickWamEvent)({deepLinkHasPhoneNumber:!1,deepLinkHasText:!0}).commit();else if(a.resultType===d("WAWebApi").APICmd.MSG_SEND){var c=a.data.phone,e=a.data.text;new(d("WAWebDeepLinkClickWamEvent").DeepLinkClickWamEvent)({deepLinkHasPhoneNumber:!!c,deepLinkHasText:!!e,deepLinkSessionId:b}).commit()}else a.resultType===d("WAWebApi").APICmd.CATALOG?new(d("WAWebDeepLinkClickWamEvent").DeepLinkClickWamEvent)({deepLinkHasPhoneNumber:!0,deepLinkHasText:!1}).commit():a.resultType===d("WAWebApi").APICmd.PRODUCT&&new(d("WAWebDeepLinkClickWamEvent").DeepLinkClickWamEvent)({deepLinkHasPhoneNumber:!0,deepLinkHasText:!1}).commit()},e.$10=function(a){if(e.state.theme===a)return;var b=a;d("WAWebUIRefreshGatingUtils").emptyStateAndIllustrationRefreshEnabled()&&(b==="light"?b="lightRefreshed":b==="dark"&&(b="darkRefreshed"));for(b of d("WAWebThemeContext").THEME_ASSETS[b])void d("WAWebAssetLoaderSingleton").AssetLoader.loadAsset(b,d("WAWebAssetLoader").LOAD_PRIORITY.THEME_ASSET_LOAD,!1);b=c("WAWebChatPreferenceCollection").get("defaultPreference");if(b&&d("WAWebWallpaper").DEFAULT_CHAT_WALLPAPER!==b.wallpaper){var f=d("WAWebWallpaper").toggleWallpaperColor(b.wallpaper,e.state.theme);b.set("wallpaper",f)}d("WAWebThemeContext").setTheme(a);e.setState({theme:a})},e.$18=function(a){d("WAWebUserPrefsGeneral").setSystemThemeMode(a),e.setState({systemThemeMode:a})},e.$19=function(){d("WALogger").LOG(z()),window.location.reload()},e.$20=function(){d("WALogger").LOG(y()),e.setState({stayInSync:!1})},e.$21=function(){d("WALogger").LOG(x()),window.location.reload()},e.$23=c("WAMemoizeOne")(function(a){var b=a.theme;a=a.systemThemeMode;return{theme:b,setTheme:e.$10,systemThemeMode:a,setSystemThemeMode:e.$18}}),b)||babelHelpers.assertThisInitialized(e)}var f=e.prototype;f.componentDidMount=function(){var a=this;d("WAWebCrashlog").registerCrashlogUploadInformationalLoggingFunction(P);d("WAWebPwaEventListeners").registerPwaDisplayModeListener();d("WAWebPwaEventListeners").registerPwaInstallListener();d("WAWebPwaManifest").updatePwaManifestOnMacOS();c("gkx")("26258")||d("WAWebLoggerImpl").Logger.registerErrorNotificationListener(function(a){d("WAWebCmd").Cmd.windowError(a)});c("WAWebAppMutex").setShouldLaunchSocket(!L);L&&void d("WAWebLaunchSocket").launchSocket(c("WAWebAppMutex").waitForCompletion());var e=this.state.theme;d("WAWebThemeContext").applyThemeToUI(e);T().then(function(a){d("WAWebAssetLoaderSingleton").AssetLoader.setPlatform(a);a=e;d("WAWebUIRefreshGatingUtils").emptyStateAndIllustrationRefreshEnabled()&&(a==="light"?a="lightRefreshed":a==="dark"&&(a="darkRefreshed"));d("WAWebAssetLoaderSingleton").AssetLoader.loadInitialAssets(d("WAWebThemeContext").THEME_ASSETS[a])});R().then(function(){d("WAWebCmd").Cmd.mainLoaded(),a.setState({mainLoaded:!0})}).then(function(){return(j||(j=b("Promise"))).all([H.load(),I.load(),T()])}).then(function(a){var b=a[0],c=a[1];a=a[2];d("WAWebAssetLoaderSingleton").AssetLoader.setPlatform(a);d("WAWebAssetLoaderSingleton").AssetLoader.initEmojiAsset(b.emojiAssetMapCreator(c()));d("WAWebEmojiAssetLoaderCompletionTracker").emojiCompletionTracker.beginPreloadFallback()});var f=this.props.listeners;f.add(d("WAWebCmd").Cmd,"initial_load_ready",function(){a.setState({initialLoadReady:!0})});f.add(d("WAWebStorageCmd").StorageCmd,"storage_not_enough_space",b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(yield d("WAWebModalManager").ModalManager.existsAsync())return;d("WAWebModalManager").ModalManager.open(E.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOverlayClick:function(a){a.preventDefault()},onOK:function(){d("WAWebSocketModel").Socket.logout(d("WAWebLogoutReasonConstants").LogoutReason.StorageQuotaExceeded)},okText:c("WAWebFbtCommon")("OK"),children:h._("__JHASH__RUpeYjV5Hel__JHASH__")}),{blockClose:!0})}));f.add(d("WAWebCmd").Cmd,"account_temporarily_banned",function(b){a.setState({temporaryBan:b})});f.add(d("WAWebCmd").Cmd,"offline_delivery_end",function(){d("WAWebMediaWorkerGatingUtils").isMediaWorkerPrewarmEnabled()&&d("WAMediaWasmWorkerClient").prewarmMediaWasmWorker("mp4CheckAndRepair")});f.add(d("WAWebCmd").Cmd,"service_unavailable_503",function(){a.setState({serviceUnavailable:!0})});f.add(d("WAWebCmd").Cmd,"starting_logout",function(){a.setState({startLogout:!0})});d("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflineStartT();f.add(window,"beforeunload",function(){(d("WAWebExternalLink.react").isOpeningDeeplinkInCurrentTab==null?void 0:d("WAWebExternalLink.react").isOpeningDeeplinkInCurrentTab())||c("WAWebAppMutex").unloadMutex()});f.add(window,"unload",function(){(d("WAWebExternalLink.react").isOpeningDeeplinkInCurrentTab==null?void 0:d("WAWebExternalLink.react").isOpeningDeeplinkInCurrentTab())||c("WAWebAppMutex").unloadMutex()});f.add(window,"storage",function(b){b=c("WAWebAppMutex").storagePong(b);b&&(d("WALogger").LOG(w()),d("WAComms").closeSocketAndPreventRetry(),d("WAWebLoggerImpl").Logger.onTakeOver(),a.setState({takingOver:!1,anotherSession:!0}))});f.add(d("WAWebStreamModel").Stream,"change:clientExpired",this.$1);f.add(d("WAWebStreamModel").Stream,"change:hardExpired",this.$2);f.add(d("WAWebStreamModel").Stream,"change:mode",this.$3);f.add(d("WAWebCmd").Cmd,"open_lock_screen_modal",function(){a.setState({screenLocked:!0})});f.add(d("WAWebCmd").Cmd,"correct_passcode_lock_screen",function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield d("WAWebMsgCollection").MsgCollection.decryptAndSetModels(b),a.setState({screenLocked:!1,stayInSync:!1})});return function(a){return c.apply(this,arguments)}}());d("WAWebUserPrefsScreenLock").getScreenLockEnabled()&&d("WAWebUserPrefsInfoStore").waNoiseInfo.cachedPasscodeDerivedKey==null&&this.setState({screenLocked:!0});if(c("WAWebURLUtils").canMuckHistory()){var g=d("WAWebApiParse").parseAPICmd(window.location.href);if(g.resultType!==d("WAWebApi").APICmd.INVALID&&g.resultType!=="ADVERTISE"&&g.resultType!=="MANAGE_ADS"&&g.resultType!=="MESSAGE_YOURSELF"&&g.resultType!=="EDIT_PROFILE_PICTURE"&&g.resultType!=="STATUS_POST"&&g.resultType!=="PAYMENT_LINK"&&g.resultType!=="OPEN_CATALOG"){var i,k=g.data.url;((i=g.data)==null?void 0:i.url)!=null&&delete g.data.url;this.$4(g);window.history.replaceState({},"",(i=k)!=null?i:"/")}}f.add(c("WAWebL10N"),"locale_change",function(){d("WALogger").LOG(v()),d("WAWebClock").Clock.initIs24HourBasedOnLocale(),a.animate=!1,a.setState({locale:c("WAWebL10N").getLocale()+"#"+c("WAWeb-moment").locale()})});this.$5();d("WALogger").LOG(u(),document.visibilityState);document.prerendering===!0?(d("WALogger").LOG(t()),c("WAWebEventsWaitForEvent")(document,"prerenderingchange")["catch"](function(){d("WALogger").LOG(s())})["finally"](function(){d("WALogger").LOG(r()),void a.$6(0)})):document.visibilityState!=="visible"?d("WAPromiseTimeout").promiseTimeout(c("WAWebEventsWaitForEvent")(document,"visibilitychange"),5e3).then(function(){return a.$6(0)})["catch"](function(){return a.$6(0)}):this.$6(0);this.props.listeners.add(window,"click",this.$7,{capture:!0});this.props.listeners.add(window,"blur",function(){a.$8(!1)});d("WAWebUpdaterUpdatePoll").updatePoll.poll(d("WAWebUpdaterUpdatePoll").checkForUpdates);this.$9();document.createElement=function(a){return function(b,c){c===void 0&&(c={});if(b.toLowerCase()==="iframe"){d("WALogger").WARN(q());var e=a(b,c);e.sandbox="allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox";return e}return a(b,c)}}(document.createElement.bind(document));this.props.listeners.add(c("WAWebSystemTheme"),"system_theme_change",function(b){a.state.systemThemeMode&&a.$10(b)});g=document.getElementById("wa_web_initial_startup");(g==null?void 0:g.parentNode)&&g.parentNode.removeChild(g)};f.componentDidUpdate=function(a,b){b.anotherSession===!0&&this.state.anotherSession===!1?c("WAWebWAWCStorage").openDB()["catch"](function(a){d("WALogger").WARN(p(),a)}):b.anotherSession===!1&&this.state.anotherSession===!0&&c("WAWebWAWCStorage").idb().then(function(a){c("WAWebBrokerGlobalAppState").takeOver=!0,a.close(),d("WALogger").LOG(o())})["catch"](c("WAWebNoop")),this.$4(this.state.apiCmd),this.state.mode!==d("WAWebStreamModel").StreamMode.MAIN&&(this.animate=!0),this.$9()};f.componentWillUnmount=function(){this.$12.cancel()};f.$6=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=this;b===void 0&&(b=!1);if(d("WAWebUA").UA.isLocalStorageBroken){var f=(yield d("WAWebSafariTakeover").isAnotherTabActive());if(f){d("WAWebLoggerImpl").Logger.onTakeOver();this.setState({isUnsupportedTakeover:!0});try{d("WAComms").stopComms()}catch(a){}return}}d("WAWebSafariTakeover").setTabActive();b&&d("WAWebUpdater").Updater.shouldForceUpdateOnTakeOver()&&d("WAWebUpdater").Updater.restart();f=b?c("WAWebAppMutex").takeoverLocal(a):c("WAWebAppMutex").init(a);b=(yield f["catch"](function(a){e.setState({takingOver:!0});return e.$6(a,!0)}))===!0;d("WAWebLoggerImpl").Logger.isTakeOver=b;this.setState({takingOver:!1,anotherSession:b})});function e(b,c){return a.apply(this,arguments)}return e}();f.$4=function(a){if(!a)return;if(a.resultType==="ADVERTISE"||a.resultType==="MANAGE_ADS"||a.resultType==="OPEN_CATALOG")return;a.resultType;if(this.$13()){var b=this.$14();N({cmdAndData:a,isExternal:!0,sessionId:b});this.state.apiCmd!=null&&this.setState({apiCmd:null});return}a!==this.state.apiCmd&&this.setState({apiCmd:a})};f.$13=function(){return M!=null&&d("WAWebAppScreen").getScreen(this.state)===d("WAWebAppScreen").AppScreen.MAIN};f.$9=function(){this.state.mode!==d("WAWebStreamModel").StreamMode.SYNCING&&d("WAWebWamPageLoadReporter").logFirstRenderMountTimeOnce()};f.$5=function(){var a=this;c("WAWebAlarm").setLocalTimeout(function(){d("WALogger").LOG(n()),d("WALogger").LOG(m(),Date.now(),d("WAWebClock").Clock.getSkew()),d("WAWebCmd").Cmd.midnight(),a.$5()},c("WAWeb-moment")().endOf("day").valueOf())};f.$22=function(){var a=this,e=d("WAWebAppScreen").getScreen(this.state);b("cr:6167")==null?void 0:b("cr:6167").setAppScreen(e);switch(e){case d("WAWebAppScreen").AppScreen.CLIENT_EXPIRED_DIALOG:return{ui:E.jsx(d("WAWebFavicon.react").DefaultFavicon,{children:E.jsx(c("WAWebClientExpiredDialog.react"),{})}),requiresBackendCheck:!1};case d("WAWebAppScreen").AppScreen.ANOTHER_SESSION:var f;this.state.takingOver?(e=c("WAWebNoop"),f=h._("__JHASH__IRiaYmEAXw8__JHASH__")):(e=function(){a.$19()},f=h._("__JHASH__1R6w_U9TBBp__JHASH__"));return{ui:E.jsx(d("WAWebFavicon.react").ErrorFavicon,{children:E.jsx(c("WAWebConflict.react"),{cancelText:c("WAWebFbtCommon")("Close"),onCancel:window.open.bind(window,"https://www.whatsapp.com/","_self"),okText:f,onOK:e,children:h._("__JHASH__ycGhtbp8Bgc__JHASH__")})}),requiresBackendCheck:!1};case d("WAWebAppScreen").AppScreen.UNSUPPORTED_TAKEOVER:return{ui:E.jsx(d("WAWebFavicon.react").ErrorFavicon,{children:E.jsx(c("WAWebConflict.react"),{okText:h._("__JHASH__zbNMtbyTq97__JHASH__"),onOK:this.$21,children:h._("__JHASH__wwtwk3nCUOr__JHASH__")})}),requiresBackendCheck:!1};case d("WAWebAppScreen").AppScreen.SERVICE_UNAVAILABLE:return{ui:E.jsx(d("WAWebFavicon.react").ErrorFavicon,{children:E.jsx(c("WAWebServiceUnavailable.react"),{})}),requiresBackendCheck:!1};case d("WAWebAppScreen").AppScreen.TEMP_BAN:return{ui:E.jsx(c("WAWebTempBanScreen.react"),{banData:this.state.temporaryBan}),requiresBackendCheck:!0};case d("WAWebAppScreen").AppScreen.QR:return{ui:E.jsxs(d("WAWebFavicon.react").DefaultFavicon,{children:[E.jsx(d("WAWebModalManagerImpl.react").ModalManagerComponent,{type:d("WAWebModalManagerImpl.react").ModalType},"modal-manager"),E.jsx(K,{apiCmd:this.state.apiCmd},"qr-code")]}),extraClasses:c("WAWebApp.scss").isQR,requiresBackendCheck:!0};case d("WAWebAppScreen").AppScreen.STARTUP:case d("WAWebAppScreen").AppScreen.SYNCING:f=E.jsx(c("WAWebStartup.react"),{initialLoadReady:this.state.initialLoadReady,onReady:this.$20});c("gkx")("26258")||(f=[E.jsx(d("WAWebModalManagerImpl.react").ModalManagerComponent,{type:d("WAWebModalManagerImpl.react").ModalType},"modal-manager"),E.jsx(c("WAWebStartup.react"),{initialLoadReady:this.state.initialLoadReady,onReady:this.$20},"start-up")]);return{ui:E.jsx(d("WAWebFavicon.react").DefaultFavicon,{children:f}),requiresBackendCheck:!0};case d("WAWebAppScreen").AppScreen.OFFLINE:return{ui:E.jsx(d("WAWebFavicon.react").ErrorFavicon,{children:E.jsx(c("WAWebOffline.react"),{})}),requiresBackendCheck:!0};case d("WAWebAppScreen").AppScreen.PROXYBLOCK:return{ui:E.jsx(d("WAWebFavicon.react").ErrorFavicon,{children:E.jsx(c("WAWebProxied.react"),{})}),requiresBackendCheck:!0};case d("WAWebAppScreen").AppScreen.CONFLICT:return{ui:E.jsx(d("WAWebFavicon.react").ErrorFavicon,{children:E.jsx(c("WAWebConflict.react"),{cancelText:h._("__JHASH__3n1bF_cZdZK__JHASH__"),onCancel:function(){return d("WAWebSocketModel").Socket.logout()},okText:h._("__JHASH__1R6w_U9TBBp__JHASH__"),onOK:function(){return d("WAWebSocketModel").Socket.takeover()},children:h._("__JHASH__imlCCn7AkN2__JHASH__")})}),requiresBackendCheck:!0};case d("WAWebAppScreen").AppScreen.TOS_BLOCK:return{ui:E.jsx(d("WAWebFavicon.react").ErrorFavicon,{children:E.jsx(c("WAWebTos.react"),{description:h._("__JHASH__ZKk5BXEY1xF__JHASH__")})}),requiresBackendCheck:!0};case d("WAWebAppScreen").AppScreen.SMB_TOS_BLOCK:return{ui:E.jsx(d("WAWebFavicon.react").ErrorFavicon,{children:E.jsx(c("WAWebTos.react"),{description:h._("__JHASH__ENyJ8_tocpV__JHASH__"),children:E.jsx(c("WAWebSmbLearnMore.react"),{})})}),requiresBackendCheck:!0};case d("WAWebAppScreen").AppScreen.DEPRECATED_VERSION:return{ui:E.jsx(d("WAWebFavicon.react").ErrorFavicon,{children:E.jsx(c("WAWebDeprecated.react"),{})}),requiresBackendCheck:!0};case d("WAWebAppScreen").AppScreen.LOGOUT:return{ui:E.jsxs(d("WAWebFavicon.react").DefaultFavicon,{children:[E.jsx(d("WAWebModalManagerImpl.react").ModalManagerComponent,{type:d("WAWebModalManagerImpl.react").ModalType},"modal-manager"),E.jsx(c("WAWebLogoutLoadingScreen.react"),{},"logout")]}),requiresBackendCheck:!0};case d("WAWebAppScreen").AppScreen.SCREEN_LOCK:return{ui:E.jsx(c("WAWebLockScreen.react"),{}),requiresBackendCheck:!0};case d("WAWebAppScreen").AppScreen.MAIN:e=c("WANullthrows")(M);f=e.MainComponent;return{ui:[E.jsx(d("WAWebToastManagerImpl").ToastManagerComponent,{},"toast-manager"),E.jsx((e=d("WAWebModalManagerImpl.react")).ModalManagerComponent,{contextMenuRef:this.contextMenuRef,type:e.ModalType},"main-modal-manager"),E.jsx(e.ModalManagerComponent,{contextMenuRef:this.contextMenuRef,type:e.MediaType},"media-modal-manager"),E.jsx(e.ModalManagerComponent,{type:e.AlertType},"alert-modal-manager"),E.jsx((e=d("WAWebContextMenuManager.react")).ContextMenuManager,{ref:this.contextMenuRef,type:e.Type.MENU},"context-menu-manager"),E.jsx("div",{id:"expressions-panel-container"},"expressions-panel-container"),E.jsx(e.ContextMenuManager,{type:e.Type.TOOLTIP},"tooltip-manager"),E.jsx(d("WAWebEmojiAssetLoaderCompletionTracker").InitialEmojisCompletionContext.Provider,{value:d("WAWebEmojiAssetLoaderCompletionTracker").emojiCompletionTracker,children:E.jsx(f,{conn:d("WAWebConnModel").Conn,animate:this.animate})},"main")],extraClasses:c("WAWebApp.scss").isMain,requiresBackendCheck:!0}}};f.$14=function(){var a=d("WAWebBizGatingUtils").smbClickToChatLoggingEnabled()?Math.floor(2147483648*Math.random()).toString():void 0;return a};f.render=function(){var a=d("WAWebAppScreen").getScreen(this.state);d("WAWebWamPageLoadReporter").maybeLogInitialScreenRenderStart(a);var b=this.state.isKeyboardUser,e=this.$22(),f=e.ui,g=e.extraClasses;e=e.requiresBackendCheck;var h=d("WAWebUIRefreshGatingUtils").materialRefreshEnabled();h=d("WAWebClassnames").classnamesConvertMeToStylexPlease(c("WAWebApp.scss").wrapper,g,(g={"app-wrapper-web":!0,"safari-fix":(g=d("WAWebStylesEnv")).hasSafariFix,"font-fix":g.hasFontFix,"os-mac":g.isOSMac,"os-win":g.isOSWin,"keyboard-user":b},g[c("WAWebApp.scss").stripe]=!h,g));e&&M!=null&&M.notificationBackend.shutdownAsNeeded();g=a===d("WAWebAppScreen").AppScreen.STARTUP||a===d("WAWebAppScreen").AppScreen.SYNCING;e=g?"loading-screen":this.state.locale;return E.jsx(d("WAWebThemeContext").ThemeContext.Provider,{value:this.$23({theme:this.state.theme,systemThemeMode:this.state.systemThemeMode}),children:E.jsx(c("WAWebKeyboardContext").Provider,{value:{isKeyboardUser:b,setIsKeyboardUser:this.$8},children:E.jsx(d("WAWebErrorBoundary.react").ErrorBoundary,{name:"app-wrapper",children:E.jsx(d("WAWebUimUie.react").UIE,{displayName:"App",uimState:d("WAWebUim").UIMState.INACTIVE,children:E.jsxs(d("WAWebKeyboardHotKeys.react").HotKeys,{handlers:this.$11,className:h,tabIndex:null,onMouseDownCapture:this.$15,onClickCapture:this.$16,children:[E.jsx(d("WAWebPopover.react").PopoverPortalBucket,{}),f]},e)})})})})};return e}(F);var Q=d("WAWebListenerHoc_DEPRECATED").ListenerHOC(D);function e(){return E.jsx(Q,{})}e.displayName=e.name+" [from "+f.id+"]";function R(){return S.apply(this,arguments)}function S(){S=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield (j||(j=b("Promise"))).all([J.load(),T()])),c=a[0];a=a[1];d("WAWebWamPageLoadReporter").mainScriptTimer.start();M=c(a);d("WAWebWamPageLoadReporter").mainScriptTimer.end()});return S.apply(this,arguments)}function T(){return d("WAWebConnModel").Conn.platform?(j||(j=b("Promise"))).resolve(d("WAWebConnModel").Conn.platform):new(j||(j=b("Promise")))(function(a){var b=function b(){var c=d("WAWebConnModel").Conn.platform;if(c==null)return;d("WAWebConnModel").Conn.off("change:platform",b);a(c)};d("WAWebConnModel").Conn.on("change:platform",b)})}g.hasPending=a;g.App=e}),226);
__d("WAWebAppSwInitializer",["Promise","WALogger","WAWebABProps","WAWebFeatureDetectionSwSupport","WAWebPwaDocumentMetadataUtils","WAWebSwUpdater","WAWebUA","asyncToGeneratorRuntime","gkx","justknobx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["service-worker-unregistration-failure: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["service-worker-unregistration-failure: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unregister invalid service worker: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["service-worker-registration-failure: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["service-worker-unregistration-failure: ",""]);m=function(){return a};return a}function a(){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;if(!c("gkx")("26262")||s())return q();if(!c("WAWebFeatureDetectionSwSupport").supported||window.navigator.serviceWorker==null)return;((a=window.navigator.serviceWorker)==null?void 0:a.controller)&&(yield d("WAWebSwUpdater").updateSw());if(!c("gkx")("26258")&&((a=window.navigator.serviceWorker)==null?void 0:a.controller)){a=(yield window.navigator.serviceWorker.getRegistrations==null?void 0:window.navigator.serviceWorker.getRegistrations());if(a){var e=[];for(a of a)a.scope!==window.location.origin+window.location.pathname&&e.push(a.unregister()["catch"](function(a){d("WALogger").ERROR(m(),a.stack).devConsole(a).sendLogs("service-worker-unregistration-failure")}));yield (h||(h=b("Promise"))).all(e)}}c("justknobx")._("2157")&&(yield o());if(window.navigator.serviceWorker&&!((a=window.navigator.serviceWorker)==null?void 0:a.controller))try{e="/sw.js";yield window.navigator.serviceWorker.register(e,{scope:"/",updateViaCache:"all"})}catch(a){d("WALogger").ERROR(l(),a.stack).devConsole(a).sendLogs("service-worker-registration-failure",{sampling:.01})}});return n.apply(this,arguments)}function o(){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;a=(yield (a=window.navigator.serviceWorker)==null?void 0:a.getRegistrations==null?void 0:a.getRegistrations());if(a){var c=[];for(a of a){var e;if((e=a.active)==null?void 0:(e=e.scriptURL)==null?void 0:e.endsWith("/serviceworker.js")){d("WALogger").LOG(k(),(e=a.active)==null?void 0:e.scriptURL);c.push(a.unregister()["catch"](function(a){d("WALogger").ERROR(j(),a.stack).devConsole(a).sendLogs("service-worker-unregistration-failure")}))}}yield (h||(h=b("Promise"))).all(c)}});return p.apply(this,arguments)}function q(){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a;a=(yield (a=window.navigator.serviceWorker)==null?void 0:a.getRegistrations==null?void 0:a.getRegistrations());if(a){var c=[];for(a of a)c.push(a.unregister()["catch"](function(a){d("WALogger").ERROR(i(),a.stack).devConsole(a).sendLogs("service-worker-unregistration-failure")}));yield (h||(h=b("Promise"))).all(c)}});return r.apply(this,arguments)}function s(){return d("WAWebABProps").getABPropConfigValue("web_disable_sw_on_safari_pwa")&&d("WAWebUA").UA.isSafari&&d("WAWebPwaDocumentMetadataUtils").isCurrentWebSessionInsidePwa()}g.initializeSw=a}),98);
__d("WAWebBrokerBackendInterface",["WAWebBrokerGlobalAppState","WAWebCrashlog","WAWebInvocationDispatcher"],(function(a,b,c,d,e,f,g){a={setLogoutState:function(a){c("WAWebBrokerGlobalAppState").isLogoutInProgress=a;return c("WAWebInvocationDispatcher").invoke("setLogoutState",[a])},sendLogs:function(a,b){return d("WAWebCrashlog").sendLogs(a,{sampling:b==null?void 0:b.sampling})},deleteDbEncKeyCache:function(){return c("WAWebInvocationDispatcher").invoke("deleteDbEncKeyCache",[])},initDatabaseEncnKey:function(a){return c("WAWebInvocationDispatcher").invoke("initDatabaseEncnKey",[a])},generateFinalDbEncryptionAndFtsKey:function(a){return c("WAWebInvocationDispatcher").invoke("generateFinalDbEncryptionAndFtsKey",[a])},setSchemaVersions:function(a){return c("WAWebInvocationDispatcher").invoke("setSchemaVersions",[a])}};b=a;g["default"]=b}),98);
__d("WAWebArchiveSettingSync",["Promise","WALogger","WASyncAction.pb","WASyncdAction","WASyncdConst","WAWebAndroidUnsupportedActionsSync","WAWebApiActiveMessageRanges","WAWebChatCollection","WAWebMessageRangeUtils","WAWebModelStorageUtils","WAWebSchemaActiveMessageRanges","WAWebSchemaChat","WAWebSettingsGetters","WAWebSettingsModel","WAWebSyncdDb","WAWebUserPrefsMultiDevice","WAWebWidFactory","asyncToGeneratorRuntime","decodeProtobuf","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Archive_Setting_Sync: Update some chats as side effects for setting 'off'"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Archive_Setting_Sync: Updating chats side effects for setting 'off'"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Archive_Setting_Sync: Update some chats as side effects for setting 'on'"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Archive_Setting_Sync: Update chats side effects for setting 'on': Iteration took ","ms"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Archive_Setting_Sync: Unsupported rangeEnclosedType ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["unarchive "," as ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Archive_Setting_Sync: Updating chats side effects for setting 'on'"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["archive setting sync: no mutations"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["archive setting sync: operation not supported"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: successfully set unarchiveChatsSetting to ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: successfully set ArchiveV2Enabled to true"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["archive setting sync: malformed mutation"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["binarySyncAction should not be null"]);u=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.getVersion=function(){return 4};f.getAction=function(){return d("WASyncdConst").Actions.UnarchiveChatsSetting};f.decodeValue=function(a){if(a.binarySyncData){var b=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,a.binarySyncData);if(b.value)return b.value}else{if(!a.binarySyncAction){d("WALogger").ERROR(u()).tags("syncd").sendLogs("syncd binarySyncAction should not be null");throw c("err")("binarySyncAction should not be null")}return d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,a.binarySyncAction)}};f.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=this;c("WAWebAndroidUnsupportedActionsSync").updatePrimaryAllowsAllMutationsFlag("other mutation");var g=e.setMutationsPendingToPersist;if(a.length>0){e=a[a.length-1];try{a=[];if(e.operation==="set"){e=e.value;e=e.unarchiveChatsSetting;if((e==null?void 0:e.unarchiveChats)==null){d("WALogger").WARN(t());return[{actionState:d("WASyncdConst").SyncActionState.Malformed}]}var h=e.unarchiveChats;e=(yield d("WAWebUserPrefsMultiDevice").getArchiveV2EnabledSetting());e||(yield d("WAWebUserPrefsMultiDevice").setArchiveV2EnabledSetting(!0),c("WAWebSettingsModel").archive=babelHelpers["extends"]({},d("WAWebSettingsGetters").getArchive(c("WAWebSettingsModel")),{enabled:!0}),d("WALogger").DEV(s()));yield d("WAWebUserPrefsMultiDevice").setUnarchiveChatsSetting(h);c("WAWebSettingsModel").archive=babelHelpers["extends"]({},d("WAWebSettingsGetters").getArchive(c("WAWebSettingsModel")),{classic:h});d("WALogger").DEV(r(),h);yield d("WAWebModelStorageUtils").getStorage().lock(["message","chat","sync-actions","active-message-ranges"],b("asyncToGeneratorRuntime").asyncToGenerator(function*(){a=(yield f.updateSideEffectOnChats(h,g)),yield d("WAWebSchemaChat").getChatTable().bulkCreateOrMerge(a)}));a.forEach(function(a){var b=d("WAWebWidFactory").createWid(a.id);b=d("WAWebChatCollection").ChatCollection.get(b);b&&(b.archive=a.archive)});return[{actionState:d("WASyncdConst").SyncActionState.Success}]}d("WALogger").WARN(q());return[{actionState:d("WASyncdConst").SyncActionState.Unsupported}]}catch(a){return[{actionState:d("WASyncdConst").SyncActionState.Failed}]}}d("WALogger").WARN(p());return[{actionState:d("WASyncdConst").SyncActionState.Failed}]});function e(b,c){return a.apply(this,arguments)}return e}();f.$ArchiveSettingSync1=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=this,e=[];d("WALogger").DEV(o());var f=self.performance.now(),g=(yield d("WAWebSchemaChat").getChatTable().all());g=g.filter(function(a){return a.archive}).map(function(a){return a.id});var i=(yield (h||(h=b("Promise"))).all(g.map(function(a){return d("WAWebApiActiveMessageRanges").getActiveMessageRanges(a)}))),j=i.flat().filter(function(a){return a.action===d("WAWebSchemaActiveMessageRanges").ActiveRangeAction.Archive}).map(function(a){return a.chatId});i=g.filter(function(a){return!j.includes(a)});g=(yield h.all(i.map(function(c){c=d("WAWebWidFactory").createWid(c);var e=JSON.stringify([d("WASyncdConst").Actions.Archive,c.toString({legacy:!0})]);c=a.find(function(a){return a.index===e});return c?(h||(h=b("Promise"))).resolve(c):d("WAWebSyncdDb").getSyncAction(e)})));i=g.filter(function(a){if(!a)return!1;var b=c.decodeValue(a).archiveChatAction;return[d("WASyncdConst").SyncActionState.Success,d("WASyncdConst").SyncActionState.Orphan].includes(a.actionState)&&(b==null?void 0:b.archived)&&b.messageRange}).map(function(a){var b=a&&c.decodeValue(a).archiveChatAction;a=a?JSON.parse(a.index)[1]:"";return[a,b==null?void 0:b.messageRange]});var p=new Map(i);g=Array.from(p.keys());var q=(yield h.all(g.map(function(a){return d("WAWebMessageRangeUtils").constructMessageRange(d("WAWebWidFactory").createWid(a),{forOutgoingMutation:!1})})));g.forEach(function(a,b){b=q[b];var c=p.get(a);if(c){b=d("WAWebMessageRangeUtils").compareMessageRanges(b,c);if(b===d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangeAEnclosesRangeB||b===d("WAWebMessageRangeUtils").MessageRangeEncloseType.RangesNotEnclosing){d("WALogger").DEV(n(),a,b);c=d("WAWebWidFactory").createWid(a);e.push({id:c.toString({legacy:!1}),archive:!1})}else d("WALogger").WARN(m(),b).sendLogs("ArchiveSettingSync setting true rangeEnclosedType unsupported")}});i=self.performance.now();d("WALogger").DEV(l(),i-f);e.length>0&&d("WALogger").DEV(k());return e});function c(b){return a.apply(this,arguments)}return c}();f.$ArchiveSettingSync2=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this,c=[];d("WALogger").DEV(j());var e=(yield d("WAWebSyncdDb").getSyncActionsRows(["action"],[d("WASyncdConst").Actions.Archive]));a=a.filter(function(a){return a.action===d("WASyncdConst").Actions.Archive});var f=a.map(function(a){return a.index});e=e.filter(function(a){return!f.includes(a.index)});e=[].concat(e,a);a=e.filter(function(a){if(a.actionState===d("WASyncdConst").SyncActionState.Success){a=b.decodeValue(a);return(a=a.archiveChatAction)==null?void 0:a.archived}return!1});a.forEach(function(a){a=JSON.parse(a.index)[1];a=d("WAWebWidFactory").createWid(a);c.push({id:a.toString({legacy:!1}),archive:!0})});c.length>0&&d("WALogger").DEV(i());return c});function c(b){return a.apply(this,arguments)}return c}();f.updateSideEffectOnChats=function(a,b){return a?this.$ArchiveSettingSync1(b):this.$ArchiveSettingSync2(b)};return e}(d("WASyncdAction").SyncActionBase);e=new a();g["default"]=e}),98);
__d("WAWebChatLockSettingsSync",["WALogger","WAProtobufsUserPassword.pb","WASyncdAction","WASyncdConst","WAWebChatLockSettings","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["ChatLockSettingsSync: received mutations but could not parse"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["ChatLockSettingsSync: saving chatlock settings"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["ChatLockSettingsSync: malformed mutation: transformer args missing"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["ChatLockSettingsSync: malformed mutation: transformer type incompatible"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["ChatLockSettingsSync: malformed mutation: secret data missing"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["ChatLockSettingsSync: malformed mutation: hideLockedChats is null"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["ChatLockSettingsSync: malformed mutation: settings is null"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["ChatLockSettingsSync: operation not supported: ",""]);o=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 7};e.getAction=function(){return d("WASyncdConst").Actions.ChatLockSettings};e.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b,c=a.map(function(a){if(a.operation!=="set"){d("WALogger").WARN(o(),a.operation);return{actionState:d("WASyncdConst").SyncActionState.Malformed}}a=a.value.chatLockSettings;if(a==null){d("WALogger").WARN(n());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}var c=a.secretCode;a=a.hideLockedChats;if(a==null){d("WALogger").WARN(m());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}b={hideLockedChats:a,secretCode:null};if(c!=null){a=c.transformedData;var e=c.transformer,f=c.transformerArg;c=c.encoding;if(f==null||e==null||a==null||c==null){d("WALogger").WARN(l());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}if(e!==d("WAProtobufsUserPassword.pb").UserPassword$Transformer.PBKDF2_HMAC_SHA512){d("WALogger").WARN(k());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}f=f.reduce(function(a,b){if(b.value==null)return a;b.key==="iterations"?a.iterations=b.value.asUnsignedInteger:b.key==="salt"&&(a.salt=b.value.asBlob);return a},{});if(f.iterations==null||f.salt==null){d("WALogger").WARN(j());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}b.secretCode={iterations:f.iterations,encoding:c,salt:f.salt,transformer:e,data:a}}return{actionState:d("WASyncdConst").SyncActionState.Success}});if(b!=null){d("WALogger").LOG(i()).devConsole({chatlockSettings:b,mutations:a});var e=d("WAWebChatLockSettings").getChatLockSettings();e.updateAndSave(b)}else d("WALogger").WARN(h()).devConsole(a);return c});function c(b){return a.apply(this,arguments)}return c}();return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebCustomPaymentMethodsSync",["WALogger","WASyncdAction","WASyncdConst","WAWebABProps","WAWebBackendApi","WAWebMobilePlatforms","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Custom Payment Methods sync: successfully synced payment methods"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Custom Payment Methods sync: malformed mutation"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Custom Payment Methods sync: operation not supported"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Custom Payment Methods sync: operation not supported, user does not pass ABProp"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Custom Payment Methods sync: operation not supported, app is not SMB"]);l=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 7};e.getAction=function(){return d("WASyncdConst").Actions.CustomPaymentMethods};e.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(d("WAWebMobilePlatforms").isSMB()!==!0){d("WALogger").WARN(l());return a.map(function(){return{actionState:d("WASyncdConst").SyncActionState.Unsupported}})}if(d("WAWebABProps").getABPropConfigValue("payments_br_pix_phase_1_seller_sync_enabled")!==!0){d("WALogger").WARN(k());return a.map(function(){return{actionState:d("WASyncdConst").SyncActionState.Unsupported}})}return a.map(function(a){if(a.operation!=="set"){d("WALogger").WARN(j());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}a=(a=a.value.customPaymentMethodsAction)==null?void 0:a.customPaymentMethods;if(a==null){d("WALogger").WARN(i());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}d("WAWebBackendApi").frontendFireAndForget("setCustomPaymentMethods",{customPaymentMethods:a});d("WALogger").DEV(h());return{actionState:d("WASyncdConst").SyncActionState.Success}})});function c(b){return a.apply(this,arguments)}return c}();return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebDeviceCapabilitiesSync",["Promise","WALogger","WAServerSync.pb","WASyncAction.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WATimeUtils","WAWebABProps","WAWebSyncd","WAWebSyncdDb","WAWebUserPrefsMeUser","asyncToGeneratorRuntime","decodeProtobuf"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["DeviceCapabilitiesSync: not syncing capabilities due to no change"]);i=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 7};e.getAction=function(){return d("WASyncdConst").Actions.DeviceCapabilities};e.getJidIndex=function(){return d("WAWebUserPrefsMeUser").assertGetMe().toString({legacy:!0})};e.capabilitiesHaveChanged=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield d("WAWebSyncdDb").getSyncActionsRows(["index"],[a.index]));b=b.reduce(function(a,b){if(b.actionState===d("WASyncdConst").SyncActionState.Success){a=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,b.binarySyncData);b=a.value;if(b==null?void 0:b.deviceCapabilities)return b.deviceCapabilities}},{});a=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,a.binarySyncAction);a=a.deviceCapabilities;return{hasChanged:JSON.stringify(b)!==JSON.stringify(a),currentCapabilities:b,newCapabilities:a}});function c(b){return a.apply(this,arguments)}return c}();e.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return a.map(function(){return{actionState:d("WASyncdConst").SyncActionState.Success}})});function c(b){return a.apply(this,arguments)}return c}();e.getMutation=function(a,b){return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.RegularLow,indexArgs:[this.getJidIndex()],value:{deviceCapabilities:babelHelpers["extends"]({},b)},version:this.getVersion(),operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,timestamp:a,action:this.getAction()})};e.sendMutation=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebABProps").getABPropConfigValue("device_capabilities_sync_enabled"))return;a=this.getMutation(d("WATimeUtils").unixTimeMs(),a);var c=(yield this.capabilitiesHaveChanged(a));if(!c.hasChanged){d("WALogger").LOG(i()).devConsole(c);return}yield d("WAWebSyncd").lockForSync([],[a],function(){return(h||(h=b("Promise"))).resolve()})});function c(b){return a.apply(this,arguments)}return c}();return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebLabelJidSync",["Promise","WALogger","WASyncdAction","WASyncdConst","WAWebBizLabelItemParentType","WAWebBizLabelUtils","WAWebChatCollection","WAWebChatModel","WAWebSchemaChat","WAWebSchemaLabelAssociation","WAWebSyncdActionUtils","WAWebSyncdUtils","WAWebWamEnumMdSyncdCriticalEventCode","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["label jid sync: unsupported operation"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["label jid sync: malformed mutation"]);j=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=2,b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.getVersion=function(){return d("WASyncdConst").LABEL_ASSOCIATION_SYNC_VERSION};f.getAction=function(){return d("WASyncdConst").Actions.LabelJid};f.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=new Set(),f=[],g=[];a=(yield (h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{if(a.operation==="set"){var b=a.indexParts;a=a.value;var h=b[1];b=b[2];(!h||!b)&&d("WAWebSyncdActionUtils").throwInvalidActionIndex();a=(a=a.labelAssociationAction)==null?void 0:a.labeled;if(a==null){d("WALogger").WARN(j());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}if(!c("WAWebWid").isWid(b)){d("WAWebSyncdUtils").uploadCriticalEventMetric(d("WAWebWamEnumMdSyncdCriticalEventCode").MD_SYNCD_CRITICAL_EVENT_CODE.ACTION_INVALID_INDEX_DATA);return{actionState:d("WASyncdConst").SyncActionState.Malformed}}b=d("WAWebWidFactory").createWid(b);var k=b.toString(),l={labelId:h,associationId:k,type:d("WAWebSchemaLabelAssociation").LabelAssociationType.Jid};if(a){a=e.has(k);if(!a){var m=(yield d("WAWebSchemaChat").getChatTable().get(k,!1));m&&(e.add(k),a=!0)}m=a?null:new(d("WAWebChatModel").Chat)({id:b});f.push(l);m&&(d("WAWebSchemaChat").getChatTable().create(babelHelpers["extends"]({},m.toJSON(),{id:k})),e.add(k),d("WAWebChatCollection").ChatCollection.add(m));d("WAWebBizLabelUtils").addToLabelCollection(k,[h],d("WAWebBizLabelItemParentType").LabelItemParentType.Chat)}else g.push(l),d("WAWebBizLabelUtils").removeLabelFromCollection(k,h,d("WAWebBizLabelItemParentType").LabelItemParentType.Chat);return{actionState:d("WASyncdConst").SyncActionState.Success}}d("WALogger").WARN(i());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}});return function(b){return a.apply(this,arguments)}}())));yield d("WAWebSchemaLabelAssociation").getLabelAssociationTable().bulkRemove(g.map(function(a){return[a.labelId,a.associationId,a.type]}));yield d("WAWebSchemaLabelAssociation").getLabelAssociationTable().bulkCreateOrReplace(f);return a});function e(b){return a.apply(this,arguments)}return e}();return e}(d("WASyncdAction").SyncActionBase);e=new a();g["default"]=e}),98);
__d("WAWebLabelMessageSync",["Promise","WALogger","WASyncdAction","WASyncdConst","WAWebBizLabelItemParentType","WAWebBizLabelUtils","WAWebSchemaLabelAssociation","WAWebSchemaMessage","WAWebSyncdActionUtils","WAWebSyncdUtils","WAWebWamEnumMdSyncdCriticalEventCode","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["label message sync: operation not supported"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["label message sync: malformed mutation"]);j=function(){return a};return a}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=new Set();yield d("WAWebSchemaMessage").getMessageTable().bulkGet(a.map(function(a){a=a.indexParts;var b=a[2],e=a[3],f=a[4];a=a[5];if(!b||!e||!f||!a)return null;return!c("WAWebWid").isWid(b)?null:(b=d("WAWebSyncdActionUtils").syncKeyToMsgKey(b,e,f,a))==null?void 0:b.toString()}).filter(Boolean)).then(function(a){return a.forEach(function(a){a&&b.add(a.id)})});return b});return l.apply(this,arguments)}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=2,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return d("WASyncdConst").LABEL_ASSOCIATION_SYNC_VERSION};e.getAction=function(){return d("WASyncdConst").Actions.LabelMessage};e.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=[],e=[],f=(yield k(a));a=(yield (h||(h=b("Promise"))).all(a.map(function(a){try{if(a.operation==="set"){var b=a.indexParts;a=a.value;var g=b[1],h=b[2],k=b[3],l=b[4];b=b[5];(!g||!h||!k||!l||!b)&&d("WAWebSyncdActionUtils").throwInvalidActionIndex();a=(a=a.labelAssociationAction)==null?void 0:a.labeled;if(a==null){d("WALogger").WARN(j());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}h=d("WAWebSyncdActionUtils").syncKeyToMsgKey(h,k,l,b);if(!h){d("WAWebSyncdUtils").uploadCriticalEventMetric(d("WAWebWamEnumMdSyncdCriticalEventCode").MD_SYNCD_CRITICAL_EVENT_CODE.ACTION_INVALID_INDEX_DATA);return{actionState:d("WASyncdConst").SyncActionState.Malformed}}if(!f.has(h.toString()))return{actionState:d("WASyncdConst").SyncActionState.Orphan,orphanModel:{modelId:h.toString(),modelType:d("WASyncdConst").SyncModelType.Msg}};k={labelId:g,associationId:h.toString(),type:d("WAWebSchemaLabelAssociation").LabelAssociationType.Message};a?(c.push(k),d("WAWebBizLabelUtils").addToLabelCollection(h.toString(),[g],d("WAWebBizLabelItemParentType").LabelItemParentType.Msg)):(e.push(k),d("WAWebBizLabelUtils").removeLabelFromCollection(h.toString(),g,d("WAWebBizLabelItemParentType").LabelItemParentType.Msg));return{actionState:d("WASyncdConst").SyncActionState.Success}}d("WALogger").WARN(i());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}})));yield d("WAWebSchemaLabelAssociation").getLabelAssociationTable().bulkRemove(e.map(function(a){return[a.labelId,a.associationId,a.type]}));yield d("WAWebSchemaLabelAssociation").getLabelAssociationTable().bulkCreateOrReplace(c);return a});function c(b){return a.apply(this,arguments)}return c}();return c}(d("WASyncdAction").SyncActionBase);e=new a();g["default"]=e}),98);
__d("WAWebDBLabelsReorder",["Promise","WALogger","WAWebModelStorageUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Label] updateLabelsSortOrder: updating storage failed"]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebModelStorageUtils").getStorage().lock(["label"],function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var e=c[0],f=a.reduce(function(a,b,c){a.set(b,c);return a},new Map([]));try{c=a.map(function(a){return String(a)});c=(yield e.bulkGet(c));var g=[];c.forEach(function(a){if(a==null)return;var b=f.get(Number(a.id));b!=null&&g.push(e.merge(a.id,{orderIndex:b}))});return(h||(h=b("Promise"))).all(g)}catch(a){d("WALogger").ERROR(i()).devConsole(a).tags("labels").sendLogs("labels-db-update-failed");throw a}});return function(a){return c.apply(this,arguments)}}())});return j.apply(this,arguments)}g.updateLabelsSortOrder=a}),98);
__d("WAWebLabelReorderingSync",["Promise","WALogger","WAPromiseEach","WASyncdAction","WASyncdConst","WAWebBackendApi","WAWebBizGatingUtils","WAWebDBLabelsReorder","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Label] reordering sync: operation failed"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Label] reordering sync: operation not supported"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Label] reordering sync: operation successful"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Label] reordering sync: malformed mutation"]);l=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 3};e.getAction=function(){return d("WASyncdConst").Actions.LabelReordering};e.applyMutations=function(a){return!d("WAWebBizGatingUtils").isLabelReorderingSyncFromPrimaryEnabled()?(h||(h=b("Promise"))).resolve([{actionState:d("WASyncdConst").SyncActionState.Skipped}]):d("WAPromiseEach").promiseEach(a,function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{if(a.operation==="set"){a=a.value;a=a==null?void 0:a.labelReorderingAction;if(a==null||a.sortedLabelIds==null||Array.isArray(a.sortedLabelIds)===!1||a.sortedLabelIds.length===0){d("WALogger").WARN(l());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}yield d("WAWebDBLabelsReorder").updateLabelsSortOrder(a.sortedLabelIds);d("WALogger").LOG(k());d("WAWebBackendApi").frontendFireAndForget("reorderLabels",{sortedLabelIds:a.sortedLabelIds});return{actionState:d("WASyncdConst").SyncActionState.Success}}d("WALogger").WARN(j());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}catch(a){d("WALogger").WARN(i()).verbose().devConsole(a);return{actionState:d("WASyncdConst").SyncActionState.Failed}}});return function(b){return a.apply(this,arguments)}}())};return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebLocaleSettingSync",["Promise","WALogger","WASyncdAction","WASyncdConst","WAWebL10N","WAWebL10NConstants","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["locale setting sync: operation not supported"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: successfully set locale to ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["locale setting sync: malformed mutation"]);k=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.getVersion=function(){return 3};f.getAction=function(){return d("WASyncdConst").Actions.LocaleSetting};f.applyMutations=function(a){return(h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{if(a.operation==="set"){a=a.value;a=a.localeSetting;if(!a){d("WALogger").WARN(k());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}var b=a.locale;yield c("WAWebL10N").setLocale(b,d("WAWebL10NConstants").L10N_PRIORITY.PHONE,!1);d("WALogger").DEV(j(),a.locale);return{actionState:d("WASyncdConst").SyncActionState.Success}}d("WALogger").WARN(i());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}});return function(b){return a.apply(this,arguments)}}()))};return e}(d("WASyncdAction").SyncActionBase);e=new a();g["default"]=e}),98);
__d("WAWebUserPrefsMerchantPaymentPartner",["WASyncAction.pb","WAWebUserPrefsCustomPaymentMethods","WAWebUserPrefsKeys","WAWebUserPrefsLocalStorage","WAWebUserPrefsTypes"],(function(a,b,c,d,e,f,g){function h(){var a=c("WAWebUserPrefsLocalStorage")==null?void 0:c("WAWebUserPrefsLocalStorage").getItemFromLocalStorage(d("WAWebUserPrefsKeys").KEYS.MERCHANT_PAYMENT_PARTNER);return a}function a(){var a=h();return i(a)&&a?a:null}function i(a){if(!a)return!1;var b=a.status,c=a.country,e=a.credential_id;a=a.gateway_name;if(b===d("WAWebUserPrefsTypes").PaymentPartnerStatusType.ACTIVE)return d("WAWebUserPrefsCustomPaymentMethods").isStringFieldValid(c)&&d("WAWebUserPrefsCustomPaymentMethods").isStringFieldValid(e)&&d("WAWebUserPrefsCustomPaymentMethods").isStringFieldValid(a);else if(b===d("WAWebUserPrefsTypes").PaymentPartnerStatusType.INACTIVE)return d("WAWebUserPrefsCustomPaymentMethods").isStringFieldValid(c)&&d("WAWebUserPrefsCustomPaymentMethods").isStringFieldValid(e,!0)&&d("WAWebUserPrefsCustomPaymentMethods").isStringFieldValid(a,!0);return!1}function b(a){var b=a.status===d("WASyncAction.pb").SyncActionValue$MerchantPaymentPartnerAction$Status.ACTIVE?d("WAWebUserPrefsTypes").PaymentPartnerStatusType.ACTIVE:d("WAWebUserPrefsTypes").PaymentPartnerStatusType.INACTIVE;b={status:b,country:a.country,gateway_name:a.gatewayName,credential_id:a.credentialId};c("WAWebUserPrefsLocalStorage").setItemToLocalStorage(d("WAWebUserPrefsKeys").KEYS.MERCHANT_PAYMENT_PARTNER,b)}function e(){var a=h();return i(a)}f={getPaymentPartner:a,isPaymentPartnerValid:e,setMerchantPaymentPartner:b};g["default"]=f}),98);
__d("WAWebMerchantPaymentPartnerSync",["WALogger","WASyncdAction","WASyncdConst","WAWebABProps","WAWebMobilePlatforms","WAWebUserPrefsMerchantPaymentPartner","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Merchant Payment Partner sync: successfully synced payment methods"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Merchant Payment Partner sync:malformed mutation"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Merchant Payment Partner sync: operation not supported"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Merchant Payment Partner sync: operation not supported, user does not pass ABProp"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Merchant Payment Partner sync: operation not supported, app is not SMB"]);l=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.getVersion=function(){return 7};f.getAction=function(){return d("WASyncdConst").Actions.MerchantPaymentPartner};f.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(d("WAWebMobilePlatforms").isSMB()!==!0){d("WALogger").WARN(l());return a.map(function(){return{actionState:d("WASyncdConst").SyncActionState.Unsupported}})}if(d("WAWebABProps").getABPropConfigValue("payments_br_merchant_psp_account_status_sync")!==!0){d("WALogger").WARN(k());return a.map(function(){return{actionState:d("WASyncdConst").SyncActionState.Unsupported}})}return a.map(function(a){if(a.operation!=="set"){d("WALogger").WARN(j());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}a=a.value.merchantPaymentPartnerAction;if(a==null){d("WALogger").WARN(i());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}c("WAWebUserPrefsMerchantPaymentPartner").setMerchantPaymentPartner(a);d("WALogger").DEV(h());return{actionState:d("WASyncdConst").SyncActionState.Success}})});function e(b){return a.apply(this,arguments)}return e}();return e}(d("WASyncdAction").SyncActionBase);e=new a();Object.freeze(e);f=e;g["default"]=f}),98);
__d("WAWebPaymentInfoSync",["WALogger","WASyncdAction","WASyncdConst","WAWebABProps","WAWebBackendApi","WAWebMobilePlatforms","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["payment info sync: successfully set cpi info"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["cpi payment info sync: malformed mutation"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["payment info sync: operation not supported"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["payment info sync: operation not supported, user does not pass ABProp"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["payment info sync: operation not supported, app is not SMB"]);l=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 7};e.getAction=function(){return d("WASyncdConst").Actions.PaymentInfo};e.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(d("WAWebMobilePlatforms").isSMB()!==!0){d("WALogger").WARN(l());return a.map(function(){return{actionState:d("WASyncdConst").SyncActionState.Unsupported}})}if(d("WAWebABProps").getABPropConfigValue("order_details_payment_instructions_sync_enabled")!==!0){d("WALogger").WARN(k());return a.map(function(){return{actionState:d("WASyncdConst").SyncActionState.Unsupported}})}return a.map(function(a){if(a.operation!=="set"){d("WALogger").WARN(j());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}a=(a=a.value.paymentInfoAction)==null?void 0:a.cpi;if(typeof a!=="string"){d("WALogger").WARN(i());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}d("WAWebBackendApi").frontendFireAndForget("setCPIInfo",{cpiInfo:a});d("WALogger").DEV(h());return{actionState:d("WASyncdConst").SyncActionState.Success}})});function c(b){return a.apply(this,arguments)}return c}();return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebPnForLidChatSync",["WALogger","WASyncdAction","WASyncdConst","WAWebABProps","WAWebDBCreateLidPnMappings","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["pn_for_lid_chat sync: successfully updated the lidXPn mapping}"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["pn_for_lid_chat sync: malformed mutation - invalid pnJid"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["pn_for_lid_chat sync: malformed mutation - invalid key"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["pn_for_lid_chat sync: operation not supported"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["pn_for_lid_chat sync: operation not supported"]);l=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 8};e.getAction=function(){return d("WASyncdConst").Actions.PnForLidChat};e.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(d("WAWebABProps").getABPropConfigValue("pnh_pn_for_lid_chat_sync")!==!0){d("WALogger").WARN(l());return a.map(function(){return{actionState:d("WASyncdConst").SyncActionState.Unsupported}})}var b=[];a=a.map(function(a){if(a.operation!=="set"){d("WALogger").WARN(k());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}var c=a.indexParts[1];if(!d("WAWebWidFactory").isWidlike(c)){d("WALogger").WARN(j());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}a=(a=a.value.pnForLidChatAction)==null?void 0:a.pnJid;if(a==null||!d("WAWebWidFactory").isWidlike(a)){d("WALogger").WARN(i());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}a=d("WAWebWidFactory").createUserWid(a);c=d("WAWebWidFactory").createUserWid(c);b.push({lid:c,pn:a});return{actionState:d("WASyncdConst").SyncActionState.Success}});yield d("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:b,flushImmediately:!0});d("WALogger").DEV(h());return a});function c(b){return a.apply(this,arguments)}return c}();return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebPremiumMessageAddSendAction",["WAWebPremiumMessageCollection","WAWebPremiumMessageSchema","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=[];for(a of a){var c=d("WAWebPremiumMessageCollection").PremiumMessageCollection.get(a.premiumMessageId);if(c){var e=new Set(c.sentMessageIds);e.add(a.messageId);b.push(c);c.set("sentMessageIds",e)}}yield d("WAWebPremiumMessageSchema").getPremiumMessageTable().bulkCreateOrMerge(b.map(function(a){return{id:a.id,name:a.name,type:a.type,isDeleted:a.isDeleted,mediaId:a.mediaId,sentMessageIds:a.sentMessageIds}}))});return h.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebPremiumMessageBroadcastSync",["WALogger","WASyncdAction","WASyncdConst","WAWebPremiumMessageAddSendAction","WAWebPremiumMessageCollection","WAWebSyncdActionUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["premium_message_broadcast:syncd: operation not supported"]);h=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.getVersion=function(){return 7};f.getAction=function(){return d("WASyncdConst").Actions.MarketingMessageBroadcast};f.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=[];a=a.map(function(a){try{var c=a.indexParts,e=c[1];c=c[2];(!e||!c)&&d("WAWebSyncdActionUtils").throwInvalidActionIndex();if(a.operation==="set"){if(d("WAWebPremiumMessageCollection").PremiumMessageCollection.find(e)==null)return{actionState:d("WASyncdConst").SyncActionState.Orphan};b.push({messageId:c,premiumMessageId:e});return{actionState:d("WASyncdConst").SyncActionState.Success}}d("WALogger").DEV(h());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}});yield c("WAWebPremiumMessageAddSendAction")(b);return a});function e(b){return a.apply(this,arguments)}return e}();return e}(d("WASyncdAction").SyncActionBase);e=new a();g["default"]=e}),98);
__d("WAWebPremiumMessageSync",["WALogger","WASyncdAction","WASyncdConst","WAWebPremiumMessageCollection","WAWebPremiumMessageSchema","WAWebSyncdActionUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["premium_message:syncd: operation not supported"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["premium_message:syncd: malformed mutation - missing type"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["premium_message:syncd: malformed mutation"]);j=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 7};e.getAction=function(){return d("WASyncdConst").Actions.MarketingMessage};e.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=[];a=a.map(function(a){try{var c=a.indexParts;c=c[1];c||d("WAWebSyncdActionUtils").throwInvalidActionIndex();if(a.operation==="set"){a=a.value.marketingMessageAction;if(!a){d("WALogger").DEV(j());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}var e=a.name,f=a.type,g=a.message,k=a.isDeleted;a=a.mediaId;if(f==null){d("WALogger").DEV(i());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}b.push({id:c,name:e,type:f,isDeleted:k,message:g,mediaId:a,sentMessageIds:new Set()});return{actionState:d("WASyncdConst").SyncActionState.Success}}d("WALogger").DEV(h());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}});yield d("WAWebPremiumMessageSchema").getPremiumMessageTable().bulkCreateOrMerge(b);d("WAWebPremiumMessageCollection").PremiumMessageCollection.add(b);return a});function c(b){return a.apply(this,arguments)}return c}();return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebPrimaryFeatureSync",["WALogger","WANullthrows","WASyncdAction","WASyncdConst","WAWebPrimaryFeatures","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["primary feature sync: successfully set flags to ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["primary feature sync: malformed mutation"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["primary feature sync: operation not supported"]);j=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.getVersion=function(){return 7};f.getAction=function(){return d("WASyncdConst").Actions.PrimaryFeature};f.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b;a=a.map(function(a){var c;if(a.operation!=="set"){d("WALogger").WARN(j());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}c=(c=a.value.primaryFeature)==null?void 0:c.flags;if(c==null){d("WALogger").WARN(i());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}(b==null||a.timestamp>b.timestamp)&&(b=a);return{actionState:d("WASyncdConst").SyncActionState.Success}});if(b!=null){var e;e=c("WANullthrows")((e=b.value.primaryFeature)==null?void 0:e.flags);yield d("WAWebPrimaryFeatures").setPrimaryFeatures(e);d("WALogger").DEV(h(),e)}return a});function e(b){return a.apply(this,arguments)}return e}();return e}(d("WASyncdAction").SyncActionBase);e=new a();g["default"]=e}),98);
__d("WAWebPrimaryVersionSync",["WALogger","WASyncdAction","WASyncdConst","WAWebSyncdActionUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: primary version sync, successfully get primary version ","\n      with value ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: primary version sync, malformed mutation"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: primary version sync, operation not supported"]);j=function(){return a};return a}var k={CURRENT:"current",SESSION_START:"session_start"};a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 7};e.getAction=function(){return d("WASyncdConst").Actions.PrimaryVersion};e.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return a.map(function(a){if(a.operation!=="set"){d("WALogger").WARN(j());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}var b=a.indexParts;a=a.value;b=b[1];(!b||b!==k.CURRENT&&b!==k.SESSION_START)&&d("WAWebSyncdActionUtils").throwInvalidActionIndex();a=(a=a.primaryVersionAction)==null?void 0:a.version;if(a==null){d("WALogger").WARN(i());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}d("WALogger").DEV(h(),b,a);return{actionState:d("WASyncdConst").SyncActionState.Success}})});function c(b){return a.apply(this,arguments)}return c}();return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebShareOwnPnSync",["WALogger","WASyncdAction","WASyncdConst","WAWebABProps","WAWebUpdateLidMetadataJob","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["share_own_pn sync: successfully updated shareOwnPn value}"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["share_own_pn sync: malformed mutation - invalid key"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["share_own_pn sync: operation not supported"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["share_own_pn sync: operation not supported"]);k=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 8};e.getAction=function(){return d("WASyncdConst").Actions.ShareOwnPn};e.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(d("WAWebABProps").getABPropConfigValue("share_own_pn_sync")!==!0){d("WALogger").WARN(k());return a.map(function(){return{actionState:d("WASyncdConst").SyncActionState.Unsupported}})}var b=[];a=a.map(function(a){if(a.operation!=="set"){d("WALogger").WARN(j());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}a=a.indexParts[1];if(!d("WAWebWidFactory").isWidlike(a)){d("WALogger").WARN(i());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}a=d("WAWebWidFactory").createUserWid(a);b.push({lid:a,data:{shareOwnPn:!0}});return{actionState:d("WASyncdConst").SyncActionState.Success}});yield d("WAWebUpdateLidMetadataJob").updateLidMetadataJob(b);d("WALogger").DEV(h());return a});function c(b){return a.apply(this,arguments)}return c}();return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebTimeFormatSync",["WALogger","WASyncdAction","WASyncdConst","WAWebClock","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["time format sync: successfully set time format to "," hour"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["time format sync: malformed mutation"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["time format sync: operation not supported"]);j=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 7};e.getAction=function(){return d("WASyncdConst").Actions.TimeFormat};e.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return a.map(function(a){if(a.operation!=="set"){d("WALogger").WARN(j());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}a=(a=a.value.timeFormatAction)==null?void 0:a.isTwentyFourHourFormatEnabled;if(a==null){d("WALogger").WARN(i());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}d("WAWebClock").Clock.setIs24Hour(a,d("WAWebClock").TimeFormatSource.PhoneTimeFormat);d("WALogger").DEV(h(),a?"24":"12");return{actionState:d("WASyncdConst").SyncActionState.Success}})});function c(b){return a.apply(this,arguments)}return c}();return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebCollectionHandlerActions",["WASentinelMutationSync","WAWebAgentSync","WAWebAndroidUnsupportedActionsSync","WAWebArchiveChatSync","WAWebArchiveSettingSync","WAWebBotWelcomeRequestSync","WAWebChatAssignmentOpenedStatusSync","WAWebChatAssignmentSync","WAWebChatLockSettingsSync","WAWebClearChatSync","WAWebContactSync","WAWebCustomPaymentMethodsSync","WAWebDeleteChatSync","WAWebDeleteMessageForMeSync","WAWebDeviceCapabilitiesSync","WAWebDisableLinkPreviewsSync","WAWebExternalWebBetaSync","WAWebFavoritesSync","WAWebLabelJidSync","WAWebLabelMessageSync","WAWebLabelReorderingSync","WAWebLabelSync","WAWebLocaleSettingSync","WAWebLockChatSync","WAWebMarkChatAsReadSync","WAWebMerchantPaymentPartnerSync","WAWebMuteChatSync","WAWebNoteSync","WAWebNuxSync","WAWebPaymentInfoSync","WAWebPinChatSync","WAWebPnForLidChatSync","WAWebPremiumMessageBroadcastSync","WAWebPremiumMessageSync","WAWebPrimaryFeatureSync","WAWebPrimaryVersionSync","WAWebPushNameSync","WAWebQuickRepliesSync","WAWebShareOwnPnSync","WAWebStarMessageSync","WAWebStatusPrivacySettingSync","WAWebStickersFavoriteSyncAction","WAWebStickersRemoveRecentSyncAction","WAWebTimeFormatSync","WAWebUserStatusMuteSync"],(function(a,b,c,d,e,f,g){a=[c("WAWebStarMessageSync"),c("WAWebContactSync"),c("WAWebMuteChatSync"),c("WAWebLabelSync"),c("WAWebLabelReorderingSync"),c("WAWebAgentSync"),c("WAWebLabelMessageSync"),c("WAWebLabelJidSync"),c("WAWebQuickRepliesSync"),c("WAWebLocaleSettingSync"),c("WAWebPushNameSync"),c("WAWebArchiveChatSync"),c("WAWebMarkChatAsReadSync"),c("WAWebClearChatSync"),c("WAWebDeleteMessageForMeSync"),c("WASentinelMutationSync"),c("WAWebArchiveSettingSync"),d("WAWebPinChatSync").PinChatSync,c("WAWebDeleteChatSync"),c("WAWebAndroidUnsupportedActionsSync"),c("WAWebPrimaryFeatureSync"),c("WAWebNuxSync"),c("WAWebTimeFormatSync"),c("WAWebUserStatusMuteSync"),c("WAWebPrimaryVersionSync"),c("WAWebStickersRemoveRecentSyncAction"),c("WAWebChatAssignmentSync"),c("WAWebChatAssignmentOpenedStatusSync"),c("WAWebStickersFavoriteSyncAction"),c("WAWebShareOwnPnSync"),c("WAWebPnForLidChatSync"),c("WAWebExternalWebBetaSync"),c("WAWebPremiumMessageSync"),c("WAWebPremiumMessageBroadcastSync"),c("WAWebStatusPrivacySettingSync"),c("WAWebBotWelcomeRequestSync"),c("WAWebPaymentInfoSync"),c("WAWebCustomPaymentMethodsSync"),c("WAWebLockChatSync"),c("WAWebChatLockSettingsSync"),c("WAWebDisableLinkPreviewsSync"),c("WAWebNoteSync"),c("WAWebFavoritesSync"),c("WAWebMerchantPaymentPartnerSync"),c("WAWebDeviceCapabilitiesSync")];g.ActionHandlers=a}),98);
__d("WAWebKeyManagementUtils",["WALogger","WAWebApiDeviceList","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: getPeerDevices: error ",". Future key requests will only be sent to primary device."]);h=function(){return a};return a}function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=[],b=d("WAWebUserPrefsMeUser").assertGetMe();try{var c=(yield d("WAWebApiDeviceList").getMyDeviceList());c.devices.forEach(function(c){c.id!==b.getDeviceId()&&a.push(d("WAWebWidFactory").createDeviceWidFromUserAndDevice(b.user,b.server,c.id))})}catch(a){d("WALogger").WARN(h(),a).sendLogs(a.toString());return[d("WAWebWidFactory").createDeviceWidFromUserAndDevice(b.user,b.server,0)]}return a});return i.apply(this,arguments)}g.getPeerDevices=a}),98);
__d("WAWebWamEnumMutationBundleType",[],(function(a,b,c,d,e,f){a=Object.freeze({SNAPSHOT:0,PATCH:1});f.MUTATION_BUNDLE_TYPE=a}),66);
__d("WAWebWamEnumMutationDirectionType",[],(function(a,b,c,d,e,f){a=Object.freeze({INCOMING:0,OUTGOING:1});f.MUTATION_DIRECTION_TYPE=a}),66);
__d("WAWebWamEnumMutationOperationType",[],(function(a,b,c,d,e,f){a=Object.freeze({SET:0,REMOVE:1});f.MUTATION_OPERATION_TYPE=a}),66);
__d("WAWebWamEnumSyncdCollectionType",[],(function(a,b,c,d,e,f){a=Object.freeze({REGULAR:1,REGULAR_LOW:2,REGULAR_HIGH:3,CRITICAL_BLOCK:4,CRITICAL_UNBLOCK_LOW:5});f.SYNCD_COLLECTION_TYPE=a}),66);
__d("WAWebMdSyncdMutationWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMutationBundleType","WAWebWamEnumMutationDirectionType","WAWebWamEnumMutationOperationType","WAWebWamEnumSyncdCollectionType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({MdSyncdMutation:[5970,{appSessionId:[1,a.TYPES.STRING],companionSessionIds:[2,a.TYPES.STRING],contentLength:[3,a.TYPES.INTEGER],isInBootstrap:[4,a.TYPES.BOOLEAN],isUsingLid:[5,a.TYPES.BOOLEAN],mutationBundle:[6,d("WAWebWamEnumMutationBundleType").MUTATION_BUNDLE_TYPE],mutationDirection:[7,d("WAWebWamEnumMutationDirectionType").MUTATION_DIRECTION_TYPE],mutationMac:[8,a.TYPES.STRING],mutationName:[9,a.TYPES.STRING],mutationOperation:[10,d("WAWebWamEnumMutationOperationType").MUTATION_OPERATION_TYPE],patchMac:[15,a.TYPES.STRING],seqNumber:[11,a.TYPES.INTEGER],syncdCollection:[12,d("WAWebWamEnumSyncdCollectionType").SYNCD_COLLECTION_TYPE],syncdKeyhash:[13,a.TYPES.STRING],syncdKeyid:[14,a.TYPES.STRING]},[1,1,1],"regular"]},{MdSyncdMutation:[]});g.MdSyncdMutationWamEvent=b}),98);
__d("WAWebConfig",["WABase64","WACryptoDependencies","WALogger","WASyncdConst","WAWebABProps","WAWebBrokerGlobalAppState","WAWebCollectionHandlerActions","WAWebConnModel","WAWebCurrentUser","WAWebKeyManagementUtils","WAWebMdSyncdMutationWamEvent","WAWebOfflineHandler","WAWebServerPropsModel","WAWebSyncdMdSyncFieldstatMeta","WAWebWamEnumMutationBundleType","WAWebWamEnumMutationDirectionType","WAWebWamEnumMutationOperationType","WAWebWamEnumSyncdCollectionType","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncReportMutationToWam: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getShortMdSessionId: ",""]);i=function(){return a};return a}var j=null;a={isCompanion:function(){return!0},logoutInProgress:function(){return c("WAWebBrokerGlobalAppState").isLogoutInProgress},mediaImagePreviewHkdfInfo:function(){throw c("err")("config: No config for mediaImagePreviewHkdfInfo")},mediaVideoPreviewHkdfInfo:function(){throw c("err")("config: No config for mediaVideoPreviewHkdfInfo")},offlineProcessingState:function(){return d("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete()?"idle":"processing"},orchestratorVersion:function(){return"default"},primaryPlatform:function(){return d("WAWebConnModel").Conn.platform},syncdActionHandlers:function(){return d("WAWebCollectionHandlerActions").ActionHandlers},syncdAdditionalMutations:function(){return d("WAWebABProps").getABPropConfigValue("syncd_additional_mutations_count")},syncShouldCalculateLtHashFromScratch:function(){return d("WAWebABProps").getABPropConfigValue("web_recalculate_app_state_sync_lthash")},syncdDisabled:function(){return!1},syncdInlineMutationsMaxCount:function(){return d("WAWebServerPropsModel").ServerProps.syncdInlineMutationsMaxCount},syncdKeyMaxUseDays:function(){return d("WAWebServerPropsModel").ServerProps.syncdKeyMaxUseDays},syncdMaxMutationsToProcessDuringResume:function(){return d("WAWebABProps").getABPropConfigValue("web_syncd_max_mutations_to_process_during_resume")},syncdPatchDeviceIndexIncluded:function(){return!0},syncdPatchProtobufMaxSize:function(){return d("WAWebServerPropsModel").ServerProps.syncdPatchProtobufMaxSize},syncdQPLLoggingEnabled:function(){return d("WAWebServerPropsModel").ServerProps.syncdQPLLoggingEnabled},syncdShouldFatalOnMissingPatch:function(){return d("WAWebABProps").getABPropConfigValue("web_should_fatal_on_missing_patch")},syncdShouldNotFatalOnSnapshotMacMismatchInPatches:function(){return d("WAWebABProps").getABPropConfigValue("syncd_do_not_fatal_on_snapshot_mac_mismatch_in_patches")},syncdShouldParsePatchDebugData:function(){return d("WAWebABProps").getABPropConfigValue("enable_syncd_debug_data_in_patch")},syncdWaitForKeyTimeoutDays:function(){return d("WAWebServerPropsModel").ServerProps.syncdWaitForKeyTimeoutDays},syncShouldMinimizeWriteIndividualMutation:function(){return d("WAWebABProps").getABPropConfigValue("enable_minimize_individual_mutation_write")},syncShouldUseCachedIndexMac:function(){return d("WAWebABProps").getABPropConfigValue("enabled_cached_indexmac")},syncShouldPersistOnlyUpdatedIndividualMutation:function(){return d("WAWebABProps").getABPropConfigValue("enable_persisting_only_updated_syncd_individual_mutations")},syncShouldAllowOverrideKey:function(){return d("WAWebABProps").getABPropConfigValue("enable_override_syncd_key")},syncShouldDebugLockChat:function(){return d("WAWebABProps").getABPropConfigValue("syncd_check_duplicate_lock_chat_mutation")},syncDoNotAllowWriteOldPatch:function(){return d("WAWebABProps").getABPropConfigValue("web_syncd_do_not_allow_write_old_patch")},getShortMdSessionId:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{if(j!=null)return j;var a=(yield d("WAWebSyncdMdSyncFieldstatMeta").MdSyncFieldStatsMeta.getMdSessionId());a=d("WABase64").decodeB64(a);a=(yield d("WACryptoDependencies").getCrypto().subtle.digest({name:"SHA-1"},a));a=d("WABase64").encodeB64UrlSafe(a);j=a.slice(-6);return j}catch(a){d("WALogger").ERROR(i(),a).sendLogs("getShortMdSessionId failed");return""}});function c(){return a.apply(this,arguments)}return c}(),syncReportMutationToWam:function(a,b,c,e,f,g,i,j){try{var k=d("WAWebABProps").getABPropConfigValue("syncd_mutation_and_bundle_logging");if(!k)return;k=JSON.parse(k);if(!k||!k.allowlist||!k.allowlist.includes(a))return;k=function(a){switch(a){case d("WASyncdConst").CollectionName.RegularHigh:return d("WAWebWamEnumSyncdCollectionType").SYNCD_COLLECTION_TYPE.REGULAR_HIGH;case d("WASyncdConst").CollectionName.RegularLow:return d("WAWebWamEnumSyncdCollectionType").SYNCD_COLLECTION_TYPE.REGULAR_LOW;case d("WASyncdConst").CollectionName.Regular:return d("WAWebWamEnumSyncdCollectionType").SYNCD_COLLECTION_TYPE.REGULAR;case d("WASyncdConst").CollectionName.CriticalBlock:return d("WAWebWamEnumSyncdCollectionType").SYNCD_COLLECTION_TYPE.CRITICAL_BLOCK;case d("WASyncdConst").CollectionName.CriticalUnblockLow:return d("WAWebWamEnumSyncdCollectionType").SYNCD_COLLECTION_TYPE.CRITICAL_UNBLOCK_LOW}};new(d("WAWebMdSyncdMutationWamEvent").MdSyncdMutationWamEvent)({appSessionId:"",companionSessionIds:j,contentLength:0,isInBootstrap:!1,isUsingLid:!1,mutationBundle:i?d("WAWebWamEnumMutationBundleType").MUTATION_BUNDLE_TYPE.PATCH:d("WAWebWamEnumMutationBundleType").MUTATION_BUNDLE_TYPE.SNAPSHOT,mutationDirection:c?d("WAWebWamEnumMutationDirectionType").MUTATION_DIRECTION_TYPE.INCOMING:d("WAWebWamEnumMutationDirectionType").MUTATION_DIRECTION_TYPE.OUTGOING,mutationMac:e,mutationName:f,mutationOperation:g?d("WAWebWamEnumMutationOperationType").MUTATION_OPERATION_TYPE.REMOVE:d("WAWebWamEnumMutationOperationType").MUTATION_OPERATION_TYPE.SET,seqNumber:b,syncdCollection:k(a),syncdKeyhash:"",syncdKeyid:"",patchMac:""}).commit()}catch(a){d("WALogger").ERROR(h(),a).sendLogs("syncReportMutationToWam failed")}},maxPrekeysToUpload:function(){return d("WAWebServerPropsModel").ServerProps.maxKeys},forceNonPersistedJobs:function(){return!1},ignoreForceNonPersistedJobList:function(){return[]},orchestratorConfig:function(){return void 0},waitForConnection:function(){return!1},isUseridAnnotationEnabled:function(){return!1},isEmployee:function(){return d("WAWebCurrentUser").isEmployee()},useUpdatedSenderKeySession:function(){return!1},getAreThereMoreCompanions:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebKeyManagementUtils").getPeerDevices());return a.length>1});function c(){return a.apply(this,arguments)}return c}(),getSignalFutureMessagesMax:function(){return d("WAWebABProps").getABPropConfigValue("web_signal_future_messages_max")}};g.ConfigImpl=a}),98);
__d("WAWebConfigureWindowEvents",["WAComms","WALogger","WATypeUtils","WAWebApp.react","WAWebBuildConstants","WAWebExternalLink.react","WAWebMiscBrowserUtils","fbs"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while force restarting comms after unload failure: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["unload failed, force restarting comms"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Prompt onbeforeunload due to pending draft message"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["onbeforeunload triggered, version: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while stopping comms onbeforeunload: ",""]);l=function(){return a};return a}function a(){m(),window.onbeforeunload=function(){var a=!1,b=d("WAWebApp.react").hasPending();if(!b&&!d("WAWebExternalLink.react").isOpeningDeeplinkInCurrentTab())try{a=!0,d("WAComms").closeSocketAndPreventRetry()}catch(a){d("WALogger").ERROR(l(),a)}if(c("WAWebMiscBrowserUtils").isDownloading()){c("WAWebMiscBrowserUtils").clearDownloading();return void 0}d("WALogger").LOG(k(),d("WAWebBuildConstants").VERSION_STR);if(c("WAWebMiscBrowserUtils").promptUnloadGuards>0)return void 0;if(b){d("WALogger").LOG(j());return c("fbs")._("__JHASH__S9GSq_XN45B__JHASH__").toString()}if(a){b=15e3;self.setTimeout(function(){try{d("WALogger").ERROR(i()),void d("WAComms").socketLoopIteration()}catch(a){d("WALogger").ERROR(h(),a)}},b)}},window.addEventListener("dragover",function(a){a.preventDefault()}),window.addEventListener("drop",function(a){a.preventDefault()})}function m(){["getSelection","open","focus"].forEach(function(a){var b=Object.getPrototypeOf(window)[a];d("WATypeUtils").isFunction(b)&&window[a]!==b&&(window[a]=b)})}g.configureWindowEvents=a}),226);
__d("WAWebSyncdFatalExceptionNotificationApi",["WATimeUtils","WAWebApiPeerMessageStore","WAWebMsgKey","WAWebMsgType","WAWebSendAppStateSyncMsgJob","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a={collectionNames:a,timestamp:d("WATimeUtils").unixTimeMs()};var b=new(c("WAWebMsgKey"))({fromMe:!0,remote:d("WAWebUserPrefsMeUser").getMeUser(),id:yield c("WAWebMsgKey").newId()});b={id:b,to:d("WAWebWidFactory").createDeviceWidFromUserAndDevice(d("WAWebUserPrefsMeUser").assertGetMe().user,d("WAWebUserPrefsMeUser").assertGetMe().server,0),type:"protocol",subtype:"app_state_fatal_exception_notification",kind:d("WAWebMsgType").MsgKind.PeerMessage,appStateFatalExceptionNotification:a};yield d("WAWebApiPeerMessageStore").storePeerMessages([b]);return d("WAWebSendAppStateSyncMsgJob").encryptAndSendKeyMsg(b)});return h.apply(this,arguments)}g.sendAppStateFatalExceptionNotification=a}),98);
__d("WAWebSyncdLogs",["WALogger","WASyncdConst","WAWebPriorLogs","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: cannot log unknown cagtegory ",""]);h=function(){return a};return a}a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=d("WAWebPriorLogs").WAWebLogCategory.cast(a);if(c!=null)return d("WAWebPriorLogs").writePriorLog(c,b);d("WALogger").WARN(h(),a)});return function(b,c){return a.apply(this,arguments)}}();c=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=[].concat(Array.from(a?[a]:d("WASyncdConst").CollectionName.members()),[""]).map(function(a){return d("WAWebPriorLogs").WAWebLogCategory.cast(a)}).filter(Boolean);return d("WAWebPriorLogs").printPriorLogs(a)});return function(b){return a.apply(this,arguments)}}();g.writeSyncdLogImpl=a;g.printSyncdLogs=c}),98);
__d("WAWebSyncdFatal",["Promise","WAAsyncSleep","WABaseGlobals","WALogger","WATimeUtils","WAWebLogoutReasonConstants","WAWebSocketLogoutJob","WAWebSyncdFatalExceptionNotificationApi","WAWebSyncdLogs","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: Received fatal error and logged out"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: end notifying primary on fatal error. tsBeforeSleep: ",", tsBeforeSendToPrimary: ",", currTs: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: end notifying primary on fatal error"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: error when sending fatal message to primary: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: start notifying primary on fatal error"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: fatal flow: before sleep"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: starting fatal flow for ",""]);o=function(){return a};return a}var p=5e3;function a(a){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WALogger").LOG(o(),a);a?yield r(a,"handleFatalError for collection"):yield d("WABaseGlobals").getDbImpls().writeSyncdLog("","handleFatalError without collection");var b=[];a!=null&&(b=a.map(function(a){return String(a)}));var c=d("WATimeUtils").castMilliSecondsToUnixTime(d("WATimeUtils").unixTimeMs());d("WALogger").LOG(n());yield d("WAAsyncSleep").asyncSleep(p);yield r(a,"handleFatalError before notify primary");var e=d("WATimeUtils").castMilliSecondsToUnixTime(d("WATimeUtils").unixTimeMs());d("WALogger").LOG(m());try{yield d("WAWebSyncdFatalExceptionNotificationApi").sendAppStateFatalExceptionNotification(b)}catch(a){d("WALogger").ERROR(l(),a).sendLogs("syncd: could not send fatal to primary")}d("WALogger").LOG(k());yield r(a,"handleFatalError after notify primary");b=d("WATimeUtils").castMilliSecondsToUnixTime(d("WATimeUtils").unixTimeMs());d("WALogger").LOG(j(),d("WATimeUtils").toHttpHeaderDate(c),d("WATimeUtils").toHttpHeaderDate(e),d("WATimeUtils").toHttpHeaderDate(b));yield d("WAWebSyncdLogs").printSyncdLogs();d("WALogger").ERROR(i()).verbose().tags("syncd","logout").sendLogs("syncd: fatal error and logged out");yield d("WAWebSocketLogoutJob").socketLogout(d("WAWebLogoutReasonConstants").LogoutReason.SyncdFailure)});return q.apply(this,arguments)}function r(a,c){return(h||(h=b("Promise"))).all(((a=a)!=null?a:[""]).map(function(a){return d("WABaseGlobals").getDbImpls().writeSyncdLog(a,c)}))}g.handleFatalError=a}),98);
__d("WAWebSyncdDbCallbacksApi",["Promise","WAWebAndroidUnsupportedActionsSync","WAWebCmd","WAWebEventsWaitForOfflineDeliveryEnd","WAWebLid1X1MigrationGating","WAWebMsgKey","WAWebSchemaChat","WAWebSyncdFatal","WAWebSyncdLogs","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;f=function(a){a.deviceIndex===0&&c("WAWebAndroidUnsupportedActionsSync").updatePrimaryAllowsAllMutationsFlag("device index");return(h||(h=b("Promise"))).resolve()};var i=function(a){d("WAWebCmd").Cmd.trigger(d("WAWebCmd").APP_STATE_SYNC_COMPLETED,a);return(h||(h=b("Promise"))).resolve()},j=function(){return d("WAWebEventsWaitForOfflineDeliveryEnd").waitForOfflineDeliveryEnd().then(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){}))},k=function(a){return d("WAWebSyncdFatal").handleFatalError(a==null?void 0:a.collections)};function a(a){return d("WAWebSchemaChat").getChatTable().bulkGet(a).then(function(a){return a.map(function(a){return a==null?void 0:a.accountLid})})}function e(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isLidMigrated())return[];a=a.map(function(a){return c("WAWebMsgKey").fromString(a)}).filter(function(a){return a.remote.isUser()&&!a.remote.isLid()});var b=(yield d("WAWebSchemaChat").getChatTable().bulkGet(a.map(function(a){return a.remote.toString()}))).map(function(a){return a==null?void 0:a.accountLid}),e=[];for(var f=0;f<a.length;f++){var g=b[f];if(g!=null){var h=a[f];e.push(new(c("WAWebMsgKey"))({fromMe:h.fromMe,remote:d("WAWebWidFactory").createWid(g),id:h.id}).toString())}}return e});return l.apply(this,arguments)}g.handleSyncBeforeApplyPatch=f;g.handleSyncCompleted=i;g.handleSyncDelayApplyingPatchUntilUIUnblocks=j;g.handleSyncdFatal=k;g.writeSyncdLog=d("WAWebSyncdLogs").writeSyncdLogImpl;g.printSyncdLog=d("WAWebSyncdLogs").printSyncdLogs;g.bulkGetAccountLid=a;g.getAdditionalLidMsgKeys=e}),98);
__d("WAWebKeyManagementSendKeyRequestApi",["Promise","WALogger","WASyncdCryptoUtils","WASyncdKeyTypes","WAWebApiPeerMessageStore","WAWebKeyManagementUtils","WAWebMsgKey","WAWebMsgType","WAWebSendAppStateSyncMsgJob","WAWebSyncdCriticalBootstrapProcessingApi","WAWebUserPrefsMeUser","WAWebWamEnumBootstrapAppStateDataStageCode","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: send key request key id "," to peer deviceIds ",""]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=(yield d("WAWebKeyManagementUtils").getPeerDevices()),f=a.map(function(a){return{keyId:d("WASyncdKeyTypes").fromSyncKeyId(a)}}),g={keyIds:f};f=e.map(function(a){var b=new(c("WAWebMsgKey"))({fromMe:!0,remote:d("WAWebUserPrefsMeUser").assertGetMeUser(),id:c("WAWebMsgKey").newId_DEPRECATED()});return{id:b,to:a,type:"protocol",subtype:"app_state_sync_key_request",kind:d("WAWebMsgType").MsgKind.PeerMessage,appStateSyncKeyRequest:g}});e=e.map(function(a){return a.getDeviceId()});a=a.map(function(a){return d("WASyncdCryptoUtils").syncKeyIdToHex(a)});d("WALogger").LOG(i(),a,e);yield d("WAWebApiPeerMessageStore").storePeerMessages(f);yield (h||(h=b("Promise"))).all(f.map(function(a){return d("WAWebSendAppStateSyncMsgJob").encryptAndSendKeyMsg(a)}));d("WAWebSyncdCriticalBootstrapProcessingApi").logCriticalBootstrapStageIfNecessary(d("WAWebWamEnumBootstrapAppStateDataStageCode").BOOTSTRAP_APP_STATE_DATA_STAGE_CODE.MISSING_KEYS_REQUESTED);return e});return j.apply(this,arguments)}g.sendAppStateSyncKeyRequest=a}),98);
__d("WAWebKeyManagementSendKeyShareApi",["Promise","WALogger","WASyncdCryptoUtils","WASyncdKeyTypes","WAWebApiPeerMessageStore","WAWebKeyManagementUtils","WAWebMsgKey","WAWebMsgType","WAWebSendAppStateSyncMsgJob","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: send key share key id "," to peer deviceIds "," due to ",""]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e,f;a.type==="key_rotation"?(e=k(a.keys),f=(yield d("WAWebKeyManagementUtils").getPeerDevices())):a.type==="missing_key"&&(e=k(a.keys,a.orphanKeys),f=[a.peerDeviceId]);if(f==null)return(h||(h=b("Promise"))).resolve();var g=f,j=g.map(function(a){var b=new(c("WAWebMsgKey"))({fromMe:!0,remote:d("WAWebUserPrefsMeUser").assertGetMeUser(),id:c("WAWebMsgKey").newId_DEPRECATED()});return{id:b,to:a,type:"protocol",subtype:"app_state_sync_key_share",kind:d("WAWebMsgType").MsgKind.PeerMessage,appStateSyncKeyShare:e}});g=g.map(function(a){return a.getDeviceId()});var l=a.keys.map(function(a){return d("WASyncdCryptoUtils").syncKeyIdToHex(a.keyId)});d("WALogger").LOG(i(),l,g,a.type);yield d("WAWebApiPeerMessageStore").storePeerMessages(j);yield (h||(h=b("Promise"))).all(j.map(function(a){return d("WAWebSendAppStateSyncMsgJob").encryptAndSendKeyMsg(a)}))});return j.apply(this,arguments)}function k(a,b){a=a.map(function(a){return{keyId:{keyId:d("WASyncdKeyTypes").fromSyncKeyId(a.keyId)},keyData:{keyData:d("WASyncdKeyTypes").fromSyncKeyData(a.keyData),fingerprint:{rawId:a.fingerprint.rawId,currentIndex:a.fingerprint.currentIndex,deviceIndexes:a.fingerprint.deviceIndexes},timestamp:a.timestamp}}});if(b){b=b.map(function(a){return{keyId:{keyId:d("WASyncdKeyTypes").fromSyncKeyId(a)},keyData:void 0}});a=a.concat(b)}return{keys:a}}g.sendAppStateSyncKeyShare=a}),98);
__d("WAWebSyncdKeyCallbacksApi",["WAWebApiDeviceList","WAWebKeyManagementSendKeyRequestApi","WAWebKeyManagementSendKeyShareApi","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebApiDeviceList").getMyDeviceList()),b=a.currentIndex,e=a.devices;a=a.rawId;if(b==null)throw c("err")("syncd: missing current index for own device");return{currentIndex:b,deviceIndexes:e.map(function(a){return a.keyIndex}),rawId:a}});return function(){return a.apply(this,arguments)}}();e=function(a){return d("WAWebKeyManagementSendKeyShareApi").sendAppStateSyncKeyShare({type:"key_rotation",keys:a})};g.getDeviceFingerprint=a;g.sendSyncdKeyRequest=d("WAWebKeyManagementSendKeyRequestApi").sendAppStateSyncKeyRequest;g.sendSyncdKeyRotation=e}),98);
__d("WAWebSyncdNetCallbacksApi",["WABase64","WALogger","WASyncdError","WAWebDownloadManager","WAWebMmsClientErrors","WAWebSyncdUploadFatalErrorMetric","WAWebUploadManager","WAWebWamEnumMdSyncdFatalErrorCode","WAWebWamEnumUploadOriginType","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: error downloading "," of expected size "," with expected hash b64 length of "," for collection ",""]);h=function(){return a};return a}a=function(a){return c("WAWebUploadManager").encryptAndUpload({blob:a,signal:new AbortController().signal,type:"md-app-state",uploadOrigin:d("WAWebWamEnumUploadOriginType").UPLOAD_ORIGIN_TYPE.UNKNOWN,userUploadAttemptCount:0,forwardedFromWeb:!1,isViewOnce:!1}).then(function(a){var b=a.mediaKey,e=a.directPath,f=a.encFilehash;a=a.handle;if(a==null)throw c("err")("Missing handle after uploading external patch to mms4");return{mediaKey:d("WABase64").decodeB64(b),directPath:e,encFilehash:d("WABase64").decodeB64(f),handle:a}})};e=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var e=a.mediaKey,f=a.directPath,g=a.fileSha256,i=a.fileEncSha256;f={directPath:f,encFilehash:d("WABase64").encodeB64(i),filehash:d("WABase64").encodeB64(g),mediaKey:d("WABase64").encodeB64(e),type:"md-app-state",userDownloadAttemptCount:0};try{return yield d("WAWebDownloadManager").downloadManager.downloadAndMaybeDecrypt(babelHelpers["extends"]({signal:new AbortController().signal},f))}catch(e){d("WALogger").LOG(h(),b,a.fileSizeBytes,d("WABase64").encodeB64(a.fileEncSha256).length,c);if(e instanceof d("WAWebMmsClientErrors").MediaNotFoundError){d("WAWebSyncdUploadFatalErrorMetric").uploadFatalErrorMetric(b==="patch"?d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.EXTERNAL_PATCH_EXPIRED:d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.SNAPSHOT_EXPIRED,c);throw new(d("WASyncdError").SyncdFatalError)("external patch expired")}throw e}});return function(b,c,d){return a.apply(this,arguments)}}();g.uploadSyncExternalPatch=a;g.downloadSyncBlob=e}),98);
__d("WAWebDbCallbacks",["WAWebSyncdDbCallbacksApi","WAWebSyncdKeyCallbacksApi","WAWebSyncdNetCallbacksApi"],(function(a,b,c,d,e,f,g){b={downloadSyncBlob:d("WAWebSyncdNetCallbacksApi").downloadSyncBlob,getDeviceFingerprint:d("WAWebSyncdKeyCallbacksApi").getDeviceFingerprint,handleSyncBeforeApplyPatch:(a=d("WAWebSyncdDbCallbacksApi")).handleSyncBeforeApplyPatch,handleSyncCompleted:a.handleSyncCompleted,handleSyncDelayApplyingPatchUntilUIUnblocks:a.handleSyncDelayApplyingPatchUntilUIUnblocks,handleSyncdFatal:a.handleSyncdFatal,sendSyncdKeyRequest:d("WAWebSyncdKeyCallbacksApi").sendSyncdKeyRequest,sendSyncdKeyRotation:d("WAWebSyncdKeyCallbacksApi").sendSyncdKeyRotation,uploadSyncExternalPatch:d("WAWebSyncdNetCallbacksApi").uploadSyncExternalPatch,writeSyncdLog:a.writeSyncdLog,printSyncdLog:a.printSyncdLog,bulkGetAccountLid:a.bulkGetAccountLid,getAdditionalLidMsgKeys:a.getAdditionalLidMsgKeys};g.dbCallbacks=b}),98);
__d("WAWebLinkDeviceEvents",["WAWebEventEmitter"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.triggerRefreshAltLinkingCode=function(){this.trigger("link_device_events:refresh_alt_linking_code")};c.triggerErrorAltLinking=function(){this.trigger("link_device_events:error_alt_linking")};c.triggerPrimaryHelloReceived=function(){this.trigger("link_device_events:primary_hello_received")};return b}(c("WAWebEventEmitter"));b=new a();g.WAWebLinkDeviceEvents=b}),98);
__d("WAWebLinkDeviceAction",["WALogger","WASmaxMdGetCountryCodeRPC","WAWebAltDeviceLinkingApi","WAWebCmd","WAWebLinkDeviceEvents","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["alt device linking: sendGetCountryCodeRPC failed with error: ",""]);h=function(){return a};return a}function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var a=(yield d("WASmaxMdGetCountryCodeRPC").sendGetCountryCodeRPC());return a.value.countryCodeIso}catch(a){d("WALogger").ERROR(h(),a).sendLogs("alt device linking: sendGetCountryCodeRPC failed")}});return i.apply(this,arguments)}function c(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WAWebCmd").Cmd.refreshQR(),a.linkDeviceMethod===d("WAWebAltDeviceLinkingApi").PairingType.ALT_DEVICE_LINKING?(yield d("WAWebAltDeviceLinkingApi").initializeAltDeviceLinking(),d("WAWebAltDeviceLinkingApi").setPairingType(d("WAWebAltDeviceLinkingApi").PairingType.ALT_DEVICE_LINKING)):(yield d("WAWebAltDeviceLinkingApi").initializeQRLinking(),d("WAWebAltDeviceLinkingApi").setPairingType(d("WAWebAltDeviceLinkingApi").PairingType.QR_CODE))});return j.apply(this,arguments)}function e(a,b){return d("WAWebAltDeviceLinkingApi").startAltLinkingFlow(a,b)}function f(a){d("WAWebLinkDeviceEvents").WAWebLinkDeviceEvents.trigger("link_device_events:refresh_alt_linking_code")}function k(a){d("WAWebLinkDeviceEvents").WAWebLinkDeviceEvents.trigger("link_device_events:force_manual_refresh")}function l(){d("WAWebLinkDeviceEvents").WAWebLinkDeviceEvents.trigger("link_device_events:error_alt_linking")}function m(){d("WAWebLinkDeviceEvents").WAWebLinkDeviceEvents.trigger("link_device_events:primary_hello_received")}g.getPreselectedCountryCodeIso=a;g.resetLinkDeviceState=c;g.genLinkDeviceCodeForPhoneNumber=e;g.refreshAltLinkingCode=f;g.forceManualRefresh=k;g.errorAltLinking=l;g.primaryHelloReceivedAltLinking=m}),98);
__d("WAWebDebugSetup",["WAWebBuildConstants","WAWebLinkDeviceAction","cr:10195","cr:10234"],(function(a,b,c,d,e,f,g){function a(){window.Debug={VERSION:d("WAWebBuildConstants").VERSION_STR},b("cr:10234")&&(window.Debug.pinClientToCdev=function(a){b("cr:10234").setDebugRoutingToken(a)}),b("cr:10195")&&(window.Debug.overrideDefaultBotForTest=function(a){b("cr:10195").setDebugDefaultBotOverride(a)}),window.Debug.forceLinkDeviceCodeManualRefresh=d("WAWebLinkDeviceAction").forceManualRefresh}g.setupDebugGlobal=a}),98);
__d("WAWebFeatureDetectionCryptoSupport",["Promise","WALogger"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[crypto] AES-CBC: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[crypto] AES-CBC key generation failed: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[crypto] AES-CBC decryption failed: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[crypto] AES-CBC encryption/decryption is incorrect"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[crypto] AES-CBC encryption/decryption is correct"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[crypto] AES-CBC encryption failed: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[crypto] HMAC-SHA256: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[crypto] HMAC-SHA256 key generation failed: ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[crypto] HMAC-SHA256 verification failed: ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[crypto] HMAC-SHA256 is not verified"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[crypto] HMAC-SHA256 is verified"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[crypto] HMAC-SHA256 signing failed: ",""]);t=function(){return a};return a}var u="whatsapp is da best",v=e(u),w={name:"HMAC",hash:"SHA-256"},x={name:"AES-CBC",length:256};function y(){return(h||(h=b("Promise"))).resolve().then(function(){return self.crypto.subtle||self.crypto.webkitSubtle})}function a(){return y().then(function(a){return a.generateKey(w,!1,["sign","verify"]).then(function(b){return a.sign(w,b,v).then(function(c){return a.verify(w,b,c,v.buffer)})["catch"](function(a){d("WALogger").LOG(t(),a);return!1}).then(function(a){if(a){d("WALogger").LOG(s());return!0}d("WALogger").LOG(r());return!1})["catch"](function(a){d("WALogger").LOG(q(),a);return!1})})["catch"](function(a){d("WALogger").LOG(p(),a);return!1})})["catch"](function(a){d("WALogger").LOG(o(),a);return!1})}function c(){return y().then(function(a){return a.generateKey(x,!1,["encrypt","decrypt"]).then(function(c){return(h||(h=b("Promise"))).resolve(self.crypto).then(function(a){a=a.getRandomValues(new Uint8Array(16));a={name:"AES-CBC",iv:a};return a}).then(function(b){return a.encrypt(b,c,v).then(function(d){return a.decrypt(b,c,d)})["catch"](function(a){d("WALogger").LOG(n(),a);return!1}).then(function(a){a=new Uint8Array(a);if(z(a)===u){d("WALogger").LOG(m());return!0}d("WALogger").LOG(l());return!1})["catch"](function(a){d("WALogger").LOG(k(),a);return!1})})})["catch"](function(a){d("WALogger").LOG(j(),a);return!1})})["catch"](function(a){d("WALogger").LOG(i(),a);return!1})}function e(a){return new Uint8Array(a.split("").map(function(a){return a.charCodeAt(0)}))}function z(a){a=Array.prototype.slice.call(a);return a.map(function(a){return String.fromCharCode(a)}).join("")}g.supportsHmacSha256=a;g.supportsAesCbc=c}),98);
__d("WAWebFeatureDetectionRedirectIfMissingCapabilities",["WAPromiseProps","WAWebBuildConstants","WAWebFeatureDetectionCryptoSupport","WAWebLocalStorage","WAWebSessionStorage"],(function(a,b,c,d,e,f,g){var h=d("WAWebBuildConstants").DYN_ORIGIN+"browsers.html",i={getRandomValues:!!self.crypto.getRandomValues,subtleCrypto:!!(self.crypto&&(self.crypto.subtle||self.crypto.webkitSubtle)),localstorage:!!c("WAWebLocalStorage"),sessionstorage:!!c("WAWebSessionStorage"),url:!!self.URL,websocket:!!self.WebSocket,worker:!!self.Worker};function a(){if(j(i))return!0;d("WAPromiseProps").promiseProps({cryptoSha256:d("WAWebFeatureDetectionCryptoSupport").supportsHmacSha256(),cryptoAesCbc:d("WAWebFeatureDetectionCryptoSupport").supportsAesCbc()}).then(j);return!1}function j(a){var b=[];for(var c in a)a[c]||b.push(c);if(b.length>0){c=h+"?missing="+b.join(",");window.location.replace?window.location.replace(c):window.location.href=c;return!0}return!1}g["default"]=a}),98);
__d("WAWebCookieManager",[],(function(a,b,c,d,e,f){function a(a,b){b=["name","value","domain","path","secure","session","expirationDate"];a.session&&delete a.expirationDate;var c=[];b.forEach(function(b){var d=a[b];if(d===void 0||b==="value")return;switch(b){case"expirationDate":var e=new Date(a.expirationDate);c.push("expires="+e.toUTCString());break;case"secure":c.push("secure");break;case"name":e=a.value||"";c.push(String(d)+"="+e);break;default:c.push(b+"="+String(d))}});document.cookie=c.join(";")}function b(a){a=document.cookie.match(new RegExp("(^| )"+a+"=([^;]+)"));return a?a[2]:void 0}f.setCookie=a;f.getCookie=b}),66);
__d("WAWebFrontendL10nHelpers",["WALogger","WATimeUtils","WAWebAlarm","WAWebCookieDomain","WAWebCookieManager","WAWebL10nGetRenderedLocale","WAWebRuntimeEnvironmentUtils","WAWebURLUtils"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["l10n: renewing lang pref cookie TTL to: ",""]);h=function(){return a};return a}var i="wa_web_lang_pref",j=null,k="\ud83c\udf10",l="%F0%9F%8C%90";function m(a){if(d("WAWebRuntimeEnvironmentUtils").isWorker())return;j!=null&&c("WAWebAlarm").clearTimeout(j);var b=Date.now()+4*d("WATimeUtils").WEEK_MILLISECONDS;d("WAWebCookieManager").setCookie({name:i,value:a,path:"/",domain:d("WAWebCookieDomain").COOKIE_DOMAIN,secure:!0,expirationDate:b});j=c("WAWebAlarm").setLocalTimeout(function(){d("WALogger").LOG(h(),a),m(a)},d("WATimeUtils").castUnixTimeToMillisTime(d("WATimeUtils").futureUnixTime(2*d("WATimeUtils").WEEK_SECONDS)))}function a(){if(d("WAWebRuntimeEnvironmentUtils").isWorker())return;var a=d("WAWebCookieManager").getCookie(i);a==null?m(d("WAWebL10nGetRenderedLocale").WAWebL10nGetRenderedLocale()):m(a)}function b(){if(d("WAWebRuntimeEnvironmentUtils").isWorker()||!c("WAWebURLUtils").canMuckHistory())return;var a=self.location.href;(a.includes("/"+l+"/")||a.includes("/"+k+"/"))&&window.history.replaceState({},"","/");a=new URL(a);a.searchParams.get("locale")!=null&&(a.searchParams["delete"]("locale"),window.history.replaceState({},"",a.href))}g.setWAWebLocalePrefCookie=m;g.extendWAWebLocalePrefCookieTtl=a;g.mungeWAWebLocaleOverrideFromUrlIfNecessary=b}),98);
__d("WAWebLocalStorageUtils",["WAWebLocalStorage","WAWebUserPrefsKeys"],(function(a,b,c,d,e,f,g){function a(){return!(c("WAWebLocalStorage")==null?void 0:c("WAWebLocalStorage").getItem(d("WAWebUserPrefsKeys").KEYS.LAST_WID_MD))&&!(c("WAWebLocalStorage")==null?void 0:c("WAWebLocalStorage").getItem(d("WAWebUserPrefsKeys").KEYS.LAST_WID))}function b(){return(c("WAWebLocalStorage")==null?void 0:c("WAWebLocalStorage").getItem(d("WAWebUserPrefsKeys").KEYS.LOGOUT_DIRTY_BIT))==="1"}g.isUserLoggedOut=a;g.isLogoutDirtyBitSet=b}),98);
__d("WAWebWAWCInit",["WAWebWAWCStorage"],(function(a,b,c,d,e,f,g){function a(){return c("WAWebWAWCStorage").openDB()}g.initWAWC=a}),98);
__d("WAWebHandlePreviousLogout",["WALogger","WAWebIndexedDBPurge","WAWebLocalStorage","WAWebLocalStorageUtils","WAWebLogoutReason","WAWebPonyfillsUrlSearchParams","WAWebURLUtils","WAWebWAWCInit","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Preemptive db delete failed with error ",""]);h=function(){return a};return a}function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WAWebLocalStorageUtils").isLogoutDirtyBitSet(),e=d("WAWebLocalStorageUtils").isUserLoggedOut();if(a||e)try{yield d("WAWebIndexedDBPurge").deleteAllIdb(),yield d("WAWebWAWCInit").initWAWC()}catch(a){d("WALogger").ERROR(h(),a).tags("app-wrapper")}e=b("WAWebPonyfillsUrlSearchParams");e=new e((e=window.location.search)!=null?e:"");a&&(c("WAWebLocalStorage")==null?void 0:c("WAWebLocalStorage").clear(),e.set("post_logout","1"),window.location.href=window.location.pathname+"?"+e.toString());a=e.get("logout_reason");a!=null&&d("WAWebLogoutReason").setPrevLogoutReasonCode(a);var f=e.get("logout_message_header"),g=e.get("logout_message_subtext");(f!=null||g!=null)&&d("WAWebLogoutReason").setPrevCustomLogoutMessage({logoutMessageHeader:f,logoutMessageSubtext:g});f=e.get("post_logout")==="1";(f||a!=null)&&(c("WAWebURLUtils").canMuckHistory()&&window.history.replaceState({},document.title,"/"))});return i.apply(this,arguments)}g.handlePreviousLogoutFailures=a}),98);
__d("WAWebInfraErrorLogger",["ErrorPubSub","WALogger","WALoggerUtils","justknobx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[ErrorPubSub] ",""]);i=function(){return a};return a}var j=[{partialMessage:'Converting to a string will drop content data. Hash="undefined"'}],k=["ONUNHANDLEDREJECTION","ONERROR","PROMISE_DONE","REACT_FIBER","DEPRECATED"];function l(a,b){return k.includes(b)?!0:j.some(function(b){b=b.partialMessage;return String(a).includes(b)})}function a(){var a=c("justknobx")._("860");if(a===0)return;var b=d("WALoggerUtils").dynamicLoggingSampling(a/100);(h||(h=c("ErrorPubSub"))).addListener(function(a,c){c=l(a.message,c);c||d("WALogger").ERROR(i(),a.message).sendLogs("[ErrorPubSub] "+a.message,{sampling:b}).tags("ErrorPubSub")})}g.addListenerToErrorPubSub=a}),98);
__d("WAWebLodashMemoizeCache",["WAMemoizeCache","lodash"],(function(a,b,c,d,e,f,g){function a(){c("lodash").memoize.Cache=d("WAMemoizeCache").MemoizeCache}g.setupLodashMemoizeCache=a}),98);
__d("WAWebLoggerOnError",["WALogger","WAWebCrashlog","WAWebLoggerImpl","WAWebMiscErrors","WAWebNoop","WAWebUim","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["UIM Print Failed!"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Ignored Error: ",""]);i=function(){return a};return a}var j=[{partialMsg:"webpackJsonp is not defined"},{partialMsg:"WUPE is not defined"},{partialMsg:"spectrum is not a function"},{partialMsg:"evaluating 'document.getElementsByClassName('_3B9bf')"},{partialMsg:"onWebLoad is not defined"}],k=[{partialUserAgent:"Chrome",partialMsg:"ResizeObserver loop limit exceeded"},{partialUserAgent:"",partialMsg:"Failed to execute 'put' on 'Cache'"}],l=[{partialUserAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.113 Safari/537.36",partialMsg:"Cannot read property 'style' of null"},{partialUserAgent:"Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.78 Safari/537.36",partialMsg:"Unexpected token :"},{partialUserAgent:"Firefox/52.0,,Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.4) Gecko/20100101 Firefox/52.0",partialMsg:"Cannot read property 'style' of undefined"},{partialUserAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.1.1 Safari/605.1.15",partialMsg:"is not an object"},{partialUserAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.113 Safari/537.36",partialMsg:"Cannot read property 'getElementsByTagName' of undefined"},{partialUserAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36",partialMsg:"Can't find variable: dismissKeyboard"},{partialUserAgent:"Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.78 Safari/537.36",partialMsg:"ReferenceError: None is not defined"},{partialUserAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.113 Safari/537.36",partialMsg:"Cannot read properties of null (reading 'style')"},{partialUserAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.113 Safari/537.36",partialMsg:"Cannot read properties of undefined (reading 'getElementsByTagName')"},{partialUserAgent:"Chrome/60.0.3112.113",partialMsg:"Cannot read properties of null (reading 'removeChild')"},{partialUserAgent:"Chrome/60.0.3112.113",partialMsg:"Cannot read properties of undefined (reading 'isSettingDark')"}],m=window.navigator.userAgent;function n(a){var b=[d("WAWebMiscErrors").DbOnLogoutAbort,d("WAWebMiscErrors").DbClosedOnTakeover,d("WAWebMiscErrors").DbNotFoundOnTakeover];return!b.some(function(b){return a instanceof b})}function o(a){var b=[].concat(k);c("gkx")("26258")&&b.push.apply(b,l);return b.some(function(b){var c=b.partialUserAgent;b=b.partialMsg;return m.includes(c)&&String(a).includes(b)})}function p(a,b){var c=j.some(function(b){b=b.partialMsg;return String(a).includes(b)});return c?c:b instanceof Error&&b.stack!=null&&b.stack.includes("evalmachine.<anonymous>")}function q(a){return a instanceof Error&&a.stack!=null&&a.stack.includes("chrome-extension://")}function a(a,b,e,f,g){if(o(a)){d("WALogger").WARN(i(),a||(g||"").toString());return!0}try{d("WAWebUim").UIM.pprint(!0)}catch(a){d("WALogger").WARN(h()).devConsole(a)}b=b.split("?")[0];b&&typeof e==="number"?e=" ("+b+":"+e+":"+f+")":b?e=" ("+b+")":e="";if(a==="Script error."&&!g){d("WAWebLoggerImpl").Logger.logUncaughtError(e+" "+a);b&&d("WAWebCrashlog").upload({reason:"script-error",hasTaggedMessage:!0,sendLogsType:d("WALogger").SendLogsType.UNCAUGHT_EXCEPTION});return!1}f=g instanceof Error&&g.stack?g:""+(a||"Given: "+String(g));e=d("WAWebLoggerImpl").Logger.logUncaughtError(f);if(!n(g))return c("gkx")("26258");if(p(a,g)||q(g))return c("gkx")("26258");d("WAWebCrashlog").upload({reason:e,hasTaggedMessage:!0,sendLogsType:d("WALogger").SendLogsType.UNCAUGHT_EXCEPTION})["catch"](c("WAWebNoop"));return c("gkx")("26258")}function b(a){var b=a.promise;a=a.reason;b=d("WAWebLoggerImpl").Logger.logUncaughtError(a,b);if(!n(a))return;d("WAWebCrashlog").upload({reason:b,hasTaggedMessage:!0,sendLogsType:d("WALogger").SendLogsType.UNHANDLED_REJECTED_PROMISE})}g.onErrorHandler=a;g.onUnhandledPromiseRejection=b}),98);
__d("WAWebPageLoadTierStats",["CometQPLPayloadStore","performance"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=i(),b=j(),c={},d={cache_count:0,cache_rate:0,decoded_body_size:0,encoded_body_size:0,total_count:0,transfer_size:0};for(var a=a,e=Array.isArray(a),f=0,a=e?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=a.length)break;g=a[f++]}else{f=a.next();if(f.done)break;g=f.value}g=g;var h=g.refs;g=g.url;g=b.get(k(g));if(!g)continue;d.decoded_body_size+=g.decodedBodySize;d.encoded_body_size+=g.encodedBodySize;d.transfer_size+=+g.transferSize;d.total_count+=1;+g.transferSize===0&&(d.cache_count+=1);for(var h=h,l=Array.isArray(h),m=0,h=l?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n;if(l){if(m>=h.length)break;n=h[m++]}else{m=h.next();if(m.done)break;n=m.value}n=n;var o=n+"_start";n=n+"_end";c[o]=Math.min(g.requestStart,(o=c[o])!=null?o:Number.POSITIVE_INFINITY);c[n]=Math.max(g.responseEnd,(o=c[n])!=null?o:Number.NEGATIVE_INFINITY)}}d.total_count>0&&(d.cache_rate=Math.round(d.cache_count/d.total_count*100));return[c,d]}function i(){var a=d("CometQPLPayloadStore").getPayloadMap();if(!a)return[];a=Object.values(a).at(0);return!a?[]:Object.values(a)}function j(){var a=new Map();if(typeof (h||(h=c("performance"))).getEntriesByType==="function"){var b=(h||(h=c("performance"))).getEntriesByType("resource");b.forEach(function(b){var c=k(b.name);a.set(c,b)})}return a}function k(a){return a.split("#")[0]}g.getTierStats=a}),98);
__d("WAWebWebcPageLoad2WamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebcPageLoad2:[5392,{webcPageLoadId:[1,d("WAWebWamCodegenUtils").TYPES.STRING]},[1,1,1],"regular"]},{WebcPageLoad2:[]});g.WebcPageLoad2WamEvent=a}),98);
__d("WAWebPageLoadLoggingImpl",["WALogger","WAQplTypes","WAWebABProps","WAWebEncryptedRid","WAWebPageLoadLogging","WAWebPageLoadTierStats","WAWebPonyfillsCryptoRandomUUID","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebUserPrefsKeys","WAWebUserPrefsMultiDevice","WAWebUserPrefsStore","WAWebWamPageLoadReporter","WAWebWamUtils","WAWebWebcPageLoad2WamEvent"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[page load] "," qpl: "," wam: "," diff: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[page load] validation finished"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[page load] validation failed"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[page load] validating qpl and wam data"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[page load] missing completion marker for "," after ","ms"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[page load] no navigation timing entry"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[page load] "," not started"]);n=function(){return a};return a}var o,p=!1,q={socket_error_count:0},r=c("WAWebPonyfillsCryptoRandomUUID")();function s(){o==null&&!p&&(o=d("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.PAGE_LOAD,{timestamp:0}));return o}function t(a,b){var c=s();if(c==null)return;if(d("WAWebUserPrefsMultiDevice").isRegistered()){var e=d("WAWebEncryptedRid").getEncryptedRid();e!=null&&y({encrypted_rid:e})}y({qr_screen:a,qr_screen_experience:b!=null?b:-1,is_foreground:!document.hidden,page_load_id:r});B(c);C(c);c.annotate(A(q));c.end(d("WAQplTypes").QuickLogActionType.SUCCESS);new(d("WAWebWebcPageLoad2WamEvent").WebcPageLoad2WamEvent)({webcPageLoadId:r}).commit();o=null;p=!0;F();d("WAWebABProps").getABPropConfigValue("webc_page_load_early_commit_enabled")&&d("WAWebWamPageLoadReporter").logWamPageLoad();self.setTimeout(d("WAWebWamUtils").forceFlushAllWamAndQplBuffers,1e4)}var u=new Set();function v(a){var b;(b=s())==null?void 0:b.addPoint(a+"_start");u.add(a)}function w(a){var b;if(!u.has(a)){d("WALogger").WARN(n(),a);return}(b=s())==null?void 0:b.addPoint(a+"_end");u["delete"](a)}function x(a){var b,c=Math.floor(self.performance.now());E(a,{qpl:c});(b=s())==null?void 0:b.addPoint(a,{timestamp:c})}function y(a){q=babelHelpers["extends"]({},q,a)}function z(){q.socket_error_count++}function A(a){var b={},c=Object.keys(a);for(var d=0;d<c.length;d++){var e=c[d],f=a[e];typeof f==="boolean"?(b.bool==null&&(b.bool={}),b.bool[e]=f):typeof f==="number"?(b["int"]==null&&(b["int"]={}),b["int"][e]=f):typeof f==="string"&&(b.string==null&&(b.string={}),b.string[e]=f)}return b}function B(a){var b;if(a==null)return;b=(b=window)==null?void 0:(b=b.performance)==null?void 0:b.getEntriesByType("navigation")[0];if(b==null){d("WALogger").WARN(m());return}a.addPoint("request_start",{timestamp:b.requestStart});a.addPoint("response_end",{timestamp:b.responseEnd});a.addPoint("dom_complete",{timestamp:b.domComplete})}function C(a){if(a==null)return;var b=d("WAWebPageLoadTierStats").getTierStats(),c=b[0];b=b[1];y(babelHelpers["extends"]({},b));b=["tierOne_start","tierTwo_start","tierThree_start","tierOne_end","tierTwo_end","tierThree_end"];for(var e=0;e<b.length;e++){var f=b[e];if(c[f]){var g=c[f];a.addPoint(f,{timestamp:g})}}}var D={wamComplete:!1,qplComplete:!1,timestamps:new Map()};function E(a,b){var c=D.timestamps.get(a);c==null&&(c={},D.timestamps.set(a,c));c.qpl==null&&b.qpl!=null&&(c.qpl=b.qpl);c.wam==null&&b.wam!=null&&(c.wam=b.wam)}function F(){D.qplComplete=!0,K()}function G(){D.wamComplete=!0,K()}var H=20,I=9e4,J=null;function K(){if(!(D.wamComplete&&D.qplComplete)){J==null&&(J=self.setTimeout(function(){var a=D.wamComplete?"qpl":"wam",b="page-load-validation-missing-"+a;if(a==="wam"){var c=d("WAWebWamPageLoadReporter").getWamPageLoadTimingCompletion(),e=c.uiTimingComplete;c=c.wsTimingComplete;!e&&!c?b+="-incomplete-both-timings":!e?b+="-incomplete-ui-timing":!c?b+="-incomplete-ws-timing":b+="-completed-timings"}d("WALogger").ERROR(l(),a,I).sendLogs(b,{sampling:.01})},I));return}J!=null&&(self.clearTimeout(J),J=null);d("WALogger").DEV(k());var a=!1;for(var b=D.timestamps.entries(),c=Array.isArray(b),e=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(c){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;var g=f[0];f=f[1];var m=f.qpl;f=f.wam;m!=null&&f!=null&&(Math.abs(m-f)>H&&(d("WALogger").LOG(h(),g,m,f,Math.abs(m-f)),a=!0))}a&&d("WALogger").WARN(j()).sendLogs("page-load-validation",{sampling:.01});d("WALogger").DEV(i())}function a(){return null;return c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").UserPrefs.PageLoadDebug)!==!0?null:self.performance}function b(){d("WAWebPageLoadLogging").setImpl({endPageLoadQpl:t,endPageLoadQplMeasure:w,startPageLoadQplMeasure:v,addPageLoadQplPoint:x,addPageLoadQplAnnotation:y,incrementPageLoadQplSocketError:z,addPageLoadValidationData:E,setWamCompleteForValidation:G,PAGE_LOAD_ID:r})}g.setPageLoadLoggingImpl=b}),98);
__d("WAWebCollectionVersionStore",["WAWebSchemaCollectionVersion"],(function(a,b,c,d,e,f,g){a=function(){function a(){}var b=a.prototype;b.get=function(a){return d("WAWebSchemaCollectionVersion").getCollectionVersionTable().get(a)};b.bulkGet=function(a){return d("WAWebSchemaCollectionVersion").getCollectionVersionTable().bulkGet(a)};b.getAll=function(){return d("WAWebSchemaCollectionVersion").getCollectionVersionTable().all()};b.update=function(a,b){return d("WAWebSchemaCollectionVersion").getCollectionVersionTable().createOrMerge(a,babelHelpers["extends"]({collection:a},b))};b.bulkUpdate=function(a){return d("WAWebSchemaCollectionVersion").getCollectionVersionTable().bulkCreateOrMerge(a)};b.clear=function(){return d("WAWebSchemaCollectionVersion").getCollectionVersionTable().clear()};return a}();a.locks=["collection-version"];g.WAWebCollectionVersionStore=a}),98);
__d("WAWebMissingKeyStore",["WAWebSchemaMissingKeys","WAWebSyncdDb"],(function(a,b,c,d,e,f,g){a=function(){function a(){}var b=a.prototype;b.getAll=function(){return d("WAWebSyncdDb").getAllMissingKeys()};b.bulkGet=function(a){return d("WAWebSyncdDb").bulkGetMissingKeys(a)};b.count=function(){return d("WAWebSyncdDb").getMissingKeyCount()};b.bulkUpdate=function(a){return d("WAWebSyncdDb").createOrUpdateMissingKeys(a)};b.bulkRemove=function(a){return d("WAWebSyncdDb").bulkRemoveMissingKeys(a)};b.clear=function(){return d("WAWebSchemaMissingKeys").getMissingKeysTable().clear()};return a}();a.locks=["missing-keys"];g.WAWebMissingKeyStore=a}),98);
__d("WAWebPendingMutationStore",["WAWebNoop","WAWebSchemaPendingMutations","WAWebSyncdDb","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){a=function(){function a(){}var e=a.prototype;e.getByCollection=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSyncdDb").getPendingMutationsRows(["collection"],a));return a.map(d("WAWebSchemaPendingMutations").convertToPendingMutationFromRow)});function c(b){return a.apply(this,arguments)}return c}();e.getAll=function(){return d("WAWebSyncdDb").getAllPendingMutationsRows()};e.bulkCreate=function(a){return d("WAWebSyncdDb").appendPendingMutationsRows(a).then(c("WAWebNoop"))};e.bulkRemove=function(a){return d("WAWebSyncdDb").bulkRemovePendingMutations(a)};e.clear=function(){return d("WAWebSchemaPendingMutations").getPendingMutationsTable().clear()};return a}();a.locks=["pending-mutations"];g.WAWebPendingMutationStore=a}),98);
__d("WAWebSyncActionStore",["WAWebSchemaSyncActions","WAWebSyncdDb","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){a=function(){function a(){}var c=a.prototype;c.count=function(){return d("WAWebSchemaSyncActions").getSyncActionsTable().count()};c.get=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSyncdDb").getSyncAction(a));return a==null?null:d("WAWebSchemaSyncActions").convertToSyncActionFromRow(a)});function c(b){return a.apply(this,arguments)}return c}();c.getByCollections=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSyncdDb").getSyncActionsRows(["collection"],a.map(function(a){return a})));return a.map(d("WAWebSchemaSyncActions").convertToSyncActionFromRow)});function c(b){return a.apply(this,arguments)}return c}();c.getByIndexMacs=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSyncdDb").getSyncActionsRows(["indexMac"],a.map(function(a){return a})));return a.map(d("WAWebSchemaSyncActions").convertToSyncActionFromRow)});function c(b){return a.apply(this,arguments)}return c}();c.getByActionStates=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSyncdDb").getSyncActionsRows(["actionState"],a.map(function(a){return a})));return a.map(d("WAWebSchemaSyncActions").convertToSyncActionFromRow)});function c(b){return a.apply(this,arguments)}return c}();c.getByModelInfos=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebSyncdDb").getSyncActionsRows(["modelId","modelType","actionState"],a.map(function(a){return a})));return a.map(d("WAWebSchemaSyncActions").convertToSyncActionFromRow)});function c(b){return a.apply(this,arguments)}return c}();c.getAll=function(){return d("WAWebSchemaSyncActions").getSyncActionsTable().all().then(function(a){return a.map(d("WAWebSchemaSyncActions").convertToSyncActionFromRow)})};c.bulkSet=function(a){return d("WAWebSyncdDb").setSyncActionRows(a.map(d("WAWebSchemaSyncActions").convertFromSyncActionToRow))};c.bulkUpdate=function(a){return d("WAWebSyncdDb").updateSyncActionRows(a.map(d("WAWebSchemaSyncActions").convertFromSyncActionToRow))};c.bulkRemove=function(a){return d("WAWebSyncdDb").deleteSyncActionRows(a)};c.clear=function(){return d("WAWebSchemaSyncActions").getSyncActionsTable().clear()};return a}();a.locks=["sync-actions"];g.WAWebSyncActionStore=a}),98);
__d("WAWebSyncKeyStore",["WAWebNoop","WAWebSchemaSyncKeys","WAWebSyncdDb"],(function(a,b,c,d,e,f,g){a=function(){function a(){}var b=a.prototype;b.get=function(a){return d("WAWebSyncdDb").getSyncKey(a)};b.getAll=function(){return d("WAWebSyncdDb").getAllSyncKeys()};b.set=function(a){return d("WAWebSyncdDb").createSyncKey(a).then(c("WAWebNoop"))};b.expire=function(a){return d("WAWebSyncdDb").expireSyncKey(a)};b.clear=function(){return d("WAWebSchemaSyncKeys").getSyncKeysTable().clear()};return a}();a.locks=["sync-keys"];g.WAWebSyncKeyStore=a}),98);
__d("WAWebRunInTransaction",["Promise","WAWeb-dexie","WAWebCollectionVersionStore","WAWebMissingKeyStore","WAWebModelStorageUtils","WAWebPendingMutationStore","WAWebSyncActionStore","WAWebSyncKeyStore","err"],(function(a,b,c,d,e,f,g){var h,i={SyncActionStore:d("WAWebSyncActionStore").WAWebSyncActionStore,CollectionVersionStore:d("WAWebCollectionVersionStore").WAWebCollectionVersionStore,PendingMutationStore:d("WAWebPendingMutationStore").WAWebPendingMutationStore,MissingKeyStore:d("WAWebMissingKeyStore").WAWebMissingKeyStore,SyncKeyStore:d("WAWebSyncKeyStore").WAWebSyncKeyStore};a=function(a,e){if(c("WAWeb-dexie").currentTransaction!=null)return(h||(h=b("Promise"))).reject(c("err")("Calling runInTransaction recursively. This is not allowed."));var f=Object.keys(a);a=f.flatMap(function(a){return i[a].locks});return d("WAWebModelStorageUtils").getStorage().lock(a,function(){var a={};for(var b=0;b<f.length;b++){var c=f[b];a[c]=new i[c]()}return e(a)})};g.runInTransaction=a}),98);
__d("WAWebSafari14Fix",["WALogger","WAWebUA","WAWebWAWCStorage","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["loadUserIdbForBrokenSafariVersion failed with error ",""]);h=function(){return a};return a}function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{d("WAWebUA").UA.isLocalStorageBroken&&(yield c("WAWebWAWCStorage").loadUserIdb())}catch(a){d("WALogger").WARN(h(),a)}});return i.apply(this,arguments)}g.loadUserIdbForBrokenSafariVersion=a}),98);
__d("WAWebStringPolyfills",[],(function(a,b,c,d,e,f){function a(){String.prototype.replaceAll||(String.prototype.replaceAll=function(a,b){function c(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}return Object.prototype.toString.call(a).toLowerCase()==="[object regexp]"?this.replace(a,b):this.replace(new RegExp(c(a),"g"),b)})}f.polyfillStringReplaceAll=a}),66);
__d("WAWebCollectionHandlerWamMutation",["WASyncdMetrics","WATimeUtils","WAWebMdAppStateMessageRangeWamEvent","WAWebMdBootstrapDataAppliedWamEvent","WAWebSyncdMdSyncFieldstatMeta","WAWebSyncdUtils","WAWebWamEnumMdBootstrapPayloadType","WAWebWamEnumMdBootstrapSource","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){new(d("WAWebMdAppStateMessageRangeWamEvent").MdAppStateMessageRangeWamEvent)({additionalMessagesCount:a}).commit()}function c(a,b,c){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){new(d("WAWebMdBootstrapDataAppliedWamEvent").MdBootstrapDataAppliedWamEvent)({mdBootstrapPayloadType:d("WAWebWamEnumMdBootstrapPayloadType").MD_BOOTSTRAP_PAYLOAD_TYPE.NON_CRITICAL,mdBootstrapSource:d("WAWebWamEnumMdBootstrapSource").MD_BOOTSTRAP_SOURCE.APP_STATE,mdSessionId:yield d("WAWebSyncdMdSyncFieldstatMeta").MdSyncFieldStatsMeta.getMdSessionId(),mdTimestamp:d("WATimeUtils").unixTimeMs(),mdBootstrapStepDuration:c,collection:d("WAWebSyncdUtils").collectionNameToMetric(a),usedSnapshot:b===d("WASyncdMetrics").SyncdBootstrapDataAppliedSnapshotUsed.SNAPSHOT_USED}).commit()});return h.apply(this,arguments)}g.logMetricsForMutationLength=a;g.logMetricsForDataApplied=c}),98);
__d("WAWebCollectionHandlerWamSyncUtil",["WALongInt","WASyncdConst","WATimeUtils","WAWebMdBootstrapAppStateDataDownloadedWamEvent","WAWebSyncdMdSyncFieldstatMeta","WAWebWamEnumMdBootstrapPayloadType","WAWebWamEnumMdBootstrapStepResult","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b,c,d){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){a=new(d("WAWebMdBootstrapAppStateDataDownloadedWamEvent").MdBootstrapAppStateDataDownloadedWamEvent)({mdBootstrapPayloadType:[d("WASyncdConst").CollectionName.CriticalBlock,d("WASyncdConst").CollectionName.CriticalUnblockLow].includes(a)?d("WAWebWamEnumMdBootstrapPayloadType").MD_BOOTSTRAP_PAYLOAD_TYPE.CRITICAL:d("WAWebWamEnumMdBootstrapPayloadType").MD_BOOTSTRAP_PAYLOAD_TYPE.NON_CRITICAL,mdTimestamp:d("WATimeUtils").unixTimeMs(),mdBootstrapStepDuration:d("WATimeUtils").unixTimeMs()-b,mdBootstrapStepResult:e==="success"?d("WAWebWamEnumMdBootstrapStepResult").MD_BOOTSTRAP_STEP_RESULT.SUCCESS:d("WAWebWamEnumMdBootstrapStepResult").MD_BOOTSTRAP_STEP_RESULT.FAILURE,mdSessionId:yield d("WAWebSyncdMdSyncFieldstatMeta").MdSyncFieldStatsMeta.getMdSessionId()});b=(yield d("WAWebSyncdMdSyncFieldstatMeta").MdSyncFieldStatsMeta.getStorageEstimation());b.mdStorageQuotaBytes!==d("WAWebSyncdMdSyncFieldstatMeta").STORAGE_QUOTA_UNAVAILABLE&&(a.mdStorageQuotaUsedBytes=b.mdStorageQuotaUsedBytes,a.mdStorageQuotaBytes=b.mdStorageQuotaBytes);try{e=d("WALongInt").maybeNumberOrThrowIfTooLarge(c);e!=null&&(a.mdBootstrapPayloadSize=e)}catch(a){}a.commit()});return h.apply(this,arguments)}g.commitBootstrapAppStateDownloadMetric=a}),98);
__d("WAWebSyncdMetricCriticalBootstrapStageListener",["WASyncdMetricCriticalBootstrapStage","WAWebCollectionHandlerWamMutation","WAWebSyncdCriticalBootstrapProcessingApi","WAWebWamEnumBootstrapAppStateDataStageCode"],(function(a,b,c,d,e,f,g){function a(a){var b=a.stage;a=a.annotations;if(b!=="SUCCESS")return;b=d("WASyncdMetricCriticalBootstrapStage").convertSyncdDecryptMutationsMetricsFromAnnotations(a);if(b==null)return;b.decryptedMutationMessageRangeCountArray.forEach(function(a){return d("WAWebCollectionHandlerWamMutation").logMetricsForMutationLength(a)})}function b(a){if(a.stage!=="SUCCESS")return;a=d("WASyncdMetricCriticalBootstrapStage").convertSyncdCriticalBootstrapStageFromAnnotations(a.annotations);if(a==null)return;d("WAWebSyncdCriticalBootstrapProcessingApi").logCriticalBootstrapStageIfNecessary(h(a.type))}function h(a){switch(a){case d("WASyncdMetricCriticalBootstrapStage").SyncdCriticalBootstrapStageType.ABOUT_TO_APPLY_MUTATIONS:return d("WAWebWamEnumBootstrapAppStateDataStageCode").BOOTSTRAP_APP_STATE_DATA_STAGE_CODE.ABOUT_TO_APPLY_MUTATIONS;case d("WASyncdMetricCriticalBootstrapStage").SyncdCriticalBootstrapStageType.APPLIED_MUTATIONS:return d("WAWebWamEnumBootstrapAppStateDataStageCode").BOOTSTRAP_APP_STATE_DATA_STAGE_CODE.APPLIED_MUTATIONS;case d("WASyncdMetricCriticalBootstrapStage").SyncdCriticalBootstrapStageType.MUTATIONS_DECRYPTED:return d("WAWebWamEnumBootstrapAppStateDataStageCode").BOOTSTRAP_APP_STATE_DATA_STAGE_CODE.MUTATIONS_DECRYPTED;case d("WASyncdMetricCriticalBootstrapStage").SyncdCriticalBootstrapStageType.REQUEST_BUILT:return d("WAWebWamEnumBootstrapAppStateDataStageCode").BOOTSTRAP_APP_STATE_DATA_STAGE_CODE.REQUEST_BUILT;case d("WASyncdMetricCriticalBootstrapStage").SyncdCriticalBootstrapStageType.RESPONSE_RECEIVED:return d("WAWebWamEnumBootstrapAppStateDataStageCode").BOOTSTRAP_APP_STATE_DATA_STAGE_CODE.RESPONSE_RECEIVED;case d("WASyncdMetricCriticalBootstrapStage").SyncdCriticalBootstrapStageType.RESPONSE_PARSED_VALID:return d("WAWebWamEnumBootstrapAppStateDataStageCode").BOOTSTRAP_APP_STATE_DATA_STAGE_CODE.RESPONSE_PARSED_VALID;case d("WASyncdMetricCriticalBootstrapStage").SyncdCriticalBootstrapStageType.ENTERED_RETRY_MODE:return d("WAWebWamEnumBootstrapAppStateDataStageCode").BOOTSTRAP_APP_STATE_DATA_STAGE_CODE.ENTERED_RETRY_MODE;case d("WASyncdMetricCriticalBootstrapStage").SyncdCriticalBootstrapStageType.MISSING_KEYS_RECEIVED:return d("WAWebWamEnumBootstrapAppStateDataStageCode").BOOTSTRAP_APP_STATE_DATA_STAGE_CODE.MISSING_KEYS_RECEIVED}}g.syncdDecryptMutationsMetricsLogger=a;g.syncdCriticalBootstrapStageLogger=b}),98);
__d("WAWebSyncdMetricFatalErrorListener",["WASyncdMetricFatalError","WAWebSyncdUploadFatalErrorMetric","WAWebWamEnumMdSyncdFatalErrorCode"],(function(a,b,c,d,e,f,g){function a(a){var b=a.stage;a=a.annotations;if(b!=="FAIL")return;b=d("WASyncdMetricFatalError").convertSyncdFatalErrorFromAnnotations(a);if(b==null){d("WAWebSyncdUploadFatalErrorMetric").uploadFatalErrorMetric(d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.UNKNOWN,null);return}d("WAWebSyncdUploadFatalErrorMetric").uploadFatalErrorMetric(h(b.type),b.collection==null?null:b.collection,b.patchSnapshotMutationCount==null?void 0:b.patchSnapshotMutationCount,b.patchVersion==null?void 0:b.patchVersion,b.isFatal==null?void 0:b.isFatal,b.isLtHashConsistent==null?void 0:b.isLtHashConsistent,b.macFatalCollectionNameMismatch==null?void 0:b.macFatalCollectionNameMismatch,b.macFatalCurrentLthashMismatch==null?void 0:b.macFatalCurrentLthashMismatch,b.macFatalNewLthashMismatch==null?void 0:b.macFatalNewLthashMismatch,b.macFatalPatchVersionMismatch==null?void 0:b.macFatalPatchVersionMismatch,b.macFatalNewLthashSubtractMismatch==null?void 0:b.macFatalNewLthashSubtractMismatch,b.macFatalNumberHasOverrideMutation==null?void 0:b.macFatalNumberHasOverrideMutation,b.macFatalNumberNumAddMutation==null?void 0:b.macFatalNumberNumAddMutation,b.macFatalNumberNumRemoveMutation==null?void 0:b.macFatalNumberNumRemoveMutation,b.macFatalSenderCurrentLthashToLocalCalculatedCurrentLthashMismatch==null?void 0:b.macFatalSenderCurrentLthashToLocalCalculatedCurrentLthashMismatch,b.isPatchSenderPrimary==null?void 0:b.isPatchSenderPrimary,b.macFatalDidUseMacFetchFallback==null?void 0:b.macFatalDidUseMacFetchFallback,b.macFatalHasMissingRemove==null?void 0:b.macFatalHasMissingRemove,b.macFatalNumberAddMismatch==null?void 0:b.macFatalNumberAddMismatch,b.macFatalNumberRemoveMismatch==null?void 0:b.macFatalNumberRemoveMismatch,b.macFatalDidPreviousPatchFailPostSaveValidation==null?void 0:b.macFatalDidPreviousPatchFailPostSaveValidation,b.macFatalPreviousPatchNewLthashToCurrentPatchCurrentLthash==null?void 0:b.macFatalPreviousPatchNewLthashToCurrentPatchCurrentLthash,b.isPreviousPatchAnIncomingPatch==null?void 0:b.isPreviousPatchAnIncomingPatch,b.isLastPatchSenderAPrimaryDevice==null?void 0:b.isLastPatchSenderAPrimaryDevice,b.isSenderIndexSameAsPreviousSenderIndex==null?void 0:b.isSenderIndexSameAsPreviousSenderIndex,b.didBootstrapFromSnapshot==null?void 0:b.didBootstrapFromSnapshot,b.isThereAnotherSyncdCompanion==null?void 0:b.isThereAnotherSyncdCompanion)}function h(a){switch(a){case d("WASyncdMetricFatalError").SyncdFatalErrorType.PATCH_PROTOBUF_SERIALIZATION_FAILED:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.PATCH_PROTOBUF_SERIALIZATION_FAILED;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MUTATIONS_PROTOBUF_SERIALIZATION_FAILED:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MUTATIONS_PROTOBUF_SERIALIZATION_FAILED;case d("WASyncdMetricFatalError").SyncdFatalErrorType.ACTION_DATA_PROTOBUF_SERIALIZATION_FAILED:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.ACTION_DATA_PROTOBUF_SERIALIZATION_FAILED;case d("WASyncdMetricFatalError").SyncdFatalErrorType.ENCRYPTION_FAILED:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.ENCRYPTION_FAILED;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_SNAPSHOT_VERSION:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MISSING_SNAPSHOT_VERSION;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_SNAPSHOT_MAC:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MISSING_SNAPSHOT_MAC;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_SNAPSHOT_KEY_ID:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MISSING_SNAPSHOT_KEY_ID;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_PATCH_VERSION:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MISSING_PATCH_VERSION;case d("WASyncdMetricFatalError").SyncdFatalErrorType.PATCH_WITH_BOTH_INLINE_AND_EXTERNAL_MUTATIONS:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.PATCH_WITH_BOTH_INLINE_AND_EXTERNAL_MUTATIONS;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_PATCH_SNAPSHOT_MAC:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MISSING_PATCH_SNAPSHOT_MAC;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_PATCH_MAC:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MISSING_PATCH_MAC;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_PATCH_KEY_ID:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MISSING_PATCH_KEY_ID;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_EXTERNAL_BLOB_REFERENCE_MEDIA_KEY:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MISSING_EXTERNAL_BLOB_REFERENCE_MEDIA_KEY;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_EXTERNAL_BLOB_REFERENCE_DIRECT_PATH:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MISSING_EXTERNAL_BLOB_REFERENCE_DIRECT_PATH;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_EXTERNAL_BLOB_REFERENCE_FILE_SHA256:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MISSING_EXTERNAL_BLOB_REFERENCE_FILE_SHA256;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_EXTERNAL_BLOB_REFERENCE_FILE_ENC_SHA256:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MISSING_EXTERNAL_BLOB_REFERENCE_FILE_ENC_SHA256;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_MUTATION_OPERATION:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MISSING_MUTATION_OPERATION;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_MUTATION_RECORD:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MISSING_MUTATION_RECORD;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_MUTATION_INDEX:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MISSING_MUTATION_INDEX;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_MUTATION_VALUE:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MISSING_MUTATION_VALUE;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_MUTATION_KEY_ID:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MISSING_MUTATION_KEY_ID;case d("WASyncdMetricFatalError").SyncdFatalErrorType.EXTERNAL_BLOB_REFERENCE_PROTOBUF_DESERIALIZATION_FAILED:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.EXTERNAL_BLOB_REFERENCE_PROTOBUF_DESERIALIZATION_FAILED;case d("WASyncdMetricFatalError").SyncdFatalErrorType.SNAPSHOT_PROTOBUF_DESERIALIZATION_FAILED:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.SNAPSHOT_PROTOBUF_DESERIALIZATION_FAILED;case d("WASyncdMetricFatalError").SyncdFatalErrorType.PATCH_PROTOBUF_DESERIALIZATION_FAILED:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.PATCH_PROTOBUF_DESERIALIZATION_FAILED;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MUTATIONS_PROTOBUF_DESERIALIZATION_FAILED:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MUTATIONS_PROTOBUF_DESERIALIZATION_FAILED;case d("WASyncdMetricFatalError").SyncdFatalErrorType.ACTION_DATA_PROTOBUF_DESERIALIZATION_FAILED:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.ACTION_DATA_PROTOBUF_DESERIALIZATION_FAILED;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_ACTION_INDEX:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MISSING_ACTION_INDEX;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_ACTION_VERSION:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MISSING_ACTION_VERSION;case d("WASyncdMetricFatalError").SyncdFatalErrorType.SNAPSHOT_MAC_MISMATCH_IN_SNAPSHOT:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.SNAPSHOT_MAC_MISMATCH_IN_SNAPSHOT;case d("WASyncdMetricFatalError").SyncdFatalErrorType.SNAPSHOT_MAC_MISMATCH_IN_PATCH:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.SNAPSHOT_MAC_MISMATCH_IN_PATCH;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MAC_MISMATCH_PATCH:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MAC_MISMATCH_PATCH;case d("WASyncdMetricFatalError").SyncdFatalErrorType.DECRYPTION_FAILED:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.DECRYPTION_FAILED;case d("WASyncdMetricFatalError").SyncdFatalErrorType.DUPLICATE_PATCH_VERSION_IN_COLLECTION:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.DUPLICATE_PATCH_VERSION_IN_COLLECTION;case d("WASyncdMetricFatalError").SyncdFatalErrorType.SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_PATCH:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_PATCH;case d("WASyncdMetricFatalError").SyncdFatalErrorType.SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_SNAPSHOT:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.SAME_INDEX_FOR_MULTIPLE_MUTATIONS_IN_SNAPSHOT;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_ACTION_VALUE:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MISSING_ACTION_VALUE;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_ACTION_TIMESTAMP:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MISSING_ACTION_TIMESTAMP;case d("WASyncdMetricFatalError").SyncdFatalErrorType.XMPP_BAD_REQUEST_FOR_COLLECTION:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.XMPP_BAD_REQUEST_FOR_COLLECTION;case d("WASyncdMetricFatalError").SyncdFatalErrorType.XMPP_NOT_FOUND_FOR_COLLECTION:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.XMPP_NOT_FOUND_FOR_COLLECTION;case d("WASyncdMetricFatalError").SyncdFatalErrorType.CYCLIC_MUTATION_DEPENDENCY_IN_PATCH:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.CYCLIC_MUTATION_DEPENDENCY_IN_PATCH;case d("WASyncdMetricFatalError").SyncdFatalErrorType.SERVER_DID_NOT_SEND_ALL_PATCHES:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.SERVER_DID_NOT_SEND_ALL_PATCHES;case d("WASyncdMetricFatalError").SyncdFatalErrorType.TERMINAL_PATCH_MISSING_DATA:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.TERMINAL_PATCH_MISSING_DATA;case d("WASyncdMetricFatalError").SyncdFatalErrorType.TERMINAL_PATCH_DESERIALIZATION_ERROR:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.TERMINAL_PATCH_DESERIALIZATION_ERROR;case d("WASyncdMetricFatalError").SyncdFatalErrorType.TERMINAL_PATCH_UNKNOWN:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.TERMINAL_PATCH_UNKNOWN;case d("WASyncdMetricFatalError").SyncdFatalErrorType.INVALID_ACTION_INDEX:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.INVALID_ACTION_INDEX;case d("WASyncdMetricFatalError").SyncdFatalErrorType.XMPP_BAD_REQUEST_GLOBAL_ERROR:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.XMPP_BAD_REQUEST_GLOBAL_ERROR;case d("WASyncdMetricFatalError").SyncdFatalErrorType.XMPP_NOT_FOUND_GLOBAL_ERROR:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.XMPP_NOT_FOUND_GLOBAL_ERROR;case d("WASyncdMetricFatalError").SyncdFatalErrorType.XMPP_BAD_METHOD_GLOBAL_ERROR:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.XMPP_BAD_METHOD_GLOBAL_ERROR;case d("WASyncdMetricFatalError").SyncdFatalErrorType.XMPP_NOT_ACCEPTABLE_GLOBAL_ERROR:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.XMPP_NOT_ACCEPTABLE_GLOBAL_ERROR;case d("WASyncdMetricFatalError").SyncdFatalErrorType.TOO_MANY_INTERNAL_SERVER_ERRORS_IN_7D:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.TOO_MANY_INTERNAL_SERVER_ERRORS_IN_7D;case d("WASyncdMetricFatalError").SyncdFatalErrorType.TIMEOUT_WHILE_WAITING_FOR_MISSING_KEY:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.TIMEOUT_WHILE_WAITING_FOR_MISSING_KEY;case d("WASyncdMetricFatalError").SyncdFatalErrorType.MISSING_KEY_ON_ALL_CLIENTS:return d("WAWebWamEnumMdSyncdFatalErrorCode").MD_SYNCD_FATAL_ERROR_CODE.MISSING_KEY_ON_ALL_CLIENTS}}g.syncdFatalErrorLogger=a}),98);
__d("WAWebSyncdQpl",["WABaseGlobals","WALogger","WAQplTypes","WASyncdMetrics","WAWebOfflineHandler","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebSyncBootstrap","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[qpl] marker ended for id ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[qpl] new marker point "," added for id ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[qpl] new annotations added for id ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[qpl] marker started with id ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[qpl] new instance key created ",""]);l=function(){return a};return a}var m=["source"];function n(a){if((a==null?void 0:a.string)==null)return;var b=a.string,c={};Object.keys(a.string).forEach(function(a){m.includes(a)||(c[a]=b[a])});a.string=c}function o(a,b){var c;if((b==null?void 0:(c=b.string)==null?void 0:c.source)==null)return a;var d=b.string;c=Object.keys(d).filter(function(a){return m.includes(a)});return[c.map(function(a){return d[a]}),a].join("_")}function p(){if(c("WAWebSyncBootstrap").isSyncDBootstrapInProcess())return"bootstrap";return!d("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete()?"offline_resume":"online"}a=function(){function a(){this.$3=p(),this.$4=d("WABaseGlobals").getConfig().syncdQPLLoggingEnabled()&&(this.$3==="bootstrap"||this.$3==="offline_resume"),this.$4&&(this.$1=d("WAWebQplQuickPerformanceLoggerModule").QPL.getNextMarkerInstanceValue(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.SYNCD)),d("WALogger").DEV(l(),this.$1)}var b=a.prototype;b.$5=function(){if(!this.$4)return!1;if(!this.$2)throw c("err")("QPL instance ${this._instanceKey} is not started");return!0};b.start=function(){if(!this.$4)return;d("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.SYNCD,{instanceKey:this.$1});this.$2=!0;this.annotate({when:this.$3});d("WALogger").DEV(k(),this.$1)};b.annotate=function(a){if(!this.$5())return;a=d("WASyncdMetrics").constructAnnotationsFromContext(a);n(a);a&&(d("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.SYNCD,a,{instanceKey:this.$1}),d("WALogger").DEV(j(),this.$1))};b.mark=function(a,b){if(!this.$5())return;b=d("WASyncdMetrics").constructAnnotationsFromContext(b);this.$6(a,b)};b.markAnnotations=function(a,b){if(!this.$5())return;this.$6(a,b)};b.$6=function(a,b){var c=o(a,b);n(b);d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.SYNCD,c,babelHelpers["extends"]({},b&&{data:b},{instanceKey:this.$1}));d("WALogger").DEV(i(),a,this.$1)};b.end=function(a){a===void 0&&(a=!1);if(!this.$5())return;this.$2=!1;d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.SYNCD,a?d("WAQplTypes").QuickLogActionType.FAIL:d("WAQplTypes").QuickLogActionType.SUCCESS,{instanceKey:this.$1});d("WALogger").DEV(h(),this.$1)};return a}();g.SyncdQPL=a}),98);
__d("WAWebWamPREListeners",["WALogger","WAPREList","WAPREMetrics","WASyncdMetrics","WASyncdWamAppState","WAWebCmd","WAWebCollectionHandlerWamMutation","WAWebCollectionHandlerWamSyncUtil","WAWebMdAppStateKeyRotationWamEvent","WAWebMdAppStateSyncDailyWamEvent","WAWebSyncdMetricCriticalBootstrapStageListener","WAWebSyncdMetricFatalErrorListener","WAWebSyncdQpl","WAWebSyncdUtils","WAWebWamEnumMdAppStateKeyRotationReasonCode","WAWebWamEnumMdSyncdCriticalEventCode"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[syncd] Unknown syncd PRE instance key: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unhandled metric event: ",""]);i=function(){return a};return a}function a(){d("WAPREMetrics").subscribe(j),d("WAWebCmd").Cmd.on("logout",d("WASyncdWamAppState").forceCommitAppState)}function j(a){var b=a.name;switch(b){case d("WAPREList").PRE_METRIC.SYNCD_FATAL_ERROR:d("WAWebSyncdMetricFatalErrorListener").syncdFatalErrorLogger(a);break;case d("WAPREList").PRE_METRIC.APP_STATE_SYNC_DAILY:q(a);break;case d("WAPREList").PRE_METRIC.SYNCD_CRITICAL_EVENT:m(a);break;case d("WAPREList").PRE_METRIC.SYNCD_CRITICAL_BOOTSTRAP_STAGE:d("WAWebSyncdMetricCriticalBootstrapStageListener").syncdCriticalBootstrapStageLogger(a);break;case d("WAPREList").PRE_METRIC.SYNCD_BOOTSTRAP_APP_STATE_DOWNLOAD:k(a);break;case d("WAPREList").PRE_METRIC.SYNCD_DECRYPT_MUTATIONS:d("WAWebSyncdMetricCriticalBootstrapStageListener").syncdDecryptMutationsMetricsLogger(a);break;case d("WAPREList").PRE_METRIC.SYNCD_BOOTSTRAP_DATA_APPLIED:l(a);break;case d("WAPREList").PRE_METRIC.SYNCD_KEY_ROTATION:o(a);break;case d("WAPREList").PRE_METRIC.SYNCD:s(a);break;case d("WAPREList").PRE_METRIC.WA_JOBS_ORCHESTRATOR:case d("WAPREList").PRE_METRIC.WA_JOB_MANAGER:default:d("WALogger").ERROR(i(),b);break}}function k(a){if(a.stage!=="FAIL"&&a.stage!=="SUCCESS")return;a=d("WASyncdMetrics").convertSyncdBootstrapAppStateDownloadFromAnnotations(a.annotations);if(a==null)return;d("WAWebCollectionHandlerWamSyncUtil").commitBootstrapAppStateDownloadMetric(a.collection,a.downloadStartTs,a.downloadSize,a.isSuccess)}function l(a){if(a.stage!=="SUCCESS")return;a=d("WASyncdMetrics").convertSyncdBootstrapDataAppliedFromAnnotations(a.annotations);if(a==null)return;d("WAWebCollectionHandlerWamMutation").logMetricsForDataApplied(a.collection,a.snapshotUsed,a.durationMs)}function m(a){if(a.stage!=="FAIL")return;a=d("WASyncdMetrics").convertSyncdCriticalEventFromAnnotations(a.annotations);if(a==null)return;d("WAWebSyncdUtils").uploadCriticalEventMetric(n(a.type),a.collection)}function n(a){switch(a){case d("WASyncdMetrics").SyncdCriticalEventType.MISSING_MUTATION_TO_REMOVE:return d("WAWebWamEnumMdSyncdCriticalEventCode").MD_SYNCD_CRITICAL_EVENT_CODE.MISSING_MUTATION_TO_REMOVE}}function o(a){if(a.stage!=="SUCCESS")return;a=d("WASyncdMetrics").convertSyncdKeyRotationEventFromAnnotations(a.annotations);if(a==null)return;new(d("WAWebMdAppStateKeyRotationWamEvent").MdAppStateKeyRotationWamEvent)({mdAppStateKeyRotationReason:p(a.type)}).commit()}function p(a){switch(a){case d("WASyncdMetrics").SyncdKeyRotationEventType.APP_STATE_SYNC_KEY_EXPIRY:return d("WAWebWamEnumMdAppStateKeyRotationReasonCode").MD_APP_STATE_KEY_ROTATION_REASON_CODE.APP_STATE_SYNC_KEY_EXPIRY;case d("WASyncdMetrics").SyncdKeyRotationEventType.DEVICE_DEREGISTERATION:return d("WAWebWamEnumMdAppStateKeyRotationReasonCode").MD_APP_STATE_KEY_ROTATION_REASON_CODE.DEVICE_DEREGISTERATION;case d("WASyncdMetrics").SyncdKeyRotationEventType.NO_KEYS:return d("WAWebWamEnumMdAppStateKeyRotationReasonCode").MD_APP_STATE_KEY_ROTATION_REASON_CODE.NO_KEYS}}function q(a){var b=a.stage;a=a.annotations;if(b!=="SUCCESS")return;b=d("WASyncdWamAppState").convertAppStateSyncDailyFromAnnotations(a||{});a=new(d("WAWebMdAppStateSyncDailyWamEvent").MdAppStateSyncDailyWamEvent)();b.mutationCount>0&&(a.mutationCount=b.mutationCount);b.invalidActionCount>0&&(a.invalidActionCount=b.invalidActionCount);b.unsupportedActionCount>0&&(a.unsupportedActionCount=b.unsupportedActionCount);b.keyRotationRemoveCount>0&&(a.keyRotationRemoveCount=b.keyRotationRemoveCount);b.storedMutationCount>0&&(a.storedMutationCount=b.storedMutationCount);b.uploadConflictCount>0&&(a.uploadConflictCount=b.uploadConflictCount);b.unsetActionCount>0&&(a.unsetActionCount=b.unsetActionCount);b.missingKeyCount>0&&(a.missingKeyCount=b.missingKeyCount);a.commit()}var r=new Map();function s(a){var b=a.instanceKey,c=a.annotations;if(a.stage==="START"){var e=new(d("WAWebSyncdQpl").SyncdQPL)();e.start();r.set(b,e);return}e=r.get(b);if(e==null){d("WALogger").ERROR(h(),b);return}switch(a.stage){case"POINT":e.markAnnotations(a.reason,c);break;case"SUCCESS":e.end();r["delete"](b);break;case"FAIL":e.end(!0);r["delete"](b);break}}g.initializePREMetrics=a}),98);
__d("WAWebWamEnumConnectionOriginType",[],(function(a,b,c,d,e,f){a=Object.freeze({PERSON:1,PUSH:2,OTHER:3,BACKOFF:4});f.CONNECTION_ORIGIN_TYPE=a}),66);
__d("WAWebWamEnumConnectionSequenceStepType",[],(function(a,b,c,d,e,f){a=Object.freeze({PUSH_OVERRIDES:1,PRIMARY:2,PUSH_FALLBACKS:4,HOST_FALLBACK:5,NO_DNS:6,SOFTLAYER:7,PRIMARY_HTTP:8,SOFTLAYER_HTTP:9,HOST_FALLBACK_HTTP:10,NO_DNS_HTTP:11});f.CONNECTION_SEQUENCE_STEP_TYPE=a}),66);
__d("WAWebWamEnumDnsResolutionMethodType",[],(function(a,b,c,d,e,f){a=Object.freeze({SYSTEM:1,GOOGLE:2,HARDCODED:3,NO_DNS:4});f.DNS_RESOLUTION_METHOD_TYPE=a}),66);
__d("WAWebWamEnumLoginDnsResolverType",[],(function(a,b,c,d,e,f){a=Object.freeze({SYSTEM:1,GOOGLE:2,HARDCODED:3,NO_DNS:4});f.LOGIN_DNS_RESOLVER_TYPE=a}),66);
__d("WAWebWamEnumLoginHostType",[],(function(a,b,c,d,e,f){a=Object.freeze({PUSH_OVERRIDES:1,G_WHATSAPP_NET:2,PUSH_FALLBACKS:3,G_FALLBACK_WHATSAPP_NET:4,HARDCODED_LIST:5,EX_WHATSAPP_NET:6});f.LOGIN_HOST_TYPE=a}),66);
__d("WAWebWamEnumLoginPortNumber",[],(function(a,b,c,d,e,f){a=Object.freeze({P5222:1,P443:2,P80:3,UNKNOWN:4});f.LOGIN_PORT_NUMBER=a}),66);
__d("WAWebWamEnumLoginResultType",[],(function(a,b,c,d,e,f){a=Object.freeze({OK:1,ERROR_UNKNOWN:2,SERVER_ERROR:3,SERVER_GOAWAY:4,NETWORK_ERROR:5,ANDROID_KEYSTORE_ERROR:6,CERTIFICATE_ERROR:7});f.LOGIN_RESULT_TYPE=a}),66);
__d("WAWebLoginWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumAndroidKeystoreStateType","WAWebWamEnumConnectionOriginType","WAWebWamEnumConnectionSequenceStepType","WAWebWamEnumDnsResolutionMethodType","WAWebWamEnumLoginDnsResolverType","WAWebWamEnumLoginHostType","WAWebWamEnumLoginPortNumber","WAWebWamEnumLoginResultType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({Login:[460,{androidKeystoreState:[10,d("WAWebWamEnumAndroidKeystoreStateType").ANDROID_KEYSTORE_STATE_TYPE],connectionOrigin:[6,d("WAWebWamEnumConnectionOriginType").CONNECTION_ORIGIN_TYPE],connectionSequenceStep:[11,d("WAWebWamEnumConnectionSequenceStepType").CONNECTION_SEQUENCE_STEP_TYPE],connectionT:[5,a.TYPES.TIMER],dnsResolutionMethod:[12,d("WAWebWamEnumDnsResolutionMethodType").DNS_RESOLUTION_METHOD_TYPE],loginDnsResolver:[13,d("WAWebWamEnumLoginDnsResolverType").LOGIN_DNS_RESOLVER_TYPE],loginIpSource:[14,d("WAWebWamEnumLoginHostType").LOGIN_HOST_TYPE],loginPort:[15,d("WAWebWamEnumLoginPortNumber").LOGIN_PORT_NUMBER],loginResolvedPop:[19,a.TYPES.STRING],loginResult:[1,d("WAWebWamEnumLoginResultType").LOGIN_RESULT_TYPE],loginT:[3,a.TYPES.TIMER],logoutSessionId:[18,a.TYPES.INTEGER],longConnect:[4,a.TYPES.BOOLEAN],noiseProtocolVersion:[16,a.TYPES.INTEGER],passive:[8,a.TYPES.BOOLEAN],pendingAcksCount:[17,a.TYPES.INTEGER],retryCount:[2,a.TYPES.INTEGER],sequenceStep:[7,a.TYPES.INTEGER],serverErrorCode:[9,a.TYPES.INTEGER]},[1,1,1],"regular"]},{Login:[]});g.LoginWamEvent=b}),98);
__d("WAWebWamWorkerSpecificEvents",["WAWebLoginWamEvent"],(function(a,b,c,d,e,f){Object.keys(importNamespace("WAWebLoginWamEvent")).forEach(function(a){if(a==="default"||a==="__esModule")return;f[a]=importNamespace("WAWebLoginWamEvent")[a]})}),null);
__d("WAWebAppInitializer.react",["WACryptoLibraryConfig","WAJids","WALogger","WAWap","WAWeb-modernizr","WAWebABPropsCache","WAWebApp.react","WAWebAppSwInitializer","WAWebBrokerBackendInterface","WAWebBuildConstants","WAWebConfig","WAWebConfigureWindowEvents","WAWebDbCallbacks","WAWebDebugSetup","WAWebDesktopUpsellUtils","WAWebEmojiKeywordToUnicode","WAWebEventSamplingCache","WAWebFeatureDetectionRedirectIfMissingCapabilities","WAWebFrontendL10nHelpers","WAWebGlobals","WAWebHandlePreviousLogout","WAWebInfraErrorLogger","WAWebInvocationInterface","WAWebLodashMemoizeCache","WAWebLogger","WAWebLoggerOnError","WAWebPageLoadLoggingImpl","WAWebQplQuickPerformanceLoggerInit","WAWebQplValuesConfig","WAWebRunInTransaction","WAWebSafari14Fix","WAWebStringPolyfills","WAWebTransitions","WAWebUA","WAWebUserPrefsMeUser","WAWebWam","WAWebWamPREListeners","WAWebWamPageLoadReporter","WAWebWamWorkerSpecificEvents","WAWebWidToJid","asyncToGeneratorRuntime","cr:9859","gkx","nullthrows","react","requireWeak","velocity-animate","velocity-animate-ui"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[app] version: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[app] bootstrap done"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[emoji-trie] EmojiKeywordToUnicode setup failed: ",", stack: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Redirect because missing required browser apis"]);l=function(){return a};return a}var m=h||(h=d("react"));e=h;var n=e.useEffect,o=e.useState;c("requireWeak")("Banzai",function(a){a.adapter.config.disabled=!0});function a(){d("WAWebStringPolyfills").polyfillStringReplaceAll();var a=o(!1),b=a[0],e=a[1];n(function(){void p().then(function(){!c("WAWebFeatureDetectionRedirectIfMissingCapabilities")()?e(!0):d("WALogger").ERROR(l()).sendLogs("missing-required-browser-apis")})},[]);return b?m.createElement(d("WAWebApp.react").App,null):null}a.displayName=a.name+" [from "+f.id+"]";function p(){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){b("cr:9859")==null?void 0:b("cr:9859")();d("WAWebLodashMemoizeCache").setupLodashMemoizeCache();d("WAWebLogger").initializeWAWebLogger();d("WAWebInfraErrorLogger").addListenerToErrorPubSub();window.onerror=d("WAWebLoggerOnError").onErrorHandler;window.onunhandledrejection=d("WAWebLoggerOnError").onUnhandledPromiseRejection;d("WAWebWamPREListeners").initializePREMetrics();yield d("WAWebHandlePreviousLogout").handlePreviousLogoutFailures();d("WAWebQplQuickPerformanceLoggerInit").initializeQpl();d("WAWebPageLoadLoggingImpl").setPageLoadLoggingImpl();d("WAWebABPropsCache").initializeABPropsCache();d("WAWebEventSamplingCache").initializeEventSamplingCache();d("WAWebWam").initWamRuntime();b("WAWebWamWorkerSpecificEvents");d("WAWebWamPageLoadReporter").exeTimer.start();d("WAWebUA").UA.isSafari&&d("WAWebUA").UA.browserVersion.startsWith("13.")&&(c("nullthrows")(document.body).className+=" text-rendering-bug-fix");b("WAWeb-modernizr");window.Velocity=b("velocity-animate");b("velocity-animate-ui");b("WAWebTransitions").registerEffects();d("WAWebInvocationInterface").set(c("WAWebBrokerBackendInterface"));d("WAWebDebugSetup").setupDebugGlobal();d("WAWebConfigureWindowEvents").configureWindowEvents();yield d("WAWebSafari14Fix").loadUserIdbForBrokenSafariVersion();try{d("WAWebEmojiKeywordToUnicode").updateEmojiTrie()}catch(a){d("WALogger").WARN(k(),a,a.stack).sendLogs("[emoji-trie] EmojiKeywordToUnicode setup failed: "+a.message)}d("WAWebFrontendL10nHelpers").extendWAWebLocalePrefCookieTtl();d("WAWebFrontendL10nHelpers").mungeWAWebLocaleOverrideFromUrlIfNecessary();d("WAWebWamPageLoadReporter").exeTimer.end();c("gkx")("26258")||d("WAWap").enableXMLFormat();void d("WAWebDesktopUpsellUtils").isWebUserOnSupportedWindowsOSForUWPAsync();var a=d("WAWebWidToJid").widToMyJids(d("WAWebUserPrefsMeUser").getMe());d("WAWebGlobals").setGlobals({config:d("WAWebConfig").ConfigImpl,jidUtils:d("WAJids").createJidUtils({platform:"whatsapp"}),myJids:a,db:d("WAWebDbCallbacks").dbCallbacks,runInTransaction:d("WAWebRunInTransaction").runInTransaction,qpl:d("WAWebQplValuesConfig").qplConfigs});d("WACryptoLibraryConfig").setCryptoLibraryConfig("signalFutureMessagesMax",d("WAWebConfig").ConfigImpl.getSignalFutureMessagesMax());void d("WAWebAppSwInitializer").initializeSw();d("WALogger").LOG(j());d("WALogger").LOG(i(),d("WAWebBuildConstants").VERSION_STR)});return q.apply(this,arguments)}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("WASmaxInGroupsGroupsDirtyNotificationRequest",["WAResultOrError","WASmaxInGroupsServerNotificationMixin","WASmaxParseJid","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function h(a){var b=d("WASmaxParseUtils").assertTag(a,"group");if(!b.success)return b;b=d("WASmaxParseJid").attrGroupJid(a,"jid");return!b.success?b:d("WAResultOrError").makeResult({jid:b.value})}function a(a){var b=d("WASmaxParseUtils").assertTag(a,"notification");if(!b.success)return b;b=d("WASmaxParseUtils").flattenedChildWithTag(a,"groups_dirty");if(!b.success)return b;var c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","w:gp2");if(!c.success)return c;var e=d("WASmaxParseJid").literalJid(d("WASmaxParseJid").attrDomainJid,a,"from","g.us");if(!e.success)return e;a=d("WASmaxInGroupsServerNotificationMixin").parseServerNotificationMixin(a);if(!a.success)return a;b=d("WASmaxParseUtils").mapChildrenWithTag(b.value,"group",1,500,h);return!b.success?b:d("WAResultOrError").makeResult(babelHelpers["extends"]({type:c.value,from:e.value},a.value,{groupsDirtyGroup:b.value}))}g.parseGroupsDirtyNotificationRequestGroupsDirtyGroup=h;g.parseGroupsDirtyNotificationRequest=a}),98);
__d("WASmaxOutGroupsGroupsDirtyNotificationResponseAck",["WASmaxJsx","WASmaxOutGroupsNotificationClientAckMixin"],(function(a,b,c,d,e,f,g){function a(a){a=d("WASmaxOutGroupsNotificationClientAckMixin").mergeNotificationClientAckMixin(d("WASmaxJsx").smax("ack",null),a);return a}g.makeGroupsDirtyNotificationResponseAck=a}),98);
__d("WASmaxGroupsGroupsDirtyNotificationRPC",["WASmaxInGroupsGroupsDirtyNotificationRequest","WASmaxOutGroupsGroupsDirtyNotificationResponseAck","WASmaxParsingFailure","WASmaxRpcUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInGroupsGroupsDirtyNotificationRequest").parseGroupsDirtyNotificationRequest(a);if(!b.success)throw new(d("WASmaxParsingFailure").SmaxParsingFailure)(d("WASmaxRpcUtils").errorMessageRpcParsing("GroupsDirtyNotification",{Request:b}));return{parsedRequest:b.value,makeGroupsDirtyNotificationResponseAck:function(){return d("WASmaxOutGroupsGroupsDirtyNotificationResponseAck").makeGroupsDirtyNotificationResponseAck(a)}}}g.receiveGroupsDirtyNotificationRPC=a}),98);
__d("WASmaxOutServerPropsBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"get"});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeBaseIQGetRequestMixin=a}),98);
__d("WASmaxOutServerPropsGetV2Request",["WASmaxJsx","WASmaxOutServerPropsBaseIQGetRequestMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(a){a=a.propsHash;a=d("WASmaxOutServerPropsBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET,xmlns:"w"},d("WASmaxJsx").smax("props",{protocol:"2",hash:d("WAWap").CUSTOM_STRING(a)})));return a}g.makeGetV2Request=a}),98);
__d("WAWebProtobufsWa6.pb",["$InternalEnum","WAProtoConst"],(function(a,b,c,d,e,f,g){c=(a=b("$InternalEnum"))({OFF:0,STANDARD:1});e=a({WHATSAPP:0,MESSENGER:1,INTEROP:2,INTEROP_MSGR:3});f=a({SYSTEM:0,GOOGLE:1,HARDCODED:2,OVERRIDE:3,FALLBACK:4});b=a({CELLULAR_UNKNOWN:0,WIFI_UNKNOWN:1,CELLULAR_EDGE:100,CELLULAR_IDEN:101,CELLULAR_UMTS:102,CELLULAR_EVDO:103,CELLULAR_GPRS:104,CELLULAR_HSDPA:105,CELLULAR_HSUPA:106,CELLULAR_HSPA:107,CELLULAR_CDMA:108,CELLULAR_1XRTT:109,CELLULAR_EHRPD:110,CELLULAR_LTE:111,CELLULAR_HSPAP:112});var h=a({PUSH:0,USER_ACTIVATED:1,SCHEDULED:2,ERROR_RECONNECT:3,NETWORK_SWITCH:4,PING_RECONNECT:5,UNKNOWN:6}),i=a({SHARE_EXTENSION:0,SERVICE_EXTENSION:1,INTENTS_EXTENSION:2}),j=a({WEB_BROWSER:0,APP_STORE:1,WIN_STORE:2,DARWIN:3,WIN32:4}),k=a({PHONE:0,TABLET:1,DESKTOP:2,WEARABLE:3,VR:4}),l=a({RELEASE:0,BETA:1,ALPHA:2,DEBUG:3});a=a({ANDROID:0,IOS:1,WINDOWS_PHONE:2,BLACKBERRY:3,BLACKBERRYX:4,S40:5,S60:6,PYTHON_CLIENT:7,TIZEN:8,ENTERPRISE:9,SMB_ANDROID:10,KAIOS:11,SMB_IOS:12,WINDOWS:13,WEB:14,PORTAL:15,GREEN_ANDROID:16,GREEN_IPHONE:17,BLUE_ANDROID:18,BLUE_IPHONE:19,FBLITE_ANDROID:20,MLITE_ANDROID:21,IGLITE_ANDROID:22,PAGE:23,MACOS:24,OCULUS_MSG:25,OCULUS_CALL:26,MILAN:27,CAPI:28,WEAROS:29,ARDEVICE:30,VRDEVICE:31,BLUE_WEB:32,IPAD:33,TEST:34,SMART_GLASSES:35});var m={},n={},o={},p={},q={},r={},s={},t={},u={},v={},w={},x={};m.internalSpec={clientHello:[2,(d=d("WAProtoConst")).TYPES.MESSAGE,p],serverHello:[3,d.TYPES.MESSAGE,o],clientFinish:[4,d.TYPES.MESSAGE,n]};n.internalSpec={"static":[1,d.TYPES.BYTES],payload:[2,d.TYPES.BYTES]};o.internalSpec={ephemeral:[1,d.TYPES.BYTES],"static":[2,d.TYPES.BYTES],payload:[3,d.TYPES.BYTES]};p.internalSpec={ephemeral:[1,d.TYPES.BYTES],"static":[2,d.TYPES.BYTES],payload:[3,d.TYPES.BYTES]};q.internalSpec={username:[1,d.TYPES.UINT64],passive:[3,d.TYPES.BOOL],userAgent:[5,d.TYPES.MESSAGE,w],webInfo:[6,d.TYPES.MESSAGE,u],pushName:[7,d.TYPES.STRING],sessionId:[9,d.TYPES.SFIXED32],shortConnect:[10,d.TYPES.BOOL],connectType:[12,d.TYPES.ENUM,b],connectReason:[13,d.TYPES.ENUM,h],shards:[14,d.FLAGS.REPEATED|d.TYPES.INT32],dnsSource:[15,d.TYPES.MESSAGE,t],connectAttemptCount:[16,d.TYPES.UINT32],device:[18,d.TYPES.UINT32],devicePairingData:[19,d.TYPES.MESSAGE,s],product:[20,d.TYPES.ENUM,e],fbCat:[21,d.TYPES.BYTES],fbUserAgent:[22,d.TYPES.BYTES],oc:[23,d.TYPES.BOOL],lc:[24,d.TYPES.INT32],iosAppExtension:[30,d.TYPES.ENUM,i],fbAppId:[31,d.TYPES.UINT64],fbDeviceId:[32,d.TYPES.BYTES],pull:[33,d.TYPES.BOOL],paddingBytes:[34,d.TYPES.BYTES],yearClass:[36,d.TYPES.INT32],memClass:[37,d.TYPES.INT32],interopData:[38,d.TYPES.MESSAGE,r],trafficAnonymization:[40,d.TYPES.ENUM,c]};r.internalSpec={accountId:[1,d.TYPES.UINT64],token:[2,d.TYPES.BYTES],enableReadReceipts:[3,d.TYPES.BOOL]};s.internalSpec={eRegid:[1,d.TYPES.BYTES],eKeytype:[2,d.TYPES.BYTES],eIdent:[3,d.TYPES.BYTES],eSkeyId:[4,d.TYPES.BYTES],eSkeyVal:[5,d.TYPES.BYTES],eSkeySig:[6,d.TYPES.BYTES],buildHash:[7,d.TYPES.BYTES],deviceProps:[8,d.TYPES.BYTES]};t.internalSpec={dnsMethod:[15,d.TYPES.ENUM,f],appCached:[16,d.TYPES.BOOL]};u.internalSpec={refToken:[1,d.TYPES.STRING],version:[2,d.TYPES.STRING],webdPayload:[3,d.TYPES.MESSAGE,v],webSubPlatform:[4,d.TYPES.ENUM,j]};v.internalSpec={usesParticipantInKey:[1,d.TYPES.BOOL],supportsStarredMessages:[2,d.TYPES.BOOL],supportsDocumentMessages:[3,d.TYPES.BOOL],supportsUrlMessages:[4,d.TYPES.BOOL],supportsMediaRetry:[5,d.TYPES.BOOL],supportsE2EImage:[6,d.TYPES.BOOL],supportsE2EVideo:[7,d.TYPES.BOOL],supportsE2EAudio:[8,d.TYPES.BOOL],supportsE2EDocument:[9,d.TYPES.BOOL],documentTypes:[10,d.TYPES.STRING],features:[11,d.TYPES.BYTES]};w.internalSpec={platform:[1,d.TYPES.ENUM,a],appVersion:[2,d.TYPES.MESSAGE,x],mcc:[3,d.TYPES.STRING],mnc:[4,d.TYPES.STRING],osVersion:[5,d.TYPES.STRING],manufacturer:[6,d.TYPES.STRING],device:[7,d.TYPES.STRING],osBuildNumber:[8,d.TYPES.STRING],phoneId:[9,d.TYPES.STRING],releaseChannel:[10,d.TYPES.ENUM,l],localeLanguageIso6391:[11,d.TYPES.STRING],localeCountryIso31661Alpha2:[12,d.TYPES.STRING],deviceBoard:[13,d.TYPES.STRING],deviceExpId:[14,d.TYPES.STRING],deviceType:[15,d.TYPES.ENUM,k],deviceModelType:[16,d.TYPES.STRING]};x.internalSpec={primary:[1,d.TYPES.UINT32],secondary:[2,d.TYPES.UINT32],tertiary:[3,d.TYPES.UINT32],quaternary:[4,d.TYPES.UINT32],quinary:[5,d.TYPES.UINT32]};g.ClientPayload$TrafficAnonymization=c;g.ClientPayload$Product=e;g.ClientPayload$DNSSource$DNSResolutionMethod=f;g.ClientPayload$ConnectType=b;g.ClientPayload$ConnectReason=h;g.ClientPayload$IOSAppExtension=i;g.ClientPayload$WebInfo$WebSubPlatform=j;g.ClientPayload$UserAgent$DeviceType=k;g.ClientPayload$UserAgent$ReleaseChannel=l;g.ClientPayload$UserAgent$Platform=a;g.HandshakeMessageSpec=m;g.HandshakeMessage$ClientFinishSpec=n;g.HandshakeMessage$ServerHelloSpec=o;g.HandshakeMessage$ClientHelloSpec=p;g.ClientPayloadSpec=q;g.ClientPayload$InteropDataSpec=r;g.ClientPayload$DevicePairingRegistrationDataSpec=s;g.ClientPayload$DNSSourceSpec=t;g.ClientPayload$WebInfoSpec=u;g.ClientPayload$WebInfo$WebdPayloadSpec=v;g.ClientPayload$UserAgentSpec=w;g.ClientPayload$UserAgent$AppVersionSpec=x}),98);
__d("WAWebClientPayloadReleaseChannel",["WALogger","WAWebProtobufsWa6.pb","WAWebUserPrefsGeneral","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Web Beta] DEV-ONLY: Enabling INTERN features"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Web Beta] Enabling dev features"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Web Beta] Enabling BETA features"]);j=function(){return a};return a}function a(){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebUserPrefsGeneral").getWhatsAppWebExternalBetaJoinedIdb());if(c("gkx")("26258")){if(a){d("WALogger").LOG(j());return d("WAWebProtobufsWa6.pb").ClientPayload$UserAgent$ReleaseChannel.BETA}return d("WAWebProtobufsWa6.pb").ClientPayload$UserAgent$ReleaseChannel.RELEASE}if(c("gkx")("26259")){if(a){d("WALogger").LOG(i());return d("WAWebProtobufsWa6.pb").ClientPayload$UserAgent$ReleaseChannel.DEBUG}return d("WAWebProtobufsWa6.pb").ClientPayload$UserAgent$ReleaseChannel.BETA}if(a){d("WALogger").LOG(h());return d("WAWebProtobufsWa6.pb").ClientPayload$UserAgent$ReleaseChannel.BETA}return d("WAWebProtobufsWa6.pb").ClientPayload$UserAgent$ReleaseChannel.DEBUG});return k.apply(this,arguments)}g.getReleaseChannel=a}),98);
__d("WAWebClockSkewDifferenceTWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({ClockSkewDifferenceT:[3178,{clockSkewHourly:[1,d("WAWebWamCodegenUtils").TYPES.INTEGER]},[1,1e3,1e4],"private",37887164]},{ClockSkewDifferenceT:[]});g.ClockSkewDifferenceTWamEvent=a}),98);
__d("WAWebCommonSocketPlatformDetails",["WALogger","WAVerifyChainCertificateWA6","WAWapDict","WAWebProtobufsWa6.pb","asyncToGeneratorRuntime","decodeProtobuf","encodeProtobuf","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["processCertificate start"]);h=function(){return a};return a}var i=new Uint8Array([87,65,6,d("WAWapDict").DICT_VERSION]);function a(a){return d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsWa6.pb").HandshakeMessageSpec,{clientHello:a}).readByteArray()}function e(a){return d("encodeProtobuf").encodeProtobuf(d("WAWebProtobufsWa6.pb").HandshakeMessageSpec,{clientFinish:a}).readByteArray()}function f(a){return d("decodeProtobuf").decodeProtobuf(d("WAWebProtobufsWa6.pb").HandshakeMessageSpec,a).serverHello}function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.certificate;a=a.serverStatic;d("WALogger").LOG(h());b=(yield d("WAVerifyChainCertificateWA6").verifyChainCertificateWA6(b,a));if(!b.success)throw c("err")("verifyCertificateWA6 - "+b.error)});return k.apply(this,arguments)}function l(){return null}function m(a){if(a==null)return null;a=(a=a)!=null?a:{};var b=a.intermediate;a=a.leaf;return a&&b?a.key:null}g.WA_WEB_PROTO_HEADER=i;g.encodeHandshakeHello=a;g.encodeHandshakeFinish=e;g.decodeServerHello=f;g.processCertificate=j;g.serverInfoIfKnown=l;g.makeServerInfoIfKnown=m}),98);
__d("WAWebGroupJoinCWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({GroupJoinC:[158,{},[1,1,1],"regular"]},{GroupJoinC:[]});g.GroupJoinCWamEvent=a}),98);
__d("WAWebHandleGroupCreation",["Promise","WALogger","WAWebApiChat","WAWebBackendApi","WAWebCreateChat","WAWebGroupDatabaseJob","WAWebGroupJoinCWamEvent","WAWebGroupParticipantsJob","WAWebHandleMsgTypes.flow","WAWebHandlePushnameUpdate","WAWebUserPrefsMeUser","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["updated chat model and table"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["updated GroupMetadata and participants tables"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["inside handleGroupCreation"]);k=function(){return a};return a}function a(a,b,c,d){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e,f){e===void 0&&(e=!1);f===void 0&&(f=!1);d("WALogger").LOG(k()).tags("groups");var g=a.chatId,l=a.author,m=a.pushname,n=c.id,o=c.participants,p=c.subject,q=c.creation,r=c.hasCapi;(a.author==null||!a.author.equals(d("WAWebUserPrefsMeUser").getMaybeMeUser()))&&new(d("WAWebGroupJoinCWamEvent").GroupJoinCWamEvent)().commit();l&&m&&d("WAWebHandlePushnameUpdate").updatePushname(l,m,e);yield (h||(h=b("Promise"))).all([d("WAWebGroupDatabaseJob").updateGroupMetadataTableJob([c]),d("WAWebGroupParticipantsJob").updateParticipantsJob({group:n,participants:o,isOffline:e,groupInfo:c})]);d("WALogger").LOG(j()).tags("groups");(yield d("WAWebApiChat").getChatRecord(g))!=null?d("WAWebBackendApi").frontendFireAndForget("updateGroupSubject",{id:g,subject:p}):(yield d("WAWebCreateChat").createChat({chatId:g},"groupCreation",babelHelpers["extends"]({t:q,pendingInitialLoading:!1,createdLocally:!1},f===!0&&{notSpam:!0}),babelHelpers["extends"]({createdOffline:e},r===!0&&{nextPrivacyMode:{actualActors:d("WAWebHandleMsgTypes.flow").ActualActorsEnumType.Capi,hostStorage:d("WAWebHandleMsgTypes.flow").HostStorageEnumType.Facebook,privacyModeTs:0}})),d("WALogger").LOG(i()).tags("groups"),d("WAWebBackendApi").frontendFireAndForget("updateContactName",{contactId:n,name:p}));d("WAWebBackendApi").frontendFireAndForget("setGroupMetadata",c);d("WAWebBackendApi").frontendFireAndForget("markProfilePicStale",{profilePicThumbWid:n});if(e)return;d("WAWebWorkerSafeBackendApi").workerSafeFireAndForget("maybeSendKeyDistributionMsgToNewGroup",{groupId:n})});return l.apply(this,arguments)}g.handleGroupCreation=a}),98);
__d("WAWebHandleGroupNotificationConst",["WATimeUtils","WAWebABProps","WAWebApiParticipantStore","WAWebBackendApi","WAWebCommunityGatingUtils","WAWebDBGroupsGroupMetadata","WAWebGroupType","WAWebGroupsParticipantsApi","WAWebRuntimeEnvironmentUtils","WAWebUserPrefsMeUser","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){f=Object.freeze({REMOVE:"remove",ADD:"add",DEMOTE:"demote",DELETE:"delete",PROMOTE:"promote",MODIFY:"modify",CREATE:"create",SUBJECT:"subject",DESC:"description",LOCKED:"locked",UNLOCKED:"unlocked",ANNOUNCE:"announcement",NOT_ANNOUNCE:"not_announcement",NO_FREQUENTLY_FORWARDED:"no_frequently_forwarded",FREQUENTLY_FORWARDED_OK:"frequently_forwarded_ok",INVITE:"invite",EPHEMERAL:"ephemeral",NOT_EPHEMERAL:"not_ephemeral",REVOKE_INVITE:"revoke",SUSPENDED:"suspended",UNSUSPENDED:"unsuspended",GROWTH_LOCKED:"growth_locked",GROWTH_UNLOCKED:"growth_unlocked",LINK:"link",UNLINK:"unlink",LINKED_GROUP_PROMOTE:"linked_group_promote",LINKED_GROUP_DEMOTE:"linked_group_demote",MEMBERSHIP_APPROVAL_MODE:"membership_approval_mode",MEMBERSHIP_APPROVAL_REQUEST:"membership_approval_request",CREATED_MEMBERSHIP_REQUESTS:"created_membership_requests",REVOKED_MEMBERSHIP_REQUESTS:"revoked_membership_requests",ALLOW_NON_ADMIN_SUB_GROUP_CREATION:"allow_non_admin_sub_group_creation",NOT_ALLOW_NON_ADMIN_SUB_GROUP_CREATION:"not_allow_non_admin_sub_group_creation",ALLOW_ADMIN_REPORTS:"allow_admin_reports",NOT_ALLOW_ADMIN_REPORTS:"not_allow_admin_reports",REPORTS:"reports",CREATED_SUBGROUP_SUGGESTION:"created_sub_group_suggestion",REVOKED_SUB_GROUP_SUGGESTIONS:"revoked_sub_group_suggestions",CHANGE_NUMBER:"change_number",MEMBER_ADD_MODE:"member_add_mode",AUTO_ADD_DISABLED:"auto_add_disabled",IS_CAPI_HOSTED_GROUP:"is_capi_hosted_group"});function h(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(a));return!!a&&a.growthLockType===b&&((b=a.growthLockExpiration)!=null?b:0)>d("WATimeUtils").unixTime()});return i.apply(this,arguments)}function a(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.REVOKE_INVITE||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.SUSPEND||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.REVOKED_MEMBERSHIP_REQUESTS||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.REVOKED_SUB_GROUP_SUGGESTIONS||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.SUBGROUP_SUGGESTIONS_CHANGE_NUMBER)return!0;if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.ALLOW_NON_ADMIN_SUB_GROUP_CREATION&&!d("WAWebCommunityGatingUtils").memberAddedGroupsM1Enabled())return!0;if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.HIDDEN_GROUP&&!d("WAWebCommunityGatingUtils").communityHiddenGroupsReceiverEnabled())return!0;if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.GROWTH_LOCKED||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.GROWTH_UNLOCKED){if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.GROWTH_LOCKED){if(b.type!=="invite")return!0;var e=(yield h(a.chatId,b.type));if(e)return!0}e=(yield d("WAWebApiParticipantStore").isCurrentUserGroupAdmin(a.chatId.toString()));return!e}if((b.actionType===d("WAWebGroupType").GROUP_ACTIONS.PROMOTE||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.DEMOTE)&&(yield l(a.chatId))===!0)return!0;if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.PROMOTE||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.DEMOTE){e=b.participants.length===1&&d("WAWebUserPrefsMeUser").isMeAccount(b.participants[0].id);if(!e)return!0}if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.LINKED_GROUP_DEMOTE&&b.participants.length===1&&!d("WAWebUserPrefsMeUser").isMeAccount(b.participants[0].id)){e=(yield d("WAWebApiParticipantStore").isCurrentUserGroupAdmin(a.chatId.toString()));if(!e)return!0}if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.REMOVE&&b.participants.length===1&&c("WAWebWid").equals(a.author,b.participants[0].id)){e=(yield d("WAWebApiParticipantStore").isCurrentUserGroupAdmin(a.chatId.toString()));var f=d("WAWebUserPrefsMeUser").isMeAccount(a.author);if(!e||f)return!0}if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.CREATED_SUBGROUP_SUGGESTION){e=(yield d("WAWebApiParticipantStore").isCurrentUserGroupAdmin(a.chatId.toString()));if(!e||b.isExistingGroup===!0&&!d("WAWebCommunityGatingUtils").memberSuggestedGroupsM3ReceiverEnabled())return!0}if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.DELETE){f=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(a.chatId));e=f!=null?d("WAWebGroupType").getGroupTypeFromGroupMetadata(f):null;if(b.reason===d("WAWebGroupType").DELETE_REASON.INTEGRITY_DELETE_PARENT&&e===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP)return!1;else if(b.reason===d("WAWebGroupType").DELETE_REASON.DELETE_PARENT&&e===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP)return!0;return!0}if(b.actionType===(d("WAWebABProps").getABPropConfigValue("group_join_request_m3")?d("WAWebGroupType").GROUP_ACTIONS.MEMBERSHIP_APPROVAL_REQUEST:d("WAWebGroupType").GROUP_ACTIONS.CREATED_MEMBERSHIP_REQUESTS))return!0;if(d("WAWebABProps").getABPropConfigValue("web_anyone_can_add_group_setting_enabled")&&b.actionType===d("WAWebGroupType").GROUP_ACTIONS.CREATED_MEMBERSHIP_REQUESTS){f=(yield d("WAWebApiParticipantStore").isCurrentUserGroupAdmin(a.chatId.toString()));if(!f)return!0}if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.CREATED_MEMBERSHIP_REQUESTS&&b.skipGenMsg)return!0;if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.ALLOW_ADMIN_REPORTS&&b.shouldSkipGenMsg===!0)return!0;if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.ADMIN_REPORT_RECIEVED&&b.shouldSkipGenMsg===!0)return!0;if((b.actionType===d("WAWebGroupType").GROUP_ACTIONS.REMOVE||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.PROMOTE||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.DEMOTE||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.MODIFY)&&(yield l(a.chatId))===!0)return!0;if(b.actionType===d("WAWebGroupType").GROUP_ACTIONS.LINKED_GROUP_PROMOTE||b.actionType===d("WAWebGroupType").GROUP_ACTIONS.LINKED_GROUP_DEMOTE){e=b.participants.every(function(a){a=a.id;return a.isLid()});if(e)return!0}return!1});return j.apply(this,arguments)}function e(a,b){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!d("WAWebRuntimeEnvironmentUtils").isWorker())return d("WAWebBackendApi").frontendSendAndReceive("notAlreadyInGroup",{groupId:a,participants:b});var c=new Set((a=(a=(yield d("WAWebGroupsParticipantsApi").getParticipants(a)))==null?void 0:a.participants)!=null?a:[]);return b.filter(function(a){a=a.id;return!c.has(String(a))})});return k.apply(this,arguments)}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebDBGroupsGroupMetadata").getGroupMetadata(a));return Boolean(a==null?void 0:a.defaultSubgroup)});return m.apply(this,arguments)}g.GROUP_NOTIFICATION_TAG=f;g.shouldSkipGenMsg=a;g.notAlreadyInGroup=e;g.getIsCagById=l}),98);
__d("WAWebIsAddressingModeMismatch",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(a,b){if(!d("WAWebABProps").getABPropConfigValue("lid_groups_handle_server_addressing_mode"))return!1;return Boolean(a.defaultSubgroup)===!0?!1:Boolean(b.isLidAddressingMode)!==Boolean(a.isLidAddressingMode)}g.isAddressingModeMismatch=a}),98);
__d("WAWebShouldTriggerQueryGroupInfo",["WAWebIsAddressingModeMismatch","WAWebSchemaGroupMetadata","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("WAWebSchemaGroupMetadata").getGroupMetadataTable().get(a.toString()));return a&&Boolean(a.defaultSubgroup)===!1?d("WAWebIsAddressingModeMismatch").isAddressingModeMismatch(a,b):!1});return h.apply(this,arguments)}g.shouldTriggerQueryGroupInfo=a}),98);
__d("WAWebHandleGroupNotificationV2",["Promise","WALogger","WAWap","WAWebBackendApi","WAWebCmd","WAWebCommsWapMd","WAWebGetMessageCache","WAWebGroupDatabaseJob","WAWebGroupSystemMsg","WAWebHandleGroupNotificationConst","WAWebHandleSingleMsg","WAWebMessageQueue","WAWebShouldTriggerQueryGroupInfo","WAWebUpdateDbForGroupActionApi","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handle_group_notification_v2: handling notification for ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["no handler for group notification ",""]);j=function(){return a};return a}function a(a,b){return m(a,b)!=null}function k(a){return d("WAWap").wap("ack",{to:d("WAWebCommsWapMd").GROUP_JID(a.chatId),id:d("WAWap").CUSTOM_STRING(a.externalId),"class":"notification",type:"w:gp2",participant:a.author?d("WAWebCommsWapMd").USER_JID(a.author):d("WAWap").DROP_ATTR})}function c(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){c=m(a,c);if(c==null){d("WALogger").WARN(j(),a.chatId.toLogString());return k(a)}d("WALogger").DEV(i(),a.chatId.toString());yield (h||(h=b("Promise"))).all([c.writeSystemMessages(),c.writeGroupInfoUpdates()]);return k(a)});return l.apply(this,arguments)}function m(a,c){var e=[];for(var f of a.actions){var g=i(a,f);if(g==null)return null;e.push(g)}return{writeSystemMessages:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield (h||(h=b("Promise"))).all(e.map(function(a){return a.writeSystemMessages()}))});function c(){return a.apply(this,arguments)}return c}(),writeGroupInfoUpdates:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield (h||(h=b("Promise"))).all(e.map(function(a){return a.writeGroupInfoUpdates()}))});function c(){return a.apply(this,arguments)}return c}()};function i(e,a){return a.actionType===d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.CREATE?null:{writeGroupInfoUpdates:function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if((a.actionType===d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.ADD||a.actionType===d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.REMOVE)&&(yield d("WAWebShouldTriggerQueryGroupInfo").shouldTriggerQueryGroupInfo(e.chatId,a))){d("WAWebGroupDatabaseJob").markGroupParticipantStaleJob(e.chatId);return}yield d("WAWebUpdateDbForGroupActionApi").updateDBForGroupAction(e,a,c);d("WAWebBackendApi").frontendFireAndForget("updateModelForGroupAction",{groupMeta:e,groupAction:a})});function g(){return f.apply(this,arguments)}return g}(),writeSystemMessages:function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return p(e.chatId,yield n(e,a),c,function(){return d("WAWebHandleGroupNotificationConst").shouldSkipGenMsg(e,a)})});function g(){return f.apply(this,arguments)}return g}()}}}function n(a,b){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=[];if((b.actionType===d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.ADD||b.actionType===d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.REMOVE)&&(yield d("WAWebShouldTriggerQueryGroupInfo").shouldTriggerQueryGroupInfo(a.chatId,b)))return[];if(b.actionType===d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.ADD){var e=(yield d("WAWebHandleGroupNotificationConst").notAlreadyInGroup(a.chatId,b.participants));e=e.filter(function(a){a=a.id;return!a.isLid()});e.length>0&&(c=[yield d("WAWebGroupSystemMsg").genGroupNotificationMsg(a,babelHelpers["extends"]({},b,{participants:e}))])}else b.actionType!==d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.CREATE&&(c=[yield d("WAWebGroupSystemMsg").genGroupNotificationMsg(a,b)]);return c});return o.apply(this,arguments)}function p(a,c,e,f){var g=function(){return void 0},i=new(h||(h=b("Promise")))(function(a){return g=a});d("WAWebMessageQueue").onMessageQueue(a.toString(),e,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(yield f()){g();return}var a=j(c).then(function(){g()});return e?(h||(h=b("Promise"))).resolve():a}));return i;function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length===0)return;if(e){d("WAWebCmd").Cmd.isMainStreamReadyMd&&a.forEach(function(a){d("WAWebBackendApi").frontendFireAndForget("updateMessageUI",{chatId:a.id.remote,msg:a})});return d("WAWebGetMessageCache").getMessageCache().addMessages(a.map(function(a){return{msg:a}}),!1)}yield (h||(h=b("Promise"))).all(a.map(function(a){return d("WAWebHandleSingleMsg").handleSingleMsg(a.from,a)}))});return k.apply(this,arguments)}}g.isGroupNotificationOptimizationEligible=a;g.handleGroupNotificationV2=c}),98);
__d("WAWebHandleGroupsDirtyNotification",["WAComms","WALogger","WASmaxGroupsGroupsDirtyNotificationRPC","WAWebEventsWaitForOfflineDeliveryEnd","WAWebPersistedJobDefinitions","WAWebPersistedJobManager","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleGroupsDirtyNotification: failed with ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleGroupsDirtyNotification: received groups dirty bit notification"]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("WASmaxGroupsGroupsDirtyNotificationRPC").receiveGroupsDirtyNotificationRPC(a);var b=a.makeGroupsDirtyNotificationResponseAck;a=a.parsedRequest;d("WALogger").LOG(i());void k(a);return b()});return j.apply(this,arguments)}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{a=a.groupsDirtyGroup.map(function(a){return a.jid});a=(yield m(a));yield o(a)}catch(a){d("WALogger").ERROR(h(),a).sendLogs("handleGroupsDirtyNotificationJob")}});return l.apply(this,arguments)}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield d("WAWebPersistedJobManager").getJobManager().accessors.maybeCreateJob(d("WAWebPersistedJobDefinitions").jobSerializers.queryAndUpdateGroupsMetadataByJids(a)));return a.id});return n.apply(this,arguments)}function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebEventsWaitForOfflineDeliveryEnd").waitForOfflineDeliveryEnd();yield d("WAComms").waitForConnection();return d("WAWebPersistedJobManager").getJobManager().loadAndRunJobFromId(a)});return p.apply(this,arguments)}g.handleGroupsDirtyNotificationJob=a}),98);
__d("WAWebHandleGroupNotification",["Promise","WADeprecatedWapParser","WALogger","WANullthrows","WAWap","WAWebABProps","WAWebApiParticipantStore","WAWebBackendApi","WAWebCommsWapMd","WAWebCreateOrReplaceDisplayNamesAndLidPnMappingsJob","WAWebDBGroupsGroupMetadata","WAWebEphemeralityTypes","WAWebEphemeralityUtils","WAWebGetMessageCache","WAWebGroupApiConst","WAWebGroupQueryJob","WAWebGroupSystemMsg","WAWebGroupType","WAWebGroupsQueryApi","WAWebHandleGroupCreation","WAWebHandleGroupNotificationConst","WAWebHandleGroupNotificationV2","WAWebHandleGroupsDirtyNotification","WAWebHandleSingleMsg","WAWebJidToWid","WAWebMessageQueue","WAWebOfflineHandler","WAWebRequestMethodType","WAWebSchemaChat","WAWebSchemaGroupMetadata","WAWebShouldTriggerQueryGroupInfo","WAWebUpdateDbForGroupActionApi","WAWebUserPrefsMeUser","asyncToGeneratorRuntime","cr:4533","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleGroupNotification: failed with ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateDBForGroupAction done for ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateDBForGroupAction done for ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateDBForGroupAction done for ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateDBForGroupAction done for ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["updateDBForGroupAction done for ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleGroupNotification debug: ignoring participant add for "," times"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleGroupCreation done for group id ",""]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["group id "," exists in storage = ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["handle action ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["Known error T150827746: ",""]);u=function(){return a};return a}function v(a){if(a.hasChild("description")){a=a.child("description");if(a.hasChild("body")){var b=a.child("body");if(b.hasContent())return{content:b.contentString(),id:a.attrString("id")}}}return null}function w(a,b){var c=a.hasAttr("creator")?d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("creator")):null;if(a.hasChild("ephemeral")){a=a.child("ephemeral");if(a.hasAttr("expiration")&&d("WAWebABProps").getABPropConfigValue("dm_initiator_trigger_groups")){var e;b=b?void 0:d("WAWebEphemeralityTypes").DisappearingModeTrigger.UnknownGroups;return{ephemeralDuration:a.attrInt("expiration"),disappearingModeTrigger:(e=d("WAWebEphemeralityUtils").getDisappearingModeTriggerString(a.maybeAttrString("trigger")))!=null?e:b,disappearingModeInitiatedByMe:d("WAWebUserPrefsMeUser").isMeAccount(c)}}return{ephemeralDuration:a.attrInt("expiration")}}return null}function x(a){return a.mapChildrenWithTag("participant",function(a){var b=a.attrEnumOrDefault("type",d("WAWebGroupApiConst").GROUP_PARTICIPANT_TYPES,"participant"),c=a.maybeAttrLidUserJid("lid"),e=a.maybeAttrPhoneUserJid("phone_number");return{displayName:a.maybeAttrString("display_name"),id:d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("jid")),isSuperAdmin:b===d("WAWebGroupApiConst").GROUP_PARTICIPANT_TYPES.superadmin,isAdmin:b===d("WAWebGroupApiConst").GROUP_PARTICIPANT_TYPES.admin||b===d("WAWebGroupApiConst").GROUP_PARTICIPANT_TYPES.superadmin,lid:c!=null?d("WAWebJidToWid").userJidToUserWid(c):null,phoneNumber:e!=null?d("WAWebJidToWid").userJidToUserWid(e):null}})}function y(a){a=a.child("sub_group_suggestion");var b=d("WAWebJidToWid").groupJidToWid(a.attrGroupJid("jid")),c=d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("creator")),e=a.attrTime("creation"),f=a.child("subject");f=f.contentString();var g,h,i;if(a.hasChild("description")){var j=a.child("description");if(j.hasChild("body")){j=j.child("body");j.hasContent()&&(g=j.contentString())}}if(a.hasChild("is_existing_group")){j=a.child("is_existing_group");j.hasContent()&&(h=j.contentString()==="true")}if(a.hasChild("participant_count")){j=a.child("participant_count");j.hasContent()&&(i=j.contentInt())}return{id:b,owner:c,subject:f,description:g,t:e,isExistingGroup:(a=h)!=null?a:!1,participantCount:i}}var z={invite:(e=d("WAWebGroupType")).ADD_REASON.INVITE,linked_group_join:e.ADD_REASON.LINKED_GROUP_JOIN,auto_add:e.ADD_REASON.AUTO_ADD,default_sub_group_admin_add:e.ADD_REASON.DEFAULT_SUBGROUP_ADMIN_ADD,default_sub_group_promote:e.ADD_REASON.DEFAULT_SUBGROUP_PROMOTE,invite_auto_add:e.ADD_REASON.INVITE_AUTO_ADD,general_chat_auto_add:e.ADD_REASON.GENERAL_CHAT_AUTO_ADD},A={default_sub_group_demote:e.REMOVE_REASON.DEFAULT_SUBGROUP_DEMOTE},B={invite_link:d("WAWebRequestMethodType").RequestMethod.InviteLink,linked_group_join:d("WAWebRequestMethodType").RequestMethod.LinkedGroupJoin,non_admin_add:d("WAWebRequestMethodType").RequestMethod.NonAdminAdd},C={approved:e.RevokedSubGroupSuggestionReason.APPROVED,rejected:e.RevokedSubGroupSuggestionReason.REJECTED,cancelled:e.RevokedSubGroupSuggestionReason.CANCELLED};function D(a){var b=a.child("group"),c=a.hasAttr("type")&&a.attrString("type")==="new",e=x(b),f=v(b);c=w(b,c);var g=d("WAWebGroupsQueryApi").extractLinkedParent(b);g={subject:b.attrString("subject"),restrict:b.hasChild("locked"),announce:b.hasChild("announcement"),noFrequentlyForwarded:b.hasChild("no_frequently_forwarded"),ephemeralDuration:c?c.ephemeralDuration:void 0,disappearingModeTrigger:c&&c.disappearingModeTrigger!=null?c.disappearingModeTrigger:void 0,disappearingModeInitiatedByMe:c?c.disappearingModeInitiatedByMe:void 0,owner:b.hasAttr("creator")?d("WAWebJidToWid").userJidToUserWid(b.attrUserJid("creator")):void 0,creation:b.attrTime("creation"),participants:e,desc:f?f.content:void 0,descId:f?f.id:void 0,subjectOwner:b.hasAttr("s_o")?d("WAWebJidToWid").userJidToUserWid(b.attrUserJid("s_o")):void 0,subjectTime:b.hasAttr("s_t")?b.attrTime("s_t"):void 0,support:b.hasChild("support"),isParentGroup:b.hasChild("parent"),isParentGroupClosed:((c=b.maybeChild("parent"))==null?void 0:c.maybeAttrString("default_membership_approval_mode"))==="request_required",parentGroup:g?g.parentGroup:void 0,defaultSubgroup:b.hasChild("default_sub_group"),generalSubgroup:b.hasChild("general_chat"),size:b.hasAttr("size")?b.attrInt("size"):void 0,incognito:b.hasChild("incognito"),membershipApprovalMode:(b==null?void 0:(e=b.maybeChild("membership_approval_mode"))==null?void 0:(f=e.maybeChild("group_join"))==null?void 0:f.maybeAttrString("state"))==="on",allowNonAdminSubGroupCreation:b==null?void 0:b.hasChild("allow_non_admin_sub_group_creation"),generalChatAutoAddDisabled:(c=a.hasChild("auto_add_disabled"))!=null?c:void 0,hiddenSubgroup:b==null?void 0:b.hasChild("hidden_group"),hasCapi:b==null?void 0:b.hasChild("capi")};return{actionType:d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.CREATE,reason:a.hasAttr("reason")?z[a.attrString("reason")]:null,contextGroupId:a.hasAttr("context_group_jid")?d("WAWebJidToWid").groupJidToWid(a.attrGroupJid("context_group_jid")):null,groupInfo:g}}var E=new(c("WADeprecatedWapParser"))("groupNotificationParser",function(a){a.assertTag("notification");a.hasAttr("to")&&a.assertAttr("to",d("WAWebUserPrefsMeUser").assertGetMe().toJid());var b=d("WAWebJidToWid").groupJidToWid(a.attrGroupJid("from")),e=a.hasAttr("participant")?d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("participant")):null,f=null;try{var g=a.maybeAttrPhoneUserJid("participant_pn");f=g!=null?d("WAWebJidToWid").userJidToUserWid(g):null}catch(a){d("WALogger").ERROR(u(),a.toString())}var h=a.attrTime("t"),i=a.hasAttr("addressing_mode")?a.attrString("addressing_mode")==="lid":!1;function j(a){return{jid:a.hasAttr("jid")?d("WAWebJidToWid").groupJidToWid(a.attrGroupJid("jid")):void 0}}g=a.mapChildren(function(f){var g=f.tag();switch(g){case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.CREATE:return D(f);case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.ADD:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.ADD,participants:x(f),reason:f.hasAttr("reason")?z[f.attrString("reason")]:null,isLidAddressingMode:i};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.DELETE:var k={integrity_delete_parent:d("WAWebGroupType").DELETE_REASON.INTEGRITY_DELETE_PARENT,delete_parent:d("WAWebGroupType").DELETE_REASON.DELETE_PARENT};return{actionType:d("WAWebGroupType").GROUP_ACTIONS.DELETE,reason:f.hasAttr("reason")?k[f.attrString("reason")]:null,groupDatas:[{id:b,subject:""}]};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.REMOVE:return{actionType:d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.REMOVE,participants:x(f),reason:f.hasAttr("reason")?A[f.attrString("reason")]:null,isLidAddressingMode:i};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.PROMOTE:return{actionType:d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.PROMOTE,participants:x(f)};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.DEMOTE:return{actionType:d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.DEMOTE,participants:x(f)};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.LINKED_GROUP_PROMOTE:return babelHelpers["extends"]({actionType:d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.LINKED_GROUP_PROMOTE,participants:x(f)},j(f));case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.LINKED_GROUP_DEMOTE:return babelHelpers["extends"]({actionType:d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.LINKED_GROUP_DEMOTE,participants:x(f)},j(f));case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.MODIFY:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.MODIFY,participants:x(f)};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.SUBJECT:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.SUBJECT,subject:f.attrString("subject"),s_o:f.hasAttr("s_o")?d("WAWebJidToWid").userJidToUserWid(f.attrUserJid("s_o")):null,s_t:f.hasAttr("s_t")?f.attrTime("s_t"):null};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.DESC:return f.hasChild("delete")?{actionType:d("WAWebGroupType").GROUP_ACTIONS.DESC_REMOVE,descId:f.attrString("id")}:{actionType:d("WAWebGroupType").GROUP_ACTIONS.DESC_ADD,descId:f.attrString("id"),desc:f.hasChild("body")?f.child("body").contentString():null,descTime:h};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.SUSPENDED:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.SUSPEND,value:!0};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.UNSUSPENDED:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.SUSPEND,value:!1};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.LOCKED:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.RESTRICT,value:!0,threshold:(k=f.maybeAttrString("threshold"))!=null?k:void 0};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.UNLOCKED:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.RESTRICT,value:!1};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.ANNOUNCE:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.ANNOUNCE,value:!0};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.NOT_ANNOUNCE:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.ANNOUNCE,value:!1};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.NO_FREQUENTLY_FORWARDED:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.NO_FORWARD,value:!0};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.FREQUENTLY_FORWARDED_OK:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.NO_FORWARD,value:!1};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.INVITE:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.INVITE_CODE,code:f.attrString("code")};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.EPHEMERAL:return d("WAWebABProps").getABPropConfigValue("dm_initiator_trigger_groups")?{actionType:d("WAWebGroupType").GROUP_ACTIONS.EPHEMERAL,duration:f.attrInt("expiration"),trigger:f.hasAttr("trigger")?f.attrInt("trigger"):void 0,initiatedByMe:d("WAWebUserPrefsMeUser").isMeAccount(e)}:{actionType:d("WAWebGroupType").GROUP_ACTIONS.EPHEMERAL,duration:f.attrInt("expiration")};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.NOT_EPHEMERAL:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.EPHEMERAL,duration:0};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.REVOKE_INVITE:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.REVOKE_INVITE,participants:f.mapChildrenWithTag("participant",function(a){return{id:d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("jid")),expiration:a.attrInt("expiration")}})};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.GROWTH_UNLOCKED:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.GROWTH_UNLOCKED};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.GROWTH_LOCKED:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.GROWTH_LOCKED,expiration:f.attrInt("expiration"),type:f.attrString("type")};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.LINK:var l=f.attrString("link_type");k={sub_group:d("WAWebGroupType").GROUP_ACTIONS.SUB_GROUP_LINK,parent_group:d("WAWebGroupType").GROUP_ACTIONS.PARENT_GROUP_LINK,sibling_group:d("WAWebGroupType").GROUP_ACTIONS.SIBLING_GROUP_LINK};return{actionType:k[l],groupDatas:f.mapChildrenWithTag("group",function(a){return{id:d("WAWebJidToWid").groupJidToWid(a.attrGroupJid("jid")),subject:a.attrString("subject"),subjectTime:a.attrInt("s_t"),hiddenSubgroup:l!=="parent_group"?a.hasChild("hidden_group"):void 0}})};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.UNLINK:k=f.attrString("unlink_type");var m=f.hasAttr("unlink_reason")?f.attrString("unlink_reason"):null,n=f.mapChildrenWithTag("group",function(a){return{id:d("WAWebJidToWid").groupJidToWid(a.attrGroupJid("jid")),subject:a.attrString("subject"),subjectTime:a.attrInt("s_t")}});if(k==="parent_group"){if(m===d("WAWebGroupType").DELETE_REASON.DELETE_PARENT)return{actionType:d("WAWebGroupType").GROUP_ACTIONS.DELETE_PARENT_GROUP_UNLINK,groupDatas:n};if(m===d("WAWebGroupType").DELETE_REASON.INTEGRITY_DELETE_PARENT)return{actionType:d("WAWebGroupType").GROUP_ACTIONS.INTEGRITY_PARENT_GROUP_UNLINK,groupDatas:n}}else if(k==="sub_group")if(m===d("WAWebGroupType").DELETE_REASON.DELETE_PARENT)return{actionType:d("WAWebGroupType").GROUP_ACTIONS.DELETE_PARENT_GROUP_UNLINK,groupDatas:n};else if(m===d("WAWebGroupType").DELETE_REASON.INTEGRITY_DELETE_PARENT)return{actionType:d("WAWebGroupType").GROUP_ACTIONS.INTEGRITY_SUB_GROUP_UNLINK,groupDatas:n};m={sub_group:d("WAWebGroupType").GROUP_ACTIONS.SUB_GROUP_UNLINK,parent_group:d("WAWebGroupType").GROUP_ACTIONS.PARENT_GROUP_UNLINK,sibling_group:d("WAWebGroupType").GROUP_ACTIONS.SIBLING_GROUP_UNLINK};return{actionType:m[k],groupDatas:n};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.MEMBERSHIP_APPROVAL_MODE:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.MEMBERSHIP_APPROVAL_MODE,value:((m=f.child("group_join"))==null?void 0:m.attrString("state"))==="on",triggered:f.hasAttr("triggered")?f.attrString("triggered"):void 0};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.MEMBERSHIP_APPROVAL_REQUEST:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.MEMBERSHIP_APPROVAL_REQUEST,requestMethod:(k=B[f.attrString("request_method")])!=null?k:d("WAWebRequestMethodType").RequestMethod.InviteLink,parentGroupId:f.hasAttr("parent_group_jid")?d("WAWebJidToWid").groupJidToWid(f.attrGroupJid("parent_group_jid")):void 0};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.ALLOW_ADMIN_REPORTS:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.ALLOW_ADMIN_REPORTS,shouldSkipGenMsg:!d("WAWebABProps").getABPropConfigValue("report_to_admin_kill_switch"),value:!0,author:e,triggered:f.hasAttr("triggered")?f.attrString("triggered"):void 0};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.NOT_ALLOW_ADMIN_REPORTS:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.ALLOW_ADMIN_REPORTS,shouldSkipGenMsg:!d("WAWebABProps").getABPropConfigValue("report_to_admin_kill_switch"),value:!1,author:e,triggered:f.hasAttr("triggered")?f.attrString("triggered"):void 0};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.REPORTS:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.ADMIN_REPORT_RECIEVED,shouldSkipGenMsg:!0,value:h};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.CREATED_MEMBERSHIP_REQUESTS:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.CREATED_MEMBERSHIP_REQUESTS,requestMethod:(n=B[f.attrString("request_method")])!=null?n:d("WAWebRequestMethodType").RequestMethod.InviteLink,parentGroupId:f.hasAttr("parent_group_jid")?d("WAWebJidToWid").groupJidToWid(f.attrGroupJid("parent_group_jid")):void 0,requests:f.hasChildren()?f.mapChildrenWithTag("requested_user",function(a){return d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("jid"))}):[c("WANullthrows")(e)],skipGenMsg:f.maybeAttrString("suppress_sys_msg")==="true"};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.REVOKED_MEMBERSHIP_REQUESTS:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.REVOKED_MEMBERSHIP_REQUESTS,requests:f.mapChildrenWithTag("participant",function(a){return d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("jid"))})};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.ALLOW_NON_ADMIN_SUB_GROUP_CREATION:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.ALLOW_NON_ADMIN_SUB_GROUP_CREATION,value:!0};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.NOT_ALLOW_NON_ADMIN_SUB_GROUP_CREATION:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.ALLOW_NON_ADMIN_SUB_GROUP_CREATION,value:!1};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.CREATED_SUBGROUP_SUGGESTION:return babelHelpers["extends"]({actionType:d("WAWebGroupType").GROUP_ACTIONS.CREATED_SUBGROUP_SUGGESTION,parentGroupId:b},y(f));case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.REVOKED_SUB_GROUP_SUGGESTIONS:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.REVOKED_SUB_GROUP_SUGGESTIONS,parentGroupId:b,subgroupSuggestions:f.mapChildrenWithTag("sub_group_suggestion",function(a){return{id:d("WAWebJidToWid").groupJidToWid(a.attrGroupJid("jid")),owner:d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("creator")),reason:a.hasAttr("reason")?C[a.attrString("reason")]:void 0}})};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.CHANGE_NUMBER:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.SUBGROUP_SUGGESTIONS_CHANGE_NUMBER,subgroupSuggestions:f.mapChildrenWithTag("sub_group_suggestion",function(a){return d("WAWebJidToWid").groupJidToWid(a.attrGroupJid("jid"))}),parentGroupId:b,oldOwner:d("WAWebJidToWid").userJidToUserWid(a.attrUserJid("participant")),newOwner:d("WAWebJidToWid").userJidToUserWid(f.attrUserJid("jid"))};case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.MEMBER_ADD_MODE:if(d("WAWebABProps").getABPropConfigValue("web_anyone_can_add_group_setting_enabled"))return{actionType:d("WAWebGroupType").GROUP_ACTIONS.MEMBER_ADD_MODE,memberAddMode:d("WAWebSchemaGroupMetadata").MemberAddMode.cast(f.contentString())};throw a.createParseError("Unrecognized group action "+g);case d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.AUTO_ADD_DISABLED:return{actionType:d("WAWebGroupType").GROUP_ACTIONS.GENERAL_CHAT_AUTO_ADD_DISABLED};default:throw a.createParseError("Unrecognized group action "+g)}});return{externalId:a.attrString("id"),chatId:b,isLidAddressingMode:i,author:e,authorPhoneNumber:f,ts:a.attrTime("t"),pushname:a.hasAttr("notify")?a.attrString("notify"):null,offline:a.hasAttr("offline")?a.attrString("offline"):null,actions:g}});function F(a){return G.apply(this,arguments)}function G(){G=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield (h||(h=b("Promise"))).all([d("WAWebDBGroupsGroupMetadata").getGroupMetadata(a),d("WAWebSchemaChat").getChatTable().get(a.toString(),!1)]));var c=a[0];a=a[1];return!!c||!!a&&!!a.t});return G.apply(this,arguments)}function H(a,b){return I.apply(this,arguments)}function I(){I=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return b.participants.some(function(a){a=a.id;return a.isLid()})&&(yield d("WAWebHandleGroupNotificationConst").getIsCagById(a.chatId))===!0?b.participants.filter(function(a){a=a.id;return!a.isLid()}):b.participants});return I.apply(this,arguments)}function J(a){var b=a.author;a=a.authorPhoneNumber;return b!=null?{id:b,phoneNumber:a}:null}function K(a,b,c){return L.apply(this,arguments)}function L(){L=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){f===void 0&&(f=!1);if(!e)return;d("WALogger").LOG(r(),e.actionType).tags("groups");var g=[];try{yield d("WAWebCreateOrReplaceDisplayNamesAndLidPnMappingsJob").createOrReplaceDisplayNamesAndLidPnMappings([J(a)].concat(e.participants),!f);if(e.actionType===d("WAWebHandleGroupNotificationConst").GROUP_NOTIFICATION_TAG.CREATE){var s=babelHelpers["extends"]({},e.groupInfo,{id:a.chatId,isLidAddressingMode:a.isLidAddressingMode}),t=P(a,e,s),u=(yield F(s.id));d("WALogger").LOG(q(),s.id,u).tags("groups");yield N(a,s,f,t,e.reason==="invite");d("WALogger").LOG(p(),s.id).tags("groups");s=(yield d("WAWebGroupSystemMsg").genMsgsForGroupCreation(a,s,u,t));g.push.apply(g,s)}else if(e.actionType===d("WAWebGroupType").GROUP_ACTIONS.ADD){if(!c("gkx")("26258")){t=(u=b("cr:4533")==null?void 0:b("cr:4533").getDebugIgnoreParticipantAdd())!=null?u:0;if(t>0){d("WALogger").DEV(o(),t);b("cr:4533")==null?void 0:b("cr:4533").setDebugIgnoreParticipantAdd(t-1);return}}s=(yield d("WAWebHandleGroupNotificationConst").notAlreadyInGroup(a.chatId,e.participants));if(yield d("WAWebShouldTriggerQueryGroupInfo").shouldTriggerQueryGroupInfo(a.chatId,e))yield d("WAWebGroupQueryJob").queryAndUpdateGroupMetadataById(a.chatId);else{yield d("WAWebUpdateDbForGroupActionApi").updateDBForGroupAction(a,e,f);void M(a,e);d("WALogger").DEV(n(),JSON.stringify(e)).tags("groups");if(s.length||e.reason){u=(yield H(a,e));u.length>0&&g.push(yield d("WAWebGroupSystemMsg").genGroupNotificationMsg(a,babelHelpers["extends"]({},e,{participants:u})))}}}else if(!(e.actionType===d("WAWebGroupType").GROUP_ACTIONS.INTEGRITY_PARENT_GROUP_UNLINK||e.actionType===d("WAWebGroupType").GROUP_ACTIONS.INTEGRITY_SUB_GROUP_UNLINK))if(!(e.actionType===d("WAWebGroupType").GROUP_ACTIONS.DELETE_PARENT_GROUP_UNLINK||e.actionType===d("WAWebGroupType").GROUP_ACTIONS.DELETE_PARENT_SUB_GROUP_UNLINK))if(e.actionType===d("WAWebGroupType").GROUP_ACTIONS.DELETE&&e.reason===d("WAWebGroupType").DELETE_REASON.INTEGRITY_DELETE_PARENT){t=(yield d("WAWebGroupSystemMsg").genIntegrityDeleteParentNotificationMsgs(a,e));t.forEach(function(a){g.push(a)});yield d("WAWebUpdateDbForGroupActionApi").updateDBForGroupAction(a,e,f);void M(a,e);d("WALogger").DEV(m(),JSON.stringify(e)).tags("groups")}else if(e.actionType===d("WAWebGroupType").GROUP_ACTIONS.DESC_ADD||e.actionType===d("WAWebGroupType").GROUP_ACTIONS.DESC_REMOVE)g.push(yield d("WAWebGroupSystemMsg").genDescriptionNotificationMsg(a,e)),yield d("WAWebUpdateDbForGroupActionApi").updateDBForGroupAction(a,e,f),void M(a,e),d("WALogger").DEV(l(),JSON.stringify(e)).tags("groups");else if(e.actionType===d("WAWebGroupType").GROUP_ACTIONS.DELETE&&e.reason===d("WAWebGroupType").DELETE_REASON.DELETE_PARENT){s=(yield d("WAWebGroupSystemMsg").generateDeleteParentNotificationMessages(a));if(s.length===0)return;s.forEach(function(a){g.push(a)});yield d("WAWebUpdateDbForGroupActionApi").updateDBForGroupAction(a,e,f);void M(a,e);d("WALogger").DEV(k(),JSON.stringify(e)).tags("groups")}else{u=!1;e.actionType===d("WAWebGroupType").GROUP_ACTIONS.REMOVE&&((yield d("WAWebShouldTriggerQueryGroupInfo").shouldTriggerQueryGroupInfo(a.chatId,e))&&(u=!0,void d("WAWebGroupQueryJob").queryAndUpdateGroupMetadataById(a.chatId)));if(!u){t=(yield d("WAWebHandleGroupNotificationConst").shouldSkipGenMsg(a,e));yield d("WAWebUpdateDbForGroupActionApi").updateDBForGroupAction(a,e,f);void M(a,e);d("WALogger").DEV(j(),JSON.stringify(e)).tags("groups");if(!t){s=(yield d("WAWebApiParticipantStore").isCurrentUserGroupAdmin(a.chatId.toString()));if(e.actionType===d("WAWebGroupType").GROUP_ACTIONS.REMOVE){u=(yield H(a,e));u.length>0&&g.push(yield d("WAWebGroupSystemMsg").genGroupNotificationMsg(babelHelpers["extends"]({},a,{isAdmin:s}),babelHelpers["extends"]({},e,{participants:u})))}else if(e.actionType===d("WAWebGroupType").GROUP_ACTIONS.CREATED_SUBGROUP_SUGGESTION){t=(yield d("WAWebGroupSystemMsg").genCreatedSubgroupSuggestionNotificationMsg(a,e));t&&g.push(t)}else if(e.actionType===d("WAWebGroupType").GROUP_ACTIONS.PROMOTE||e.actionType===d("WAWebGroupType").GROUP_ACTIONS.DEMOTE||e.actionType===d("WAWebGroupType").GROUP_ACTIONS.MODIFY||e.actionType===d("WAWebGroupType").GROUP_ACTIONS.LINKED_GROUP_PROMOTE||e.actionType===d("WAWebGroupType").GROUP_ACTIONS.LINKED_GROUP_DEMOTE){u=(yield H(a,e));u.length>0&&g.push(yield d("WAWebGroupSystemMsg").genGroupNotificationMsg(babelHelpers["extends"]({},a,{isAdmin:s}),babelHelpers["extends"]({},e,{participants:u})))}else if(e.actionType===d("WAWebGroupType").GROUP_ACTIONS.ALLOW_NON_ADMIN_SUB_GROUP_CREATION){t=(yield d("WAWebGroupSystemMsg").genAllowNonAdminSubGroupCreationNotificationMsg(a,e));t&&g.push(t)}else if(e.actionType===d("WAWebGroupType").GROUP_ACTIONS.COMMUNITY_OWNER_UPDATE){u=(yield d("WAWebGroupSystemMsg").genCommunityOwnerUpdateNotificationMsg(a,e));u&&g.push(u)}else g.push(yield d("WAWebGroupSystemMsg").genGroupNotificationMsg(babelHelpers["extends"]({},a,{isAdmin:s}),e))}}}f?void d("WAWebGetMessageCache").getMessageCache().addMessages(g.map(function(a){return{msg:a}}),!1):yield (h||(h=b("Promise"))).all(g.map(function(a){return d("WAWebHandleSingleMsg").handleSingleMsg(a.from,a)}))}catch(a){d("WALogger").LOG(i(),a)}});return L.apply(this,arguments)}function M(a,b){return d("WAWebBackendApi").frontendSendAndReceive("updateModelForGroupAction",{groupMeta:a,groupAction:b})}function N(a,b,c,d,e){return O.apply(this,arguments)}function O(){O=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f){c===void 0&&(c=!1),f===void 0&&(f=!1),yield d("WAWebHandleGroupCreation").handleGroupCreation(a,b,c,f),e!=null&&(yield d("WAWebUpdateDbForGroupActionApi").updateDBForGroupAction(a,e,c),void M(a,e))});return O.apply(this,arguments)}function P(a,b,c){if(!d("WAWebUserPrefsMeUser").isMeAccount(a.author)||b.reason===d("WAWebGroupType").ADD_REASON.INVITE_AUTO_ADD){a=(a=c.participants.find(function(a){return d("WAWebUserPrefsMeUser").isMeAccount(a.id)}))==null?void 0:a.isAdmin;return{actionType:d("WAWebGroupType").GROUP_ACTIONS.ADD,participants:[{id:c.defaultSubgroup===!0&&c.incognito===!0||c.isLidAddressingMode===!0?d("WAWebUserPrefsMeUser").getMaybeMeLidUser():d("WAWebUserPrefsMeUser").getMaybeMeUser(),isAdmin:a,isSuperAdmin:!1}],reason:b.reason,parentGroupId:c.parentGroup,isParentGroup:c.isParentGroup,contextGroupId:b.contextGroupId,groupName:c.subject,defaultSubgroup:c.defaultSubgroup,generalSubgroup:c.generalSubgroup,hiddenSubgroup:c.hiddenSubgroup}}}function a(a){var c=a.content;if(c!=null&&Array.isArray(c)&&c.length>0){c=c[0];c=c.tag;if(c==="groups_dirty")return(h||(h=b("Promise"))).resolve(d("WAWebHandleGroupsDirtyNotification").handleGroupsDirtyNotificationJob(a))}c=E.parse(a);if(c.error){d("WALogger").DEV(t(),a.toString());d("WALogger").ERROR(s(),c.error.toString());return(h||(h=b("Promise"))).reject(c.error)}var e=c.success,f=Boolean(e.offline)&&!d("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete();return d("WAWebHandleGroupNotificationV2").isGroupNotificationOptimizationEligible(e,f)&&f?d("WAWebHandleGroupNotificationV2").handleGroupNotificationV2(e,f):d("WAWebMessageQueue").onMessageQueue(e.chatId.toString(),f,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield (h||(h=b("Promise"))).all(e.actions.map(function(a){return K(e,a,f)}));return d("WAWap").wap("ack",{to:d("WAWebCommsWapMd").GROUP_JID(e.chatId),id:d("WAWap").CUSTOM_STRING(e.externalId),"class":"notification",type:"w:gp2",participant:e.author?d("WAWebCommsWapMd").USER_JID(e.author):d("WAWap").DROP_ATTR})}))}g.handleAction=K;g.handleGroupNotification=a}),98);
__d("WAWebHandleIdentityChange",["Promise","WADeprecatedWapParser","WAJids","WALogger","WAWap","WAWebBackendApi","WAWebCommsWapMd","WAWebCreateOrReplaceDisplayNamesAndLidPnMappingsJob","WAWebIdentityChangeApi","WAWebJidToWid","WAWebManageE2ESessionsJob","WAWebMessageQueue","WAWebOfflineHandler","WAWebSecurityCodeApi","WAWebSendTcTokenWhenDeviceIdentityChange","WAWebSignal","WAWebSignalCommonUtils","WAWebSignalProtocolStore","WAWebUserPrefsMeUser","WAWebUserPrefsStatus","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleE2eIdentityChange: "," has old identity, establishing new session"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleNewIdentity: ignore identity change from companion device"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);l=function(){return a};return a}var m=new(c("WADeprecatedWapParser"))("identityChange",function(a){a.assertTag("notification");a.assertAttr("type","encrypt");a.child("identity");var b=parseInt(a.maybeAttrString("delay"),10);return{wid:d("WAWebJidToWid").deviceJidToDeviceWid(a.attrDeviceJid("from")),stanzaId:a.attrString("id"),delay:Number.isFinite(b)&&b>0?b:null,displayName:a.maybeAttrString("display_name"),lid:a.hasAttr("lid")?d("WAWebJidToWid").deviceJidToDeviceWid(a.attrDeviceJid("lid")):null,offline:a.hasAttr("offline")?a.attrString("offline"):null}});function a(a){var e=m.parse(a);if(e.error){d("WALogger").DEV(l(),a.toString());d("WALogger").ERROR(k(),e.error.toString());return(h||(h=b("Promise"))).reject(e.error)}a=e.success;var f=a.wid;e=a.stanzaId;var g=a.displayName,n=a.delay,o=a.lid,p=a.offline,q=d("WAWap").wap("ack",{to:d("WAWebCommsWapMd").DEVICE_JID(f),id:d("WAWap").CUSTOM_STRING(e),"class":"notification"});if(f.device!=null&&f.device!==d("WAJids").DEFAULT_DEVICE_ID){d("WALogger").LOG(j());return(h||(h=b("Promise"))).resolve(q)}if(d("WAWebUserPrefsMeUser").isMePrimary(f)){d("WAWebBackendApi").frontendFireAndForget("handleSelfPrimaryIdentityChange",{});return(h||(h=b("Promise"))).resolve(q)}var r=!!p&&!d("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete();return d("WAWebMessageQueue").onMessageQueue(String(f),r,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebIdentityChangeApi").clearDeviceRecordForIdentityChange(f,r);var a=(yield d("WAWebSignalProtocolStore").getSignalProtocolStore().loadIdentityKey(d("WAWebSignalCommonUtils").createSignalAddressForIdentityTable(f).toString()));a&&(d("WALogger").LOG(i(),f.toString()),yield d("WAWebSignal").Session.deleteRemoteInfo(f),d("WAWebSecurityCodeApi").addSecurityCodeChangedNotifications(f,r),void d("WAWebSendTcTokenWhenDeviceIdentityChange").sendTcTokenWhenDeviceIdentityChange(f),void c("WAWebUserPrefsStatus").markStatusSenderKeyRotate([f]),r||(n!=null?d("WAWebManageE2ESessionsJob").ensureE2ESessionsWithDelay([f],n,!0):d("WAWebManageE2ESessionsJob").ensureE2ESessions([f],!0)),yield d("WAWebCreateOrReplaceDisplayNamesAndLidPnMappingsJob").createOrReplaceDisplayNamesAndLidPnMappings([{id:d("WAWebWidFactory").toUserWid(f),lid:o?d("WAWebWidFactory").toUserWid(o):null,displayName:g}],!p));return q}))}g.handleE2eIdentityChange=a}),98);
__d("WAWebMessageHighRetryCountWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumE2eDeviceType","WAWebWamEnumInvisibleMessageCategoryType","WAWebWamEnumMediaType","WAWebWamEnumMessageType","WAWebWamEnumSizeBucket"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({MessageHighRetryCount:[3132,{deviceSizeBucket:[5,d("WAWebWamEnumSizeBucket").SIZE_BUCKET],e2eSenderType:[3,d("WAWebWamEnumE2eDeviceType").E2E_DEVICE_TYPE],invisibleMessageCategory:[6,d("WAWebWamEnumInvisibleMessageCategoryType").INVISIBLE_MESSAGE_CATEGORY_TYPE],mediaType:[1,d("WAWebWamEnumMediaType").MEDIA_TYPE],messageType:[4,d("WAWebWamEnumMessageType").MESSAGE_TYPE],retryCount:[2,d("WAWebWamCodegenUtils").TYPES.INTEGER]},[1,20,20],"regular"]},{MessageHighRetryCount:[]});g.MessageHighRetryCountWamEvent=a}),98);
__d("WAWebPostMessageHighRetryCountMetric",["WAWebMessageHighRetryCountWamEvent","WAWebMessagingGatingUtils","WAWebWamGroupMetricCache","WAWebWamMsgUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=5;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(a<h)return;a=new(d("WAWebMessageHighRetryCountWamEvent").MessageHighRetryCountWamEvent)({retryCount:a,messageType:d("WAWebWamMsgUtils").getMessageTypeFromMsgInfoType(b.type)});var c=d("WAWebWamMsgUtils").getWamE2eSenderType(b.author);c!=null&&(a.e2eSenderType=c);c=b.chat;if(c==null?void 0:c.isGroup()){b=(yield d("WAWebWamGroupMetricCache").getGroupMetrics(c));(b==null?void 0:b.deviceSizeBucket)!=null&&(a.deviceSizeBucket=b.deviceSizeBucket);(b==null?void 0:b.participantCount)!=null&&b.participantCount>d("WAWebMessagingGatingUtils").getGroupSizeBypassingSampling()&&(a.weight=0)}a.commit()});return i.apply(this,arguments)}g.MAX_RETRY=h;g.maybePostMessageHighRetryCountMetric=a}),98);
__d("WAWebHandleMsgSendReceipt",["WALogger","WAWebBizCoexGatingUtils","WAWebCreateNackFromStanza","WAWebHandleMsgCommon","WAWebHandleMsgSendAck","WAWebHandleMsgTypes.flow","WAWebMsgProcessingApiUtils","WAWebPostMessageHighRetryCountMetric","WAWebSendDeliveryReceiptJob","WAWebSendReceiptJobCommon","WAWebSendRetryReceiptJob","WAWebUserPrefsMeUser","asyncToGeneratorRuntime","justknobx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['sendReceipt: invalid e2eProcessResult "','"']);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Drop retry for coex when feature is disabled"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(['sendReceipt: HSM mismatch, no receipt sent for "','"']);j=function(){return a};return a}function a(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){var f=a.externalId,g=b.rawTs;b=b.type;var k=d("WAWebMsgProcessingApiUtils").getFrom(a),l=a.type===d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT&&d("WAWebUserPrefsMeUser").isMeAccount(a.author)?a.chat:null,m=a.type===d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT?null:a.author,n=a.category===d("WAWebHandleMsgCommon").CATEGORY_PEER,o=!a.chat.isBot()&&a.author.isBot();switch(e.result){case d("WAWebHandleMsgTypes.flow").E2EProcessResult.SUCCESS:case d("WAWebHandleMsgTypes.flow").E2EProcessResult.SIGNAL_OLD_COUNTER_ERROR:if(o){var p,q;a.type===d("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT?(o=a.author,p=a.chat):(o=a.chat,q=a.author);return d("WAWebSendReceiptJobCommon").sendBotInvokeResponseAcks([f],o,p,q)}return d("WAWebSendDeliveryReceiptJob").sendDeliveryReceiptsAfterDecryption(f,k,l,m,n,e);case d("WAWebHandleMsgTypes.flow").E2EProcessResult.HSM_MISMATCH:d("WALogger").WARN(j(),f).sendLogs("send-receipt-skipping-hsm-mismatch-result");return;case d("WAWebHandleMsgTypes.flow").E2EProcessResult.RETRY:if(c("justknobx")._("371")&&((k==null?void 0:k.isHosted())&&!d("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled())){d("WALogger").LOG(i());return d("WAWebHandleMsgSendAck").sendAck(f,k,b,m)}o=e.retryCount==null?1:e.retryCount+1;yield d("WAWebSendRetryReceiptJob").sendRetryReceipt({retryCount:o,to:k,participant:m,recipient:l,externalId:f,rawTs:g,isPeer:n,retryReason:e.retryReason});void d("WAWebPostMessageHighRetryCountMetric").maybePostMessageHighRetryCountMetric(o,a);return;case d("WAWebHandleMsgTypes.flow").E2EProcessResult.BACKFILL:return d("WAWebHandleMsgSendAck").sendAck(f,k,b,m);case d("WAWebHandleMsgTypes.flow").E2EProcessResult.PARSE_VALIDATION_ERROR:return d("WAWebHandleMsgSendAck").sendNack(f,k,b,m,d("WAWebCreateNackFromStanza").NackReason.InvalidProtobuf,e.e2eFailureReason);case d("WAWebHandleMsgTypes.flow").E2EProcessResult.PARSE_ERROR:return d("WAWebHandleMsgSendAck").sendNack(f,k,b,m,d("WAWebCreateNackFromStanza").NackReason.ParsingError)}d("WALogger").ERROR(h(),e.result).sendLogs("send-receipt-missing-e2e-process-result");return d("WAWebHandleMsgSendAck").sendAck(f,k,b,m)});return k.apply(this,arguments)}g.sendReceipt=a}),98);
__d("WAWebWamEnumCallStanzaType",[],(function(a,b,c,d,e,f){a=Object.freeze({OFFER:0,ACCEPT:1,REJECT:2,VIDEO:3,TERMINATE:4,ENC_REKEY:5,RELAYLATENCY:6,TRANSPORT:7,PREACCEPT:8,GROUP_UPDATE:9,MUTE_V2:10,INTERRUPTION:11,FLOWCONTROL:12,NOTIFY:13,OFFER_NOTICE:14,CALL_RELAY:15,MUTE:16,SCREEN_SHARE:17,UNKNOWN:18});f.CALL_STANZA_TYPE=a}),66);
__d("WAWebOfflineCountTooHighWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumCallStanzaType","WAWebWamEnumInvisibleMessageCategoryType","WAWebWamEnumMediaType","WAWebWamEnumMessageType","WAWebWamEnumStanzaType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({OfflineCountTooHigh:[2638,{callStanzaType:[7,d("WAWebWamEnumCallStanzaType").CALL_STANZA_TYPE],invisibleMessageCategory:[8,d("WAWebWamEnumInvisibleMessageCategoryType").INVISIBLE_MESSAGE_CATEGORY_TYPE],mediaType:[3,d("WAWebWamEnumMediaType").MEDIA_TYPE],messageType:[4,d("WAWebWamEnumMessageType").MESSAGE_TYPE],notificationStanzaType:[6,a.TYPES.STRING],offlineCount:[2,a.TYPES.INTEGER],receiptStanzaType:[5,a.TYPES.STRING],stanzaType:[1,d("WAWebWamEnumStanzaType").STANZA_TYPE]},[1,1,1],"regular"]},{OfflineCountTooHigh:[]});g.OfflineCountTooHighWamEvent=b}),98);
__d("WAWebMaybePostOfflineCountTooHighMetric",["WALogger","WAWebBackendJobsCommon","WAWebOfflineCountTooHighWamEvent","WAWebWamEnumStanzaType","WAWebWamMsgUtils"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failed to post OfflineCountTooHigh metric: ",""]);h=function(){return a};return a}var i=11;function a(a){var b=a.msgInfo,c=a.msgMeta;a=a.encs;var e=parseInt(b.offline,10);if(Number.isNaN(e)||e<i)return;a=new(d("WAWebOfflineCountTooHighWamEvent").OfflineCountTooHighWamEvent)({offlineCount:e,stanzaType:d("WAWebWamEnumStanzaType").STANZA_TYPE.MESSAGE,mediaType:d("WAWebBackendJobsCommon").getMetricMediaType({encMediaType:(e=a.find(function(a){return a.encMediaType!=null}))==null?void 0:e.encMediaType,msgType:c.type,msgPollType:c.pollType})});e=d("WAWebWamMsgUtils").getMessageTypeFromMsgInfoType(b.type);e!=null&&(a.messageType=e);a.commitAndWaitForFlush()["catch"](function(a){d("WALogger").WARN(h(),a).tags("messaging")})}g.OFFLINE_COUNT_TOO_HIGH_THRESHOLD=i;g.maybePostOfflineCountTooHigh=a}),98);
__d("WAWebMsgProcessingDecryptEnc",["Promise","WAWebBackendJobs.flow","WAWebBotGating","WAWebBotMessageSecret","WAWebSignal","err"],(function(a,b,c,d,e,f,g){var h;function a(a,e,f,g,i){var j=a.e2eType;a=a.ciphertext;switch(j){case d("WAWebBackendJobs.flow").CiphertextType.Skmsg:if(!(e.isGroup()||e.isBroadcast()))return(h||(h=b("Promise"))).reject(c("err")("['messaging'] decryptEnc: Can not do skmsg for non group "+e.toString()));return!f?(h||(h=b("Promise"))).reject(c("err")("['messaging'] decryptEnc: receive msg from "+e.toString()+" without participant")):d("WAWebSignal").Cipher.decryptGroupSignalProto(e,f,a,i);case d("WAWebBackendJobs.flow").CiphertextType.Pkmsg:case d("WAWebBackendJobs.flow").CiphertextType.Msg:f=e.isUser()?e:f;return!f?(h||(h=b("Promise"))).reject(c("err")("['messaging'] decryptEnc: receive msg from "+e.toString()+" without participant")):d("WAWebSignal").Cipher.decryptSignalProto(f,j,a,i);case d("WAWebBackendJobs.flow").CiphertextType.Msmsg:return!d("WAWebBotGating").isBotReceiveEnabled()?(h||(h=b("Promise"))).reject(c("err")("[messaging] decryptEnc: Msmsg unsupported")):d("WAWebBotMessageSecret").decryptMsmsgBotMessage(a,g)}}g.decryptEnc=a}),98);
__d("WAWebMsgProcessingDecryptApi",["WALogger","WAWebAdvSignatureApi","WAWebBackendJobs.flow","WAWebHandleMsgTypes.flow","WAWebLidFoundationalGatingUtils","WAWebMsgProcessingApiUtils","WAWebMsgProcessingDecryptEnc","WAWebMsgProcessingDecryptionHandler","WAWebOfflineResumeMsgProcessReporter","WAWebPostE2eMessageRecvMetric","WAWebSendRetryReceiptJob","WAWebSignalProtocolStore","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["processDecryptedProto: msgId::"," e2eType:"," done"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: msgId::"," e2eType:"," done"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: msgId::",", validateADVIdentity failed"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: msgId::"," skMsg is out of order"]);k=function(){return a};return a}function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.bizInfo,e=a.msgInfo,f=a.paymentInfo,g=a.deviceIdentity,k=a.encs,l=a.msgMeta,n=a.rcat,o=a.hsmInfo,p=a.msgBotInfo,q=a.reportingTokenInfo,r=d("WAWebMsgProcessingApiUtils").getFrom(e);m(k,e);if(e.author.device!=null&&e.author.device!==0){g=(yield d("WAWebAdvSignatureApi").validateADVwithEncs(e.author,g,k,!!e.offline));if(!g){d("WALogger").WARN(j(),e.externalId).tags("messaging");return{result:d("WAWebHandleMsgTypes.flow").E2EProcessResult.RETRY,retryCount:k[0].retryCount,retryReason:d("WAWebSendRetryReceiptJob").RetryReason.AdvFailure}}}g=!1;var s=d("WAWebMsgProcessingDecryptionHandler").createDecryptionHandler(a);for(k of k)try{if(!s.canDecryptNext(k))continue;var t=d("WAWebOfflineResumeMsgProcessReporter").msgProcessReporter.startMarker(d("WAWebOfflineResumeMsgProcessReporter").msgProcessReporter.stage.Decryption),u=(yield d("WAWebMsgProcessingDecryptEnc").decryptEnc(k,r,e.author,a,d("WAWebLidFoundationalGatingUtils").shouldUseDeprecatedSessionForIncomingMessage(e.author,l==null?void 0:l.deprecatedLidSession)));t==null?void 0:t();d("WALogger").LOG(i(),e.externalId,k.e2eType).tags("messaging");d("WAWebPostE2eMessageRecvMetric").postSuccessE2eMessageRecvMetric({enc:k,from:r,msgMeta:l,msgInfo:e,msgBotInfo:p,error:null});t={retryCount:k.retryCount,e2eType:k.e2eType,encMediaType:k.encMediaType,hideFail:k.hideFail};u=(yield b({decrypted:u,info:e,paymentInfo:f,e2eInfo:t,bizInfo:c,hsmInfo:o,msgMeta:l,rcat:n,msgBotInfo:p,reportingTokenInfo:q}));u.hasInactiveMsg&&(g=!0);d("WALogger").LOG(h(),e.externalId,k.e2eType).tags("messaging")}catch(a){s.handleError(k,a)}yield d("WAWebSignalProtocolStore").getSignalProtocolStore().flushBufferToDiskIfNotMemOnlyMode();return s.getResult(g)});return l.apply(this,arguments)}function m(a,b){a.length===2&&a[0].e2eType===d("WAWebBackendJobs.flow").CiphertextType.Skmsg&&d("WALogger").ERROR(k(),b.externalId).tags("messaging").sendLogs("handleMsg: invalid encs order",{sampling:.01})}g.decryptE2EPayload=a}),98);
__d("WAWebProcessPhoneNumberMapping",["Promise","WAWebApiContact","WAWebDBCreateLidPnMappings","WAWebSetUsernameJob","WAWebUpdateLidMetadataJob","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(a,b,c){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,e){var f=a.recipientPn,g=a.recipientUsername,i=a.chat,j=a.author;if(d("WAWebUserPrefsMeUser").isMeAccount(j)){g!=null&&(yield d("WAWebSetUsernameJob").setUsernamesJob([{userId:d("WAWebWidFactory").toUserWid(i),username:g}]));if((c==null?void 0:c.origin)!=="username")if(f!=null)yield (h||(h=b("Promise"))).all([d("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:[{lid:d("WAWebWidFactory").toUserWid(i),pn:d("WAWebWidFactory").toUserWid(f)}],flushImmediately:e}),d("WAWebUpdateLidMetadataJob").updateLidMetadataJob([{lid:d("WAWebWidFactory").toUserWid(i),data:{shareOwnPn:!1}}])]);else{g=(yield d("WAWebApiContact").getContactRecord(i));(g==null||(g==null?void 0:g.shareOwnPn)!==!0)&&d("WAWebUpdateLidMetadataJob").updateLidMetadataJob([{lid:d("WAWebWidFactory").toUserWid(i),data:{shareOwnPn:!0}}])}return}f=a.displayName;f!=null&&(yield d("WAWebUpdateLidMetadataJob").updateLidMetadataJob([{lid:d("WAWebWidFactory").toUserWid(j),data:{displayNameLID:f}}]));if((c==null?void 0:c.origin)==="username"){g=a.username;i=[];f=d("WAWebWidFactory").toUserWid(j);g!=null?i.push({userId:f,username:g}):i.push({userId:f});yield d("WAWebSetUsernameJob").setUsernamesJob(i)}g=a.senderPn;g!=null&&(yield d("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:[{lid:d("WAWebWidFactory").toUserWid(j),pn:d("WAWebWidFactory").toUserWid(g)}],flushImmediately:e}));(c==null?void 0:c.origin)!=="username"&&(g==null&&(yield d("WAWebUpdateLidMetadataJob").updateLidMetadataJob([{lid:d("WAWebWidFactory").toUserWid(j),data:{shareOwnPn:!0}}])))});return j.apply(this,arguments)}function k(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b=a.recipientLid;var e=a.chat,f=a.author;d("WAWebUserPrefsMeUser").isMeAccount(f)&&b!=null&&(yield d("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:[{lid:d("WAWebWidFactory").toUserWid(b),pn:d("WAWebWidFactory").toUserWid(e)}],flushImmediately:c}));b=a.senderLid;b!=null&&(yield d("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:[{lid:d("WAWebWidFactory").toUserWid(b),pn:d("WAWebWidFactory").toUserWid(f)}],flushImmediately:c}))});return l.apply(this,arguments)}function m(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var d=a.author;return d.isLid()?i(a,b,c):k(a,b,c)});return n.apply(this,arguments)}function o(a,b){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.participantPn,e=a.participantLid,f=a.author;c!=null&&(yield d("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:[{lid:d("WAWebWidFactory").toUserWid(f),pn:d("WAWebWidFactory").toUserWid(c)}],flushImmediately:b}));e!=null&&(yield d("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:[{lid:d("WAWebWidFactory").toUserWid(e),pn:d("WAWebWidFactory").toUserWid(f)}],flushImmediately:b}));c=a.displayName;!d("WAWebUserPrefsMeUser").isMeAccount(f)&&c!=null&&(yield d("WAWebUpdateLidMetadataJob").updateLidMetadataJob([{lid:d("WAWebWidFactory").toUserWid(f),data:{displayNameLID:c}}]))});return p.apply(this,arguments)}function a(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){var d=a.chat;if(d.isUser())return m(a,b,c);else if(d.isGroup()||d.isBroadcast())return o(a,c)});return q.apply(this,arguments)}g.processPhoneNumberMapping=a}),98);
__d("WAWebHandleMsg",["Promise","WALogger","WAParsableWapNode","WATimeUtils","WAWebCreateNackFromStanza","WAWebDBReportingTokenUtils","WAWebGetMessageCache","WAWebHandleMsgCommon","WAWebHandleMsgMetaUtils","WAWebHandleMsgParser","WAWebHandleMsgProcess","WAWebHandleMsgSendReceipt","WAWebHandleMsgTypes.flow","WAWebMaybePostOfflineCountTooHighMetric","WAWebMessageDedupUtils","WAWebMessageInsertDebugPlaceholder","WAWebMessageQueue","WAWebMsgProcessingApiUtils","WAWebMsgProcessingDecryptApi","WAWebMsgType","WAWebOfflineHandler","WAWebPostIncomingMessageDropMetric","WAWebPostUnknownStanzaMetric","WAWebProcessPhoneNumberMapping","asyncToGeneratorRuntime","cr:4122","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleMessage: msgId::",', start processing message, offline="','"']);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["setting fanout placeholder type to hosted fanout"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["setting fanout placeholder type to bot fanout future proofing"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleMessage: msgId::",", get fanout placeholder"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["message-dedup: skip progressing duplicate"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["failedParsingMessage: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["failedParsingMessage: "," ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["failedParsingMessage:"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["failedParsingMessage: ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleMsg: error while parsing message stanza: ",""]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleMsg: error while parsing message stanza"]);s=function(){return a};return a}function t(a){return u.apply(this,arguments)}function u(){u=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=d("WAWebHandleMsgParser").incomingMsgParser.parse(a);if(e.error){c("gkx")("26258")?d("WALogger").WARN(s()).tags("messaging"):d("WALogger").WARN(r(),a.toString()).tags("messaging");d("WAWebPostUnknownStanzaMetric").postUnknownStanzaMetric(a);var f=d("WAWebHandleMsgParser").incomingMsgParserForAckOnly.parse(a);if(f.error){f.error instanceof d("WAParsableWapNode").XmppParsingFailure?d("WALogger").LOG(q(),f.error).tags("messaging").sendLogs("failedParsing: ack not parsed XMPP",{sampling:.01}):d("WALogger").LOG(p()).tags("messaging").sendLogs("failedParsing: ack not parsed",{sampling:.01});d("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropInvalidStanza(a);return(h||(h=b("Promise"))).resolve(d("WAWebCreateNackFromStanza").createNackFromStanza(a,d("WAWebCreateNackFromStanza").NackReason.ParsingError))}f=f.success;var g=f.type,u=f.externalId,w=f.msgInfo;f=f.offline;var x=d("WAWebCreateNackFromStanza").NackReason.ParsingError;g==null?(x=d("WAWebCreateNackFromStanza").NackReason.UnrecognizedStanzaType,d("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropUnknownMessageType(a)):e.error instanceof d("WAParsableWapNode").XmppParsingFailure&&((g=e.error)==null?void 0:g.reason)===""+d("WAWebCreateNackFromStanza").NackReason.InvalidHostedCompanionStanza?(x=d("WAWebCreateNackFromStanza").NackReason.InvalidHostedCompanionStanza,d("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropInvalidHostedCompanionStanza(a)):d("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropInvalidStanza(a);d("WAWebMessageInsertDebugPlaceholder").maybeInsertDebugPlaceholder({externalId:u,nackReason:x,msgInfo:w,offline:f});f!=null&&(e.error instanceof d("WAParsableWapNode").XmppParsingFailure?d("WALogger").LOG(o(),u,e.error).tags("messaging").sendLogs("failedParsing: ack parsed XMPP",{sampling:.01}):d("WALogger").LOG(n(),u).tags("messaging").sendLogs("failedParsing: ack parsed",{sampling:.01}));return(h||(h=b("Promise"))).resolve(d("WAWebCreateNackFromStanza").createNackFromStanza(a,x))}var y=e.success;d("WAWebMaybePostOfflineCountTooHighMetric").maybePostOfflineCountTooHigh(y);var z=y.msgMeta,A=y.msgInfo,B=y.msgBotInfo,C=y.encs,D=d("WAWebMsgProcessingApiUtils").messageInfoToKey(A);A.clientReceivedTsMillis=d("WATimeUtils").unixTimeMs();if(A.offline!=null){d("WAWebOfflineHandler").OfflineMessageHandler.addOfflinePendingMessage();d("WAWebOfflineHandler").OfflineMessageHandler.offlineStanzaReceivedAfterComplete();if(d("WAWebMessageDedupUtils").isMessageDedupEnabled()&&d("WAWebMessageDedupUtils").isPengingMessageCacheEnabled()&&d("WAWebMessageDedupUtils").hasPendingMessage(D,A.ts,C)){d("WALogger").LOG(m());d("WAWebOfflineHandler").OfflineMessageHandler.processMessageDecryptResult(d("WAWebHandleMsgTypes.flow").E2EProcessResult.SUCCESS);return}}var E=1;d("WAWebMessageDedupUtils").isPengingMessageCacheEnabled()&&(E=d("WAWebMessageDedupUtils").addPendingMessage(D,A.ts,C));d("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete()&&delete y.msgInfo.offline;if(b("cr:4122")==null?void 0:b("cr:4122").isNextMessagePostponed(a,t)){void d("WAWebHandleMsgSendReceipt").sendReceipt(y.msgInfo,y.msgMeta,{result:d("WAWebHandleMsgTypes.flow").E2EProcessResult.SUCCESS});return}return d("WAWebMessageQueue").onMessageQueue(A.chat.toString(),!!y.msgInfo.offline,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){A.msgProcessStartTsMillis=d("WATimeUtils").unixTimeMs();yield d("WAWebProcessPhoneNumberMapping").processPhoneNumberMapping(A,z,A.offline==null);if(z.isUnavailable){d("WAWebDBReportingTokenUtils").maybeStoreReportingTag({msgKey:D,stanzaId:A.externalId,msgTs:A.ts,incomingMsgReportingTokenInfo:y.reportingTokenInfo});d("WALogger").LOG(l(),A.externalId).tags("messaging");var a=d("WAWebHandleMsgTypes.flow").PlaceholderType.FANOUT;B!=null?(d("WALogger").DEV(k()),a=d("WAWebHandleMsgTypes.flow").PlaceholderType.BOT_UNAVAILABLE_FANOUT):z.isHostedMsgUnavailable===!0&&(d("WALogger").DEV(j()),a=d("WAWebHandleMsgTypes.flow").PlaceholderType.HOSTED_UNAVAILABLE_FANOUT);yield d("WAWebHandleMsgProcess").processPlaceholderMsg({type:d("WAWebMsgType").MSG_TYPE.CIPHERTEXT,msgMeta:z,msgInfo:A,placeholderType:a});d("WAWebHandleMsgSendReceipt").sendReceipt(A,z,{result:d("WAWebHandleMsgTypes.flow").E2EProcessResult.BACKFILL});return}d("WALogger").LOG(i(),A.externalId,(a=A.offline)!=null?a:"").tags("messaging");a=(yield d("WAWebMsgProcessingDecryptApi").decryptE2EPayload(y,d("WAWebHandleMsgProcess").processDecryptedMessageProto));A.offline!=null&&d("WAWebOfflineHandler").OfflineMessageHandler.processMessageDecryptResult(a.result);a.result!==d("WAWebHandleMsgTypes.flow").E2EProcessResult.SUCCESS&&d("WAWebDBReportingTokenUtils").maybeStoreReportingTag({msgKey:D,stanzaId:A.externalId,msgTs:A.ts,incomingMsgReportingTokenInfo:y.reportingTokenInfo});a.result===d("WAWebHandleMsgTypes.flow").E2EProcessResult.SIGNAL_OLD_COUNTER_ERROR&&v(y)?void d("WAWebGetMessageCache").getMessageCache().addMessages([{duplicateMsgReceiptInfo:{externalId:A.externalId,from:d("WAWebMsgProcessingApiUtils").getFrom(A),author:A.author,msgInfo:A,msgMeta:z,enc:a.failedEnc||C[0],hasHideFailEnc:C.some(function(a){return a.hideFail}),msgReceivedTimes:E}}],A.offline==null):A.offline==null||A.category===d("WAWebHandleMsgCommon").CATEGORY_PEER||a.result!==d("WAWebHandleMsgTypes.flow").E2EProcessResult.SUCCESS&&a.result!==d("WAWebHandleMsgTypes.flow").E2EProcessResult.SIGNAL_OLD_COUNTER_ERROR?void d("WAWebHandleMsgSendReceipt").sendReceipt(A,z,a):void d("WAWebGetMessageCache").getMessageCache().addMessages([{receiptInfo:{externalId:A.externalId,from:d("WAWebMsgProcessingApiUtils").getFrom(A),author:A.author}}],!1)}))});return u.apply(this,arguments)}function v(a){var b=a.msgMeta;a=a.encs;a=a.some(function(a){return a.hideFail});return a?d("WAWebHandleMsgMetaUtils").isReactionMsgMeta(b)||d("WAWebHandleMsgMetaUtils").isPollVoteMsgMeta(b):b.type===d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.text||b.type===d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.media||b.type===d("WAWebHandleMsgCommon").STANZA_MSG_TYPES.poll}g["default"]=t}),98);
__d("WAWebHandleMsgReceiptParser",["WADeprecatedWapParser","WAWebAck","WAWebHandleMsgTypes.flow","WAWebJidToWid","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){var h={read:(a=d("WAWebAck")).ACK.READ,played:a.ACK.PLAYED,inactive:a.ACK.INACTIVE,"server-error":a.ACK.CONTENT_GONE,sender:a.ACK.RECEIVED,"read-self":a.ACK.READ,"played-self":a.ACK.PLAYED,peer_msg:a.ACK.PEER},i={SIMPLE:"simple",AGGREGATE:"aggregate"};b=new(c("WADeprecatedWapParser"))("incomingMsgReceiptParser",function(a){a.assertTag("receipt");a.hasAttr("to")&&a.assertAttr("to",d("WAWebUserPrefsMeUser").assertGetMe().toJid());var b=a.hasAttr("type")?a.attrEnumOrNullIfUnknown("type",h):d("WAWebAck").ACK.RECEIVED;b={ack:b||d("WAWebAck").ACK.RECEIVED,stanzaId:a.attrString("id"),from:d("WAWebJidToWid").jidWithTypeToWid(a.attrJidWithType("from")),ackString:a.hasAttr("type")?a.attrString("type"):null,offline:a.hasAttr("offline")?a.attrString("offline"):null};var c=a.maybeChild("error");c!=null&&(c.hasAttr("reason")&&c.attrString("reason")==="lid"&&c.attrString("type")==="feature-incapable"&&(b.ack=d("WAWebAck").ACK.SENT));c=a.maybeChild("participants");return c?j(b,c):k(b,a)});function j(a,b){var c=b.mapChildrenWithTag("user",function(a){try{var b=d("WAWebJidToWid").deviceJidToDeviceWid(a.attrDeviceJid("jid"));a=a.attrTime("t");return{participant:b,ts:a}}catch(a){return null}});c=c.filter(Boolean);return babelHelpers["extends"]({},a,{type:i.AGGREGATE,externalId:b.attrString("key"),receipts:c})}function k(a,b){var c=b.hasAttr("participant")?d("WAWebJidToWid").deviceJidToDeviceWid(b.attrDeviceJid("participant")):null,e=b.hasAttr("recipient")?d("WAWebJidToWid").userJidToUserWid(b.attrUserJid("recipient")):null,f=b.maybeAttrString("type")==="view",g;b.hasChild("list")?g=b.child("list").mapChildrenWithTag("item",function(a){return f?a.attrString("server_id"):a.attrString("id")}):g=[];var h;if(b.hasChild("biz")){var j=b.child("biz"),k=d("WAWebHandleMsgTypes.flow").ActualActorsEnumType.cast(j.maybeAttrInt("actual_actors")),l=d("WAWebHandleMsgTypes.flow").HostStorageEnumType.cast(j.maybeAttrInt("host_storage"));j=j.maybeAttrInt("privacy_mode_ts");k!=null&&l!=null&&j!=null&&(h={actualActors:k,hostStorage:l,privacyModeTs:j})}f||g.push(a.stanzaId);k=!1;(c==null?void 0:c.isBot())&&b.hasAttr("is_lid")&&(k=b.attrString("is_lid")==="true");return babelHelpers["extends"]({},a,{type:i.SIMPLE,externalIds:g,participant:c,recipient:e,ts:b.attrTime("t"),biz:h,isLidBot:k})}g.RECEIPT_TYPES_TO_ACK=h;g.RECEIPT_TYPE=i;g.msgReceiptParser=b}),98);
__d("WAWebWamEnumReceiptAggregationType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,MULTI_MESSAGES:1,MULTI_PARTICIPANTS:2});f.RECEIPT_AGGREGATION_TYPE=a}),66);
__d("WAWebWamEnumReceiptStanzaStage",[],(function(a,b,c,d,e,f){a=Object.freeze({OVERALL:0,PARSE:1,WAITING_TO_PROCESS:2,PROCESS:3,WAITING_TO_ACK:5,ACK:4});f.RECEIPT_STANZA_STAGE=a}),66);
__d("WAWebReceiptStanzaReceiveWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumMessageType","WAWebWamEnumReceiptAggregationType","WAWebWamEnumReceiptStanzaStage"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({ReceiptStanzaReceive:[2496,{dbReadsCount:[12,a.TYPES.INTEGER],dbWritesCount:[13,a.TYPES.INTEGER],mediaType:[2,d("WAWebWamEnumMediaType").MEDIA_TYPE],messageType:[10,d("WAWebWamEnumMessageType").MESSAGE_TYPE],receiptAggregation:[11,d("WAWebWamEnumReceiptAggregationType").RECEIPT_AGGREGATION_TYPE],receiptStanzaDuration:[1,a.TYPES.TIMER],receiptStanzaHasOrphaned:[6,a.TYPES.BOOLEAN],receiptStanzaOfflineCount:[3,a.TYPES.INTEGER],receiptStanzaProcessedCount:[8,a.TYPES.INTEGER],receiptStanzaRetryVer:[5,a.TYPES.INTEGER],receiptStanzaStage:[9,d("WAWebWamEnumReceiptStanzaStage").RECEIPT_STANZA_STAGE],receiptStanzaTotalCount:[7,a.TYPES.INTEGER],receiptStanzaType:[4,a.TYPES.STRING]},[1,1e3,2e3],"regular"]},{ReceiptStanzaReceive:[]});g.ReceiptStanzaReceiveWamEvent=b}),98);
__d("WAWebCreateReceiptStanzaReceiveMetric",["WAWebAck","WAWebHandleMsgReceiptParser","WAWebReceiptStanzaReceiveWamEvent","WAWebWamEnumMessageType","WAWebWamEnumReceiptStanzaStage","WAWebWid"],(function(a,b,c,d,e,f,g){function a(){var a=new(d("WAWebReceiptStanzaReceiveWamEvent").ReceiptStanzaReceiveWamEvent)({receiptStanzaStage:d("WAWebWamEnumReceiptStanzaStage").RECEIPT_STANZA_STAGE.OVERALL,receiptStanzaTotalCount:1});return function(b){var c=b.ackString,e=b.from,f=b.offline;b=b.receipts;a.messageType=h(e);if(f!=null){e=parseInt(f,10);Number.isNaN(e)||(a.receiptStanzaOfflineCount=e)}c==null?a.receiptStanzaType=d("WAWebAck").ACK_STRING.DELIVERY:d("WAWebHandleMsgReceiptParser").RECEIPT_TYPES_TO_ACK[c]!=null&&(a.receiptStanzaType=c);(b==null?void 0:b.length)!=null&&(a.receiptStanzaTotalCount=b.length);a.markReceiptStanzaDuration();a.commit()}}function h(a){if(c("WAWebWid").isStatus(a))return d("WAWebWamEnumMessageType").MESSAGE_TYPE.STATUS;else if(c("WAWebWid").isGroup(a))return d("WAWebWamEnumMessageType").MESSAGE_TYPE.GROUP;else if(c("WAWebWid").isBroadcast(a))return d("WAWebWamEnumMessageType").MESSAGE_TYPE.BROADCAST;else if(c("WAWebWid").isNewsletter(a))return d("WAWebWamEnumMessageType").MESSAGE_TYPE.CHANNEL;return d("WAWebWamEnumMessageType").MESSAGE_TYPE.INDIVIDUAL}g.createReceiptStanzaReceiveMetric=a}),98);
__d("WAWebHandleAckPeerSimpleReceipt",["WAWebApiPeerMessageStore","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield d("WAWebApiPeerMessageStore").deletePeerMessage(a.stanzaId)});return h.apply(this,arguments)}g.handleAckPeerSimpleReceipt=a}),98);
__d("WAWebHandleBotInvokeMsgReceipt",["WALogger","WAWebAck","WAWebMessageReceiptBatcher","WAWebMsgKey","WAWebOfflineHandler","WAWebOrchestratorNonPersistedJob","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][batcher] adding receipt ",""]);h=function(){return a};return a}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.ack,e=a.from,f=a.externalIds,g=a.ts,i=a.ackString,j=a.recipient;a=a.offline;a=a!=null&&!d("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete();if(i!==d("WAWebAck").ACK_STRING.READ||j==null||!e.isBot())throw c("err")("handleBotOneToOneInvokeSimpleReadReceipt: unexpected receipt");i=f.map(function(a){return new(c("WAWebMsgKey"))({id:a,remote:j,fromMe:!0})});f=i.map(function(a){return a.toString()});d("WALogger").DEV(h(),f.join(","));i=d("WAWebMessageReceiptBatcher").receiptBatcher.acceptOtherReceipt({ack:b,ts:g,receiverId:e,msgKeys:f,isBotInvoke:!0});a||(yield d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("receiptBatcherRunActiveBatches",function(){return d("WAWebMessageReceiptBatcher").receiptBatcher.runActiveBatches()}).waitUntilCompleted());return i});return i.apply(this,arguments)}g.handleBotOneToOneInvokeSimpleReadReceipt=a}),98);
__d("WAWebHandleMsgReceiptUtils",["WAWebAck","WAWebHandleMsgReceiptParser"],(function(a,b,c,d,e,f,g){function a(a){return a===d("WAWebAck").ACK_STRING.READ||a===d("WAWebAck").ACK_STRING.READ_SELF||a===d("WAWebAck").ACK_STRING.PLAYED||a===d("WAWebAck").ACK_STRING.PLAYED_SELF}function b(a){return a.receipts.map(function(b){return{type:d("WAWebHandleMsgReceiptParser").RECEIPT_TYPE.SIMPLE,stanzaId:a.externalId,externalIds:[a.externalId],from:a.from,participant:b.participant,recipient:null,ts:b.ts,ack:a.ack,ackString:a.ackString,offline:a.offline,biz:null,isLidBot:!1}})}g.isReadOrPlayedReceipt=a;g.deaggregateReceipt=b}),98);
__d("WAWebHandleDirectChatReceipt",["Promise","WAJids","WALogger","WAWebAck","WAWebHandleMsgReceiptCommon","WAWebHandleMsgReceiptUtils","WAWebMessageReceiptBatcher","WAWebMsgKey","WAWebOfflineHandler","WAWebSimpleSignalPNToFBIDMigration","WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsKeys","WAWebUserPrefsMeUser","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","err","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][batcher] adding peer receipt ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][batcher] adding receipt ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleChatSimpleReceipt: forwarding "," to ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["error: invalid sender/peer receipt without recipient"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["error: invalid sender/peer receipt without recipient"]);m=function(){return a};return a}function a(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.from,f=a.externalIds,g=a.ts,n=a.recipient,o=a.ackString,p=a.offline,q=a.biz;a=a.ack;var r=o===d("WAWebAck").ACK_STRING.SENDER,s=!r&&d("WAWebUserPrefsMeUser").isMeAccount(e),t;if(s||r){if(!n){!c("gkx")("26258")?d("WALogger").WARN(m()).sendLogs("handleChatSimpleReceipt: failed"):d("WALogger").WARN(l());throw c("err")("handleChatSimpleReceipt: invalid sender/peer receipt without recipient")}t=n}else{var u;t=d("WAWebWidFactory").toUserWid(e);u=((u=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").HASHED_KEYS.USER_PRIVACY_SETTINGS))==null?void 0:u.readReceipts)==="none";u&&(a===d("WAWebAck").ACK.READ||a===d("WAWebAck").ACK.PLAYED)&&(a=d("WAWebAck").ACK.RECEIVED)}u=d("WAWebSimpleSignalPNToFBIDMigration").getDeprecatedPnChatForFbid(t);u!=null&&(d("WALogger").LOG(k(),t.toLogString(),u.toLogString()),t=d("WAWebWidFactory").toUserWid(u));var v;t!=null&&c("WAWebWid").isWid(t)&&t===d("WAWebWidFactory").createWid(d("WAJids").PSA_JID)&&(v=d("WAWebWidFactory").createWid(d("WAJids").PSA_JID));u=f.map(function(a){return new(c("WAWebMsgKey"))({id:a,remote:t,fromMe:!s,participant:v})});s&&a===d("WAWebAck").ACK.PLAYED&&d("WAWebHandleMsgReceiptCommon").handleViewOnceOpenedIfNecessary(u);u=u.map(function(a){return a.toString()});p!=null&&d("WAWebOfflineHandler").OfflineMessageHandler.offlineStanzaReceivedAfterComplete();p=p!=null&&!d("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete();var w=(h||(h=b("Promise"))).resolve();!s?(d("WALogger").DEV(j(),u.join(",")),w=d("WAWebMessageReceiptBatcher").receiptBatcher.acceptOtherReceipt({ack:a,ts:g,receiverId:e,msgKeys:u,privacyMode:q,isSender:r})):n!=null&&d("WAWebHandleMsgReceiptUtils").isReadOrPlayedReceipt(o)&&f.length>0&&(d("WALogger").DEV(i(),u.join(",")),w=d("WAWebMessageReceiptBatcher").receiptBatcher.acceptPeerReceipt({ack:a,ts:g,msgKeys:u,isOffline:p,remote:t}));p||d("WAWebMessageReceiptBatcher").receiptBatcher.runActiveBatches();return w});return n.apply(this,arguments)}g.handleChatSimpleReceipt=a}),98);
__d("WAWebHandleGroupChatReceipt",["WALogger","WAWebABProps","WAWebAck","WAWebHandleMsgReceiptCommon","WAWebHandleMsgReceiptUtils","WAWebMessageReceiptBatcher","WAWebMsgKey","WAWebOfflineHandler","WAWebOrchestratorNonPersistedJob","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime","err","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][batcher] adding peer receipt ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][batcher] adding receipt ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["error: invalid sender/peer receipt without recipient"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["error: invalid sender/peer receipt without recipient"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["error: got group ack without participant."]);l=function(){return a};return a}function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.ack,e=a.from,f=a.externalIds,g=a.ts,m=a.ackString,n=a.participant,o=a.recipient,p=a.offline;a=a.isLidBot;if(!n){d("WALogger").ERROR(l()).sendLogs("handleGroupSimpleReceipt: failed");throw c("err")("handleGroupSimpleReceipt: got group ack without participant.")}var q=d("WAWebWidFactory").toUserWid(n),r=m===d("WAWebAck").ACK_STRING.SENDER,s=!r&&d("WAWebUserPrefsMeUser").isMeAccount(q),t;if(s){if(!o){!c("gkx")("26258")?d("WALogger").WARN(k()).sendLogs("handleGroupSimpleReceipt: failed"):d("WALogger").WARN(j());throw c("err")("handleGroupSimpleReceipt: invalid sender/peer receipt without recipient")}t=o}else t=q.isLid()||a?d("WAWebUserPrefsMeUser").getMeLidUser():d("WAWebUserPrefsMeUser").getMeUser();r=f.map(function(a){return new(c("WAWebMsgKey"))({id:a,remote:e,fromMe:!s,participant:t})});s&&b===d("WAWebAck").ACK.PLAYED&&void d("WAWebHandleMsgReceiptCommon").handleViewOnceOpenedIfNecessary(r);q=r.map(function(a){return a.toString()});p!=null&&d("WAWebOfflineHandler").OfflineMessageHandler.offlineStanzaReceivedAfterComplete();a=p!=null&&!d("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete();var u;!s?(d("WALogger").DEV(i(),q.join(",")),u=d("WAWebMessageReceiptBatcher").receiptBatcher.acceptOtherReceipt({ack:b,ts:g,receiverId:n,msgKeys:q})):o!=null&&d("WAWebHandleMsgReceiptUtils").isReadOrPlayedReceipt(m)&&f.length>0&&(d("WALogger").DEV(h(),q.join(",")),u=d("WAWebMessageReceiptBatcher").receiptBatcher.acceptPeerReceipt({isOffline:a,ack:b,ts:g,msgKeys:q,remote:e}));!a&&!d("WAWebABProps").getABPropConfigValue("web_batch_online_read_receipts_enabled")&&(yield d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("receiptBatcherRunActiveBatches",function(){return d("WAWebMessageReceiptBatcher").receiptBatcher.runActiveBatches()}).waitUntilCompleted());return u});return m.apply(this,arguments)}g.handleGroupSimpleReceipt=a}),98);
__d("WAWebHandleNewsletterReceipt",["WAAckLevel","WALogger","WAWebAck","WAWebHandleMsgReceiptCommon","WAWebMessageReceiptBatcher","WAWebMsgKey","WAWebOfflineHandler","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["","  online, updating the UI"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose([""," only peer receipts are accepted"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([""," ACK should be READ or PLAYED, "," received instead"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([""," handling newsletter receipt"]);k=function(){return a};return a}function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.ack,e=a.from,f=a.externalIds,g=a.ts,l=a.ackString,m=a.participant,n=a.offline,o=a.stanzaId;o="[receipt][newsletter]["+o+"]";d("WALogger").DEV(k(),o).devConsole(a);if(l==="view")return d("WAWebHandleMsgReceiptCommon").updateMsgViewed(f.map(function(a){return parseInt(a,10)}),e);if(b!==d("WAAckLevel").ACK.READ&&b!==d("WAAckLevel").ACK.PLAYED){d("WALogger").WARN(j(),o,b);throw c("err")("handleNewsletterSimpleReceipt: only READ/PLAYED ack for newsletters")}a=(l===d("WAWebAck").ACK_STRING.READ_SELF||l===d("WAWebAck").ACK_STRING.PLAYED_SELF)&&m!=null&&d("WAWebWidFactory").toUserWid(m).equals(d("WAWebUserPrefsMeUser").getMeUser());if(!a){d("WALogger").WARN(i(),o).devConsole(m);throw c("err")("handleNewsletterSimpleReceipt: only peer receipts for newsletters")}l=f.map(function(a){return new(c("WAWebMsgKey"))({id:a,remote:e,fromMe:!1})});a=l.map(function(a){return a.toString()});n!=null&&d("WAWebOfflineHandler").OfflineMessageHandler.offlineStanzaReceivedAfterComplete();m=n!=null&&!d("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete();f=d("WAWebMessageReceiptBatcher").receiptBatcher.acceptPeerReceipt({isOffline:m,ack:b,ts:g,remote:e,msgKeys:a});m||(d("WALogger").DEV(h(),o),yield d("WAWebMessageReceiptBatcher").receiptBatcher.runActiveBatches());return f});return l.apply(this,arguments)}g.handleNewsletterSimpleReceipt=a}),98);
__d("WAWebHandleStatusReceipt",["Promise","WAJids","WALogger","WAWebAck","WAWebMessageReceiptBatcher","WAWebMsgKey","WAWebOfflineHandler","WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsKeys","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][batcher] adding (",") receipt ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[unify][batcher] adding (",") status peer receipt ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["error: got status ack without participant"]);k=function(){return a};return a}function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e,f=a.externalIds,g=a.ts,l=a.ackString,m=a.ack,n=a.participant,o=a.recipient;a=a.offline;f=f[0];if(!n){d("WALogger").ERROR(k()).sendLogs("handleStatusSimpleReceipt: failed");return}var p=d("WAWebUserPrefsMeUser").getMeUser();n=d("WAWebWidFactory").toUserWid(n);var q=n.equals(p);e=((e=d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(d("WAWebUserPrefsKeys").HASHED_KEYS.USER_PRIVACY_SETTINGS))==null?void 0:e.readReceipts)==="none";if(!q&&(e||l!==d("WAWebAck").ACK_STRING.READ))return;e=d("WAWebWidFactory").createWid(d("WAJids").STATUS_JID);f=new(c("WAWebMsgKey"))({id:f,remote:e,fromMe:!q,participant:(l=o)!=null?l:p});o=[f.toString()];l=a!=null&&!d("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete();p=(h||(h=b("Promise"))).resolve();q?(d("WALogger").DEV(j(),l?"offline":"online",o.join(",")),p=d("WAWebMessageReceiptBatcher").receiptBatcher.acceptPeerReceipt({ts:g,msgKeys:o,ack:m,isOffline:l,remote:e})):(d("WALogger").DEV(i(),l?"offline":"online",o.join(",")),p=d("WAWebMessageReceiptBatcher").receiptBatcher.acceptOtherReceipt({ack:m,ts:g,receiverId:n,msgKeys:o}));l||d("WAWebMessageReceiptBatcher").receiptBatcher.runActiveBatches();return p});return l.apply(this,arguments)}g.handleStatusSimpleReceipt=a}),98);
__d("WAWebReceiptAck",["WAWap","WAWebCommsWapMd"],(function(a,b,c,d,e,f,g){function a(a,b,c,e){return d("WAWap").wap("ack",{to:d("WAWebCommsWapMd").JID(a),id:d("WAWap").CUSTOM_STRING(b),"class":"receipt",type:d("WAWap").MAYBE_CUSTOM_STRING(c),participant:e&&e!==a?d("WAWebCommsWapMd").DEVICE_JID(e):d("WAWap").DROP_ATTR})}g.buildReceiptAck=a}),98);
__d("WAWebHandleMsgReceipt",["Promise","WALogger","WAWebAck","WAWebCreateReceiptStanzaReceiveMetric","WAWebHandleAckPeerSimpleReceipt","WAWebHandleBotInvokeMsgReceipt","WAWebHandleDirectChatReceipt","WAWebHandleGroupChatReceipt","WAWebHandleMsgReceiptParser","WAWebHandleMsgReceiptUtils","WAWebHandleNewsletterReceipt","WAWebHandleStatusReceipt","WAWebNewsletterGatingUtils","WAWebReceiptAck","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["type: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleAggregateReceipt: got "," receipts of ack type "," for msg ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleSimpleReceipt: got error for receipt "," for msg ",": ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleSimpleReceipt: got receipt "," for msg ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleAggregateReceipt: aggregate receipts should come only from group, broadcast"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["error: reupload receipts cannot be aggregated"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["error: unsupported type for ",""]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["error: missing participant for broadcast receipt ",""]);r=function(){return a};return a}function a(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebCreateReceiptStanzaReceiveMetric").createReceiptStanzaReceiveMetric(),c=d("WAWebHandleMsgReceiptParser").msgReceiptParser.parse(a);if(c.error){d("WALogger").DEV(n(),a.toString());d("WALogger").ERROR(m(),c.error.toString());throw c.error}a=c.success;c=a.ack;var e=a.ackString,f=a.from,g=a.stanzaId,h=a.offline;if(a.type===d("WAWebHandleMsgReceiptParser").RECEIPT_TYPE.SIMPLE)if(c===d("WAWebAck").ACK.CONTENT_GONE)c=d("WAWebReceiptAck").buildReceiptAck(f,g,e,null);else{try{d("WALogger").LOG(l(),a.ack,a.stanzaId),yield t(a)}catch(b){d("WALogger").WARN(k(),a.ack,a.stanzaId,b).tags("messaging")}c=d("WAWebReceiptAck").buildReceiptAck(f,g,e,a.participant)}else if(a.type===d("WAWebHandleMsgReceiptParser").RECEIPT_TYPE.AGGREGATE){try{d("WALogger").LOG(j(),a.receipts.length,a.ack,a.externalId),yield u(a)}catch(a){}c=d("WAWebReceiptAck").buildReceiptAck(f,g,e,null)}else d("WALogger").ERROR(i(),a.type).sendLogs("handleMsgReceipt: Invalid receipt type"),c=d("WAWebReceiptAck").buildReceiptAck(f,g,e,null);h==null&&b(a);return c});return s.apply(this,arguments)}function t(a){var e=a.from,f=a.ack,g=a.recipient,i=a.ackString;if(f===d("WAWebAck").ACK.PEER)return d("WAWebHandleAckPeerSimpleReceipt").handleAckPeerSimpleReceipt(a);if(e.isNewsletter())return!d("WAWebNewsletterGatingUtils").isNewsletterEnabled()?(h||(h=b("Promise"))).resolve():d("WAWebHandleNewsletterReceipt").handleNewsletterSimpleReceipt(a);else if(e.isBot()&&g!=null&&i===d("WAWebAck").ACK_STRING.READ)return d("WAWebHandleBotInvokeMsgReceipt").handleBotOneToOneInvokeSimpleReadReceipt(a);else if(e.isStatus())return d("WAWebHandleStatusReceipt").handleStatusSimpleReceipt(a);else if(e.isUser())return d("WAWebHandleDirectChatReceipt").handleChatSimpleReceipt(a);else if(e.isGroup())return d("WAWebHandleGroupChatReceipt").handleGroupSimpleReceipt(a);else if(e.isBroadcast()){if(!a.participant){d("WALogger").ERROR(r(),e.toString()).sendLogs("handleSimpleReceipt: failed");return(h||(h=b("Promise"))).reject(c("err")("handleSimpleReceipt: missing participant for broadcast receipt "+e.toString()))}f=babelHelpers["extends"]({},a,{from:a.participant,participant:null});return d("WAWebHandleDirectChatReceipt").handleChatSimpleReceipt(f)}d("WALogger").ERROR(q(),e.toString()).sendLogs("handleSimpleReceipt: failed");return(h||(h=b("Promise"))).reject(c("err")("handleSimpleReceipt: unsupported type for "+e.toString()))}function u(a){var e=a.ack,f=a.from;if(e===d("WAWebAck").ACK.CONTENT_GONE){d("WALogger").ERROR(p()).sendLogs("handleAggregateReceipt: failed");return(h||(h=b("Promise"))).reject(c("err")("handleAggregateReceipt: failed"))}if(!f.isGroup()&&!f.isBroadcast()){d("WALogger").ERROR(o()).sendLogs("handleAggregateReceipt: failed");return(h||(h=b("Promise"))).reject(c("err")("handleAggregateReceipt: failed"))}return(h||(h=b("Promise"))).all(d("WAWebHandleMsgReceiptUtils").deaggregateReceipt(a).map(t))}g["default"]=a}),98);
__d("WAWebHandleNewsletterMsgAddOns",["Promise","WAAckLevel","WAWebBackendApi","WAWebCRUDOperationsNewsletterMyVotes","WAWebDBCreateOrUpdateReactions","WAWebNewsletterDBUtils","WAWebNewsletterPollsVotesUtils","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function a(a,c){switch(a.type){case"reaction":return i(a);case"poll_update":return k(a,c);default:return(h||(h=b("Promise"))).resolve()}}function i(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.reactionText,c=a.id,e=a.serverId,f=a.from;a=a.t;if(e==null||a==null||f==null||b==null)return;c={msgKey:c.toString(),parentMsgKey:d("WAWebNewsletterDBUtils").craftNewsletterMsgKeyFromServerId(e,f).toString(),senderUserJid:d("WAWebUserPrefsMeUser").getMeUser().toString(),reactionText:b,timestamp:a*1e3,orphan:0,read:!0,ack:d("WAAckLevel").ACK.SENT};yield d("WAWebDBCreateOrUpdateReactions").createOrUpdateReactions([c]);b=(yield d("WAWebNewsletterDBUtils").getMessageByServerId(e,f.toJid()));b!=null&&(yield d("WAWebBackendApi").frontendFireAndForget("updateChatPreviewFromReaction",{reactionMsgObj:c,parentMsgKey:b.id}))});return j.apply(this,arguments)}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=a.id,e=a.serverId,f=a.from,g=a.t,h=a.selectedOptionLocalIds;b=b.pollVotes;if(e==null||g==null||f==null||b==null)return;c={chatJid:c.remote.toJid(),msgServerId:e,msgKey:a.id.toString(),serverTimestampMs:g*1e3,t:g,votes:b.map(d("WAWebNewsletterPollsVotesUtils").bufferToHex)};yield d("WAWebCRUDOperationsNewsletterMyVotes").createOrUpdateMyVote(c);b=(yield d("WAWebNewsletterDBUtils").getMessageByServerId(e,f.toJid()));if(b!=null){yield d("WAWebBackendApi").frontendFireAndForget("updateChatPreviewFromVote",{voteMsgObj:{ack:d("WAAckLevel").ACK.SENT,read:!0,msgKey:a.id,parentMsgKey:b.id,selectedOptionLocalIds:(c=h)!=null?c:[],sender:d("WAWebUserPrefsMeUser").getMeUser(),senderTimestampMs:g*1e3,t:g},parentMsgKey:b.id})}});return l.apply(this,arguments)}g.maybeHandleNewsletterMsgAddOns=a}),98);
__d("WAWebHandleNewsletterMsgLogger",["WASmaxMessageDeliverNewsletterRPC","WAWebHandleMsgError","WAWebIncomingMessageDropWamEvent","WAWebWamEnumE2eDestination","WAWebWamEnumMediaType","WAWebWamEnumMessageDropReasonType","WAWebWamEnumRevokeType"],(function(a,b,c,d,e,f,g){function h(a){try{return d("WASmaxMessageDeliverNewsletterRPC").receiveNewsletterRPC(a)}catch(a){return null}}function a(a,b){b=h(b.stanza);a instanceof d("WAWebHandleMsgError").MessageValidationError&&i(b,a)}function i(a,b){var c;c=new(d("WAWebIncomingMessageDropWamEvent").IncomingMessageDropWamEvent)({messageDropReason:d("WAWebWamEnumMessageDropReasonType").MESSAGE_DROP_REASON_TYPE.INVALID_PROTOBUF,e2eDestination:d("WAWebWamEnumE2eDestination").E2E_DESTINATION.CHANNEL,offline:(a==null?void 0:(c=a.parsedRequest)==null?void 0:(c=c.offlineMixin)==null?void 0:c.offline)!=null,e2eFailureReason:b==null?void 0:b.e2eFailureReason,messageMediaType:j(a),revokeType:(a==null?void 0:a.parsedRequest.newsletterMessageFanoutContent.name)==="NewsletterRevoke"?d("WAWebWamEnumRevokeType").REVOKE_TYPE.ADMIN:void 0});c.commit()}function j(a){a=a==null?void 0:a.parsedRequest.newsletterMessageFanoutContent;if(a==null)return d("WAWebWamEnumMediaType").MEDIA_TYPE.NONE;switch(a.name){case"NewsletterReaction":return d("WAWebWamEnumMediaType").MEDIA_TYPE.REACTION;case"NewsletterMedia":return k(a.value.plaintextMediatype);case"NewsletterEdit":return a.value.newsletterTextOrMediaMixinGroup.value.type==="media"?k(a.value.newsletterTextOrMediaMixinGroup.value.plaintextMediatype):d("WAWebWamEnumMediaType").MEDIA_TYPE.NONE;case"NewsletterText":return d("WAWebWamEnumMediaType").MEDIA_TYPE.NONE;case"NewsletterRevoke":case"NewsletterReactionRevoke":case"NewsletterWAMOEmpty":return d("WAWebWamEnumMediaType").MEDIA_TYPE.NONE;case"NewsletterPollCreation":return d("WAWebWamEnumMediaType").MEDIA_TYPE.POLL_CREATE;case"NewsletterPollVote":return d("WAWebWamEnumMediaType").MEDIA_TYPE.POLL_VOTE;case"NewsletterPollResultSnapshot":return d("WAWebWamEnumMediaType").MEDIA_TYPE.POLL_RESULT_SNAPSHOT;default:a.name;return d("WAWebWamEnumMediaType").MEDIA_TYPE.NONE}}function k(a){switch(a){case"video":return d("WAWebWamEnumMediaType").MEDIA_TYPE.VIDEO;case"vcard":return d("WAWebWamEnumMediaType").MEDIA_TYPE.CONTACT;case"url":return d("WAWebWamEnumMediaType").MEDIA_TYPE.URL;case"sticker":case"genai_sticker":case"1p_sticker":case"avatar_sticker":case"user_created_sticker":return d("WAWebWamEnumMediaType").MEDIA_TYPE.STICKER;case"ptt":return d("WAWebWamEnumMediaType").MEDIA_TYPE.PTT;case"productlink":return d("WAWebWamEnumMediaType").MEDIA_TYPE.PRODUCT_LINK;case"image":return d("WAWebWamEnumMediaType").MEDIA_TYPE.PHOTO;case"gif":return d("WAWebWamEnumMediaType").MEDIA_TYPE.GIF;case"document":return d("WAWebWamEnumMediaType").MEDIA_TYPE.DOCUMENT;case"cataloglink":return d("WAWebWamEnumMediaType").MEDIA_TYPE.CATALOG_LINK;case"sticker_pack":return d("WAWebWamEnumMediaType").MEDIA_TYPE.STICKER_PACK;default:a;return d("WAWebWamEnumMediaType").MEDIA_TYPE.AUDIO}}g.handleNewsletterMsgError=a}),98);
__d("WAWebNewsletterMsgParser",["WASmaxMessageDeliverNewsletterRPC","WASmaxParsingFailure","WAWebJidToWid","WAWebReactionsBEUtils","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){function a(a){var b;a=d("WASmaxMessageDeliverNewsletterRPC").receiveNewsletterRPC(a);var c=a.parsedRequest;a=a.makeNewsletterResponseSuccess;b={id:c.id,t:c.t,isSender:c.isSender==="true",serverId:c.serverId,offline:(b=c.offlineMixin)==null?void 0:b.offline,from:d("WAWebJidToWid").jidWithTypeToWid({jidType:"newsletter",newsletterJid:c.from}),to:d("WAWebUserPrefsMeUser").getMeUser()};return{ack:a(),msg:k(b,c)}}function h(a){return a.reactionCode}function i(a){return a.votesVote.map(function(a){a=a.elementValue;return a})}function j(a){return a.plaintextPayloadMixin.elementValue}function k(a,b){var c=b.newsletterMessageFanoutContent;switch(c.name){case"NewsletterPollVote":return babelHelpers["extends"]({},a,{type:"NewsletterPollVote",pollVote:i(c.value)});case"NewsletterReaction":return babelHelpers["extends"]({},a,{type:"NewsletterReaction",reactionCode:h(c.value)});case"NewsletterReactionRevoke":return babelHelpers["extends"]({},a,{type:"NewsletterReactionRevoke",reactionCode:d("WAWebReactionsBEUtils").REVOKED_REACTION_TEXT});case"NewsletterRevoke":return babelHelpers["extends"]({},a,{type:"NewsletterRevoke"});case"NewsletterMedia":return babelHelpers["extends"]({},a,{type:c.name,payload:j(c.value)});case"NewsletterText":return babelHelpers["extends"]({},a,{type:c.name,payload:j(c.value)});case"NewsletterPollCreation":return babelHelpers["extends"]({},a,{type:"NewsletterPollCreation",payload:j(c.value)});case"NewsletterEdit":var e;return babelHelpers["extends"]({},a,{type:"NewsletterEdit",payload:j(c.value.newsletterTextOrMediaMixinGroup.value),msgEditT:(e=b.newsletterMessageLastEditTimestampMixin)==null?void 0:e.metaMsgEditT,msgOriginalT:(e=b.newsletterMessageOriginalTimestampMixin)==null?void 0:e.metaOriginalMsgT});case"NewsletterPollResultSnapshot":return babelHelpers["extends"]({},a,{type:"NewsletterPollResultSnapshot",payload:j(c.value)});case"NewsletterWAMOEmpty":throw new(d("WASmaxParsingFailure").SmaxParsingFailure)("unsupported-newsletter-message-type");default:c.name;throw new(d("WASmaxParsingFailure").SmaxParsingFailure)("unrecognized-newsletter-message-type")}}g["default"]=a}),98);
__d("WAWebNewsletterMsgProcessor",["WATimeUtils","WAWebApiFilterAndReplaceMessages","WAWebNewsletterBackendMsgUtils","WAWebNewsletterDBUtils","WAWebPollsCreateOptionLocalIdMap","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.offline!=null,c=a.type==="NewsletterRevoke",e=a.serverId,f=i(a.type),g=f&&e!=null?yield d("WAWebNewsletterDBUtils").getMessageByServerId(e,a.from.toJid()):null,h=f&&g==null,l=(yield k(g,a.pollVote));b=d("WAWebNewsletterBackendMsgUtils").mapMsgStanzaToMsgData({msg:a,msgContext:{isNewMsg:!b&&!c,addOnParentKey:f?j({addOnParentMsg:g,serverId:e,remote:a.from}):void 0,pollVotesAsLocalIds:l,latestEditSenderTimestampMs:a.msgEditT!=null?d("WATimeUtils").castToMillisTime(a.msgEditT):null}},"relay");c=(yield d("WAWebApiFilterAndReplaceMessages").filterAndReplaceMessages([b]));f=c.newMsgs;g=f[0];return{msgData:g,isOrphan:h}});return h.apply(this,arguments)}function i(a){switch(a){case"NewsletterReaction":case"NewsletterReactionRevoke":case"NewsletterPollVote":return!0;default:return!1}}function j(a){var b=a.addOnParentMsg,c=a.serverId;a=a.remote;return b!=null?b.id:d("WAWebNewsletterDBUtils").craftNewsletterMsgKeyFromServerId(c,a.toJid())}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=a==null?void 0:a.pollOptions;if(a==null||b==null)return;var c=(yield d("WAWebPollsCreateOptionLocalIdMap").createOptionLocalIdMap(a));return b.map(function(a){return c.getLocalIdForHash(a.slice().buffer)})});return l.apply(this,arguments)}g.preprocessNewsletterMsg=a;g.isAddOnType=i}),98);
__d("WAWebHandleNewsletterMsg",["Promise","WALogger","WATimeUtils","WAWebBackendApi","WAWebCmd","WAWebHandleMsgTypes.flow","WAWebHandleNewsletterMsgAddOns","WAWebHandleNewsletterMsgLogger","WAWebLogReceivedMessages","WAWebMessageProcessorCache","WAWebMessageQueue","WAWebNewsletterGatingUtils","WAWebNewsletterMsgParser","WAWebNewsletterMsgProcessor","WAWebOfflineHandler","WAWebWamWorkerOfflineProcessReporter","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter] Failed to handle newsletter message ","-",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter] Failed to handle newsletter offline ack ","-",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][message] Message decoded, UI update started"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter] Failed to handle newsletter message"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][message] Message stored to DB"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][message] Newsletter not enabled, drop & ack"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[newsletter][message] Message received, parsing and decoding"]);o=function(){return a};return a}function a(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{d("WALogger").DEV(o());var e=c("WAWebNewsletterMsgParser")(a),f=e.msg,g=e.ack;if(!d("WAWebNewsletterGatingUtils").isNewsletterEnabled()){d("WALogger").DEV(n());return g}var p=d("WATimeUtils").unixTimeMs(),q=f.offline!=null;q&&(d("WAWebOfflineHandler").OfflineMessageHandler.addOfflinePendingMessage(),d("WAWebOfflineHandler").OfflineMessageHandler.offlineStanzaReceivedAfterComplete());d("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete()&&(f.offline=null,q=!1);var r=!d("WAWebNewsletterMsgProcessor").isAddOnType(f.type);return yield d("WAWebMessageQueue").onMessageQueue(f.from.toString(),q,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=d("WATimeUtils").unixTimeMs(),c=(yield d("WAWebNewsletterMsgProcessor").preprocessNewsletterMsg(f)),e=c.msgData;c=c.isOrphan;var i=r?d("WAWebMessageProcessorCache").messageProcessorCache.addMessages([{msg:e}],!q).then(function(){d("WALogger").DEV(m()),d("WAWebWamWorkerOfflineProcessReporter").WorkerOfflineResumeReporter.updateProcessedMessageCount(),d("WAWebLogReceivedMessages").logReceivedMessagesInWAM({msgs:[e],offline:f.offline,tsMillis:f.t*1e3,clientReceivedTsMillis:p,msgProcessStartTsMillis:a,serverAddressingMode:null,localAddressingMode:null})})["catch"](function(a){d("WALogger").ERROR(l()).tags("newsletter").devConsole(a).sendLogs("newsletter-failed-to-store-incoming-message")}):(h||(h=b("Promise"))).resolve();yield d("WAWebHandleNewsletterMsgAddOns").maybeHandleNewsletterMsgAddOns(e,{pollVotes:f.pollVote});d("WAWebCmd").Cmd.isMainStreamReadyMd&&(d("WAWebCmd").Cmd.isOfflineDeliveryEnd&&(yield i),d("WALogger").DEV(k()),d("WAWebBackendApi").frontendFireAndForget("updateNewsletterMessageUI",{chatID:f.from,msg:e,isOrphan:c}));if(q){d("WAWebOfflineHandler").OfflineMessageHandler.processMessageDecryptResult(d("WAWebHandleMsgTypes.flow").E2EProcessResult.SUCCESS);d("WAWebMessageProcessorCache").messageProcessorCache.addMessages([{receiptInfo:{externalId:f.id,from:f.from,author:f.from}}])["catch"](function(a){var b=a instanceof Error?a:{},c=b.name;b=b.message;d("WALogger").ERROR(j(),c,b).tags("newsletter").devConsole(a).sendLogs("newsletter-failed-to-store-offline-ack")});return}return g}))}catch(b){d("WAWebHandleNewsletterMsgLogger").handleNewsletterMsgError(b,{stanza:a});d("WALogger").ERROR(i(),b.name,b.message).tags("newsletter").devConsole(b).sendLogs("failed-handle-newsletter-message");throw b}});return p.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebHandleVoipCallReceipt",["Promise","WADeprecatedWapParser","WALogger","WAWap","WAWebCommsWapMd","WAWebJidToWid","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["voip: error while parsing: ",""]);j=function(){return a};return a}var k=new(c("WADeprecatedWapParser"))("callReceiptParser",function(a){a.assertTag("receipt");var b=a.maybeChild("offer")||a.maybeChild("accept")||a.maybeChild("reject");if(!b)throw a.createParseError("Unrecognized call stanza");return{stanzaId:a.attrString("id"),type:a.hasAttr("type")?a.attrString("type"):null,from:d("WAWebJidToWid").jidWithTypeToWid(a.attrJidWithType("from"))}});function a(a){var c=k.parse(a);if(c.error){d("WALogger").DEV(j(),a.toString());d("WALogger").ERROR(i(),c.error.toString());return(h||(h=b("Promise"))).reject(c.error)}a=c.success;c=a.stanzaId;var e=a.type;a=a.from;return(h||(h=b("Promise"))).resolve(d("WAWap").wap("ack",{id:d("WAWap").CUSTOM_STRING(c),to:d("WAWebCommsWapMd").JID(a),from:d("WAWebCommsWapMd").JID(d("WAWebUserPrefsMeUser").getMaybeMeUser()),"class":"receipt",type:d("WAWap").MAYBE_CUSTOM_STRING(e)}))}g.handleCallReceipt=a}),98);
__d("WAWebCommsHandleWorkerCompatibleStanza",["WALogger","WAParsableWapNode","WAWeb-dexie","WAWebCreateNackFromStanza","WAWebHandleGroupNotification","WAWebHandleIdentityChange","WAWebHandleMsg","WAWebHandleMsgReceipt","WAWebHandleNewsletterMsg","WAWebHandleVoipCallReceipt","WAWebPostIncomingMessageDropMetric","WAWebPostUnknownStanzaMetric","WAWebRuntimeEnvironmentUtils","WAWebWamWorkerOfflineProcessReporter","WAWebWid","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleMsg: drop incoming message due to an internal error: ",", message: ",", stack: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleMsg: drop incoming message due to an internal error: ",", message: ",", stack: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleMsg: error while parsing message: ",""]);j=function(){return a};return a}function k(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebRuntimeEnvironmentUtils").isWorker())return a;a=(yield a);d("WAWebWamWorkerOfflineProcessReporter").WorkerOfflineResumeReporter.updateProcessedNotificationCount();return a});return l.apply(this,arguments)}function a(a){var b=a.attrs;switch(a.tag){case"notification":switch(b.type){case"w:gp2":return k(d("WAWebHandleGroupNotification").handleGroupNotification(a))["catch"](function(b){return m(a,b)});case"encrypt":var e=a.content;if(!Array.isArray(e)||!e.length)break;e=e[0].tag;switch(e){case"identity":return k(d("WAWebHandleIdentityChange").handleE2eIdentityChange(a))["catch"](function(b){return m(a,b)})}break}break;case"message":e=a.attrs.from;return c("WAWebWid").isNewsletter(e==null?void 0:e.toString())?c("WAWebHandleNewsletterMsg")(a)["catch"](function(b){return n(a,b)}):c("WAWebHandleMsg")(a)["catch"](function(b){return n(a,b)});case"receipt":try{if(o(a))return d("WAWebHandleVoipCallReceipt").handleCallReceipt(a);else if(b.type!=="retry")return c("WAWebHandleMsgReceipt")(a)}catch(b){if(b instanceof d("WAParsableWapNode").XmppParsingFailure){d("WAWebPostUnknownStanzaMetric").postUnknownStanzaMetric(a);return d("WAWebCreateNackFromStanza").createNackFromStanza(a,d("WAWebCreateNackFromStanza").NackReason.ParsingError)}return d("WAWebCreateNackFromStanza").createNackFromStanza(a,d("WAWebCreateNackFromStanza").NackReason.UnhandledError)}}}function m(a,b){if(b instanceof d("WAParsableWapNode").XmppParsingFailure){d("WAWebPostUnknownStanzaMetric").postUnknownStanzaMetric(a);return d("WAWebCreateNackFromStanza").createNackFromStanza(a,d("WAWebCreateNackFromStanza").NackReason.ParsingError)}return d("WAWebCreateNackFromStanza").createNackFromStanza(a,d("WAWebCreateNackFromStanza").NackReason.UnhandledError)}function n(a,b){if(b instanceof d("WAParsableWapNode").XmppParsingFailure){d("WAWebPostUnknownStanzaMetric").postUnknownStanzaMetric(a);d("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropInvalidStanza(a);d("WALogger").LOG(j(),b).tags("messaging").sendLogs("failedParsingMessageStanza",{sampling:.01});return d("WAWebCreateNackFromStanza").createNackFromStanza(a,d("WAWebCreateNackFromStanza").NackReason.ParsingError)}if(b instanceof c("WAWeb-dexie").DexieError){d("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropDBOperationFailed(a);d("WALogger").ERROR(i(),b.name,b.message,b.stack).sendLogs("incoming-message-drop-db-operation-failed",{sampling:.01});return}d("WALogger").ERROR(h(),b.name,b.message,b.stack).sendLogs("incoming-message-drop-internal-error",{sampling:.01});d("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropInternalError(a);return d("WAWebCreateNackFromStanza").createNackFromStanza(a,d("WAWebCreateNackFromStanza").NackReason.UnhandledError)}function o(a){if(Array.isArray(a.content)&&a.content.length>0){a=a.content[0].tag;return a==="offer"||a==="accept"||a==="reject"}return!1}g.handleWorkerCompatibleStanza=a}),98);
__d("WAWebHandleInfoBulletinTypes.flow",[],(function(a,b,c,d,e,f){a=Object.freeze({DIRTY:"dirty",ROUTING:"edge_routing",OFFLINE:"offline",OFFLINE_PREVIEW:"offline_preview",TOS:"tos",THREAD_META:"thread_metadata",CLIENT_EXPIRATION:"client_expiration",OFFLINE_PRIORITY_COMPLETE:"priority_offline_complete"});f.INFO_TYPE=a}),66);
__d("WAWebHandleRoutingInfo",["WAHex","WALogger","WAWebUserPrefsMultiDevice","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleInfoBulletin setting and domain: "," and edgeRouting:"]);h=function(){return a};return a}var i={fb:"fb",sl:"sl"};function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.domain;if(!b){var c=(yield d("WAWebUserPrefsMultiDevice").getRoutingInfo());b=c?c.domain:i.fb}c=d("WAHex").bytesToBuffer(a.edgeRouting);yield d("WAWebUserPrefsMultiDevice").setRoutingInfo({domain:b,edgeRouting:c});d("WALogger").LOG(h(),b).devConsole(c)});return j.apply(this,arguments)}g.DOMAINS=i;g.handleRoutingInfo=a}),98);
__d("WAWebInitWaitForEvents",["WAWebEventsWaitForOfflineDeliveryEnd","WAWebEventsWaitForReadyForOffline"],(function(a,b,c,d,e,f,g){function a(){d("WAWebEventsWaitForReadyForOffline").initWaitForOfflineProcessReady(),d("WAWebEventsWaitForOfflineDeliveryEnd").initWaitForOfflineDeliveryEnd()}g.initOfflineResumeWaitForEvents=a}),98);
__d("WAWebOfflineResumeConst",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["INIT","RESUME_ON_RESTART","RESUME_WITH_OPEN_TAB","COMPLETE"]);c=2e4;d=100;e=2e3;b=6e4;var g=1e3,h=1e3;f.ResumeStatus=a;f.OFFLINE_STANZA_COUNT_CHECK_TIMEOUT_MS=c;f.OFFLINE_STANZA_COUNT_LIMIT=d;f.OFFLINE_DEVICE_SYNC_DELAY=e;f.OFFLINE_STANZA_TIMEOUT_MS=b;f.OFFLINE_PREVIEW_PERIOD_MS=g;f.UI_UPDATE_TIME_MS=h}),66);
__d("WAWebQueryServerPropsJob",["WADeprecatedSendIq","WADeprecatedWapParser","WASmaxOutServerPropsGetV2Request","WAWebUserPrefsGeneral","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new(c("WADeprecatedWapParser"))("serverProps",function(a){a.assertTag("iq");a.assertAttr("from","s.whatsapp.net");a=a.child("props");var b={serverPropsVersion:a.attrInt("version")};a.forEachChildWithTag("prop",function(a){switch(a.attrString("name")){case"ephemeral_messages_allowed_values":b.ephemeralMessagesAllowedValues=a.attrString("value");break;case"gif_provider":b.gifProvider=a.attrInt("value")===1?"giphy":"tenor";break;case"group_description_length":b.groupDescLength=a.attrInt("value");break;case"max_participants":b.maxParticipants=a.attrInt("value")-1;break;case"max_subject":b.maxSubject=a.attrInt("value");break;case"max_keys":b.maxKeys=a.attrInt("value");break;case"mms_media_key_ttl":b.mmsMediaKeyTTL=a.attrInt("value");break;case"shops_product_grid":b.shopsProductGrid=a.attrInt("value",0)===1;break;case"syncd_inline_mutations_max_count":b.syncdInlineMutationsMaxCount=a.attrInt("value");break;case"syncd_patch_protobuf_max_size":b.syncdPatchProtobufMaxSize=a.attrInt("value");break;case"syncd_key_max_use_days":b.syncdKeyMaxUseDays=a.attrInt("value");break;case"syncd_wait_for_key_timeout_days":b.syncdWaitForKeyTimeoutDays=a.attrInt("value");break;case"syncd_sentinel_timeout_seconds":b.syncdSentinelTimeoutSeconds=a.attrInt("value");break;case"syncd_qpl_logging_enabled":b.syncdQPLLoggingEnabled=a.attrInt("value")===1;break;case"web_biz_profile_options":b.webBizProfileOptions=a.attrInt("value");break;case"mms_cat_v1_forward_hot_override_enabled":b.mmsCatV1ForwardHotOverrideEnabled=a.attrInt("value")===1;break;case"ptt_conversation_waveform":b.pttConversationWaveform=a.attrInt("value")===1;break;case"ptt_oot_playback":b.pttOotPlayback=a.attrInt("value")===1;break;case"ptt_pausable_enabled":b.pttPausableEnabled=a.attrInt("value")===1;break;case"ptt_playback_speed_enabled":b.pttPlaybackSpeedEnabled=a.attrInt("value")===1;break;case"web_product_list_message_page_size":b.webProductListMessagePageSize=a.attrInt("value");break;case"ptt_remember_play_position":b.pttRememberPlayPosition=a.attrInt("value")===1;break;case"max_file_size":b.maxFileSize=a.attrInt("value")*1024*1024;break;case"web_log_upload_download_crashes":b.webLogUploadDownloadCrashes=a.attrInt("value")===1;break;case"web_md_mms_sync_deletion_request":b.webMdMmsSyncDeletionRequest=a.attrInt("value")===1;break;case"web_payment_background_enabled":b.webPaymentBackgroundEnabled=a.attrInt("value")===1;break;case"streaming_upload_chunk_size":b.streamingUploadChunkSize=a.attrInt("value")*1024*1024;break}});return{values:b,attributes:{protocol:a.maybeAttrInt("protocol"),version:a.attrInt("version"),hash:a.maybeAttrString("hash"),refresh:a.maybeAttrInt("refresh")}}});function a(){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("WAWebUserPrefsGeneral").getServerPropsAttributes());a=d("WASmaxOutServerPropsGetV2Request").makeGetV2Request({propsHash:(a=a==null?void 0:a.hash)!=null?a:""});return d("WADeprecatedSendIq").deprecatedSendIq(a,h)});return i.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebUpdateClockSkewUtils",["WATimeUtils","WAWebABProps","WAWebBackendApi","WAWebClockSkewDifferenceTWamEvent"],(function(a,b,c,d,e,f,g){function a(a){var b=Date.now()/1e3;b=Math.round(b-a);a=Math.round(b/d("WATimeUtils").HOUR_SECONDS);a!==0&&d("WAWebABProps").getABPropConfigValue("log_clock_skew")&&new(d("WAWebClockSkewDifferenceTWamEvent").ClockSkewDifferenceTWamEvent)({clockSkewHourly:a*-1}).commit();d("WATimeUtils").setClockSkew(b);d("WAWebBackendApi").frontendFireAndForget("setWebClockSkew",{newClockSkew:b})}g.updateClockSkew=a}),98);
__d("WAWebUpdateMeLidUtils",["WANullthrows","WAWebUserPrefsMeUser"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WAWebUserPrefsMeUser").getMaybeMeLid(!1);if(b==null&&a==null)return;if(b==null&&a!=null){d("WAWebUserPrefsMeUser").setMeLid(a);return}if(b!=null&&a==null)return;if(c("WANullthrows")(b).equals(a))return;d("WAWebUserPrefsMeUser").setMeLid(c("WANullthrows")(a))}g.updateMeLid=a}),98);
__d("WAWebUpdateServerPropsJob",["WAFilteredCatch","WALogger","WAWebBackendErrors","WAWebNoop","WAWebQueryServerPropsJob","WAWebServerPropsModel","WAWebUserPrefsGeneral","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Server props failure: empty server props table"]);h=function(){return a};return a}var i;function a(){if(i)return i;i=c("WAWebQueryServerPropsJob")().then(function(a){if(a.success)return a.result;throw new(d("WAWebBackendErrors").ServerStatusCodeError)(a.errorCode,a.errorText)}).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.values;a=a.attributes;if(a.protocol===2){var c,e=(yield d("WAWebUserPrefsGeneral").getServerPropsAttributes());d("WAWebUserPrefsGeneral").setServerPropsAttributes({version:a.version,hash:(c=(c=a.hash)!=null?c:e==null?void 0:e.hash)!=null?c:"",refresh:(e=a.refresh)!=null?e:86400,lastSyncTimeSeconds:Math.floor(Date.now()/1e3)})}else d("WAWebUserPrefsGeneral").setServerPropsAttributes({version:a.version,hash:"",refresh:86400,lastSyncTimeSeconds:Math.floor(Date.now()/1e3)});if(a.protocol===2)if(a.hash==null){c=(yield d("WAWebUserPrefsGeneral").getServerProps());c==null?(d("WAWebUserPrefsGeneral").setServerPropsAttributes({version:a.version,hash:"",refresh:86400,lastSyncTimeSeconds:0}),d("WALogger").ERROR(h()).sendLogs("read-from-empty-server-props-table")):d("WAWebServerPropsModel").ServerProps.updateProps(c)}else d("WAWebUserPrefsGeneral").setServerProps(b),d("WAWebServerPropsModel").ServerProps.updateProps(b);else d("WAWebServerPropsModel").ServerProps.updateProps(b)});return function(b){return a.apply(this,arguments)}}())["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,c("WAWebNoop")))["finally"](function(){i=null});return i}g.queryServerProps=a}),98);/*FB_PKG_DELIM*/
__d("CookieStore",["CookieCoreLoggingConfig","FBLogger","Random","gkx","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i=window.I_AM_CORE_COOKIE_INFRASTRUCTURE_AND_NEED_TO_ACCESS_COOKIES!=null?window.I_AM_CORE_COOKIE_INFRASTRUCTURE_AND_NEED_TO_ACCESS_COOKIES():null,j={set:function(a){document.cookie=a},get:function(){return document.cookie}};function k(){return i!=null?i:j}function l(a,b,c,d,e,f,g,h){return b+"="+encodeURIComponent(c)+"; "+(f!==0&&f!==void 0&&f!==null?"expires="+new Date(a+f).toUTCString()+"; ":"")+"path="+d+"; domain="+e+(g?"; secure":"")+(h?"; SameSite="+h:"")}function m(a,b,c){return a+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+b+"; domain="+c}function n(){if(c("CookieCoreLoggingConfig").sampleRate>0){var a=(h||(h=c("performanceNow")))(),b=k().get();a=h()-a;var d=a>c("CookieCoreLoggingConfig").maximumIgnorableStallMs&&c("Random").coinflip(1/c("CookieCoreLoggingConfig").sampleRate);d&&c("FBLogger")("cookie_infra").addMetadata("COOKIE_INFRA","WALL_TIME",String(a)).warn("Cookie read exceeded %s milliseconds.",c("CookieCoreLoggingConfig").maximumIgnorableStallMs);return b}else return k().get()}var o=function(){function a(){this.$1=0}var b=a.prototype;b.setCookie=function(a,b,c,d,e,f,g,h){k().set(l(a,b,c,d,e,f,g,h))};b.clearCookie=function(a,b,c){k().set(m(a,b,c))};b.getCookie=function(a){var b;this.$1++;b=(b=n())==null?void 0:b.match("(?:^|;\\s*)"+a+"=(.*?)(?:;|$)");return b?decodeURIComponent(b[1]):null};return a}(),p=10*1e3,q=function(){function a(){this.$1={},this.$2=0,this.$3=0,this.$4=0}var b=a.prototype;b.setCookie=function(a,b,c,d,e,f,g,h){k().set(l(a,b,c,d,e,f,g,h)),this.$1[b]={value:c,updated:a}};b.clearCookie=function(a,b,c){k().set(m(a,b,c)),this.$1[a]={value:null,updated:Date.now()}};b.getCookie=function(a){a=this.$5(a);a=a.cookie;return a};b.$5=function(a){var b=Date.now(),c=this.$1[a];if(!c){if(this.$2+p<b){this.$6();return{cookie:this.$5(a).cookie,hit:!1}}this.$3++;return{cookie:null,hit:!0}}if(c.updated+p<b){this.$6();return{cookie:this.$5(a).cookie,hit:!1}}this.$3++;return{cookie:c.value,hit:!0}};b.$6=function(){var a;this.$4++;a=(a=(a=n())==null?void 0:a.split(";"))!=null?a:[];this.$2=Date.now();this.$1={};for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d=d.match("\\s*([^=]+)=(.*)");if(!d)continue;this.$1[d[1]]={value:decodeURIComponent(d[2]),updated:this.$2}}};return a}();function a(){return c("gkx")("20940")?new q():new o()}g.newCookieStore=a;g.CookieCacheForTest=q;g.CookieStoreSlowForTest=o}),98);
__d("JsCrossSiteCookieUsageFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6476");b=d("FalcoLoggerInternal").create("js_cross_site_cookie_usage",a);e=b;g["default"]=e}),98);
__d("CookieCore",["CookieCoreConfig","CookieDomain","CookiePrivacySandboxConfig","CookieStore","JsCrossSiteCookieUsageFalcoEvent","err","justknobx"],(function(a,b,c,d,e,f,g){var h=/_js_(.*)/,i;function j(){i||(i=d("CookieStore").newCookieStore());return i}function k(){return"."+c("CookieDomain").domain}function l(a){return window.self!==window.top?!1:!0}function m(a,b){if(!r(a))return;n(a,b,t(a),u(a),s(a),v(a));w(a,1)}function a(a,b,c){if(!r(a))return;n(a,b,t(a),u(a),s(a),v(a),c)}function n(a,b,c,d,e,f,g){var h=Date.now();if(c!=null)if(c>h)c-=h;else if(c===1){o(a,d,g);return}j().setCookie(h,a,b,d,(h=g)!=null?h:k(),c,e,f)}function b(a,b){if(!l(a))return;m(a,b)}function e(a,b,c,d,e,f){if(!l(a))return;n(a,b,c,d,e,null,f)}function o(a,b,c){b===void 0&&(b="/");b=b||"/";j().clearCookie(a,b,(b=c)!=null?b:k());w(a,2)}function f(a){if(!r(a))return null;w(a,0);return j().getCookie(a)}function p(a){return{insecure:a.i||!1,path:a.p||"/",ttlSeconds:a.t||0,sameSite:a.s||"None"}}function q(a){if(c("CookieCoreConfig")[a]!==void 0)return p(c("CookieCoreConfig")[a]);a=a.match(h);return a&&a.length>1?q(a[1]):null}function r(a){return q(a)!==null}function s(a){a=q(a);return a==null?!0:!a.insecure}function t(a){a=q(a);return a==null?null:a.ttlSeconds*1e3}function u(a){a=q(a);return a==null?"/":a.path}function v(a){a=q(a);return a==null||a.sameSite==null?null:a.sameSite}function w(a,b){var e=d("CookiePrivacySandboxConfig").is_affected_by_samesite_lax;e&&c("justknobx")._("2552")&&c("JsCrossSiteCookieUsageFalcoEvent").log(function(){return{cookie_name:a,cookie_op:b,js_backtrace:c("err")("read cookie backtrace: ").stack}})}g.set=m;g.setWithDomain_FOR_MESSENGER_LS_ONLY=a;g.setWithoutChecks=n;g.setIfFirstPartyContext=b;g.setWithoutChecksIfFirstPartyContext=e;g.clear=o;g.get=f}),98);
__d("Cookie",["CookieConsent","CookieCore","InitialCookieConsent","ODS"],(function(a,b,c,d,e,f,g){var h,i,j;function k(a){if(!(j||(j=c("CookieConsent"))).hasFirstPartyConsent()){(h||(h=d("ODS"))).bumpEntityKey(798,"defer_cookies","set."+a);return!1}return!0}function l(){return!(i||(i=c("InitialCookieConsent"))).noCookies}function a(a,b){if(!l()||!k(a))return;d("CookieCore").set(a,b)}function b(a,b){if(!l())return;d("CookieCore").set(a,b)}function e(a,b,c,e,f,g){if(!l()||!k(a))return;d("CookieCore").setWithoutChecks(a,b,c,e,f,null,g)}a={clear:(f=d("CookieCore")).clear,get:f.get,set:a,setIfFirstPartyContext:f.setIfFirstPartyContext,setWithoutCheckingUserConsent_DANGEROUS:b,setWithoutChecks:e,setWithoutChecksIfFirstPartyContext:f.setWithoutChecksIfFirstPartyContext};g["default"]=a}),98);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("moment-2.29.4",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){(function(b,c){typeof g==="object"&&typeof h!=="undefined"?h.exports=c():b.moment=c()})(this,function(){var a;function b(){return a.apply(null,arguments)}function c(b){a=b}function d(a){return a instanceof Array||Object.prototype.toString.call(a)==="[object Array]"}function e(a){return a!=null&&Object.prototype.toString.call(a)==="[object Object]"}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(a).length===0;else{var b;for(b in a)if(f(a,b))return!1;return!0}}function i(a){return a===void 0}function j(a){return typeof a==="number"||Object.prototype.toString.call(a)==="[object Number]"}function k(a){return a instanceof Date||Object.prototype.toString.call(a)==="[object Date]"}function aa(a,b){var c=[],d,e=a.length;for(d=0;d<e;++d)c.push(b(a[d],d));return c}function l(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);f(b,"toString")&&(a.toString=b.toString);f(b,"valueOf")&&(a.valueOf=b.valueOf);return a}function m(c,a,b,d){return cd(c,a,b,d,!0).utc()}function ba(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function n(a){a._pf==null&&(a._pf=ba());return a._pf}var ca;Array.prototype.some?ca=Array.prototype.some:ca=function(a){var b=Object(this),c=b.length>>>0,d;for(d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};function da(a){if(a._isValid==null){var b=n(a),c=ca.call(b.parsedDateParts,function(a){return a!=null});c=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidEra&&!b.invalidMonth&&!b.invalidWeekday&&!b.weekdayMismatch&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);a._strict&&(c=c&&b.charsLeftOver===0&&b.unusedTokens.length===0&&b.bigHour===void 0);if(Object.isFrozen==null||!Object.isFrozen(a))a._isValid=c;else return c}return a._isValid}function ea(a){var b=m(NaN);a!=null?l(n(b),a):n(b).userInvalidated=!0;return b}var fa=b.momentProperties=[],ga=!1;function ha(b,a){var c,d,e,f=fa.length;i(a._isAMomentObject)||(b._isAMomentObject=a._isAMomentObject);i(a._i)||(b._i=a._i);i(a._f)||(b._f=a._f);i(a._l)||(b._l=a._l);i(a._strict)||(b._strict=a._strict);i(a._tzm)||(b._tzm=a._tzm);i(a._isUTC)||(b._isUTC=a._isUTC);i(a._offset)||(b._offset=a._offset);i(a._pf)||(b._pf=n(a));i(a._locale)||(b._locale=a._locale);if(f>0)for(c=0;c<f;c++)d=fa[c],e=a[d],i(e)||(b[d]=e);return b}function ia(a){ha(this,a),this._d=new Date(a._d!=null?a._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),ga===!1&&(ga=!0,b.updateOffset(this),ga=!1)}function o(a){return a instanceof ia||a!=null&&a._isAMomentObject!=null}function ja(a){b.suppressDeprecationWarnings===!1&&typeof console!=="undefined"&&emptyFunction}function p(a,c){var d=!0;return l(function(){b.deprecationHandler!=null&&b.deprecationHandler(null,a);if(d){var e=[],g,h,i,j=arguments.length;for(h=0;h<j;h++){g="";if(typeof arguments[h]==="object"){g+="\n["+h+"] ";for(i in arguments[0])f(arguments[0],i)&&(g+=i+": "+arguments[0][i]+", ");g=g.slice(0,-2)}else g=arguments[h];e.push(g)}ja(a+"\nArguments: "+Array.prototype.slice.call(e).join("")+"\n"+new Error().stack);d=!1}return c.apply(this,arguments)},c)}var ka={};function la(a,c){b.deprecationHandler!=null&&b.deprecationHandler(a,c),ka[a]||(ja(c),ka[a]=!0)}b.suppressDeprecationWarnings=!1;b.deprecationHandler=null;function q(a){return typeof Function!=="undefined"&&a instanceof Function||Object.prototype.toString.call(a)==="[object Function]"}function ma(a){var b,c;for(c in a)f(a,c)&&(b=a[c],q(b)?this[c]=b:this["_"+c]=b);this._config=a;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function na(a,b){var c=l({},a),d;for(d in b)f(b,d)&&(e(a[d])&&e(b[d])?(c[d]={},l(c[d],a[d]),l(c[d],b[d])):b[d]!=null?c[d]=b[d]:delete c[d]);for(d in a)f(a,d)&&!f(b,d)&&e(a[d])&&(c[d]=l({},c[d]));return c}function oa(a){a!=null&&this.set(a)}var pa;Object.keys?pa=Object.keys:pa=function(a){var b,c=[];for(b in a)f(a,b)&&c.push(b);return c};var qa={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function ra(a,b,c){a=this._calendar[a]||this._calendar.sameElse;return q(a)?a.call(b,c):a}function r(a,b,c){var d=""+Math.abs(a);b=b-d.length;a=a>=0;return(a?c?"+":"":"-")+Math.pow(10,Math.max(0,b)).toString().substr(1)+d}var sa=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ta=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ua={},va={};function s(b,c,a,d){var e=d;typeof d==="string"&&(e=function(){return this[d]()});b&&(va[b]=e);c&&(va[c[0]]=function(){return r(e.apply(this,arguments),c[1],c[2])});a&&(va[a]=function(){return this.localeData().ordinal(e.apply(this,arguments),b)})}function wa(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function xa(a){var b=a.match(sa),c,d;for(c=0,d=b.length;c<d;c++)va[b[c]]?b[c]=va[b[c]]:b[c]=wa(b[c]);return function(e){var f="",c;for(c=0;c<d;c++)f+=q(b[c])?b[c].call(e,a):b[c];return f}}function ya(b,a){if(!b.isValid())return b.localeData().invalidDate();a=za(a,b.localeData());ua[a]=ua[a]||xa(a);return ua[a](b)}function za(a,b){var c=5;function d(a){return b.longDateFormat(a)||a}ta.lastIndex=0;while(c>=0&&ta.test(a))a=a.replace(ta,d),ta.lastIndex=0,c-=1;return a}var Aa={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Ba(b){var a=this._longDateFormat[b],c=this._longDateFormat[b.toUpperCase()];if(a||!c)return a;this._longDateFormat[b]=c.match(sa).map(function(a){return a==="MMMM"||a==="MM"||a==="DD"||a==="dddd"?a.slice(1):a}).join("");return this._longDateFormat[b]}var Ca="Invalid date";function Da(){return this._invalidDate}var Ea="%d",Fa=/\d{1,2}/;function Ga(a){return this._ordinal.replace("%d",a)}var t={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Ha(a,b,c,d){var e=this._relativeTime[c];return q(e)?e(a,b,c,d):e.replace(/%d/i,a)}function Ia(a,b){a=this._relativeTime[a>0?"future":"past"];return q(a)?a(b):a.replace(/%s/i,b)}var Ja={};function u(a,b){var c=a.toLowerCase();Ja[c]=Ja[c+"s"]=Ja[b]=a}function v(a){return typeof a==="string"?Ja[a]||Ja[a.toLowerCase()]:void 0}function Ka(a){var b={},c,d;for(d in a)f(a,d)&&(c=v(d),c&&(b[c]=a[d]));return b}var La={};function w(a,b){La[a]=b}function Ma(a){var b=[],c;for(c in a)f(a,c)&&b.push({unit:c,priority:La[c]});b.sort(function(a,b){return a.priority-b.priority});return b}function Na(a){return a%4===0&&a%100!==0||a%400===0}function x(a){if(a<0)return Math.ceil(a)||0;else return Math.floor(a)}function y(a){a=+a;var b=0;a!==0&&isFinite(a)&&(b=x(a));return b}function Oa(a,c){return function(d){if(d!=null){Qa(this,a,d);b.updateOffset(this,c);return this}else return Pa(this,a)}}function Pa(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function Qa(a,b,c){a.isValid()&&!isNaN(c)&&(b==="FullYear"&&Na(a.year())&&a.month()===1&&a.date()===29?(c=y(c),a._d["set"+(a._isUTC?"UTC":"")+b](c,a.month(),ob(c,a.month()))):a._d["set"+(a._isUTC?"UTC":"")+b](c))}function Ra(a){a=v(a);return q(this[a])?this[a]():this}function Sa(a,b){if(typeof a==="object"){a=Ka(a);var c=Ma(a),d,e=c.length;for(d=0;d<e;d++)this[c[d].unit](a[c[d].unit])}else{a=v(a);if(q(this[a]))return this[a](b)}return this}var Ta=/\d/,z=/\d\d/,Ua=/\d{3}/,Va=/\d{4}/,Wa=/[+-]?\d{6}/,A=/\d\d?/,Xa=/\d\d\d\d?/,Ya=/\d\d\d\d\d\d?/,Za=/\d{1,3}/,$a=/\d{1,4}/,ab=/[+-]?\d{1,6}/,bb=/\d+/,cb=/[+-]?\d+/,db=/Z|[+-]\d\d:?\d\d/gi,eb=/Z|[+-]\d\d(?::?\d\d)?/gi,fb=/[+-]?\d+(\.\d{1,3})?/,B=/[0-9]{0,256}[\'a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,gb;gb={};function C(a,b,c){gb[a]=q(b)?b:function(d,a){return d&&c?c:b}}function hb(a,b){return!f(gb,a)?new RegExp(ib(a)):gb[a](b._strict,b._locale)}function ib(a){return D(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function D(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var jb={};function E(a,b){var c,d=b,e;typeof a==="string"&&(a=[a]);j(b)&&(d=function(a,c){c[b]=y(a)});e=a.length;for(c=0;c<e;c++)jb[a[c]]=d}function F(a,b){E(a,function(c,d,e,a){e._w=e._w||{},b(c,e._w,e,a)})}function kb(a,b,c){b!=null&&f(jb,a)&&jb[a](b,c._a,c,a)}var G=0,H=1,I=2,J=3,K=4,L=5,M=6,lb=7,mb=8;function nb(a,b){return(a%b+b)%b}var N;Array.prototype.indexOf?N=Array.prototype.indexOf:N=function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};function ob(a,b){if(isNaN(a)||isNaN(b))return NaN;var c=nb(b,12);a+=(b-c)/12;return c===1?Na(a)?29:28:31-c%7%2}s("M",["MM",2],"Mo",function(){return this.month()+1});s("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});s("MMMM",0,0,function(a){return this.localeData().months(this,a)});u("month","M");w("month",8);C("M",A);C("MM",A,z);C("MMM",function(b,a){return a.monthsShortRegex(b)});C("MMMM",function(b,a){return a.monthsRegex(b)});E(["M","MM"],function(a,b){b[H]=y(a)-1});E(["MMM","MMMM"],function(a,b,c,d){d=c._locale.monthsParse(a,d,c._strict);d!=null?b[H]=d:n(c).invalidMonth=a});var pb="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),qb="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),rb=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,sb=B,tb=B;function ub(b,a){return!b?d(this._months)?this._months:this._months.standalone:d(this._months)?this._months[b.month()]:this._months[(this._months.isFormat||rb).test(a)?"format":"standalone"][b.month()]}function vb(b,a){return!b?d(this._monthsShort)?this._monthsShort:this._monthsShort.standalone:d(this._monthsShort)?this._monthsShort[b.month()]:this._monthsShort[rb.test(a)?"format":"standalone"][b.month()]}function wb(b,a,c){var d,e;b=b.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(d=0;d<12;++d)e=m([2e3,d]),this._shortMonthsParse[d]=this.monthsShort(e,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(e,"").toLocaleLowerCase()}if(c)if(a==="MMM"){e=N.call(this._shortMonthsParse,b);return e!==-1?e:null}else{e=N.call(this._longMonthsParse,b);return e!==-1?e:null}else if(a==="MMM"){e=N.call(this._shortMonthsParse,b);if(e!==-1)return e;e=N.call(this._longMonthsParse,b);return e!==-1?e:null}else{e=N.call(this._longMonthsParse,b);if(e!==-1)return e;e=N.call(this._shortMonthsParse,b);return e!==-1?e:null}}function xb(b,a,c){var d,e;if(this._monthsParseExact)return wb.call(this,b,a,c);this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(d=0;d<12;d++){e=m([2e3,d]);c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i"));!c&&!this._monthsParse[d]&&(e="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(e.replace(".",""),"i"));if(c&&a==="MMMM"&&this._longMonthsParse[d].test(b))return d;else if(c&&a==="MMM"&&this._shortMonthsParse[d].test(b))return d;else if(!c&&this._monthsParse[d].test(b))return d}}function yb(a,b){var c;if(!a.isValid())return a;if(typeof b==="string")if(/^\d+$/.test(b))b=y(b);else{b=a.localeData().monthsParse(b);if(!j(b))return a}c=Math.min(a.date(),ob(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a}function zb(a){if(a!=null){yb(this,a);b.updateOffset(this,!0);return this}else return Pa(this,"Month")}function Ab(){return ob(this.year(),this.month())}function Bb(a){if(this._monthsParseExact){f(this,"_monthsRegex")||Db.call(this);if(a)return this._monthsShortStrictRegex;else return this._monthsShortRegex}else{f(this,"_monthsShortRegex")||(this._monthsShortRegex=sb);return this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex}}function Cb(a){if(this._monthsParseExact){f(this,"_monthsRegex")||Db.call(this);if(a)return this._monthsStrictRegex;else return this._monthsRegex}else{f(this,"_monthsRegex")||(this._monthsRegex=tb);return this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex}}function Db(){function a(a,b){return b.length-a.length}var b=[],c=[],d=[],e,f;for(e=0;e<12;e++)f=m([2e3,e]),b.push(this.monthsShort(f,"")),c.push(this.months(f,"")),d.push(this.months(f,"")),d.push(this.monthsShort(f,""));b.sort(a);c.sort(a);d.sort(a);for(e=0;e<12;e++)b[e]=D(b[e]),c[e]=D(c[e]);for(e=0;e<24;e++)d[e]=D(d[e]);this._monthsRegex=new RegExp("^("+d.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+c.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+b.join("|")+")","i")}s("Y",0,0,function(){var a=this.year();return a<=9999?r(a,4):"+"+a});s(0,["YY",2],0,function(){return this.year()%100});s(0,["YYYY",4],0,"year");s(0,["YYYYY",5],0,"year");s(0,["YYYYYY",6,!0],0,"year");u("year","y");w("year",1);C("Y",cb);C("YY",A,z);C("YYYY",$a,Va);C("YYYYY",ab,Wa);C("YYYYYY",ab,Wa);E(["YYYYY","YYYYYY"],G);E("YYYY",function(a,c){c[G]=a.length===2?b.parseTwoDigitYear(a):y(a)});E("YY",function(a,c){c[G]=b.parseTwoDigitYear(a)});E("Y",function(a,b){b[G]=parseInt(a,10)});function Eb(a){return Na(a)?366:365}b.parseTwoDigitYear=function(a){return y(a)+(y(a)>68?1900:2e3)};var Fb=Oa("FullYear",!0);function Gb(){return Na(this.year())}function Hb(a,b,c,d,e,f,g){var h;a<100&&a>=0?(h=new Date(a+400,b,c,d,e,f,g),isFinite(h.getFullYear())&&h.setFullYear(a)):h=new Date(a,b,c,d,e,f,g);return h}function Ib(a){var b,c;a<100&&a>=0?(c=Array.prototype.slice.call(arguments),c[0]=a+400,b=new Date(Date.UTC.apply(null,c)),isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a)):b=new Date(Date.UTC.apply(null,arguments));return b}function Jb(a,b,c){c=7+b-c;a=(7+Ib(a,0,c).getUTCDay()-b)%7;return-a+c-1}function Kb(a,b,c,d,e){c=(7+c-d)%7;d=Jb(a,d,e);e=1+7*(b-1)+c+d;e<=0?(b=a-1,c=Eb(b)+e):e>Eb(a)?(b=a+1,c=e-Eb(a)):(b=a,c=e);return{year:b,dayOfYear:c}}function Lb(a,b,c){var d=Jb(a.year(),b,c);d=Math.floor((a.dayOfYear()-d-1)/7)+1;var e,f;d<1?(f=a.year()-1,e=d+O(f,b,c)):d>O(a.year(),b,c)?(e=d-O(a.year(),b,c),f=a.year()+1):(f=a.year(),e=d);return{week:e,year:f}}function O(a,b,c){var d=Jb(a,b,c);b=Jb(a+1,b,c);return(Eb(a)-d+b)/7}s("w",["ww",2],"wo","week");s("W",["WW",2],"Wo","isoWeek");u("week","w");u("isoWeek","W");w("week",5);w("isoWeek",5);C("w",A);C("ww",A,z);C("W",A);C("WW",A,z);F(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=y(a)});function Mb(a){return Lb(a,this._week.dow,this._week.doy).week}var P={dow:0,doy:6};function Nb(){return this._week.dow}function Ob(){return this._week.doy}function Pb(a){var b=this.localeData().week(this);return a==null?b:this.add((a-b)*7,"d")}function Qb(a){var b=Lb(this,1,4).week;return a==null?b:this.add((a-b)*7,"d")}s("d",0,"do","day");s("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)});s("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});s("dddd",0,0,function(a){return this.localeData().weekdays(this,a)});s("e",0,0,"weekday");s("E",0,0,"isoWeekday");u("day","d");u("weekday","e");u("isoWeekday","E");w("day",11);w("weekday",11);w("isoWeekday",11);C("d",A);C("e",A);C("E",A);C("dd",function(b,a){return a.weekdaysMinRegex(b)});C("ddd",function(b,a){return a.weekdaysShortRegex(b)});C("dddd",function(b,a){return a.weekdaysRegex(b)});F(["dd","ddd","dddd"],function(a,b,c,d){d=c._locale.weekdaysParse(a,d,c._strict);d!=null?b.d=d:n(c).invalidWeekday=a});F(["d","e","E"],function(a,b,c,d){b[d]=y(a)});function Rb(b,a){if(typeof b!=="string")return b;if(!isNaN(b))return parseInt(b,10);b=a.weekdaysParse(b);return typeof b==="number"?b:null}function Sb(b,a){return typeof b==="string"?a.weekdaysParse(b)%7||7:isNaN(b)?null:b}function Tb(a,b){return a.slice(b,7).concat(a.slice(0,b))}var Q="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ub="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Vb="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Wb=B,Xb=B,Yb=B;function Zb(b,a){a=d(this._weekdays)?this._weekdays:this._weekdays[b&&b!==!0&&this._weekdays.isFormat.test(a)?"format":"standalone"];return b===!0?Tb(a,this._week.dow):b?a[b.day()]:a}function $b(a){return a===!0?Tb(this._weekdaysShort,this._week.dow):a?this._weekdaysShort[a.day()]:this._weekdaysShort}function ac(a){return a===!0?Tb(this._weekdaysMin,this._week.dow):a?this._weekdaysMin[a.day()]:this._weekdaysMin}function bc(b,a,c){var d,e;b=b.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(d=0;d<7;++d)e=m([2e3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(e,"").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(e,"").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(e,"").toLocaleLowerCase()}if(c)if(a==="dddd"){e=N.call(this._weekdaysParse,b);return e!==-1?e:null}else if(a==="ddd"){e=N.call(this._shortWeekdaysParse,b);return e!==-1?e:null}else{e=N.call(this._minWeekdaysParse,b);return e!==-1?e:null}else if(a==="dddd"){e=N.call(this._weekdaysParse,b);if(e!==-1)return e;e=N.call(this._shortWeekdaysParse,b);if(e!==-1)return e;e=N.call(this._minWeekdaysParse,b);return e!==-1?e:null}else if(a==="ddd"){e=N.call(this._shortWeekdaysParse,b);if(e!==-1)return e;e=N.call(this._weekdaysParse,b);if(e!==-1)return e;e=N.call(this._minWeekdaysParse,b);return e!==-1?e:null}else{e=N.call(this._minWeekdaysParse,b);if(e!==-1)return e;e=N.call(this._weekdaysParse,b);if(e!==-1)return e;e=N.call(this._shortWeekdaysParse,b);return e!==-1?e:null}}function cc(b,a,c){var d,e;if(this._weekdaysParseExact)return bc.call(this,b,a,c);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(d=0;d<7;d++){e=m([2e3,1]).day(d);c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".","\\.?")+"$","i"));this._weekdaysParse[d]||(e="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(e.replace(".",""),"i"));if(c&&a==="dddd"&&this._fullWeekdaysParse[d].test(b))return d;else if(c&&a==="ddd"&&this._shortWeekdaysParse[d].test(b))return d;else if(c&&a==="dd"&&this._minWeekdaysParse[d].test(b))return d;else if(!c&&this._weekdaysParse[d].test(b))return d}}function dc(a){if(!this.isValid())return a!=null?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(a!=null){a=Rb(a,this.localeData());return this.add(a-b,"d")}else return b}function ec(a){if(!this.isValid())return a!=null?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return a==null?b:this.add(a-b,"d")}function fc(a){if(!this.isValid())return a!=null?this:NaN;if(a!=null){a=Sb(a,this.localeData());return this.day(this.day()%7?a:a-7)}else return this.day()||7}function gc(a){if(this._weekdaysParseExact){f(this,"_weekdaysRegex")||jc.call(this);if(a)return this._weekdaysStrictRegex;else return this._weekdaysRegex}else{f(this,"_weekdaysRegex")||(this._weekdaysRegex=Wb);return this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex}}function hc(a){if(this._weekdaysParseExact){f(this,"_weekdaysRegex")||jc.call(this);if(a)return this._weekdaysShortStrictRegex;else return this._weekdaysShortRegex}else{f(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Xb);return this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}function ic(a){if(this._weekdaysParseExact){f(this,"_weekdaysRegex")||jc.call(this);if(a)return this._weekdaysMinStrictRegex;else return this._weekdaysMinRegex}else{f(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Yb);return this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function jc(){function a(a,b){return b.length-a.length}var b=[],c=[],d=[],e=[],f,g,h,i;for(f=0;f<7;f++)g=m([2e3,1]).day(f),h=D(this.weekdaysMin(g,"")),i=D(this.weekdaysShort(g,"")),g=D(this.weekdays(g,"")),b.push(h),c.push(i),d.push(g),e.push(h),e.push(i),e.push(g);b.sort(a);c.sort(a);d.sort(a);e.sort(a);this._weekdaysRegex=new RegExp("^("+e.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+d.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+c.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+b.join("|")+")","i")}function kc(){return this.hours()%12||12}function lc(){return this.hours()||24}s("H",["HH",2],0,"hour");s("h",["hh",2],0,kc);s("k",["kk",2],0,lc);s("hmm",0,0,function(){return""+kc.apply(this)+r(this.minutes(),2)});s("hmmss",0,0,function(){return""+kc.apply(this)+r(this.minutes(),2)+r(this.seconds(),2)});s("Hmm",0,0,function(){return""+this.hours()+r(this.minutes(),2)});s("Hmmss",0,0,function(){return""+this.hours()+r(this.minutes(),2)+r(this.seconds(),2)});function mc(a,b){s(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}mc("a",!0);mc("A",!1);u("hour","h");w("hour",13);function nc(b,a){return a._meridiemParse}C("a",nc);C("A",nc);C("H",A);C("h",A);C("k",A);C("HH",A,z);C("hh",A,z);C("kk",A,z);C("hmm",Xa);C("hmmss",Ya);C("Hmm",Xa);C("Hmmss",Ya);E(["H","HH"],J);E(["k","kk"],function(a,b,c){c=y(a);b[J]=c===24?0:c});E(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a});E(["h","hh"],function(a,b,c){b[J]=y(a),n(c).bigHour=!0});E("hmm",function(a,b,c){var d=a.length-2;b[J]=y(a.substr(0,d));b[K]=y(a.substr(d));n(c).bigHour=!0});E("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[J]=y(a.substr(0,d));b[K]=y(a.substr(d,2));b[L]=y(a.substr(e));n(c).bigHour=!0});E("Hmm",function(a,b,c){c=a.length-2;b[J]=y(a.substr(0,c));b[K]=y(a.substr(c))});E("Hmmss",function(a,b,c){c=a.length-4;var d=a.length-2;b[J]=y(a.substr(0,c));b[K]=y(a.substr(c,2));b[L]=y(a.substr(d))});function oc(a){return(a+"").toLowerCase().charAt(0)==="p"}B=/[ap]\.?m?\.?/i;lc=Oa("Hours",!0);function pc(a,b,c){if(a>11)return c?"pm":"PM";else return c?"am":"AM"}var qc={calendar:qa,longDateFormat:Aa,invalidDate:Ca,ordinal:Ea,dayOfMonthOrdinalParse:Fa,relativeTime:t,months:pb,monthsShort:qb,week:P,weekdays:Q,weekdaysMin:Vb,weekdaysShort:Ub,meridiemParse:B},R={},rc={},sc;function tc(a,b){var c,d=Math.min(a.length,b.length);for(c=0;c<d;c+=1)if(a[c]!==b[c])return c;return d}function uc(a){return a?a.toLowerCase().replace("_","-"):a}function vc(b){var c=0,d,e,a,f;while(c<b.length){f=uc(b[c]).split("-");d=f.length;e=uc(b[c+1]);e=e?e.split("-"):null;while(d>0){a=xc(f.slice(0,d).join("-"));if(a)return a;if(e&&e.length>=d&&tc(f,e)>=d-1)break;d--}c++}return sc}function wc(a){return a.match("^[^/\\\\]*$")!=null}function xc(a){R[a]===void 0&&typeof h!=="undefined"&&h&&h.exports&&wc(a)&&(R[a]=null);return R[a]}function S(a,b){var c;a&&(i(b)?c=T(a):c=yc(a,b),c?sc=c:typeof console!=="undefined"&&emptyFunction);return sc._abbr}function yc(b,c){if(c!==null){var a,d=qc;c.abbr=b;if(R[b]!=null)la("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),d=R[b]._config;else if(c.parentLocale!=null)if(R[c.parentLocale]!=null)d=R[c.parentLocale]._config;else{a=xc(c.parentLocale);if(a!=null)d=a._config;else{rc[c.parentLocale]||(rc[c.parentLocale]=[]);rc[c.parentLocale].push({name:b,config:c});return null}}R[b]=new oa(na(d,c));rc[b]&&rc[b].forEach(function(a){yc(a.name,a.config)});S(b);return R[b]}else{delete R[b];return null}}function zc(a,b){if(b!=null){var c,d=qc;R[a]!=null&&R[a].parentLocale!=null?R[a].set(na(R[a]._config,b)):(c=xc(a),c!=null&&(d=c._config),b=na(d,b),c==null&&(b.abbr=a),d=new oa(b),d.parentLocale=R[a],R[a]=d);S(a)}else R[a]!=null&&(R[a].parentLocale!=null?(R[a]=R[a].parentLocale,a===S()&&S(a)):R[a]!=null&&delete R[a]);return R[a]}function T(b){var a;b&&b._locale&&b._locale._abbr&&(b=b._locale._abbr);if(!b)return sc;if(!d(b)){a=xc(b);if(a)return a;b=[b]}return vc(b)}function Ac(){return pa(R)}function Bc(a){var b=a._a;b&&n(a).overflow===-2&&(b=b[H]<0||b[H]>11?H:b[I]<1||b[I]>ob(b[G],b[H])?I:b[J]<0||b[J]>24||b[J]===24&&(b[K]!==0||b[L]!==0||b[M]!==0)?J:b[K]<0||b[K]>59?K:b[L]<0||b[L]>59?L:b[M]<0||b[M]>999?M:-1,n(a)._overflowDayOfYear&&(b<G||b>I)&&(b=I),n(a)._overflowWeeks&&b===-1&&(b=lb),n(a)._overflowWeekday&&b===-1&&(b=mb),n(a).overflow=b);return a}var Cc=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Dc=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ec=/Z|[+-]\d\d(?::?\d\d)?/,Fc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Gc=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Hc=/^\/?Date\((-?\d+)/i,Ic=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Jc={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Kc(a){var b,c=a._i;c=Cc.exec(c)||Dc.exec(c);var d,e,f,g,h=Fc.length,i=Gc.length;if(c){n(a).iso=!0;for(b=0,h=h;b<h;b++)if(Fc[b][1].exec(c[1])){e=Fc[b][0];d=Fc[b][2]!==!1;break}if(e==null){a._isValid=!1;return}if(c[3]){for(b=0,h=i;b<h;b++)if(Gc[b][1].exec(c[3])){f=(c[2]||" ")+Gc[b][0];break}if(f==null){a._isValid=!1;return}}if(!d&&f!=null){a._isValid=!1;return}if(c[4])if(Ec.exec(c[4]))g="Z";else{a._isValid=!1;return}a._f=e+(f||"")+(g||"");Wc(a)}else a._isValid=!1}function Lc(a,b,c,d,e,f){a=[Mc(a),qb.indexOf(b),parseInt(c,10),parseInt(d,10),parseInt(e,10)];f&&a.push(parseInt(f,10));return a}function Mc(a){a=parseInt(a,10);if(a<=49)return 2e3+a;else if(a<=999)return 1900+a;return a}function Nc(a){return a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Oc(a,b,c){if(a){a=Ub.indexOf(a);b=new Date(b[0],b[1],b[2]).getDay();if(a!==b){n(c).weekdayMismatch=!0;c._isValid=!1;return!1}}return!0}function Pc(a,b,c){if(a)return Jc[a];else if(b)return 0;else{a=parseInt(c,10);b=a%100;c=(a-b)/100;return c*60+b}}function Qc(a){var b=Ic.exec(Nc(a._i)),c;if(b){c=Lc(b[4],b[3],b[2],b[5],b[6],b[7]);if(!Oc(b[1],c,a))return;a._a=c;a._tzm=Pc(b[8],b[9],b[10]);a._d=Ib.apply(null,a._a);a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm);n(a).rfc2822=!0}else a._isValid=!1}function Rc(a){var c=Hc.exec(a._i);if(c!==null){a._d=new Date(+c[1]);return}Kc(a);if(a._isValid===!1)delete a._isValid;else return;Qc(a);if(a._isValid===!1)delete a._isValid;else return;a._strict?a._isValid=!1:b.createFromInputFallback(a)}b.createFromInputFallback=p("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});function Sc(a,b,c){if(a!=null)return a;return b!=null?b:c}function Tc(a){var c=new Date(b.now());return a._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}function Uc(a){var b=[],c,d;if(a._d)return;c=Tc(a);a._w&&a._a[I]==null&&a._a[H]==null&&Vc(a);a._dayOfYear!=null&&(d=Sc(a._a[G],c[G]),(a._dayOfYear>Eb(d)||a._dayOfYear===0)&&(n(a)._overflowDayOfYear=!0),d=Ib(d,0,a._dayOfYear),a._a[H]=d.getUTCMonth(),a._a[I]=d.getUTCDate());for(d=0;d<3&&a._a[d]==null;++d)a._a[d]=b[d]=c[d];for(;d<7;d++)a._a[d]=b[d]=a._a[d]==null?d===2?1:0:a._a[d];a._a[J]===24&&a._a[K]===0&&a._a[L]===0&&a._a[M]===0&&(a._nextDay=!0,a._a[J]=0);a._d=(a._useUTC?Ib:Hb).apply(null,b);c=a._useUTC?a._d.getUTCDay():a._d.getDay();a._tzm!=null&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm);a._nextDay&&(a._a[J]=24);a._w&&typeof a._w.d!=="undefined"&&a._w.d!==c&&(n(a).weekdayMismatch=!0)}function Vc(a){var b,c,d,e,f,g,h,i;b=a._w;b.GG!=null||b.W!=null||b.E!=null?(f=1,g=4,c=Sc(b.GG,a._a[G],Lb(U(),1,4).year),d=Sc(b.W,1),e=Sc(b.E,1),(e<1||e>7)&&(h=!0)):(f=a._locale._week.dow,g=a._locale._week.doy,i=Lb(U(),f,g),c=Sc(b.gg,a._a[G],i.year),d=Sc(b.w,i.week),b.d!=null?(e=b.d,(e<0||e>6)&&(h=!0)):b.e!=null?(e=b.e+f,(b.e<0||b.e>6)&&(h=!0)):e=f);d<1||d>O(c,f,g)?n(a)._overflowWeeks=!0:h!=null?n(a)._overflowWeekday=!0:(i=Kb(c,d,e,f,g),a._a[G]=i.year,a._dayOfYear=i.dayOfYear)}b.ISO_8601=function(){};b.RFC_2822=function(){};function Wc(c){if(c._f===b.ISO_8601){Kc(c);return}if(c._f===b.RFC_2822){Qc(c);return}c._a=[];n(c).empty=!0;var d=""+c._i,e,f,a,g,h,i=d.length,j=0,k;a=za(c._f,c._locale).match(sa)||[];k=a.length;for(e=0;e<k;e++)g=a[e],f=(d.match(hb(g,c))||[])[0],f&&(h=d.substr(0,d.indexOf(f)),h.length>0&&n(c).unusedInput.push(h),d=d.slice(d.indexOf(f)+f.length),j+=f.length),va[g]?(f?n(c).empty=!1:n(c).unusedTokens.push(g),kb(g,f,c)):c._strict&&!f&&n(c).unusedTokens.push(g);n(c).charsLeftOver=i-j;d.length>0&&n(c).unusedInput.push(d);c._a[J]<=12&&n(c).bigHour===!0&&c._a[J]>0&&(n(c).bigHour=void 0);n(c).parsedDateParts=c._a.slice(0);n(c).meridiem=c._meridiem;c._a[J]=Xc(c._locale,c._a[J],c._meridiem);h=n(c).era;h!==null&&(c._a[G]=c._locale.erasConvertYear(h,c._a[G]));Uc(c);Bc(c)}function Xc(b,c,a){if(a==null)return c;if(b.meridiemHour!=null)return b.meridiemHour(c,a);else if(b.isPM!=null){b=b.isPM(a);b&&c<12&&(c+=12);!b&&c===12&&(c=0);return c}else return c}function Yc(a){var b,c,d,e,f,g,h=!1,i=a._f.length;if(i===0){n(a).invalidFormat=!0;a._d=new Date(NaN);return}for(e=0;e<i;e++)f=0,g=!1,b=ha({},a),a._useUTC!=null&&(b._useUTC=a._useUTC),b._f=a._f[e],Wc(b),da(b)&&(g=!0),f+=n(b).charsLeftOver,f+=n(b).unusedTokens.length*10,n(b).score=f,!h?(d==null||f<d||g)&&(d=f,c=b,g&&(h=!0)):f<d&&(d=f,c=b);l(a,c||b)}function Zc(a){if(a._d)return;var b=Ka(a._i),c=b.day===void 0?b.date:b.day;a._a=aa([b.year,b.month,c,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)});Uc(a)}function $c(a){a=new ia(Bc(ad(a)));a._nextDay&&(a.add(1,"d"),a._nextDay=void 0);return a}function ad(b){var c=b._i,a=b._f;b._locale=b._locale||T(b._l);if(c===null||a===void 0&&c==="")return ea({nullInput:!0});typeof c==="string"&&(b._i=c=b._locale.preparse(c));if(o(c))return new ia(Bc(c));else k(c)?b._d=c:d(a)?Yc(b):a?Wc(b):bd(b);da(b)||(b._d=null);return b}function bd(a){var c=a._i;i(c)?a._d=new Date(b.now()):k(c)?a._d=new Date(c.valueOf()):typeof c==="string"?Rc(a):d(c)?(a._a=aa(c.slice(0),function(a){return parseInt(a,10)}),Uc(a)):e(c)?Zc(a):j(c)?a._d=new Date(c):b.createFromInputFallback(a)}function cd(c,a,b,f,h){var i={};(a===!0||a===!1)&&(f=a,a=void 0);(b===!0||b===!1)&&(f=b,b=void 0);(e(c)&&g(c)||d(c)&&c.length===0)&&(c=void 0);i._isAMomentObject=!0;i._useUTC=i._isUTC=h;i._l=b;i._i=c;i._f=a;i._strict=f;return $c(i)}function U(c,a,b,d){return cd(c,a,b,d,!1)}mc=p("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=U.apply(null,arguments);if(this.isValid()&&a.isValid())return a<this?this:a;else return ea()});nc=p("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=U.apply(null,arguments);if(this.isValid()&&a.isValid())return a>this?this:a;else return ea()});function dd(a,b){var c,e;b.length===1&&d(b[0])&&(b=b[0]);if(!b.length)return U();c=b[0];for(e=1;e<b.length;++e)(!b[e].isValid()||b[e][a](c))&&(c=b[e]);return c}function ed(){var a=[].slice.call(arguments,0);return dd("isBefore",a)}function fd(){var a=[].slice.call(arguments,0);return dd("isAfter",a)}Xa=function(){return Date.now?Date.now():+new Date()};var gd=["year","quarter","month","week","day","hour","minute","second","millisecond"];function hd(a){var b,c=!1,d=gd.length;for(b in a)if(f(a,b)&&!(N.call(gd,b)!==-1&&(a[b]==null||!isNaN(a[b]))))return!1;for(b=0;b<d;++b)if(a[gd[b]]){if(c)return!1;parseFloat(a[gd[b]])!==y(a[gd[b]])&&(c=!0)}return!0}function id(){return this._isValid}function jd(){return V(NaN)}function kd(b){b=Ka(b);var c=b.year||0,d=b.quarter||0,e=b.month||0,a=b.week||b.isoWeek||0,f=b.day||0,g=b.hour||0,h=b.minute||0,i=b.second||0,j=b.millisecond||0;this._isValid=hd(b);this._milliseconds=+j+i*1e3+h*6e4+g*1e3*60*60;this._days=+f+a*7;this._months=+e+d*3+c*12;this._data={};this._locale=T();this._bubble()}function ld(a){return a instanceof kd}function md(a){if(a<0)return Math.round(-1*a)*-1;else return Math.round(a)}function nd(a,b,c){var d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0,g;for(g=0;g<d;g++)(c&&a[g]!==b[g]||!c&&y(a[g])!==y(b[g]))&&f++;return f+e}function od(a,b){s(a,0,0,function(){var a=this.utcOffset(),c="+";a<0&&(a=-a,c="-");return c+r(~~(a/60),2)+b+r(~~a%60,2)})}od("Z",":");od("ZZ","");C("Z",eb);C("ZZ",eb);E(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=qd(eb,a)});var pd=/([\+\-]|\d\d)/gi;function qd(a,b){b=(b||"").match(a);if(b===null)return null;a=b[b.length-1]||[];b=(a+"").match(pd)||["-",0,0];a=+(b[1]*60)+y(b[2]);return a===0?0:b[0]==="+"?a:-a}function rd(c,d){var a;if(d._isUTC){d=d.clone();a=(o(c)||k(c)?c.valueOf():U(c).valueOf())-d.valueOf();d._d.setTime(d._d.valueOf()+a);b.updateOffset(d,!1);return d}else return U(c).local()}function sd(a){return-Math.round(a._d.getTimezoneOffset())}b.updateOffset=function(){};function td(c,d,e){var a=this._offset||0,f;if(!this.isValid())return c!=null?this:NaN;if(c!=null){if(typeof c==="string"){c=qd(eb,c);if(c===null)return this}else Math.abs(c)<16&&!e&&(c=c*60);!this._isUTC&&d&&(f=sd(this));this._offset=c;this._isUTC=!0;f!=null&&this.add(f,"m");a!==c&&(!d||this._changeInProgress?Jd(this,V(c-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,b.updateOffset(this,!0),this._changeInProgress=null));return this}else return this._isUTC?a:sd(this)}function ud(a,b){if(a!=null){typeof a!=="string"&&(a=-a);this.utcOffset(a,b);return this}else return-this.utcOffset()}function vd(a){return this.utcOffset(0,a)}function wd(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(sd(this),"m"));return this}function xd(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i==="string"){var a=qd(db,this._i);a!=null?this.utcOffset(a):this.utcOffset(0,!0)}return this}function yd(a){if(!this.isValid())return!1;a=a?U(a).utcOffset():0;return(this.utcOffset()-a)%60===0}function zd(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ad(){if(!i(this._isDSTShifted))return this._isDSTShifted;var a={},b;ha(a,this);a=ad(a);a._a?(b=a._isUTC?m(a._a):U(a._a),this._isDSTShifted=this.isValid()&&nd(a._a,b.toArray())>0):this._isDSTShifted=!1;return this._isDSTShifted}function Bd(){return this.isValid()?!this._isUTC:!1}function Cd(){return this.isValid()?this._isUTC:!1}function Dd(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Ed=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Fd=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function V(a,b){var c=a,d=null;ld(a)?c={ms:a._milliseconds,d:a._days,M:a._months}:j(a)||!isNaN(+a)?(c={},b?c[b]=+a:c.milliseconds=+a):(d=Ed.exec(a))?(b=d[1]==="-"?-1:1,c={y:0,d:y(d[I])*b,h:y(d[J])*b,m:y(d[K])*b,s:y(d[L])*b,ms:y(md(d[M]*1e3))*b}):(d=Fd.exec(a))?(b=d[1]==="-"?-1:1,c={y:W(d[2],b),M:W(d[3],b),w:W(d[4],b),d:W(d[5],b),h:W(d[6],b),m:W(d[7],b),s:W(d[8],b)}):c==null?c={}:typeof c==="object"&&("from"in c||"to"in c)&&(d=Hd(U(c.from),U(c.to)),c={},c.ms=d.milliseconds,c.M=d.months);b=new kd(c);ld(a)&&f(a,"_locale")&&(b._locale=a._locale);ld(a)&&f(a,"_isValid")&&(b._isValid=a._isValid);return b}V.fn=kd.prototype;V.invalid=jd;function W(b,a){b=b&&parseFloat(b.replace(",","."));return(isNaN(b)?0:b)*a}function Gd(a,b){var c={};c.months=b.month()-a.month()+(b.year()-a.year())*12;a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=+b-+a.clone().add(c.months,"M");return c}function Hd(a,b){var c;if(!(a.isValid()&&b.isValid()))return{milliseconds:0,months:0};b=rd(b,a);a.isBefore(b)?c=Gd(a,b):(c=Gd(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months);return c}function Id(a,b){return function(c,d){var e;d!==null&&!isNaN(+d)&&(la(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),e=c,c=d,d=e);e=V(c,d);Jd(this,e,a);return this}}function Jd(a,c,d,e){var f=c._milliseconds,g=md(c._days);c=md(c._months);if(!a.isValid())return;e=e==null?!0:e;c&&yb(a,Pa(a,"Month")+c*d);g&&Qa(a,"Date",Pa(a,"Date")+g*d);f&&a._d.setTime(a._d.valueOf()+f*d);e&&b.updateOffset(a,g||c)}Ya=Id(1,"add");qa=Id(-1,"subtract");function Kd(a){return typeof a==="string"||a instanceof String}function Ld(a){return o(a)||k(a)||Kd(a)||j(a)||Nd(a)||Md(a)||a===null||a===void 0}function Md(a){var b=e(a)&&!g(a),c=!1,d=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],h,i,j=d.length;for(h=0;h<j;h+=1)i=d[h],c=c||f(a,i);return b&&c}function Nd(a){var b=d(a),c=!1;b&&(c=a.filter(function(b){return!j(b)&&Kd(a)}).length===0);return b&&c}function Od(a){var b=e(a)&&!g(a),c=!1,d=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],h,i;for(h=0;h<d.length;h+=1)i=d[h],c=c||f(a,i);return b&&c}function Pd(a,b){a=a.diff(b,"days",!0);return a<-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":"sameElse"}function Qd(c,d){arguments.length===1&&(!arguments[0]?(c=void 0,d=void 0):Ld(arguments[0])?(c=arguments[0],d=void 0):Od(arguments[0])&&(d=arguments[0],c=void 0));var e=c||U(),f=rd(e,this).startOf("day"),a=b.calendarFormat(this,f)||"sameElse",g=d&&(q(d[a])?d[a].call(this,e):d[a]);return this.format(g||this.localeData().calendar(a,this,U(e)))}function Rd(){return new ia(this)}function Sd(a,b){a=o(a)?a:U(a);if(!(this.isValid()&&a.isValid()))return!1;b=v(b)||"millisecond";if(b==="millisecond")return this.valueOf()>a.valueOf();else return a.valueOf()<this.clone().startOf(b).valueOf()}function Td(a,b){a=o(a)?a:U(a);if(!(this.isValid()&&a.isValid()))return!1;b=v(b)||"millisecond";if(b==="millisecond")return this.valueOf()<a.valueOf();else return this.clone().endOf(b).valueOf()<a.valueOf()}function Ud(a,b,c,d){a=o(a)?a:U(a);b=o(b)?b:U(b);if(!(this.isValid()&&a.isValid()&&b.isValid()))return!1;d=d||"()";return(d[0]==="("?this.isAfter(a,c):!this.isBefore(a,c))&&(d[1]===")"?this.isBefore(b,c):!this.isAfter(b,c))}function Vd(a,b){a=o(a)?a:U(a);if(!(this.isValid()&&a.isValid()))return!1;b=v(b)||"millisecond";if(b==="millisecond")return this.valueOf()===a.valueOf();else{a=a.valueOf();return this.clone().startOf(b).valueOf()<=a&&a<=this.clone().endOf(b).valueOf()}}function Wd(a,b){return this.isSame(a,b)||this.isAfter(a,b)}function Xd(a,b){return this.isSame(a,b)||this.isBefore(a,b)}function Yd(a,b,c){var d,e;if(!this.isValid())return NaN;a=rd(a,this);if(!a.isValid())return NaN;d=(a.utcOffset()-this.utcOffset())*6e4;b=v(b);switch(b){case"year":e=Zd(this,a)/12;break;case"month":e=Zd(this,a);break;case"quarter":e=Zd(this,a)/3;break;case"second":e=(this-a)/1e3;break;case"minute":e=(this-a)/6e4;break;case"hour":e=(this-a)/36e5;break;case"day":e=(this-a-d)/864e5;break;case"week":e=(this-a-d)/6048e5;break;default:e=this-a}return c?e:x(e)}function Zd(a,b){if(a.date()<b.date())return-Zd(b,a);var c=(b.year()-a.year())*12+(b.month()-a.month()),d=a.clone().add(c,"months"),e,f;b-d<0?(e=a.clone().add(c-1,"months"),f=(b-d)/(d-e)):(e=a.clone().add(c+1,"months"),f=(b-d)/(e-d));return-(c+f)||0}b.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";b.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function $d(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ae(a){if(!this.isValid())return null;a=a!==!0;var b=a?this.clone().utc():this;if(b.year()<0||b.year()>9999)return ya(b,a?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ");if(q(Date.prototype.toISOString))if(a)return this.toDate().toISOString();else return new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",ya(b,"Z"));return ya(b,a?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function be(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="",c,d;this.isLocal()||(a=this.utcOffset()===0?"moment.utc":"moment.parseZone",b="Z");a="["+a+'("]';c=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";d="-MM-DD[T]HH:mm:ss.SSS";b=b+'[")]';return this.format(a+c+d+b)}function ce(a){a||(a=this.isUtc()?b.defaultFormatUtc:b.defaultFormat);a=ya(this,a);return this.localeData().postformat(a)}function de(a,b){if(this.isValid()&&(o(a)&&a.isValid()||U(a).isValid()))return V({to:this,from:a}).locale(this.locale()).humanize(!b);else return this.localeData().invalidDate()}function ee(a){return this.from(U(),a)}function fe(a,b){if(this.isValid()&&(o(a)&&a.isValid()||U(a).isValid()))return V({from:this,to:a}).locale(this.locale()).humanize(!b);else return this.localeData().invalidDate()}function ge(a){return this.to(U(),a)}function he(a){if(a===void 0)return this._locale._abbr;else{a=T(a);a!=null&&(this._locale=a);return this}}Aa=p("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){if(a===void 0)return this.localeData();else return this.locale(a)});function ie(){return this._locale}var je=1e3,ke=60*je,le=60*ke,me=(365*400+97)*24*le;function ne(a,b){return(a%b+b)%b}function oe(a,b,c){if(a<100&&a>=0)return new Date(a+400,b,c)-me;else return new Date(a,b,c).valueOf()}function pe(a,b,c){if(a<100&&a>=0)return Date.UTC(a+400,b,c)-me;else return Date.UTC(a,b,c)}function qe(a){var c,d;a=v(a);if(a===void 0||a==="millisecond"||!this.isValid())return this;d=this._isUTC?pe:oe;switch(a){case"year":c=d(this.year(),0,1);break;case"quarter":c=d(this.year(),this.month()-this.month()%3,1);break;case"month":c=d(this.year(),this.month(),1);break;case"week":c=d(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":c=d(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":c=d(this.year(),this.month(),this.date());break;case"hour":c=this._d.valueOf();c-=ne(c+(this._isUTC?0:this.utcOffset()*ke),le);break;case"minute":c=this._d.valueOf();c-=ne(c,ke);break;case"second":c=this._d.valueOf();c-=ne(c,je);break}this._d.setTime(c);b.updateOffset(this,!0);return this}function re(a){var c,d;a=v(a);if(a===void 0||a==="millisecond"||!this.isValid())return this;d=this._isUTC?pe:oe;switch(a){case"year":c=d(this.year()+1,0,1)-1;break;case"quarter":c=d(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":c=d(this.year(),this.month()+1,1)-1;break;case"week":c=d(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":c=d(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":c=d(this.year(),this.month(),this.date()+1)-1;break;case"hour":c=this._d.valueOf();c+=le-ne(c+(this._isUTC?0:this.utcOffset()*ke),le)-1;break;case"minute":c=this._d.valueOf();c+=ke-ne(c,ke)-1;break;case"second":c=this._d.valueOf();c+=je-ne(c,je)-1;break}this._d.setTime(c);b.updateOffset(this,!0);return this}function se(){return this._d.valueOf()-(this._offset||0)*6e4}function te(){return Math.floor(this.valueOf()/1e3)}function ue(){return new Date(this.valueOf())}function ve(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function we(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function xe(){return this.isValid()?this.toISOString():null}function ye(){return da(this)}function ze(){return l({},n(this))}function Ae(){return n(this).overflow}function Be(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}s("N",0,0,"eraAbbr");s("NN",0,0,"eraAbbr");s("NNN",0,0,"eraAbbr");s("NNNN",0,0,"eraName");s("NNNNN",0,0,"eraNarrow");s("y",["y",1],"yo","eraYear");s("y",["yy",2],0,"eraYear");s("y",["yyy",3],0,"eraYear");s("y",["yyyy",4],0,"eraYear");C("N",Me);C("NN",Me);C("NNN",Me);C("NNNN",Ne);C("NNNNN",Oe);E(["N","NN","NNN","NNNN","NNNNN"],function(a,b,c,d){b=c._locale.erasParse(a,d,c._strict);b?n(c).era=b:n(c).invalidEra=a});C("y",bb);C("yy",bb);C("yyy",bb);C("yyyy",bb);C("yo",Pe);E(["y","yy","yyy","yyyy"],G);E(["yo"],function(a,b,c,d){var e;c._locale._eraYearOrdinalRegex&&(e=a.match(c._locale._eraYearOrdinalRegex));c._locale.eraYearOrdinalParse?b[G]=c._locale.eraYearOrdinalParse(a,e):b[G]=parseInt(a,10)});function Ce(c,a){var d,e;c=this._eras||T("en")._eras;for(a=0,d=c.length;a<d;++a){switch(typeof c[a].since){case"string":e=b(c[a].since).startOf("day");c[a].since=e.valueOf();break}switch(typeof c[a].until){case"undefined":c[a].until=+Infinity;break;case"string":e=b(c[a].until).startOf("day").valueOf();c[a].until=e.valueOf();break}}return c}function De(b,a,c){var d,e,f=this.eras(),g,h,i;b=b.toUpperCase();for(d=0,e=f.length;d<e;++d){g=f[d].name.toUpperCase();h=f[d].abbr.toUpperCase();i=f[d].narrow.toUpperCase();if(c)switch(a){case"N":case"NN":case"NNN":if(h===b)return f[d];break;case"NNNN":if(g===b)return f[d];break;case"NNNNN":if(i===b)return f[d];break}else if([g,h,i].indexOf(b)>=0)return f[d]}}function Ee(a,c){var d=a.since<=a.until?1:-1;if(c===void 0)return b(a.since).year();else return b(a.since).year()+(c-a.offset)*d}function Fe(){var a,b,c,d=this.localeData().eras();for(a=0,b=d.length;a<b;++a){c=this.clone().startOf("day").valueOf();if(d[a].since<=c&&c<=d[a].until)return d[a].name;if(d[a].until<=c&&c<=d[a].since)return d[a].name}return""}function Ge(){var a,b,c,d=this.localeData().eras();for(a=0,b=d.length;a<b;++a){c=this.clone().startOf("day").valueOf();if(d[a].since<=c&&c<=d[a].until)return d[a].narrow;if(d[a].until<=c&&c<=d[a].since)return d[a].narrow}return""}function He(){var a,b,c,d=this.localeData().eras();for(a=0,b=d.length;a<b;++a){c=this.clone().startOf("day").valueOf();if(d[a].since<=c&&c<=d[a].until)return d[a].abbr;if(d[a].until<=c&&c<=d[a].since)return d[a].abbr}return""}function Ie(){var a,c,d,e,f=this.localeData().eras();for(a=0,c=f.length;a<c;++a){d=f[a].since<=f[a].until?1:-1;e=this.clone().startOf("day").valueOf();if(f[a].since<=e&&e<=f[a].until||f[a].until<=e&&e<=f[a].since)return(this.year()-b(f[a].since).year())*d+f[a].offset}return this.year()}function Je(a){f(this,"_erasNameRegex")||Qe.call(this);return a?this._erasNameRegex:this._erasRegex}function Ke(a){f(this,"_erasAbbrRegex")||Qe.call(this);return a?this._erasAbbrRegex:this._erasRegex}function Le(a){f(this,"_erasNarrowRegex")||Qe.call(this);return a?this._erasNarrowRegex:this._erasRegex}function Me(b,a){return a.erasAbbrRegex(b)}function Ne(b,a){return a.erasNameRegex(b)}function Oe(b,a){return a.erasNarrowRegex(b)}function Pe(b,a){return a._eraYearOrdinalRegex||bb}function Qe(){var a=[],b=[],c=[],d=[],e,f,g=this.eras();for(e=0,f=g.length;e<f;++e)b.push(D(g[e].name)),a.push(D(g[e].abbr)),c.push(D(g[e].narrow)),d.push(D(g[e].name)),d.push(D(g[e].abbr)),d.push(D(g[e].narrow));this._erasRegex=new RegExp("^("+d.join("|")+")","i");this._erasNameRegex=new RegExp("^("+b.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+a.join("|")+")","i");this._erasNarrowRegex=new RegExp("^("+c.join("|")+")","i")}s(0,["gg",2],0,function(){return this.weekYear()%100});s(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Re(a,b){s(0,[a,a.length],0,b)}Re("gggg","weekYear");Re("ggggg","weekYear");Re("GGGG","isoWeekYear");Re("GGGGG","isoWeekYear");u("weekYear","gg");u("isoWeekYear","GG");w("weekYear",1);w("isoWeekYear",1);C("G",cb);C("g",cb);C("GG",A,z);C("gg",A,z);C("GGGG",$a,Va);C("gggg",$a,Va);C("GGGGG",ab,Wa);C("ggggg",ab,Wa);F(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=y(a)});F(["gg","GG"],function(a,c,d,e){c[e]=b.parseTwoDigitYear(a)});function Se(a){return Ye.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Te(a){return Ye.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)}function Ue(){return O(this.year(),1,4)}function Ve(){return O(this.isoWeekYear(),1,4)}function We(){var a=this.localeData()._week;return O(this.year(),a.dow,a.doy)}function Xe(){var a=this.localeData()._week;return O(this.weekYear(),a.dow,a.doy)}function Ye(a,b,c,d,e){var f;if(a==null)return Lb(this,d,e).year;else{f=O(a,d,e);b>f&&(b=f);return Ze.call(this,a,b,c,d,e)}}function Ze(a,b,c,d,e){a=Kb(a,b,c,d,e);b=Ib(a.year,0,a.dayOfYear);this.year(b.getUTCFullYear());this.month(b.getUTCMonth());this.date(b.getUTCDate());return this}s("Q",0,"Qo","quarter");u("quarter","Q");w("quarter",7);C("Q",Ta);E("Q",function(a,b){b[H]=(y(a)-1)*3});function $e(a){return a==null?Math.ceil((this.month()+1)/3):this.month((a-1)*3+this.month()%3)}s("D",["DD",2],"Do","date");u("date","D");w("date",9);C("D",A);C("DD",A,z);C("Do",function(b,a){return b?a._dayOfMonthOrdinalParse||a._ordinalParse:a._dayOfMonthOrdinalParseLenient});E(["D","DD"],I);E("Do",function(a,b){b[I]=y(a.match(A)[0])});Ca=Oa("Date",!0);s("DDD",["DDDD",3],"DDDo","dayOfYear");u("dayOfYear","DDD");w("dayOfYear",4);C("DDD",Za);C("DDDD",Ua);E(["DDD","DDDD"],function(a,b,c){c._dayOfYear=y(a)});function af(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return a==null?b:this.add(a-b,"d")}s("m",["mm",2],0,"minute");u("minute","m");w("minute",14);C("m",A);C("mm",A,z);E(["m","mm"],K);Ea=Oa("Minutes",!1);s("s",["ss",2],0,"second");u("second","s");w("second",15);C("s",A);C("ss",A,z);E(["s","ss"],L);Fa=Oa("Seconds",!1);s("S",0,0,function(){return~~(this.millisecond()/100)});s(0,["SS",2],0,function(){return~~(this.millisecond()/10)});s(0,["SSS",3],0,"millisecond");s(0,["SSSS",4],0,function(){return this.millisecond()*10});s(0,["SSSSS",5],0,function(){return this.millisecond()*100});s(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});s(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});s(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});s(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});u("millisecond","ms");w("millisecond",16);C("S",Za,Ta);C("SS",Za,z);C("SSS",Za,Ua);for(t="SSSS";t.length<=9;t+="S")C(t,bb);function bf(a,b){b[M]=y(("0."+a)*1e3)}for(t="S";t.length<=9;t+="S")E(t,bf);pb=Oa("Milliseconds",!1);s("z",0,0,"zoneAbbr");s("zz",0,0,"zoneName");function cf(){return this._isUTC?"UTC":""}function df(){return this._isUTC?"Coordinated Universal Time":""}P=ia.prototype;P.add=Ya;P.calendar=Qd;P.clone=Rd;P.diff=Yd;P.endOf=re;P.format=ce;P.from=de;P.fromNow=ee;P.to=fe;P.toNow=ge;P.get=Ra;P.invalidAt=Ae;P.isAfter=Sd;P.isBefore=Td;P.isBetween=Ud;P.isSame=Vd;P.isSameOrAfter=Wd;P.isSameOrBefore=Xd;P.isValid=ye;P.lang=Aa;P.locale=he;P.localeData=ie;P.max=nc;P.min=mc;P.parsingFlags=ze;P.set=Sa;P.startOf=qe;P.subtract=qa;P.toArray=ve;P.toObject=we;P.toDate=ue;P.toISOString=ae;P.inspect=be;typeof Symbol!=="undefined"&&Symbol["for"]!=null&&(P[Symbol["for"]("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});P.toJSON=xe;P.toString=$d;P.unix=te;P.valueOf=se;P.creationData=Be;P.eraName=Fe;P.eraNarrow=Ge;P.eraAbbr=He;P.eraYear=Ie;P.year=Fb;P.isLeapYear=Gb;P.weekYear=Se;P.isoWeekYear=Te;P.quarter=P.quarters=$e;P.month=zb;P.daysInMonth=Ab;P.week=P.weeks=Pb;P.isoWeek=P.isoWeeks=Qb;P.weeksInYear=We;P.weeksInWeekYear=Xe;P.isoWeeksInYear=Ue;P.isoWeeksInISOWeekYear=Ve;P.date=Ca;P.day=P.days=dc;P.weekday=ec;P.isoWeekday=fc;P.dayOfYear=af;P.hour=P.hours=lc;P.minute=P.minutes=Ea;P.second=P.seconds=Fa;P.millisecond=P.milliseconds=pb;P.utcOffset=td;P.utc=vd;P.local=wd;P.parseZone=xd;P.hasAlignedHourOffset=yd;P.isDST=zd;P.isLocal=Bd;P.isUtcOffset=Cd;P.isUtc=Dd;P.isUTC=Dd;P.zoneAbbr=cf;P.zoneName=df;P.dates=p("dates accessor is deprecated. Use date instead.",Ca);P.months=p("months accessor is deprecated. Use month instead",zb);P.years=p("years accessor is deprecated. Use year instead",Fb);P.zone=p("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",ud);P.isDSTShifted=p("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Ad);function ef(a){return U(a*1e3)}function ff(){return U.apply(null,arguments).parseZone()}function gf(a){return a}Q=oa.prototype;Q.calendar=ra;Q.longDateFormat=Ba;Q.invalidDate=Da;Q.ordinal=Ga;Q.preparse=gf;Q.postformat=gf;Q.relativeTime=Ha;Q.pastFuture=Ia;Q.set=ma;Q.eras=Ce;Q.erasParse=De;Q.erasConvertYear=Ee;Q.erasAbbrRegex=Ke;Q.erasNameRegex=Je;Q.erasNarrowRegex=Le;Q.months=ub;Q.monthsShort=vb;Q.monthsParse=xb;Q.monthsRegex=Cb;Q.monthsShortRegex=Bb;Q.week=Mb;Q.firstDayOfYear=Ob;Q.firstDayOfWeek=Nb;Q.weekdays=Zb;Q.weekdaysMin=ac;Q.weekdaysShort=$b;Q.weekdaysParse=cc;Q.weekdaysRegex=gc;Q.weekdaysShortRegex=hc;Q.weekdaysMinRegex=ic;Q.isPM=oc;Q.meridiem=pc;function hf(a,c,d,e){var b=T();e=m().set(e,c);return b[d](e,a)}function jf(a,b,c){j(a)&&(b=a,a=void 0);a=a||"";if(b!=null)return hf(a,b,c,"month");var d;b=[];for(d=0;d<12;d++)b[d]=hf(a,d,c,"month");return b}function kf(c,a,d,e){typeof c==="boolean"?(j(a)&&(d=a,a=void 0),a=a||""):(a=c,d=a,c=!1,j(a)&&(d=a,a=void 0),a=a||"");var b=T();c=c?b._week.dow:0;b=[];if(d!=null)return hf(a,(d+c)%7,e,"day");for(d=0;d<7;d++)b[d]=hf(a,(d+c)%7,e,"day");return b}function lf(a,b){return jf(a,b,"months")}function mf(a,b){return jf(a,b,"monthsShort")}function nf(b,a,c){return kf(b,a,c,"weekdays")}function of(b,a,c){return kf(b,a,c,"weekdaysShort")}function pf(b,a,c){return kf(b,a,c,"weekdaysMin")}S("en",{eras:[{since:"0001-01-01",until:+Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10;b=y(a%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return a+b}});b.lang=p("moment.lang is deprecated. Use moment.locale instead.",S);b.langData=p("moment.langData is deprecated. Use moment.localeData instead.",T);var X=Math.abs;function qf(){var a=this._data;this._milliseconds=X(this._milliseconds);this._days=X(this._days);this._months=X(this._months);a.milliseconds=X(a.milliseconds);a.seconds=X(a.seconds);a.minutes=X(a.minutes);a.hours=X(a.hours);a.months=X(a.months);a.years=X(a.years);return this}function rf(a,b,c,d){b=V(b,c);a._milliseconds+=d*b._milliseconds;a._days+=d*b._days;a._months+=d*b._months;return a._bubble()}function sf(a,b){return rf(this,a,b,1)}function tf(a,b){return rf(this,a,b,-1)}function uf(a){if(a<0)return Math.floor(a);else return Math.ceil(a)}function vf(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;a>=0&&b>=0&&c>=0||a<=0&&b<=0&&c<=0||(a+=uf(xf(c)+b)*864e5,b=0,c=0);d.milliseconds=a%1e3;a=x(a/1e3);d.seconds=a%60;a=x(a/60);d.minutes=a%60;a=x(a/60);d.hours=a%24;b+=x(a/24);a=x(wf(b));c+=a;b-=uf(xf(a));a=x(c/12);c%=12;d.days=b;d.months=c;d.years=a;return this}function wf(a){return a*4800/146097}function xf(a){return a*146097/4800}function yf(a){if(!this.isValid())return NaN;var b,c,d=this._milliseconds;a=v(a);if(a==="month"||a==="quarter"||a==="year"){b=this._days+d/864e5;c=this._months+wf(b);switch(a){case"month":return c;case"quarter":return c/3;case"year":return c/12}}else{b=this._days+Math.round(xf(this._months));switch(a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return b*24+d/36e5;case"minute":return b*1440+d/6e4;case"second":return b*86400+d/1e3;case"millisecond":return Math.floor(b*864e5)+d;default:throw new Error("Unknown unit "+a)}}}function zf(){return!this.isValid()?NaN:this._milliseconds+this._days*864e5+this._months%12*2592e6+y(this._months/12)*31536e6}function Y(a){return function(){return this.as(a)}}Vb=Y("ms");B=Y("s");od=Y("m");jd=Y("h");Id=Y("d");Me=Y("w");Ne=Y("M");Oe=Y("Q");Pe=Y("y");function Af(){return V(this)}function Bf(a){a=v(a);return this.isValid()?this[a+"s"]():NaN}function Z(a){return function(){return this.isValid()?this._data[a]:NaN}}Re=Z("milliseconds");$a=Z("seconds");Va=Z("minutes");ab=Z("hours");Wa=Z("days");F=Z("months");u=Z("years");function Cf(){return x(this.days()/7)}var $=Math.round,Df={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Ef(b,c,d,e,a){return a.relativeTime(c||1,!!d,b,e)}function Ff(d,e,c,a){var f=V(d).abs(),g=$(f.as("s")),h=$(f.as("m")),i=$(f.as("h")),j=$(f.as("d")),k=$(f.as("M")),b=$(f.as("w"));f=$(f.as("y"));g=g<=c.ss&&["s",g]||g<c.s&&["ss",g]||h<=1&&["m"]||h<c.m&&["mm",h]||i<=1&&["h"]||i<c.h&&["hh",i]||j<=1&&["d"]||j<c.d&&["dd",j];c.w!=null&&(g=g||b<=1&&["w"]||b<c.w&&["ww",b]);g=g||k<=1&&["M"]||k<c.M&&["MM",k]||f<=1&&["y"]||["yy",f];g[2]=e;g[3]=+d>0;g[4]=a;return Ef.apply(null,g)}function Gf(a){if(a===void 0)return $;if(typeof a==="function"){$=a;return!0}return!1}function Hf(a,b){if(Df[a]===void 0)return!1;if(b===void 0)return Df[a];Df[a]=b;a==="s"&&(Df.ss=b-1);return!0}function If(a,b){if(!this.isValid())return this.localeData().invalidDate();var c=!1,d=Df;typeof a==="object"&&(b=a,a=!1);typeof a==="boolean"&&(c=a);typeof b==="object"&&(d=Object.assign({},Df,b),b.s!=null&&b.ss==null&&(d.ss=b.s-1));a=this.localeData();b=Ff(this,!c,d,a);c&&(b=a.pastFuture(+this,b));return a.postformat(b)}var Jf=Math.abs;function Kf(a){return(a>0)-(a<0)||+a}function Lf(){if(!this.isValid())return this.localeData().invalidDate();var a=Jf(this._milliseconds)/1e3,b=Jf(this._days),c=Jf(this._months),d,e,f,g,h=this.asSeconds(),i,j,k;if(!h)return"P0D";d=x(a/60);e=x(d/60);a%=60;d%=60;f=x(c/12);c%=12;g=a?a.toFixed(3).replace(/\.?0+$/,""):"";i=h<0?"-":"";j=Kf(this._months)!==Kf(h)?"-":"";k=Kf(this._days)!==Kf(h)?"-":"";h=Kf(this._milliseconds)!==Kf(h)?"-":"";return i+"P"+(f?j+f+"Y":"")+(c?j+c+"M":"")+(b?k+b+"D":"")+(e||d||a?"T":"")+(e?h+e+"H":"")+(d?h+d+"M":"")+(a?h+g+"S":"")}w=kd.prototype;w.isValid=id;w.abs=qf;w.add=sf;w.subtract=tf;w.as=yf;w.asMilliseconds=Vb;w.asSeconds=B;w.asMinutes=od;w.asHours=jd;w.asDays=Id;w.asWeeks=Me;w.asMonths=Ne;w.asQuarters=Oe;w.asYears=Pe;w.valueOf=zf;w._bubble=vf;w.clone=Af;w.get=Bf;w.milliseconds=Re;w.seconds=$a;w.minutes=Va;w.hours=ab;w.days=Wa;w.weeks=Cf;w.months=F;w.years=u;w.humanize=If;w.toISOString=Lf;w.toString=Lf;w.toJSON=Lf;w.locale=he;w.localeData=ie;w.toIsoString=p("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Lf);w.lang=Aa;s("X",0,0,"unix");s("x",0,0,"valueOf");C("x",cb);C("X",fb);E("X",function(a,b,c){c._d=new Date(parseFloat(a)*1e3)});E("x",function(a,b,c){c._d=new Date(y(a))});b.version="2.29.4";c(U);b.fn=P;b.min=ed;b.max=fd;b.now=Xa;b.utc=m;b.unix=ef;b.months=lf;b.isDate=k;b.locale=S;b.invalid=ea;b.duration=V;b.isMoment=o;b.weekdays=nf;b.parseZone=ff;b.localeData=T;b.isDuration=ld;b.monthsShort=mf;b.weekdaysMin=pf;b.defineLocale=yc;b.updateLocale=zc;b.locales=Ac;b.weekdaysShort=of;b.normalizeUnits=v;b.relativeTimeRounding=Gf;b.relativeTimeThreshold=Hf;b.calendarFormat=Pd;b.prototype=P;b.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};b.patch=function(){return b};return b})}var j=!1;function k(){j||(j=!0,i());return h.exports}function a(a){switch(a){case void 0:return k()}}e.exports=a}),null);
__d("WAWeb-moment",["moment-2.29.4"],(function(a,b,c,d,e,f){e.exports=b("moment-2.29.4")()}),null);/*FB_PKG_DELIM*/
__d("BDHeaderConfig",[],(function(a,b,c,d,e,f){"use strict";a="129477";f.ASBD_ID=a}),66);
__d("Deferred",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;(g||(g=b("Promise"))).resolve();a=function(){function a(a){var c=this;a=a||g||(g=b("Promise"));this.$1=!1;this.$2=new a(function(a,b){c.$3=a,c.$4=b})}var c=a.prototype;c.getPromise=function(){return this.$2};c.resolve=function(a){this.$1=!0,this.$3(a)};c.reject=function(a){this.$1=!0,this.$4(a)};c.isSettled=function(){return this.$1};return a}();f["default"]=a}),66);
__d("FBJSON",[],(function(a,b,c,d,e,f){a=JSON.parse;b=JSON.stringify;f.parse=a;f.stringify=b}),66);
__d("FalcoConsentChecker",[],(function(a,b,c,d,e,f){"use strict";function g(a,b,c,d){var e;switch(typeof d){case"string":e=a[String(d)];return!e?!1:e<=b;case"number":return g(a,b,c,c[Number(d)]);default:e=!1;if(Array.isArray(d)){var f=d[0];for(var h=1;h<d.length;h++){e=g(a,b,c,d[h]);if(e){if(f==="or")return!0}else if(f==="and")return!1}}return e}}f["default"]=g}),66);
__d("OdsWebBatchFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1838142");b=d("FalcoLoggerInternal").create("ods_web_batch",a);e=b;g["default"]=e}),98);
__d("pageID",["WebSession"],(function(a,b,c,d,e,f,g){"use strict";a=d("WebSession").getPageId_DO_NOT_USE();g["default"]=a}),98);
__d("WebStorageMutex",["WebStorage","clearTimeout","pageID","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h,i=null,j=!1,k=c("pageID");function l(){j||(j=!0,i=(h||(h=c("WebStorage"))).getLocalStorage());return i}a=function(){function a(a){this.name=a}a.testSetPageID=function(a){k=a};var b=a.prototype;b.$2=function(){var a,b=l();if(!b)return k;b=b.getItem("mutex_"+this.name);b=((a=b)!=null?a:"").split(":");return b&&parseInt(b[1],10)>=Date.now()?b[0]:null};b.$3=function(a){var b=l();if(!b)return;a=a==null?1e3:a;a=Date.now()+a;(h||(h=c("WebStorage"))).setItemGuarded(b,"mutex_"+this.name,k+":"+a)};b.hasLock=function(){return this.$2()===k};b.lock=function(a,b,d){var e=this;this.$1&&c("clearTimeout")(this.$1);k===(this.$2()||k)&&this.$3(d);this.$1=c("setTimeout")(function(){e.$1=null;var c=e.hasLock()?a:b;c&&c(e)},0)};b.unlock=function(){this.$1&&c("clearTimeout")(this.$1);var a=l();a&&this.hasLock()&&a.removeItem("mutex_"+this.name)};return a}();g["default"]=a}),98);
__d("guid",[],(function(a,b,c,d,e,f){function a(){if(typeof crypto==="object"&&typeof crypto.getRandomValues==="function"&&typeof String.prototype.padStart==="function"){var a=crypto.getRandomValues(new Uint32Array(2));return"f"+a[0].toString(16).padStart(8,"0")+a[1].toString(16).padStart(8,"0")}return"f"+(Math.random()*(1<<30)).toString(16).replace(".","")}f["default"]=a}),66);
__d("PersistedQueue",["AnalyticsCoreData","BaseEventEmitter","ExecutionEnvironment","Run","WebStorage","WebStorageMutex","cr:8958","err","guid","nullthrows","performanceAbsoluteNow","requestAnimationFrame"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=24*60*60*1e3,m=30*1e3,n=new(c("BaseEventEmitter"))(),o;function p(a){a===void 0&&(a=!1);if(o===void 0){var b;if(((b=(h||(h=c("AnalyticsCoreData"))).queue_activation_experiment)!=null?b:!1)&&a)try{return(i||(i=c("WebStorage"))).getLocalStorageForRead()}catch(a){return null}b="check_quota";try{a=(i||(i=c("WebStorage"))).getLocalStorage();a?(a.setItem(b,b),a.removeItem(b),o=a):o=null}catch(a){o=null}}return o}function q(a){var b=a.prev,c=a.next;c&&(c.prev=b);b&&(b.next=c);a.next=null;a.prev=null}function r(a){return{item:a,next:null,prev:null}}function s(a,b){return a+"^$"+((a=b==null?void 0:b.queueNameSuffix)!=null?a:"")}var t={},u={},v={},w=!1;a=function(){function a(a,b){var d,e=this;this.$7=0;this.$3=a;this.$5=(d=b==null?void 0:b.queueNameSuffix)!=null?d:"";this.$15=b==null?void 0:b.application;this.$4=s(a,b);this.$11=this.$4+"^$"+c("guid")();this.$14=!1;if(b){this.$8=(d=b.max_age_in_ms)!=null?d:l;this.$12=b.migrate;this.$13=b.onLoad}else this.$8=l;this.$9=[n.addListener("active",function(){(e.$10!=null||!e.$14)&&(e.$14=!0,e.$10=null,e.$16())}),n.addListener("inactive",function(){e.$10==null&&(e.$10=Date.now(),e.$17())})];((j||(j=c("ExecutionEnvironment"))).canUseDOM||(j||(j=c("ExecutionEnvironment"))).isInWorker)&&c("requestAnimationFrame")(function(){return e.$16()})}var d=a.prototype;d.isActive=function(){var a=this.$10;if(a==null)return!0;if(Date.now()-a>m){this.$10=null;n.emit("active",null);return!0}return!1};d.$16=function(){this.$18(),this.$19()};d.$17=function(){this.$20()};d.getFullName=function(){return this.$4};d.getQueueNameSuffix=function(){return this.$5};a.isQueueActivateExperiment=function(){return w};a.setOnQueueActivateExperiment=function(){w=!0};a.create=function(b,d){var e=s(b,d);if(e in t)throw c("err")("Duplicate queue created: "+b);d=new a(b,d);t[e]=d;v[b]?v[b].push(d):v[b]=[d];e=u[b];e&&d.setHandler(e);return d};a.setHandler=function(a,b){if(v[a]){var c=v[a];for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f.setHandler(b)}}u[a]=b};d.destroy=function(){this.$9.forEach(function(a){return a.remove()})};a.destroy=function(a,b){a=s(a,b);t[a].destroy();delete t[a]};d.setHandler=function(a){this.$6=a;this.$19();return this};d.$19=function(){this.$7>0&&this.$6&&this.$6(this)};d.length=function(){return this.$7};d.enumeratedLength=function(){return this.$21().length};a.isPersistenceAllowed=function(){var a=p();return!a?!1:!0};a.getSuffixesForKey=function(a){var b=[];try{var c=p(!0);if(!c)return b;a=a+"^$";for(var d=0;d<c.length;d++){var e=c.key(d);if(typeof e==="string"&&e.startsWith("mutex_falco_"))c.removeItem(e);else if(typeof e==="string"&&e.startsWith(a)){e=e.split("^$");if(e.length>2){e=e[1];b.push(e)}else b.push("")}}}catch(a){}return b};d.$18=function(){var d,e=this,a=p(!0);if(!a)return;var f=this.$4+"^$";d=new(c("WebStorageMutex"))((d=this.$15)!=null?d:f);var g=this.$12,h=this.$13;d.lock(function(d){var i=Date.now()-e.$8;try{for(var j=0;j<a.length;j++){var k=a.key(j);if(typeof k==="string"&&k.startsWith(f)){var l=a.getItem(k);a.removeItem(k);if(l!=null&&l.startsWith("{")){k=b("cr:8958").parse(c("nullthrows")(l));if(k.ts>i)try{for(var l=k.items,k=Array.isArray(l),m=0,l=k?l:l[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n;if(k){if(m>=l.length)break;n=l[m++]}else{m=l.next();if(m.done)break;n=m.value}n=n;g!=null?g(n):n;n=h!=null?h(n):n;e.$22(n)}}catch(a){}}}}}catch(a){}d.unlock();e.$19()})};d.$20=function(){var a=p();if(!a)return;var d=this.$21();if(d.length===0){a.getItem(this.$11)!=null&&a.removeItem(this.$11);return}(i||(i=c("WebStorage"))).setItemGuarded(a,this.$11,b("cr:8958").stringify({items:d.map(function(a){return a}),ts:(k||(k=c("performanceAbsoluteNow")))()}))};d.$21=function(){var a=this.$1,b=[];if(!a)return b;do b.push(a.item);while(a=a.prev);return b.reverse()};d.markItemAsCompleted=function(a){var b=a.prev;q(a);this.$1===a&&(this.$1=b);this.$7--;this.isActive()||this.$20()};d.markItemAsFailed=function(a){q(a);var b=this.$2;if(b){var c=b.prev;c&&(c.next=a,a.prev=c);a.next=b;b.prev=a}this.$2=a;this.isActive()&&this.$19()};d.markItem=function(a,b){b?this.markItemAsCompleted(a):this.markItemAsFailed(a)};d.$22=function(a){a=r(a);var b=this.$1;b&&(b.next=a,a.prev=b);this.$1=a;this.$2||(this.$2=a);this.$7++};d.wrapAndEnqueueItem=function(a){this.$22(a),this.isActive()?this.$19():this.$20()};d.dequeueItem=function(){if(this.$10!=null)return null;var a=this.$2;if(!a)return null;this.$2=a.next;return a};return a}();a.eventEmitter=n;if((j||(j=c("ExecutionEnvironment"))).canUseDOM){var x=d("Run").maybeOnBeforeUnload(function(){n.emit("inactive",null),x==null?void 0:x.remove()},!1);if(!x)var y=d("Run").onUnload(function(){n.emit("inactive",null),y.remove()})}g["default"]=a}),98);
__d("ServerTime",["ServerTimeData"],(function(a,b,c,d,e,f,g){var h,i=0;f=0;var j=null;h=(h=(typeof window!=="undefined"?window:self).performance)==null?void 0:h.timing;if(h){var k=h.requestStart;h=h.domLoading;if(k&&h){var l=c("ServerTimeData").timeOfResponseStart-c("ServerTimeData").timeOfRequestStart;k=h-k-l;f=k/2;l=h-c("ServerTimeData").timeOfResponseStart-f;h=Math.max(50,k*.8);Math.abs(l)>h&&(i=l,j=Date.now())}}else d(c("ServerTimeData").serverTime);function a(){return Date.now()-i}function b(){return i}function d(a){a=Date.now()-a;Math.abs(i-a)>6e4&&(i=a,j=Date.now())}function e(){return j===null?null:Date.now()-j}f=a;k=b;g.getMillis=a;g.getOffsetMillis=b;g.update=d;g.getMillisSinceLastUpdate=e;g.get=f;g.getSkew=k}),98);
__d("FalcoLoggerInternal",["AnalyticsCoreData","BaseEventEmitter","FBLogger","FalcoConsentChecker","FalcoUtils","PersistedQueue","Promise","Random","ServerTime","WebSession","nullthrows","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(f=d("FalcoUtils")).getTaggedBitmap(33),l=f.getTaggedBitmap(0),m=f.getTaggedBitmap(37),n=500*1024*.6,o=new Map();function p(a){var b;a.tags=d("FalcoUtils").xorBitmap((b=a.tags)!=null?b:[0,0],k);return a}function a(a,b){var d;d=(d=c("PersistedQueue").getSuffixesForKey(a))!=null?d:[];d.push(b);for(var d=d,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g,h;if(e){if(f>=d.length)break;h=d[f++]}else{f=d.next();if(f.done)break;h=f.value}h=h;var j=a+"^$"+h;if(o.has(j))continue;g=((g=(i||(i=c("AnalyticsCoreData"))).use_falco_as_mutex_key)!=null?g:!1)?c("PersistedQueue").create(a,{onLoad:p,queueNameSuffix:h,application:"falco"}):c("PersistedQueue").create(a,{onLoad:p,queueNameSuffix:h});o.set(j,g)}return c("nullthrows")(o.get(a+"^$"+b))}f=f.identityToString((i||(i=c("AnalyticsCoreData"))).identity);var q=a("falco_queue_log",f),r=a("falco_queue_immediately",f),s=a("falco_queue_critical",f),t=new(c("BaseEventEmitter"))(),u={};function v(a,b,e){var f=c("Random").coinflip(b.r);if(!f){d("FalcoUtils").bumpODSMetrics(e,"event.filters.sampling",1);return!1}f=b.c;if(f!=null&&(i||(i=c("AnalyticsCoreData"))).consents!=null){b=w(f,(i||(i=c("AnalyticsCoreData"))).consents,a);if(!b){d("FalcoUtils").bumpODSMetrics(e,"event.filters.consent",1);return!1}}return!0}function w(a,b,d){var e=u[a];e==null&&(e=u[a]=JSON.parse(a));return c("FalcoConsentChecker")(b,d,e,e[0])}function x(){return(j||(j=c("performanceAbsoluteNow")))()-d("ServerTime").getOffsetMillis()}function y(a,b,d,e,f,g){if((i||(i=c("AnalyticsCoreData"))).enable_observer){a=babelHelpers["extends"]({name:a,time:b,sampled:d,getData:f,policy:e},g&&{getPrivacyContext:g});t.emit("event",a)}}function z(a,b,e,f,g,h){var j;g=JSON.stringify(g);if(g.length>n){d("FalcoUtils").bumpODSMetrics(a,"event.filters.exceeded_size",1);c("FBLogger")("falco","oversized_message:"+a).warn('Dropping event "%s" due to exceeding the max size %s at %s',a,n,g.length);return}var k=d("FalcoUtils").xorBitmap([0,0],l);k=d("FalcoUtils").xorBitmap(k,m);((j=(i||(i=c("AnalyticsCoreData"))).enable_session_id_bug_fix)!=null?j:!1)?h.wrapAndEnqueueItem({name:a,policy:b,time:e,extra:g,privacyContext:f,tags:k,sessionId:d("WebSession").getId(),deviceId:(i||(i=c("AnalyticsCoreData"))).device_id}):(h.wrapAndEnqueueItem({name:a,policy:b,time:e,extra:g,privacyContext:f,tags:k}),d("FalcoUtils").bumpODSMetrics(a,"event.captured",1))}function A(a,b,c,e,f){try{var g=x();d("FalcoUtils").bumpODSMetrics(a,"event.logged",1);var h=v(g,b,a);if(h){var i=e(),j=c&&c();z(a,b,g,j,i,f)}y(a,g,h,b,e,c)}catch(a){C(a)}}function B(a,c,e,f,g){try{var i=x();d("FalcoUtils").bumpODSMetrics(a,"event.logged",1);var j=v(i,c,a);if(j){var k=f(),l=(h||(h=b("Promise"))).resolve(e&&e());return h.all([k,l]).then(function(b){var d=b[0],e=b[1];z(a,c,i,e,d,g);y(a,i,j,c,function(){return d},e&&function(){return e})})}else{y(a,i,j,c,f,e);return(h||(h=b("Promise"))).resolve()}}catch(a){return(h||(h=b("Promise"))).reject(a)}}function C(a){var b=c("FBLogger")("falco");a instanceof Error?b.catching(a).warn("Error while attempting to log to Falco"):b.warn("Caught non-error while attempting to log to Falco: %s",JSON.stringify(a))}function e(a,b){return{log:function(c,d){A(a,b,d,c,q)},logAsync:function(c,d){B(a,b,d,c,q)["catch"](C)},logImmediately:function(c,d){A(a,b,d,c,r)},logCritical:function(c,d){A(a,b,d,c,s)},logRealtimeEvent:function(c,d){A(a,b,d,c,s)}}}g.observable=t;g.create=e}),98);
__d("FalcoUtils",["AnalyticsCoreData","ODS"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j="ods_web_batch";function a(a){if(a){var b=a.fbIdentity,c=a.appScopedIdentity;a=a.claim;var d="";if(b){var e=b.accountId;b=b.actorId;d=e+"^#"+b+"^#"}else c!==void 0&&(d="^#^#"+c);return d+"^#"+a}return""}function b(a){return a>30?[0,1<<a-30]:[1<<a,0]}function e(a,b){return[a[0]|b[0],a[1]|b[1]]}function f(a,b,e){if(a===j)return;(i||(i=d("ODS"))).bumpEntityKey(7173,"entities.ff_js_web."+a+"."+(h||(h=c("AnalyticsCoreData"))).app_id+"."+((a=(h||(h=c("AnalyticsCoreData"))).app_version)!=null?a:"0").split(".")[0]+"."+h.push_phase,b,e)}g.identityToString=a;g.getTaggedBitmap=b;g.xorBitmap=e;g.bumpODSMetrics=f}),98);
__d("ODS",["ExecutionEnvironment","OdsWebBatchFalcoEvent","Random","Run","clearTimeout","gkx","setTimeout","unrecoverableViolation"],(function(a,b,c,d,e,f,g){var h,i,j=(h||(h=c("ExecutionEnvironment"))).canUseDOM||(h||c("ExecutionEnvironment")).isInWorker,k={};function l(a,b,c,d,e){var f;d===void 0&&(d=1);e===void 0&&(e=1);var g=(f=k[b])!=null?f:null;if(g!=null&&g<=0)return;i=i||{};var h=i[a]||(i[a]={}),j=h[b]||(h[b]={}),l=j[c]||(j[c]={n:0,d:null}),m=Number(d),o=Number(e);g>0&&(m/=g,o/=g);if(!isFinite(m)||!isFinite(o))return;l.n+=m;if(arguments.length>=5){var p=l.d;p==null&&(p=0);l.d=p+o}n()}var m;function n(){if(m!=null)return;m=c("setTimeout")(function(){o()},c("gkx")("20935")?13e3/2:5e3)}function a(a,b){if(!j)return;k[a]=d("Random").random()<b?b:0}function b(a,b,c,d){d===void 0&&(d=1);if(!j)return;l(a,b,c,d)}function e(a,b,c,d,e){d===void 0&&(d=1);e===void 0&&(e=1);if(!j)return;l(a,b,c,d,e)}function o(a){a===void 0&&(a="normal");if(!j)return;c("clearTimeout")(m);m=null;if(i==null)return;var b=i;i=null;function d(){return{batch:b}}a==="critical"?c("OdsWebBatchFalcoEvent").logCritical(d):c("OdsWebBatchFalcoEvent").log(d)}j&&d("Run").onUnload(function(){o("critical")});g.setEntitySample=a;g.bumpEntityKey=b;g.bumpFraction=e;g.flush=o}),98);
__d("errorCode",[],(function(a,b,c,d,e,f){"use strict";function a(a){throw new Error('errorCode("'+a+'"): This should not happen. Oh noes!')}f["default"]=a}),66);
__d("once",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=g(a);for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b}function g(a){var b=a,c;a=function(){if(b){for(var a=arguments.length,d=new Array(a),e=0;e<a;e++)d[e]=arguments[e];c=b.apply(this,d);b=null}return c};return a}f["default"]=a}),66);
__d("WAWebAddonProcessDeleteForMe",["Promise","WALogger","WAWebAddonConstants","WAWebAddonDBTable","WAWebAddonSortUtils","WAWebAddonUpdateDataUtils","WAWebMsgType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["processDeleteForMe failed: ",""]);i=function(){return a};return a}function a(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){return d("WAWebAddonDBTable").addonDBTable.getByMsgKey(d("WAWebMsgType").MSG_TYPE.COMMENT,a)});return j.apply(this,arguments)}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield d("WAWebAddonUpdateDataUtils").updateAddonsInTableMode({processMode:d("WAWebAddonConstants").AddonProcessMode.DeleteForMe,tableMode:a},{remove:b})});return l.apply(this,arguments)}function m(a){return Array.from(d("WAWebAddonSortUtils").groupAddonsByTableMode(a)).map(function(b){var c=b[0];b=b[1];return k(c,b)["catch"](function(b){d("WALogger").ERROR(i(),b).tags("messaging","addons").sendLogs("deleteAddonForMe: "+((b=a[0])==null?void 0:b.type)+" in "+String(c)+" failed");return})})}function n(a){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=m(a);yield (h||(h=b("Promise"))).all(a)});return o.apply(this,arguments)}function c(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield n([a])});return p.apply(this,arguments)}g.hasDeleteAddonForMe=a;g.processDeleteForMe=n;g.processDeleteForMeSingle=c}),98);
__d("getCrossOriginTransport",["invariant","ExecutionEnvironment","err"],(function(a,b,c,d,e,f,g){var h;function i(){if(!(h||(h=b("ExecutionEnvironment"))).isInBrowser)throw b("err")("getCrossOriginTransport: %s","Cross origin transport unavailable in the server environment.");try{var a=new XMLHttpRequest();!("withCredentials"in a)&&typeof XDomainRequest!=="undefined"&&(a=new XDomainRequest());return a}catch(a){throw b("err")("getCrossOriginTransport: %s",a.message)}}i.withCredentials=function(){var a=i();"withCredentials"in a||g(0,5150);var b=a.open;a.open=function(){b.apply(this,arguments),this.withCredentials=!0};return a};e.exports=i}),null);
__d("ZeroRewrites",["URI","ZeroRewriteRules","getCrossOriginTransport","getSameOriginTransport","isFacebookURI"],(function(a,b,c,d,e,f){var g,h={rewriteURI:function(a){if(!b("isFacebookURI")(a)||h._isWhitelisted(a))return a;var c=h._getRewrittenSubdomain(a);c!==null&&c!==void 0&&(a=a.setSubdomain(c));return a},getTransportBuilderForURI:function(a){return h.isRewritten(a)?b("getCrossOriginTransport").withCredentials:b("getSameOriginTransport")},isRewriteSafe:function(a){if(Object.keys(b("ZeroRewriteRules").rewrite_rules).length===0||!b("isFacebookURI")(a))return!1;var c=h._getCurrentURI().getDomain(),d=new(g||(g=b("URI")))(a).qualify().getDomain();return c===d||h.isRewritten(a)},isRewritten:function(a){a=a.getQualifiedURI();if(Object.keys(b("ZeroRewriteRules").rewrite_rules).length===0||!b("isFacebookURI")(a)||h._isWhitelisted(a))return!1;var c=a.getSubdomain(),d=h._getCurrentURI(),e=h._getRewrittenSubdomain(d);return a.getDomain()!==d.getDomain()&&c===e},_isWhitelisted:function(a){a=a.getPath();a.endsWith("/")||(a+="/");return b("ZeroRewriteRules").whitelist&&b("ZeroRewriteRules").whitelist[a]===1},_getRewrittenSubdomain:function(a){a=a.getQualifiedURI().getSubdomain();return b("ZeroRewriteRules").rewrite_rules[a]},_getCurrentURI:function(){return new(g||(g=b("URI")))("/").qualify()}};e.exports=h}),null);
__d("getAsyncHeaders",["BDHeaderConfig","LSD","ZeroCategoryHeader","isFacebookURI","requireWeak"],(function(a,b,c,d,e,f,g){function a(a){var b={},d=c("isFacebookURI")(a);d&&c("ZeroCategoryHeader").value&&(b[c("ZeroCategoryHeader").header]=c("ZeroCategoryHeader").value);d=h(a);d&&(b["X-FB-LSD"]=d);d=i(a);d&&(b["X-ASBD-ID"]=d);c("requireWeak")("MessengerPWAVersionForUserAgent",function(c){c=c();c!=null&&!j(a)&&(b["X-FB-PWA"]=""+c)});return b}function h(a){return j(a)?null:c("LSD").token}function i(a){return j(a)?null:d("BDHeaderConfig").ASBD_ID}function j(a){var b;b=(b=(b=k())==null?void 0:(b=b.location)==null?void 0:b.origin)!=null?b:(b=window)==null?void 0:(b=b.location)==null?void 0:b.origin;return b==null?!0:!a.toString().startsWith("/")&&a.getOrigin()!==b}function k(){if(typeof document!=="undefined")return document;else return null}g["default"]=a}),98);
__d("warning",["cr:755"],(function(a,b,c,d,e,f,g){g["default"]=b("cr:755")}),98);
__d("WAWebLockChatSync",["Promise","WALogger","WAServerSync.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WATimeUtils","WAWebArchiveChatSync","WAWebChatLockAction","WAWebPinChatSync","WAWebSyncd","WAWebSyncdGetChat","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["LockChatSync: update lock status for chat"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["LockChatSync: malformed mutation chatJid is not wid"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["LockChatSync: malformed mutation locked is null"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["LockChatSync: operation not supported: ",""]);l=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=1,b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.getVersion=function(){return 7};f.getAction=function(){return d("WASyncdConst").Actions.LockChat};f.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=[];a=(yield (h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.operation!=="set"){d("WALogger").WARN(l(),a.operation);return{actionState:d("WASyncdConst").SyncActionState.Malformed}}var b=a.indexParts[1];a=(a=a.value.lockChatAction)==null?void 0:a.locked;if(a==null){d("WALogger").WARN(k());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}if(!c("WAWebWid").isWid(b)){d("WALogger").WARN(j());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}b=(yield d("WAWebSyncdGetChat").resolveChatForMutationIndex(d("WAWebWidFactory").createWid(b)));if(!b.success)return{actionState:d("WASyncdConst").SyncActionState.Orphan,orphanModel:b.orphanModel};b=d("WAWebWidFactory").createWid(b.chat.id);e.push({isLocked:a,chatId:b});return{actionState:d("WASyncdConst").SyncActionState.Success}});return function(b){return a.apply(this,arguments)}}())));yield h.all(e.map(function(a){d("WALogger").LOG(i()).devConsole(a);return a.isLocked?d("WAWebChatLockAction").setChatAsLocked(a.chatId,{syncWithPrimaries:!1}):d("WAWebChatLockAction").setChatAsUnlocked(a.chatId,{syncWithPrimaries:!1})}));return a});function e(b){return a.apply(this,arguments)}return e}();f.getChatLockMutation=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.RegularLow,indexArgs:[yield d("WAWebSyncdGetChat").getChatJidMutationIndexForChat(c)],value:{lockChatAction:{locked:b}},version:this.getVersion(),operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,timestamp:a,action:this.getAction()})});function c(b,c,d){return a.apply(this,arguments)}return c}();f.sendLockMutation=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){e=e.isLocked;var f=d("WATimeUtils").unixTimeMs(),g=[];e&&g.push(c("WAWebArchiveChatSync").getArchiveChatMutation(f,!1,a),d("WAWebPinChatSync").PinChatSync.getPinMutation(f,!1,a));g.push(this.getChatLockMutation(f,e,a));yield d("WAWebSyncd").lockForSync([],yield (h||(h=b("Promise"))).all(g),function(){return(h||(h=b("Promise"))).resolve()})});function e(b,c){return a.apply(this,arguments)}return e}();return e}(d("WASyncdAction").SyncActionBase);e=new a();g["default"]=e}),98);
__d("WAWebChatLockAction",["WAWebChatCollection","WAWebDBUpdateChatTable","WAWebLockChatSync","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=b?{isLocked:b,archive:!1,pin:void 0}:{isLocked:b};yield d("WAWebDBUpdateChatTable").updateChatTable(a,b);(a=d("WAWebChatCollection").ChatCollection.get(a))==null?void 0:a.set(b)});return i.apply(this,arguments)}function j(a,b,c){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,d){d=(d=d)!=null?d:{};d=d.syncWithPrimaries;d=d===void 0?!0:d;d&&void c("WAWebLockChatSync").sendLockMutation(a,{isLocked:b});return h(a,b)});return k.apply(this,arguments)}function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return j(a,!0,b)});return l.apply(this,arguments)}function e(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){return j(a,!1,b)});return m.apply(this,arguments)}g.setChatAsLocked=a;g.setChatAsUnlocked=e}),98);
__d("WAWebUserPrefsChatLock",["WAArrayBufferUtils","WALogger","WAProtobufsUserPassword.pb","WAWebUserPrefsKeys","WAWebUserPrefsStore"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getSecretCodeFromStorage: could not deserialize chat lock secret code: ",""]);h=function(){return a};return a}function i(a,b){c("WAWebUserPrefsStore").setUser(a,b,{shouldWriteToIdb:!1})}function j(a){return c("WAWebUserPrefsStore").getUser(a)}function k(a){return btoa(String.fromCharCode.apply(null,new Uint8Array(a)))}function l(a){a=atob(a);return d("WAArrayBufferUtils").stringToArrayBuffer(a)}function m(a){return{transformer:a.transformer,encoding:a.encoding,iterations:a.iterations,salt:k(a.salt),data:k(a.data)}}function n(a){var b;return{transformer:(b=d("WAProtobufsUserPassword.pb").UserPassword$Transformer.cast(a.transformer))!=null?b:d("WAProtobufsUserPassword.pb").UserPassword$Transformer.NONE,encoding:(b=d("WAProtobufsUserPassword.pb").UserPassword$Encoding.cast(a.encoding))!=null?b:d("WAProtobufsUserPassword.pb").UserPassword$Encoding.UTF8,iterations:a.iterations,salt:l(a.salt),data:l(a.data)}}function o(){var a=j(d("WAWebUserPrefsKeys").UserPrefs.ChatLockHide);return typeof a==="boolean"?a:null}function p(){try{var a=j(d("WAWebUserPrefsKeys").UserPrefs.ChatLockSecretCode);if(typeof a==="string"){a=JSON.parse(a);if(a==null||a.transformer==null||a.iterations==null||a.salt==null||a.data==null)return;return n(a)}}catch(a){d("WALogger").WARN(h(),a)}}function a(){return{hideLockedChats:o(),secretCode:p()}}function b(a){if(a==null){i(d("WAWebUserPrefsKeys").UserPrefs.ChatLockHide,null);i(d("WAWebUserPrefsKeys").UserPrefs.ChatLockSecretCode,null);return}i(d("WAWebUserPrefsKeys").UserPrefs.ChatLockHide,a.hideLockedChats);a=a.secretCode;if(a!=null){a=JSON.stringify(m(a));i(d("WAWebUserPrefsKeys").UserPrefs.ChatLockSecretCode,a)}else i(d("WAWebUserPrefsKeys").UserPrefs.ChatLockSecretCode,null)}g.getChatLockSettingsFromStorage=a;g.saveChatLockSettingsToStorage=b}),98);
__d("WAWebChatLockSettings",["WAWebBaseModel","WAWebChatLockUpdateDailyStats","WAWebModelUtils","WAWebUserPrefsChatLock"],(function(a,b,c,d,e,f,g){"use strict";b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.hideLockedChats=d("WAWebModelUtils").prop(),c.secretCode=d("WAWebModelUtils").prop(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.initialize=function(){var b=this;a.prototype.initialize.call(this);this.updateDailyStats();this.on("change",function(){b.updateDailyStats()})};c.updateDailyStats=function(){d("WAWebChatLockUpdateDailyStats").updateChatLockDailyStats({secretCodeActive:this.secretCode!=null,lockFolderHidden:this.hideLockedChats})};c.updateAndSave=function(a){this.set(a),d("WAWebUserPrefsChatLock").saveChatLockSettingsToStorage({hideLockedChats:this.hideLockedChats,secretCode:this.secretCode})};return b}(d("WAWebBaseModel").BaseModel);b.Proxy="chat_lock_settings";var h=d("WAWebBaseModel").defineModel(b);function i(){var a=d("WAWebUserPrefsChatLock").getChatLockSettingsFromStorage();a=new h(a);d("WAWebChatLockUpdateDailyStats").updateChatLockDailyStats({secretCodeActive:a.secretCode!=null,lockFolderHidden:a.hideLockedChats===!0});return a}var j;function a(){j==null&&(j=i());return j}g.getChatLockSettings=a}),98);
__d("WAWebWebcStorageStatWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebcStorageStat:[1504,{webcAgeOfStorage:[3,a.TYPES.INTEGER],webcPackingEnabled:[4,a.TYPES.BOOLEAN],webcStorageQuota:[2,a.TYPES.INTEGER],webcStorageUsage:[1,a.TYPES.INTEGER]},[1,1,1],"regular"]},{WebcStorageStat:[]});g.WebcStorageStatWamEvent=b}),98);
__d("WAWebCleanAssets",["WAStorageEstimator","WAWebAssetLoaderDpiChangeDispatch","WAWebFeatureDetectionDetectWebpSupport","WAWebFeatureDetectionSwSupport","WAWebNoop","WAWebSWBus","WAWebSWBusActions","WAWebWebcStorageStatWamEvent","lodash"],(function(a,b,c,d,e,f,g){var h={DEFAULT:"default",WEBP:"webp"};function a(a){if(!c("WAWebFeatureDetectionSwSupport").supported)return;var b=a.estimateStorage===!0,e=navigator.serviceWorker;d("WAWebFeatureDetectionDetectWebpSupport").detectWebpSupport().then(function(b){var d=c("lodash").flatMap(a.keep,function(a){return[a[c("WAWebAssetLoaderDpiChangeDispatch").RES.LOW],a[c("WAWebAssetLoaderDpiChangeDispatch").RES.HIGH]]}).map(function(a){var c=b&&a[h.WEBP]?h.WEBP:h.DEFAULT;c=(a=a[c])==null?void 0:a.split("/");return c!=null?c[c.length-1]:null});(e==null?void 0:e.controller)&&c("WAWebSWBus").request(e.controller,c("WAWebSWBusActions").CLEAN_ASSETS,d)["catch"](c("WAWebNoop"))}).then(function(){return b?d("WAStorageEstimator").estimateStorage():null}).then(function(a){if(a==null?void 0:a.success){a=a.value;var b=a.usage;a=a.quota;new(d("WAWebWebcStorageStatWamEvent").WebcStorageStatWamEvent)({webcStorageUsage:b,webcStorageQuota:a}).commit()}})}g["default"]=a}),98);
__d("WAWebCommonCTWAQplHelpers",["WAWebGraphQLServerError","WAWebQplQuickPerformanceLoggerModule"],(function(a,b,c,d,e,f,g){function a(a){var b=a.error,c=a.markerId,e=a.errorAnnotationName;a=a.errorMessageAnnotationName;if(b instanceof d("WAWebGraphQLServerError").GraphQLServerError){var f,g;d("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(c,{string:(g={},g[e]=(f=b.name)!=null?f:"UNKNOWN",g[a]=b.source.errors.map(function(a){return"["+a.code+"] "+((a=a.message)!=null?a:"")}).join("|"),g)})}else if(b instanceof Error){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(c,{string:(f={},f[e]=(g=b.name)!=null?g:"UNKNOWN",f[a]=(g=b.message)!=null?g:"",f)})}else{d("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(c,{string:(g={},g[e]=String(b),g[a]="",g)})}}g.qplAnnotateGraphQLError=a}),98);
__d("WAWebDeleteMessageForMeSync",["Promise","WALogger","WANullthrows","WAServerSync.pb","WASyncAction.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WATimeUtils","WAWebAddonProcessDeleteForMe","WAWebBackendApi","WAWebChatLoadMessages","WAWebCurrentUser","WAWebDBMessageDelete","WAWebFrontendMsgGetters","WAWebLidMigrationUtils","WAWebMsgCollection","WAWebMsgGetters","WAWebMsgKey","WAWebPersistedJobDefinitions","WAWebPersistedJobManager","WAWebSyncdActionUtils","WAWebSyncdGetChat","WAWebSyncdResolveMessages","WAWebSyncdUtils","WAWebWamEnumMdSyncdCriticalEventCode","WAWebWidFactory","WAWebWidToJid","asyncToGeneratorRuntime","decodeProtobuf"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: after deleting messages"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: before deleting messages"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["delete_message_for_me_sync: operation not supported"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: successfully deleted "," for me."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["delete_message_for_me_sync: msg "," found in storage but not in collection"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: after cache for delete message for me"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: after apply delete message for me"]);o=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=1,b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.getVersion=function(){return 3};f.getAction=function(){return d("WASyncdConst").Actions.DeleteMessageForMe};f.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){d("WAWebCurrentUser").isEmployee()&&d("WALogger").LOG(o());var e=[],f=(yield d("WAWebSyncdResolveMessages").resolveMessagesForMutations(a)),g=f.incomingRemoteToLocalChatId,p=f.messagesInDB;d("WAWebCurrentUser").isEmployee()&&d("WALogger").LOG(n());f=(yield (h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{if(a.operation==="set"){a=a.indexParts;var b=a[1],f=a[2],h=a[3];a=a[4];(!b||!f||!h||!a)&&d("WAWebSyncdActionUtils").throwInvalidActionIndex();var i=g.get(b);b=d("WAWebSyncdActionUtils").syncKeyToMsgKey(b,f,h,a);if(!b){d("WAWebSyncdUtils").uploadCriticalEventMetric(d("WAWebWamEnumMdSyncdCriticalEventCode").MD_SYNCD_CRITICAL_EVENT_CODE.ACTION_INVALID_INDEX_DATA);return{actionState:d("WASyncdConst").SyncActionState.Malformed}}if(i==null)return{actionState:d("WASyncdConst").SyncActionState.Orphan,orphanModel:{modelId:b.toString(),modelType:d("WASyncdConst").SyncModelType.Msg}};var j=c("WANullthrows")(d("WAWebSyncdActionUtils").syncKeyToMsgKey(i,f,h,a,!1));i=p.find(function(a){return a.startsWith(j.toString())});if(i==null){f=d("WAWebLidMigrationUtils").getAlternateMsgKey(j);if(f!=null){h=(yield d("WAWebAddonProcessDeleteForMe").hasDeleteAddonForMe(f));if(h!=null)try{yield d("WAWebAddonProcessDeleteForMe").processDeleteForMeSingle(h);return{actionState:d("WASyncdConst").SyncActionState.Success}}catch(a){}}return{actionState:d("WASyncdConst").SyncActionState.Orphan,orphanModel:{modelId:b.toString(),modelType:d("WASyncdConst").SyncModelType.Msg}}}e.push(i);a=d("WAWebMsgCollection").MsgCollection.get(i);a?(d("WAWebFrontendMsgGetters").getChat(a).msgs.length===1&&(yield d("WAWebChatLoadMessages").loadEarlierMsgs(d("WAWebFrontendMsgGetters").getChat(a))),a["delete"]()):d("WALogger").WARN(m(),i);d("WALogger").DEV(l(),i);return{actionState:d("WASyncdConst").SyncActionState.Success}}d("WALogger").WARN(k());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}});return function(b){return a.apply(this,arguments)}}())));d("WAWebCurrentUser").isEmployee()&&d("WALogger").LOG(j());if(e.length>0){yield d("WAWebDBMessageDelete").removeMessagesFromHistory(e);var q=new Set();e.forEach(function(a){return q.add(c("WAWebMsgKey").fromString(a).remote.toString())});a=Array.from(q.values()).join(",").toString();d("WAWebBackendApi").frontendFireAndForget("deleteModelsForLastAddOnPreview",{messagesIds:e});yield d("WAWebPersistedJobManager").getJobManager().waitUntilPersisted(d("WAWebPersistedJobDefinitions").jobSerializers.deleteAddOns(a,e))}d("WAWebCurrentUser").isEmployee()&&d("WALogger").LOG(i());return f});function e(b){return a.apply(this,arguments)}return e}();f.resolveConflicts=function(a,e){a=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionValueSpec,a.binarySyncAction);e=d("decodeProtobuf").decodeProtobuf(d("WASyncAction.pb").SyncActionDataSpec,e.binarySyncData).value;a=c("WANullthrows")((a=a.deleteMessageForMeAction)==null?void 0:a.deleteMedia);e=c("WANullthrows")(e==null?void 0:(e=e.deleteMessageForMeAction)==null?void 0:e.deleteMedia);return!e&&a?(h||(h=b("Promise"))).resolve(d("WASyncdConst").ConflictResolutionState.SkipRemote):(h||(h=b("Promise"))).resolve(d("WASyncdConst").ConflictResolutionState.SkipRemoteAndDropLocal)};f.buildDeleteForMeMutation=function(a){var b=a.timestamp,c=a.deleteMedia,e=a.messageTimestamp;a=babelHelpers.objectWithoutPropertiesLoose(a,["timestamp","deleteMedia","messageTimestamp"]);c={deleteMessageForMeAction:{deleteMedia:c,messageTimestamp:e}};return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.RegularHigh,indexArgs:d("WASyncdActionUtils").buildMessageKey(a),value:c,version:this.getVersion(),operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,timestamp:b,action:this.getAction()})};f.getDeleteForMeMutations=function(a,c){var e=this,f=d("WATimeUtils").unixTimeMs();return(h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.id.remote;return e.buildDeleteForMeMutation({timestamp:f,deleteMedia:c,messageTimestamp:d("WAWebMsgGetters").getT(a),remoteJid:b.isNewsletter()?d("WAWebWidToJid").widToNewsletterJid(b):d("WAWebWidToJid").widToChatJid(d("WAWebWidFactory").createWid(yield d("WAWebSyncdGetChat").getChatJidMutationIndexForChat(b))),id:a.id.id,fromMe:a.id.fromMe,participant:d("WAWebMsgGetters").getIsGroupMsg(a)&&!a.id.fromMe?d("WAWebWidToJid").widToUserJid(d("WAWebMsgGetters").getSender(a)):null})});return function(b){return a.apply(this,arguments)}}()))};return e}(d("WASyncdAction").SyncActionBase);e=new a();g["default"]=e}),98);
__d("WAWebFocusIndicator",[],(function(a,b,c,d,e,f,g){var h=200;a=function(){function a(){this.shouldIndicateFocusTimestamp=0}var b=a.prototype;b.shouldIndicateFocus=function(){this.shouldIndicateFocusTimestamp=Date.now()};b.maybeIndicateFocus=function(a,b){if(Date.now()-this.shouldIndicateFocusTimestamp>h)return;this.indicateFocus(a,b)};b.indicateFocus=function(a,b){var c;b=b!=null?[b]:"xqz0fhx x1ibgw8t xih3g5y".split(" ");if(!a)return;(c=a.classList).remove.apply(c,b);i(a);(c=a.classList).add.apply(c,b)};return a}();function i(a){a.offsetWidth}b=new a();c=b;g["default"]=c}),98);
__d("WAWebNewsletterBackendQueues",["WAWebPromiseQueue"],(function(a,b,c,d,e,f,g){b=new((a=d("WAWebPromiseQueue")).PromiseQueue)();c=new a.PromiseQueue();e=new a.PromiseQueue();f=new a.PromiseQueue();g.newsletterCreationQueue=b;g.newsletterSubscribeQueue=c;g.newsletterDeleteQueue=e;g.newsletterJoinNotificatonQueue=f}),98);
__d("WAWebPasswordInput.react",["fbt","WAWebClassnames","WAWebCopyPasteSelectable.react","WAWebSvgButton.react","WAWebSvgComponentBase","WAWebUISpacing","WAWebVisibilityOffIcon","WAWebVisibilityOnIcon","react","react-gui-use-focus","stylex","useMergeRefs","useWAWebToggle"],(function(a,b,c,d,e,f,g,h){var i,j,k;b=k||d("react");var l=i||(i=c("react")),m=b.useEffect,n=b.useRef,o=b.useState,p={container:{position:"x1n2onr6",display:"x78zum5",backgroundColor:"xe7vic5",minWidth:"xt7fyls",borderBottomWidth:"xso031l",borderBottomStyle:"x1q0q8m5",borderBottomColor:"x11dzelx",paddingBottom:"x1j85h84",$$css:!0},focusedContainer:{borderBottomWidth:"xlxy82",borderBottomStyle:"x1q0q8m5",borderBottomColor:"x1r079op",paddingBottom:"x18d9i69",$$css:!0},inputField:{fontSize:"x1jchvi3",color:"xzwifym",flexGrow:"x1iyjqo2",borderTopWidth:"xsl91qr",borderEndWidth:"x1j3p5sx",borderBottomWidth:"xe0m388",borderStartWidth:"xs13csb",borderTopStyle:"xe73qa2",borderEndStyle:"x102zblm",borderBottomStyle:"xuhg6hn",borderStartStyle:"x1xmwtuv",borderTopColor:"x1isl193",borderEndColor:"x90s3ff",borderBottomColor:"x1bnlyaz",borderStartColor:"x1oej5vx",outline:"x1a2a7pz",backgroundColor:"xe7vic5",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}};function a(a){var b=a.focusOnMount,e=b===void 0?!1:b;b=a.enableShowPassword;b=b===void 0?!1:b;var f=a.showByDefault;f=f===void 0?!1:f;f=c("useWAWebToggle")(f);var g=f[0];f=f[1];var i=n(null),k=o(!1),q=k[0];k=k[1];k=d("react-gui-use-focus").useFocus({onFocusChange:k});k=c("useMergeRefs")(i,k);m(function(){if(e){var a;(a=i.current)==null?void 0:a.focus()}},[e]);var r=g?d("WAWebVisibilityOnIcon").VisibilityOnIcon:d("WAWebVisibilityOffIcon").VisibilityOffIcon,s=g?h._("__JHASH__tmC-9XfhKvG__JHASH__"):h._("__JHASH__Du2bx5Ia2ld__JHASH__");return l.jsxs("div",{className:(j||(j=c("stylex")))([p.container,q&&p.focusedContainer]),children:[l.jsx("input",{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(d("WAWebCopyPasteSelectable.react").SELECTABLE_CSS_CLASS,j(p.inputField,d("WAWebUISpacing").uiPadding.all6)),ref:k,type:g?"text":"password",value:a.value,onChange:a.onChange,onBlur:a.onBlur,onKeyDown:a.onKeyDown,required:a.required,pattern:a.pattern,title:a.title,placeholder:a.placeholder,"data-testid":void 0}),b&&l.jsx(c("WAWebSvgButton.react"),{Icon:r,"aria-label":s,xstyle:d("WAWebUISpacing").uiMargin.end8,onClick:f,color:d("WAWebSvgComponentBase").SvgColorProp.TEAL})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebProfileImage.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={image:"_aj_p",container:"_aj_s",hasBorder:"_aj_t",dimmed:"_aj_u",hasInnerBorder:"_aj_v",hasLargeInnerBorder:"_aj_w",square:"_aj_x",row:"_aj_y",col:"_aj_z"};b=a;g["default"]=b}),98);
__d("WAWebProfileImage.react",["WAPromiseDelays","WAWebClassnames","WAWebDefaultUserIcon","WAWebDefaultUserSquareIcon","WAWebDetailImage.react","WAWebFlex.react","WAWebNoop","WAWebProfileImage.scss","WAWebProfilePicThumbCollection","react","useWAWebListener","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react")),k=b.useEffect,l=b.useState,m={"default":{backgroundColor:"x1q3ci2r",$$css:!0},icon:{flex:"x3psx0u",$$css:!0},iconBackground:{fill:"xl21vc0",$$css:!0},iconPrimary:{fill:"x1d6ck0k",$$css:!0}};function a(a){var b=a.theme,e=a.wid,f=l(null),g=f[0],h=f[1];f=l(null);var i=f[0],n=f[1],o=function(a){h(a==null?void 0:a.img)},p=c("useWAWebUnmountSignal")();k(function(){if(!e)return;d("WAWebProfilePicThumbCollection").ProfilePicThumbCollection.find(e).then(function(a){return d("WAPromiseDelays").delayMs(0).then(function(){return a})}).then(function(a){if(p.aborted)return;n(a);o(a)})["catch"](c("WAWebNoop"))},[]);d("useWAWebListener").useListener(i,"change:img",o);if(e!=null&&(g!=null||(e==null?void 0:e.isNewsletter())))return j.jsx(d("WAWebDetailImage.react").DetailImage,{id:e,quoted:a.quoted,size:a.size,shape:a.shape,border:a.border,quality:a.quality});typeof a.size==="number"&&a.size!==0||typeof a.size!=="number"&&a.size!=null?f=a.size:f=d("WAWebDetailImage.react").DetailImageSize.Small;i=b==="voip"||b==="voip-dimmed";g=b==="voip-large"||b==="voip-large-dimmed";b=b==="voip-dimmed"||b==="voip-large-dimmed";var q=d("WAWebDetailImage.react").getSize(f)||void 0,r=a.thumbs?a.thumbs:[a.thumb];f=r.map(function(b,e){if(b)return j.jsx("img",{className:c("WAWebProfileImage.scss").image,src:b,alt:""},e);b=q&&q/(r.length>2&&e>0?2:1);var f=a.quoted===!0?d("WAWebDefaultUserSquareIcon").DefaultUserSquareIcon:d("WAWebDefaultUserIcon").DefaultUserIcon;return j.jsx(d("WAWebFlex.react").FlexRow,{xstyle:m["default"],justify:"center",align:"center",children:j.jsx(f,{style:{width:b,height:b},innerStyles:{background:m.iconBackground,primary:m.iconPrimary},xstyle:m.icon})},e)});var s;f.length===1?s=f[0]:f.length===2?s=j.jsxs(d("WAWebFlex.react").FlexRow,{className:c("WAWebProfileImage.scss").row,justify:"stretch",align:"stretch",children:[f[0],f[1]]}):s=j.jsxs(d("WAWebFlex.react").FlexRow,{className:c("WAWebProfileImage.scss").row,justify:"stretch",align:"stretch",children:[f[0],j.jsxs(d("WAWebFlex.react").FlexColumn,{className:c("WAWebProfileImage.scss").col,justify:"stretch",align:"stretch",children:[f[1],f[2]]})]});return j.jsx(d("WAWebFlex.react").FlexRow,{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((f={},f[c("WAWebProfileImage.scss").square]=a.shape===d("WAWebDetailImage.react").DetailImageShape.Square,f[c("WAWebProfileImage.scss").hasBorder]=a.border,f[c("WAWebProfileImage.scss").hasInnerBorder]=i,f[c("WAWebProfileImage.scss").hasLargeInnerBorder]=g,f[c("WAWebProfileImage.scss").dimmed]=b,f[c("WAWebProfileImage.scss").container]=!0,f)),isFlexContainer:!1,style:{width:q,height:q},children:s})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebStatusPrivacySettingSync",["WALogger","WAServerSync.pb","WASyncAction.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WAWebCmd","WAWebStatusGatingUtils","WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsStatus","WAWebUserPrefsStatusType","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[syncd] Failed to write status privacy settings to IndexedDB ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[syncd] unexpected mutation count "," for status privacy sync"]);i=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.getVersion=function(){return 7};f.getAction=function(){return d("WASyncdConst").Actions.StatusPrivacy};f.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.length!==1){d("WALogger").ERROR(i(),a.length);return a.map(function(){return{actionState:d("WASyncdConst").SyncActionState.Malformed}})}var b=a[0];if(d("WAWebStatusGatingUtils").isStatusPostingEnabled()&&b.operation==="set")try{b=b.value;b=b.statusPrivacy;if(!b)return[{actionState:d("WASyncdConst").SyncActionState.Malformed}];var e=b.mode;b=b.userJid;if(e==null)return[{actionState:d("WASyncdConst").SyncActionState.Malformed}];var f=[],g,j=[],k=[];switch(e){case d("WASyncAction.pb").SyncActionValue$StatusPrivacyAction$StatusDistributionMode.CONTACTS:g=d("WAWebUserPrefsStatusType").StatusPrivacySettingType.Contact;f=c("WAWebUserPrefsStatus").calculateStatusPrivacyUpdateEntries({setting:g});break;case d("WASyncAction.pb").SyncActionValue$StatusPrivacyAction$StatusDistributionMode.ALLOW_LIST:g=d("WAWebUserPrefsStatusType").StatusPrivacySettingType.AllowList;j=b.map(d("WAWebWidFactory").createWid);f=c("WAWebUserPrefsStatus").calculateStatusPrivacyUpdateEntries({setting:g,allowList:j});break;case d("WASyncAction.pb").SyncActionValue$StatusPrivacyAction$StatusDistributionMode.DENY_LIST:g=d("WAWebUserPrefsStatusType").StatusPrivacySettingType.DenyList;k=b.map(d("WAWebWidFactory").createWid);f=c("WAWebUserPrefsStatus").calculateStatusPrivacyUpdateEntries({setting:g,denyList:k});break}f.length>0&&(yield d("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.bulkSetItemsToIndexedDB(f).then(function(){d("WAWebCmd").Cmd.updateStatusPrivacySettings({setting:g,allowList:j,denyList:k})}));return[{actionState:d("WASyncdConst").SyncActionState.Success}]}catch(b){d("WALogger").ERROR(h(),b);return a.map(function(){return{actionState:d("WASyncdConst").SyncActionState.Failed}})}return[{actionState:d("WASyncdConst").SyncActionState.Unsupported}]});function e(b){return a.apply(this,arguments)}return e}();f.getStatusPrivacySettingMutation=function(a,b,c){var e;switch(a){case d("WAWebUserPrefsStatusType").StatusPrivacySettingType.Contact:e=d("WASyncAction.pb").SyncActionValue$StatusPrivacyAction$StatusDistributionMode.CONTACTS;break;case d("WAWebUserPrefsStatusType").StatusPrivacySettingType.AllowList:e=d("WASyncAction.pb").SyncActionValue$StatusPrivacyAction$StatusDistributionMode.ALLOW_LIST;break;case d("WAWebUserPrefsStatusType").StatusPrivacySettingType.DenyList:e=d("WASyncAction.pb").SyncActionValue$StatusPrivacyAction$StatusDistributionMode.DENY_LIST;break}return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.RegularHigh,indexArgs:[],operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,version:this.getVersion(),timestamp:c,action:this.getAction(),value:{statusPrivacy:{mode:e,userJid:b}}})};return e}(d("WASyncdAction").SyncActionBase);e=new a();g["default"]=e}),98);
__d("WAWebWamEnumPsTestEnumField",[],(function(a,b,c,d,e,f){a=Object.freeze({TEST_VALUE1:1,TEST_VALUE2:2});f.PS_TEST_ENUM_FIELD=a}),66);
__d("WAWebTestAnonymousDailyIdWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumPsTestEnumField"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({TestAnonymousDailyId:[2958,{psTestEnumField:[1,d("WAWebWamEnumPsTestEnumField").PS_TEST_ENUM_FIELD],psTestFloatField:[2,d("WAWebWamCodegenUtils").TYPES.NUMBER]},[1,1,1],"private",248614979]},{TestAnonymousDailyId:[]});g.TestAnonymousDailyIdWamEvent=a}),98);
__d("WAWebTestAnonymousDailyWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({TestAnonymousDaily:[2328,{},[1,1,1],"private",113760892]},{TestAnonymousDaily:[]});g.TestAnonymousDailyWamEvent=a}),98);
__d("WAWebTestAnonymousIdLessWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({TestAnonymousIdLess:[3004,{psTimeSinceLastEventInMin:[1,d("WAWebWamCodegenUtils").TYPES.INTEGER]},[1,1,1],"private",0]},{TestAnonymousIdLess:[]});g.TestAnonymousIdLessWamEvent=a}),98);
__d("WAWebTestAnonymousMonthlyIdWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({TestAnonymousMonthlyId:[2960,{},[1,20,1e3],"private",191000728]},{TestAnonymousMonthlyId:[]});g.TestAnonymousMonthlyIdWamEvent=a}),98);
__d("WAWebTestAnonymousWeeklyIdWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({TestAnonymousWeeklyId:[2956,{psTestBooleanField:[2,a.TYPES.BOOLEAN],psTestStringField:[3,a.TYPES.STRING],psTimeSinceLastEventInMin:[1,a.TYPES.INTEGER]},[1,1,1],"private",42196056]},{TestAnonymousWeeklyId:[]});g.TestAnonymousWeeklyIdWamEvent=b}),98);
__d("WAWebWamEnumPrivacyHighlightSurfaceEnum",[],(function(a,b,c,d,e,f){a=Object.freeze({GOLDEN_BOX_CONTACT:0,GOLDEN_BOX_GROUP:1,GOLDEN_BOX_BROADCAST:2,INFO_SCREEN_CONTACT:3,INFO_SCREEN_GROUP:4,INFO_SCREEN_BROADCAST:5,CALLS_LIST:6,CHATS_LIST:7,STATUS_LIST:8,LINKED_DEVICES_SCREEN:9,CALLING_SCREEN_AUDIO:10,CALLING_SCREEN_VIDEO:11,SPLIT_VIEW_HOME_PLACEHOLDER:12});f.PRIVACY_HIGHLIGHT_SURFACE_ENUM=a}),66);
__d("WAWebWamPrivateStatsUtils",["WAWebTestAnonymousDailyIdWamEvent","WAWebTestAnonymousDailyWamEvent","WAWebTestAnonymousIdLessWamEvent","WAWebTestAnonymousMonthlyIdWamEvent","WAWebTestAnonymousWeeklyIdWamEvent"],(function(a,b,c,d,e,f,g){function a(){new(d("WAWebTestAnonymousDailyWamEvent").TestAnonymousDailyWamEvent)().commit(),new(d("WAWebTestAnonymousWeeklyIdWamEvent").TestAnonymousWeeklyIdWamEvent)().commit(),new(d("WAWebTestAnonymousIdLessWamEvent").TestAnonymousIdLessWamEvent)().commit()}function b(){new(d("WAWebTestAnonymousDailyIdWamEvent").TestAnonymousDailyIdWamEvent)().commit(),new(d("WAWebTestAnonymousMonthlyIdWamEvent").TestAnonymousMonthlyIdWamEvent)().commit()}g.logDailyPrivateStatsTestEvents=a;g.logUiActionShadowPrivateStatsTestEvents=b}),98);
__d("warningComet",["SiteData","cr:1072546","cr:1072547","cr:1072549","cr:983844","err","fb-error"],(function(a,b,c,d,e,f,g){function a(a,b){}b=a;c=b;g["default"]=c}),98);
__d("warningWWW",["WebDriverConfig","cr:1105154","cr:11202","cr:2682"],(function(a,b,c,d,e,f,g){a=b("cr:2682");c=a;g["default"]=c}),98);/*FB_PKG_DELIM*/
__d("WAMemoizeOne",["shallowEqual"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0&&(b=c("shallowEqual"));var d=null,e=function(c){d==null||!b(d.params,c)?d={params:c,result:a.call(this,c)}:d.params=c;return d.result};e.clear=function(){d=null};return e}g["default"]=a}),98);
__d("WAWebDropdown.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={"-emoji-picker-width":"388px;","-emoji-picker-width-xl":"573px;",container:"_ak4w",containerMaterial:"_ap4-",containerMaterialPadding:"_ap4_",suggestions:"_ak54",reactionDetails:"_ak51",reactionSendTray:"_ak52",datePicker:"_aos4",right:"_ak4x",picker:"_ak4z",tooltip:"_ak56",items:"_ak5b",nib:"_ak5a",tooltipHighlight:"_ak57",inverse:"_ak58",emoji:"_ak4-",sticker:"_ak4_",colorPicker:"_ak50",labelColorPicker:"_aozv",emojiXl:"_asag",reactionPicker:"_ak53",inverseVertical:"_ak59",text:"_ak55",expressionsPanel:"_alox",expressionsPanelXl:"_as8u",expressionsPanelInsideInput:"_ao_l",expressionsPanelOutsideInput:"_ao_m"};b=a;g["default"]=b}),98);
__d("WAWebDropdown.react",["$InternalEnum","WANullthrows","WAWebAttachMenuGatingUtils","WAWebClassnames","WAWebCmd","WAWebCompatibility","WAWebDropdown.scss","WAWebFocusIndicator","WAWebFocusTracer","WAWebKeyboardHotKeys.react","WAWebL10N","WAWebMiscGatingUtils","WAWebNoop","WAWebStylePropertiesDeprecated","WAWebUIRefreshGatingUtils","WAWebUISpacing","react","stylex","useMergeRefs","useWAWebUIM"],(function(a,b,c,d,e,f,g){var h,i,j;e=j||d("react");var k=h||(h=c("react")),l=e.useEffect,m=e.useMemo,n=e.useRef,o=e.useState;e=d("WAWebStylePropertiesDeprecated").getIntFromStylesProp(c("WAWebDropdown.scss"),"-emoji-picker-width");var p=d("WAWebStylePropertiesDeprecated").getIntFromStylesProp(c("WAWebDropdown.scss"),"-emoji-picker-width-xl");p=d("WAWebAttachMenuGatingUtils").areExpressionPanelsUiV2Enabled()?p:e;var q=32,r=32,s=10;e=k.forwardRef(a);var t=b("$InternalEnum").Mirrored(["Dropdown","DropdownMenu","DropdownText","AttachMenu","Picker","EmojiPicker","StickerPicker","ColorPicker","LabelColorPicker","Tooltip","ReactionDetailsPane","ReactionSendTray","ReactionPicker","DatePicker","Suggestions","AttachMenuPopup","ExpressionsPanel","EventsRSVPPopup"]),u=b("$InternalEnum").Mirrored(["Default","Highlight"]),v=b("$InternalEnum").Mirrored(["LEFT","CENTER","RIGHT"]),w=b("$InternalEnum").Mirrored(["TOP","BOTTOM"]),x={eventsRSVPPopup:{boxSizing:"x9f619",borderTopStartRadius:"xp8fpb",borderTopEndRadius:"xjcfk4l",borderBottomEndRadius:"x10zrdz0",borderBottomStartRadius:"xp22k0r",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},attachMenu:{position:"x10l6tqk",bottom:"x1ey2m1c",zIndex:"xfo81ep",boxSizing:"x1afcbsf",width:"x19ueb17",pointerEvents:"x71s49j",cursor:"xt0e3qv",$$css:!0},attachMenuItems:{display:"x78zum5",flexDirection:"x3ieub6",$$css:!0},attachMenuPopup:{bottom:"xacj9c0",borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",$$css:!0}};function y(a){switch(a){case v.RIGHT:return v.LEFT;case v.LEFT:return v.RIGHT;case v.CENTER:return v.CENTER}}function z(a,b,d){d=d&&c("WAWebL10N").isRTL()?y(a):a;return[d,b]}function A(a,b){a=y(a);b=b===w.TOP?w.BOTTOM:w.TOP;return b+" "+a}function B(a,b,c,d){var e={};switch(a){case v.RIGHT:e.left=Math.min(window.innerWidth-((a=d==null?void 0:d.offsetWidth)!=null?a:0)-r,c.x);break;case v.LEFT:e.right=window.innerWidth-c.x;break;case v.CENTER:e.left=c.x-((a=d==null?void 0:d.offsetWidth)!=null?a:0)/2;e.marginLeft=0;e.marginRight=0;break}switch(b){case w.BOTTOM:e.top=c.y;a=d==null?void 0:d.offsetHeight;if(a!=null){b=window.innerHeight-a-q;e.top=Math.min(b,c.y);e.top<0&&(e.top=0,e.height=window.innerHeight-q,e.overflowY="auto")}break;case w.TOP:e.bottom=window.innerHeight-c.y;break}return e}function C(a,b,c){return a!==v.CENTER||b==null||c==null?null:{left:b.offsetWidth/2-c.offsetWidth/2}}function a(a,b){var e;a=babelHelpers["extends"]({},a);var f=a.type,g=f===void 0?t.Dropdown:f;f=a.dirX;var h=f===void 0?v.RIGHT:f;f=a.dirY;var j=f===void 0?w.BOTTOM:f;f=a.children;var p=a.flipOnRTL,q=a.origin,r=a.style,y=a.horizontal,E=a.isTemporaryRender,F=a.autoFocus,G=a.findFirstItem,H=a.onDefault,I=a.testid;I=a.tooltipColorScheme;a=o(!1);var J=a[0],K=a[1];a=o(null);var aa=a[0],L=a[1],M=n(null);a=n();var N=n();b=c("useMergeRefs")(b,M);var O=c("useWAWebUIM")(),P=m(function(){return g!==t.EmojiPicker&&g!==t.Suggestions&&g!==t.ReactionDetailsPane&&g!==t.ReactionSendTray&&g!==t.StickerPicker&&g!==t.DatePicker&&g!==t.ColorPicker&&g!==t.LabelColorPicker&&g!==t.ReactionPicker&&g!==t.DropdownText},[g]);l(function(){if(!P)return;if(F){var a;a=(a=N.current)==null?void 0:a.querySelector("[tabindex]");var b;G&&a?b=a:N.current&&N.current.firstChild instanceof HTMLDivElement&&a?b=a:N.current&&N.current.children.length>0&&(b=N.current.children[0]);c("WAWebFocusTracer").focus(b);K(!0);L(b)}else c("WAWebFocusTracer").focus(M.current)},[]);l(function(){if(!N.current||!M.current||E)return;d("WAWebCmd").Cmd.floaterEscapeOverlap(M.current,s)},[E]);var Q=m(function(){var a,b={};a=(a=r)!=null?a:{};var c=z(h,j,p),e=c[0];c=c[1];b[d("WAWebCompatibility").compatPrefix("transformOrigin")]=A(e,c);if(!q)return babelHelpers["extends"]({},a,b);e=B(e,c,q,M.current);return babelHelpers["extends"]({},a,b,e)},[h,j,p,q,r]),ba=function(a){c("WAWebFocusTracer").focus(M.current),K(!1)},R=function(a,b){b=(b<0?a.length-1:b)%a.length;c("WAWebFocusTracer").focus(a[b]);K(!0);L(a[b])},S=function(){var a=Array.from(c("WANullthrows")(N.current).querySelectorAll("li:not(.dropdown-item-disabled)"));return{activeChildren:a,currentlyFocusedIndex:a.indexOf(aa)}},T=function(a){D(a);a=S();var b=a.activeChildren;a=a.currentlyFocusedIndex;if(b.length===0)return;R(b,a-1)},U=function(a){D(a);a=S();var b=a.activeChildren;a=a.currentlyFocusedIndex;if(b.length===0)return;R(b,a+1)},V=function(a){D(a);var b=S(),c=b.activeChildren;b=b.currentlyFocusedIndex;if(c.length===0)return;if(c.length>12||c.length===6){U(a);return}var d;a=(c.length-2)/2;var e=0,f=a-1,g=a,h=c.length-3;b===-1?d=e:b>=g&&b<=h?d=b-a:b>=e&&b<=f?d=b:d=g;R(c,d)},W=function(a){D(a);var b=S(),c=b.activeChildren;b=b.currentlyFocusedIndex;if(c.length===0)return;if(c.length>12||c.length===6){T(a);return}a=(c.length-2)/2;var d=0,e=a-1,f=a,g=c.length-3;b>=f&&b<=g?f=g+1:b>=d&&b<=e?f=b+a:f=b;R(c,f)},ca=function(a){a.preventDefault(),O==null?void 0:O.requestDismiss()},X=function(a){H&&(c("WAWebFocusIndicator").shouldIndicateFocus(),O==null?void 0:O.requestDismiss(),H(a))},da=function(a){a.stopPropagation(),c("WAWebFocusTracer").focus(M.current),L(void 0)},Y=d("WAWebUIRefreshGatingUtils").materialRefreshEnabled();I=d("WAWebClassnames").classnamesConvertMeToStylexPlease((e={},e[c("WAWebDropdown.scss").container]=g===t.Dropdown||g===t.DropdownMenu||g===t.EmojiPicker||g===t.StickerPicker||g===t.ColorPicker||g===t.LabelColorPicker||g===t.ReactionDetailsPane||g===t.ReactionSendTray||g===t.ReactionPicker||g===t.DatePicker||g===t.Suggestions||g===t.DropdownText||g===t.AttachMenuPopup||g===t.ExpressionsPanel||g===t.EventsRSVPPopup,e[c("WAWebDropdown.scss").right]=g===t.DropdownMenu,e[c("WAWebDropdown.scss").picker]=g===t.Picker,e[c("WAWebDropdown.scss").emoji]=g===t.EmojiPicker,e[c("WAWebDropdown.scss").emojiXl]=g===t.EmojiPicker&&d("WAWebAttachMenuGatingUtils").areExpressionPanelsUiV2Enabled(),e[c("WAWebDropdown.scss").sticker]=g===t.StickerPicker,e[c("WAWebDropdown.scss").colorPicker]=g===t.ColorPicker,e[c("WAWebDropdown.scss").labelColorPicker]=g===t.LabelColorPicker,e[c("WAWebDropdown.scss").reactionDetails]=g===t.ReactionDetailsPane,e[c("WAWebDropdown.scss").reactionSendTray]=g===t.ReactionSendTray,e[c("WAWebDropdown.scss").reactionPicker]=g===t.ReactionPicker,e[c("WAWebDropdown.scss").datePicker]=g===t.DatePicker,e[c("WAWebDropdown.scss").suggestions]=g===t.Suggestions,e[c("WAWebDropdown.scss").expressionsPanel]=g===t.ExpressionsPanel,e[c("WAWebDropdown.scss").expressionsPanelXl]=g===t.ExpressionsPanel&&d("WAWebAttachMenuGatingUtils").areExpressionPanelsUiV2Enabled(),e[c("WAWebDropdown.scss").expressionsPanelInsideInput]=g===t.ExpressionsPanel&&!d("WAWebAttachMenuGatingUtils").shouldShowExpressionPanelsOutOfInput(),e[c("WAWebDropdown.scss").expressionsPanelOutsideInput]=g===t.ExpressionsPanel&&d("WAWebAttachMenuGatingUtils").shouldShowExpressionPanelsOutOfInput(),e[c("WAWebDropdown.scss").text]=g===t.DropdownText,e[c("WAWebDropdown.scss").tooltip]=g===t.Tooltip,e[c("WAWebDropdown.scss").tooltipHighlight]=I===u.Highlight,e[c("WAWebDropdown.scss").inverse]=(g===t.Picker||g===t.EmojiPicker||g===t.StickerPicker||g===t.ColorPicker||g===t.LabelColorPicker||g===t.ReactionDetailsPane||g===t.ReactionSendTray||g===t.ReactionPicker||g===t.DatePicker||g===t.DropdownText||g===t.Tooltip)&&h===v.LEFT,e[c("WAWebDropdown.scss").inverseVertical]=(g===t.EmojiPicker||g===t.StickerPicker||g===t.ColorPicker||g===t.LabelColorPicker||g===t.ReactionDetailsPane||g===t.ReactionSendTray||g===t.ReactionPicker||g===t.DatePicker||g===t.DropdownText)&&j===w.TOP,e[c("WAWebDropdown.scss").containerMaterial]=Y,e[c("WAWebDropdown.scss").containerMaterialPadding]=Y&&(g===t.Dropdown||g===t.DropdownMenu),e));Y=[];g===t.AttachMenu?Y.push(x.attachMenu,d("WAWebUISpacing").uiPadding.top0,d("WAWebUISpacing").uiPadding.horiz10,d("WAWebUISpacing").uiPadding.bottom7):g===t.EventsRSVPPopup&&Y.push(x.eventsRSVPPopup,d("WAWebUISpacing").uiPadding.vert0);g===t.AttachMenuPopup&&Y.push(x.attachMenuPopup);e=g===t.Picker||g===t.EmojiPicker||g===t.StickerPicker||g===t.LabelColorPicker||g===t.DropdownText||g===t.Tooltip?k.jsx("div",{"data-testid":void 0,ref:a,className:c("WAWebDropdown.scss").nib,"data-animate-dropdown-nib":!0,style:C(h,M.current,a.current)}):null;if(P){a={enter:X,tab:D,"shift+tab":D,up:c("WAWebNoop"),down:c("WAWebNoop")};var Z,$;d("WAWebMiscGatingUtils").multiSkinToneEmojiPickerEnabled()&&g===t.Picker?c("WAWebL10N").isRTL()?(Z=W,$=V):(Z=V,$=W):(Z=T,$=U);if(y){a[(V=c("WAWebL10N")).LR("left","right")]=T;a[V.LR("right","left")]=U;a[V.LR("up","down")]=Z;a[V.LR("down","up")]=$}else g===t.AttachMenu?(a.up=U,a.down=T):(a.up=T,a.down=U),g!==t.ExpressionsPanel&&(a[c("WAWebL10N").LR("left","right")]=ca,a[c("WAWebL10N").LR("right","left")]=X);return k.jsxs(d("WAWebKeyboardHotKeys.react").HotKeys,{ref:b,handlers:a,role:"application",className:I+" "+(i||(i=c("stylex")))(Y),style:Q,onMouseMove:J?ba:null,onMouseUp:da,children:[k.jsx("ul",{"data-testid":void 0,ref:N,className:i(g===t.AttachMenu&&x.attachMenuItems),children:f}),e]})}return k.jsxs("div",{ref:b,className:I,style:Q,"data-testid":void 0,children:[f,e]})}a.displayName=a.name+" [from "+f.id+"]";function D(a){a.stopPropagation(),a.preventDefault()}g.EMOJI_PICKER_WIDTH=p;g.MenuType=t;g.TooltipColorScheme=u;g.DirX=v;g.DirY=w;g.Dropdown=e}),98);
__d("WAWebErrorBoundary.react",["WALogger","WAWebCmd","WAWebFlex.react","WAWebModal.react","WAWebModalManager","WAWebToast.react","WAWebToastManager","WAWebUISpacing","WAWebUnstyledButton.react","WAWebWDSButton","WAWebWDSText.react","asyncToGeneratorRuntime","gkx","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["","\n",""],["","\\n",""]);k=function(){return a};return a}var l=j||c("react");a=(h||(h=d("react"))).PureComponent;var m={redBox:{height:"x5yr21d",width:"xh8yej3",display:"x78zum5",justifyContent:"xl56j7k",alignItems:"x6s0dn4",textAlign:"x2b8uid",backgroundColor:"x76b9fu",color:"xfungia",pointerEvents:"x71s49j",flexDirection:"xdt5ytf",cursor:"x1ypdohk",$$css:!0},codeContainer:{whiteSpace:"x126k92a",backgroundColor:"x1qbu5l5",fontSize:"x190qgfh",height:"xqt63rz",overflowX:"xw2csxc",overflowY:"x1odjw0f",$$css:!0}};function n(a){var e=a.boundaryName;a=a.error;a=(a=a)!=null?a:{};var f=a.stack;a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){f!=null&&(yield navigator.clipboard.writeText(f),d("WAWebToastManager").ToastManager.open(l.jsx(d("WAWebToast.react").Toast,{msg:"Stack copied"})))});return function(){return a.apply(this,arguments)}}();var g=function(){var a="Uncaught render error at "+e;d("WAWebCmd").Cmd.trigger("trigger_bugreport_v2",a)};return l.jsx(d("WAWebModal.react").Modal,{title:"Error stack from "+e,type:d("WAWebModal.react").ModalTheme.Multiline,children:f!=null?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:(i||(i=c("stylex")))([m.codeContainer,d("WAWebUISpacing").uiPadding.all10]),children:l.jsx("code",{children:f})}),l.jsxs("div",{className:(i||(i=c("stylex")))(d("WAWebUISpacing").uiPadding.vert10),children:[l.jsx(d("WAWebWDSText.react").WDSTextSmall,{xstyle:d("WAWebUISpacing").uiPadding.bottom10,children:"Check the console for more information"}),l.jsxs(d("WAWebFlex.react").FlexRow,{columnGap:8,justify:"end",marginTop:16,children:[l.jsx(d("WAWebWDSButton").WDSButtonSecondary,{onClick:a,children:"Copy error stack"}),l.jsx(d("WAWebWDSButton").WDSButtonSecondary,{onClick:g,children:"Report this bug"})]})]})]}):"No error stack found, check console"})}n.displayName=n.name+" [from "+f.id+"]";function o(a){var b=a.boundaryName;a=a.handleClick;if(!c("gkx")("26258"))return l.jsxs(c("WAWebUnstyledButton.react"),{xstyle:m.redBox,onClick:a,children:["Uncaught error at ",b," [Click for more info]"]});return}o.displayName=o.name+" [from "+f.id+"]";e=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.state={error:null},c.$1=function(){d("WAWebModalManager").ModalManager.open(l.jsx(n,{error:c.state.error,boundaryName:c.props.name}))},b)||babelHelpers.assertThisInitialized(c)}b.getDerivedStateFromError=function(a){return{error:a}};var c=b.prototype;c.componentDidCatch=function(a,b){var c=this.props.sendLogs;c=c===void 0?!0:c;c===!0&&d("WALogger").ERROR(k(),a.stack,b.componentStack).sendLogs("error-boundary:"+this.props.name,{sendLogsType:d("WALogger").SendLogsType.EXTREMELY_BAD_USER_EXPERIENCE_SAD})};c.render=function(){var a=this.state.error,b=this.props.fallback;b=b===void 0?o:b;return a!=null?l.jsx(b,{boundaryName:this.props.name,handleClick:this.$1}):(a=this.props.children)!=null?a:null};return b}(a);g.ErrorBoundary=e}),98);
__d("WAWebKeyboardConstants",[],(function(a,b,c,d,e,f){a={UNIDENTIFIED:"Unidentified",ALT:"Alt",ALT_GRAPH:"AltGraph",CAPS_LOCK:"CapsLock",CONTROL:"Control",FN:"Fn",FN_LOCK:"FnLock",HYPER:"Hyper",META:"Meta",NUM_LOCK:"NumLock",SCROLL_LOCK:"ScrollLock",SHIFT:"Shift",SUPER:"Super",SYMBOL:"Symbol",SYMBOL_LOCK:"SymbolLock",OS:"OS",ENTER:"Enter",TAB:"Tab",SPACE:" ",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",LEFT:"Left",RIGHT:"Right",UP:"Up",DOWN:"Down",END:"End",HOME:"Home",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",BACKSPACE:"Backspace",CLEAR:"Clear",COPY:"Copy",CR_SEL:"CrSel",CRSEL:"Crsel",CUT:"Cut",DELETE:"Delete",ERASE_EOF:"EraseEof",EX_SEL:"ExSel",EXSEL:"Exsel",INSERT:"Insert",PASTE:"Paste",REDO:"Redo",UNDO:"Undo",ESCAPE:"Escape"};f.KEYBOARD_EVENT_KEY_VALUE=a}),66);
__d("WAWebLabelSync",["Promise","WALogger","WAServerSync.pb","WASyncAction.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WAWebBizGatingUtils","WAWebLabelCollection","WAWebMobilePlatforms","WAWebModelStorageUtils","WAWebSchemaLabel","WAWebSyncdActionUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getLabelMutation: type has unexpected value: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["label sync: operation not supported"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["labelEditAction.type has unexpected value: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["labelEditAction.color is empty"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["labelEditAction.name is empty"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["label sync: malformed mutation"]);n=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 3};e.getAction=function(){return d("WASyncdConst").Actions.LabelEdit};e.applyMutations=function(a){var c=d("WAWebBizGatingUtils").isLabelReorderingSyncFromPrimaryEnabled();return(h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{if(a.operation==="set"){var e,f=a.indexParts;a=a.value;var g=f[1];g||d("WAWebSyncdActionUtils").throwInvalidActionIndex();f=a.labelEditAction;if(!f){d("WALogger").WARN(n());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}if(f.deleted===!0){yield d("WAWebSchemaLabel").getLabelTable().remove(g);d("WAWebLabelCollection").LabelCollection.remove(g);return{actionState:d("WASyncdConst").SyncActionState.Success}}a=f.color;var h=f.predefinedId,i=f.isActive,o=f.type;e=(e=f.name)!=null?e:"";e===""&&d("WALogger").WARN(m());d("WAWebMobilePlatforms").isSMB()&&a==null&&d("WALogger").WARN(l());var p={id:g,name:e,colorIndex:a,predefinedId:h};c&&f.orderIndex!=null&&(p.orderIndex=f.orderIndex);if(o!=null){e=d("WAWebSchemaLabel").ListType.cast(o);e!=null?p.type=e:d("WALogger").WARN(k(),o)}i!=null&&(p.isActive=i);a=(yield d("WAWebModelStorageUtils").getStorage().lock(["label","label-association"],function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a[0];a=a[1];yield b.createOrReplace(p);return a.anyOf(["labelId"],[g])});return function(b){return a.apply(this,arguments)}}()));d("WAWebLabelCollection").LabelCollection.add(babelHelpers["extends"]({},p),{merge:!0});h=d("WAWebLabelCollection").LabelCollection.get(g);if(h!=null&&a.length>0){var q=h.labelItemCollection.reduce(function(a,b){a.add(b.id);return a},new Set());f=a.filter(function(a){return!q.has(a.associationId)});f.length>0&&d("WAWebLabelCollection").LabelCollection.initializeAssociationsFromCache(f)}return{actionState:d("WASyncdConst").SyncActionState.Success}}d("WALogger").WARN(j());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}});return function(b){return a.apply(this,arguments)}}()))};e.getLabelMutation=function(a,b,c,e,f,g,h,j){b={name:b,deleted:e};c!=null&&(b.color=c);f!=null&&(b.predefinedId=f);g!=null&&(b.isActive=g);if(h!=null){e=d("WASyncAction.pb").SyncActionValue$LabelEditAction$ListType.cast(h);e!=null?b.type=e:d("WALogger").WARN(i(),h)}return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.Regular,indexArgs:[a],value:{labelEditAction:b},version:this.getVersion(),operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,timestamp:j,action:this.getAction()})};return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebLockIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="lock";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=24;m=24;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 24 24",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),version:"1.1",x:"0px",y:"0px",enableBackground:"new 0 0 24 24",children:[j.jsx("title",{children:k}),j.jsx("path",{fill:"currentColor",d:"M17.3,7.6h-0.9V5.8c0-2.5-1.9-4.4-4.4-4.4S7.6,3.3,7.6,5.8v1.8H6.7c-1,0-1.8,0.8-1.8,1.8v8.9 c0,1,0.8,1.8,1.8,1.8h10.6c1,0,1.8-0.8,1.8-1.8V9.4C19.1,8.4,18.3,7.6,17.3,7.6z M12,15.8c-1.1,0-2-0.9-2-2s0.9-2,2-2s2,0.9,2,2 S13.1,15.8,12,15.8z M14.7,7.6H9.2V5.8c0-1.5,1.2-2.7,2.7-2.7s2.7,1.2,2.7,2.7v1.8C14.6,7.6,14.7,7.6,14.7,7.6z"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.LockIcon=a}),98);
__d("WAWebQuickRepliesSync",["Promise","WALogger","WAServerSync.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WAWebQuickReplyCollection","WAWebSchemaQuickReply","WAWebSyncdActionUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["quick replies sync: operation not supported"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["quick replies sync: malformed mutation"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["quick replies sync: malformed mutation"]);k=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 2};e.getAction=function(){return d("WASyncdConst").Actions.QuickReply};e.applyMutations=function(a){return(h||(h=b("Promise"))).all(a.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{if(a.operation==="set"){var b=a.indexParts;a=a.value;b=b[1];b||d("WAWebSyncdActionUtils").throwInvalidActionIndex();a=a.quickReplyAction;if(!a){d("WALogger").WARN(k());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}if(a.deleted===!0){yield d("WAWebSchemaQuickReply").getQuickReplyTable().remove(b);d("WAWebQuickReplyCollection").QuickReplyCollection.remove(b);return{actionState:d("WASyncdConst").SyncActionState.Success}}var c=a.shortcut,e=a.message;if(c==null||c===""||e==null||e===""){d("WALogger").WARN(j());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}var f=a.keywords||[];a=a.count||0;var g={id:b,shortcut:c,count:a,message:e,keywords:f};yield d("WAWebSchemaQuickReply").getQuickReplyTable().createOrReplace(g);d("WAWebQuickReplyCollection").QuickReplyCollection.add({id:b,shortcut:c,message:e,keywords:f,count:a},{merge:!0});return{actionState:d("WASyncdConst").SyncActionState.Success}}d("WALogger").WARN(i());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}});return function(b){return a.apply(this,arguments)}}()))};e.getQuickReplyDeleteMutation=function(a,b){var c={quickReplyAction:{deleted:!0,keywords:[],shortcut:"",message:"",count:0}};return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.Regular,indexArgs:[a],value:c,version:this.getVersion(),operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,timestamp:b,action:this.getAction()})};e.getQuickReplyAddOrEditMutation=function(a,b,c,e,f,g){f={quickReplyAction:{deleted:!1,keywords:f,shortcut:b,message:c,count:e}};return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.Regular,indexArgs:[a],value:f,version:this.getVersion(),operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,timestamp:g,action:this.getAction()})};return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebSetRefCache",["WALogger"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[SetRefCache] Large cache detected with "," entries"]);h=function(){return a};return a}a=function(){function a(a){this.cache=new Map(),this.howBig=0,this.fn=a}var b=a.prototype;b.getKeyString=function(a){return typeof a==="string"?a:a.join("_")};b.getRefSetter=function(a){var b=this,c=this.getKeyString(a),e=this.cache.get(c);e||(e=function(d){b.fn(a,d),d||b.cache["delete"](c)},this.cache.set(c,e),Math.floor(this.cache.size/500)>this.howBig&&(d("WALogger").ERROR(h(),this.cache.size),this.howBig=Math.floor(this.cache.size/500)));return e};return a}();g["default"]=a}),98);
__d("WAWebStickerDownloadGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("web_sticker_download_m1")}g.isStickerDownloadM1Enabled=a}),98);
__d("WAWebStickersFavoriteSyncAction",["WABase64","WABaseGlobals","WAJids","WALogger","WAServerSync.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WAWebFavoriteStickerCollection","WAWebMiscGatingUtils","WAWebStickerModel","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: favorite sticker sync: successfully "," sticker ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: favorite sticker sync: try remove the sticker but it isn't in favorite sticker panel."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: favorite sticker sync: skipping adding favorite sticker since it has been added"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: favorite sticker sync: got an empty fileEncSha256 or mediaKey with filehash ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: favorite sticker sync: malformed mutation"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: favorite sticker sync: malformed mutation"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: favorite sticker sync: operation not supported"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: favorite sticker sync operation not supported"]);o=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 7};e.getAction=function(){return d("WASyncdConst").Actions.FavoriteSticker};e.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebMiscGatingUtils").isFavoriteStickersEnabled()){d("WALogger").WARN(o());return a.map(function(){return{actionState:d("WASyncdConst").SyncActionState.Unsupported}})}a=a.map(function(a){try{if(a.operation!=="set"){d("WALogger").WARN(n());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}var b=a.indexParts,c=a.value;a=a.timestamp;b=b[1];if(!b)return{actionState:d("WASyncdConst").SyncActionState.Malformed};c=c.stickerAction;if(c==null){d("WALogger").WARN(m());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}var e=c.fileEncSha256,f=c.mediaKey,g=c.mimetype,o=c.height,p=c.width,q=c.directPath,r=c.isFavorite;c=c.deviceIdHint;if(r==null){d("WALogger").WARN(l());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}(e==null||f==null)&&d("WALogger").DEV(k(),b);if(r){if(d("WAWebFavoriteStickerCollection").FavoriteStickerCollection.get(b)){d("WALogger").LOG(j());return{actionState:d("WASyncdConst").SyncActionState.Success}}q=new(d("WAWebStickerModel").StickerModel)({id:b,directPath:q,filehash:b,encFilehash:e?d("WABase64").encodeB64(e):"",mediaKey:f!=null?d("WABase64").encodeB64(f):"",mediaKeyTimestamp:a,width:p,height:o,mimetype:g});d("WAWebFavoriteStickerCollection").FavoriteStickerCollection.addOrUpdateStickers([q],a,c)}else{e=d("WAWebFavoriteStickerCollection").FavoriteStickerCollection.get(b);if(!e){d("WALogger").DEV(i());return{actionState:d("WASyncdConst").SyncActionState.Success}}d("WAWebFavoriteStickerCollection").FavoriteStickerCollection.removeAndSave(b)}d("WALogger").DEV(h(),r?"favorite":"unfavorite",b);return{actionState:d("WASyncdConst").SyncActionState.Success}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}});return a});function c(b){return a.apply(this,arguments)}return c}();e.generateFavoriteSyncMutation=function(a,b,c){var e;e={stickerAction:{fileEncSha256:d("WABase64").decodeB64((e=a.encFilehash)!=null?e:""),mediaKey:d("WABase64").decodeB64((e=a.mediaKey)!=null?e:""),mimetype:a.mimetype,height:a.height,width:a.width,directPath:a.directPath!=null?a.directPath:void 0,isFavorite:b,deviceIdHint:d("WAJids").interpretAsNumber(d("WAJids").extractDeviceId(d("WABaseGlobals").getMyDeviceJid()))}};return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.RegularLow,indexArgs:[a.filehash],operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,version:this.getVersion(),value:e,timestamp:c,action:this.getAction()})};return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebStickersRemoveRecentSyncAction",["WALogger","WALongInt","WAServerSync.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WATimeUtils","WAWebMiscGatingUtils","WAWebRecentStickerCollectionMd","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: skipping remove recent sticker since remove timestamp (",") is smaller than added timestamp (",")"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: removed a recent sticker"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: orphan remove recent sticker"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: no sticker hash provided"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: remove recent sticker sync: operation not supported"]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: remove recent sticker operation not supported"]);m=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var e=c.prototype;e.getVersion=function(){return 7};e.getAction=function(){return d("WASyncdConst").Actions.RemoveRecentSticker};e.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(!d("WAWebMiscGatingUtils").isRecentStickersMDEnabled()){d("WALogger").WARN(m());return a.map(function(){return{actionState:d("WASyncdConst").SyncActionState.Unsupported}})}return a.map(function(a){if(a.operation!=="set"){d("WALogger").WARN(l());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}var b=a.indexParts;b=b[1];if(b==null){d("WALogger").WARN(k());return{actionState:d("WASyncdConst").SyncActionState.Malformed}}a=(a=a.value.removeRecentStickerAction)==null?void 0:a.lastStickerSentTs;b=d("WAWebRecentStickerCollectionMd").RecentStickerCollectionMd.get(b);if(!b){d("WALogger").DEV(j());return{actionState:d("WASyncdConst").SyncActionState.Orphan}}var c=d("WALongInt").maybeNumberOrThrowIfTooLarge(a);c==null||d("WALongInt").numberOrThrowIfTooLarge(b.timestamp)<=c?(d("WAWebRecentStickerCollectionMd").RecentStickerCollectionMd.removeAndSave(b),d("WALogger").DEV(i())):d("WALogger").DEV(h(),a,b.timestamp);return{actionState:d("WASyncdConst").SyncActionState.Success}})});function c(b){return a.apply(this,arguments)}return c}();e.generateRemoveStickerMutation=function(a){var b=d("WATimeUtils").unixTimeMs(),c={removeRecentStickerAction:{lastStickerSentTs:a.timestamp}};return d("WASyncdActionUtils").buildPendingMutation({collection:d("WASyncdConst").CollectionName.RegularLow,indexArgs:[a.sticker.filehash],operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,version:this.getVersion(),value:c,timestamp:b,action:this.getAction()})};return c}(d("WASyncdAction").SyncActionBase);c=new a();g["default"]=c}),98);
__d("WAWebUserStatusMuteSync",["Promise","WALogger","WAServerSync.pb","WASyncdAction","WASyncdActionUtils","WASyncdConst","WAWebContactCollection","WAWebLidAwareContactsDB","WAWebSyncdActionUtils","WAWebSyncdUtils","WAWebWamEnumMdSyncdCriticalEventCode","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["status user mute chat sync: operation not supported"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["syncd: user status mute for "," will be added in bulk"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["UserStatusMuteSyncd: malformed mutation ",""]);k=function(){return a};return a}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=new Set();yield c("WAWebLidAwareContactsDB").bulkGet(a.map(function(a){a=a.indexParts;a=a[1];return!a||!c("WAWebWid").isWid(a)?null:a}).filter(Boolean)).then(function(a){return a.forEach(function(a){a&&b.add(a.id)})});return b});return m.apply(this,arguments)}a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.chatJidIndex=null,b)||babelHelpers.assertThisInitialized(c)}var f=e.prototype;f.getVersion=function(){return 7};f.getAction=function(){return d("WASyncdConst").Actions.UserStatusMute};f.applyMutations=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=(yield l(a)),f=[];a=(yield (h||(h=b("Promise"))).all(a.map(function(a){try{if(a.operation==="set"){var b=a.indexParts,g=a.value;b=b[1];b||d("WAWebSyncdActionUtils").throwInvalidActionIndex();if(!c("WAWebWid").isWid(b)){d("WAWebSyncdUtils").uploadCriticalEventMetric(d("WAWebWamEnumMdSyncdCriticalEventCode").MD_SYNCD_CRITICAL_EVENT_CODE.ACTION_INVALID_INDEX_DATA);return{actionState:d("WASyncdConst").SyncActionState.Malformed}}g=(g=g.userStatusMuteAction)==null?void 0:g.muted;if(g===void 0){d("WALogger").WARN(k(),a);return{actionState:d("WASyncdConst").SyncActionState.Malformed}}if(!e.has(b))return{actionState:d("WASyncdConst").SyncActionState.Orphan,orphanModel:{modelId:b,modelType:d("WASyncdConst").SyncModelType.UserStatusMute}};f.push({id:b,statusMute:g});d("WALogger").DEV(j(),b);return{actionState:d("WASyncdConst").SyncActionState.Success}}d("WALogger").WARN(i());return{actionState:d("WASyncdConst").SyncActionState.Unsupported}}catch(a){return{actionState:d("WASyncdConst").SyncActionState.Failed}}})));yield c("WAWebLidAwareContactsDB").bulkCreateOrMerge(f);var g=f.map(function(a){var b=d("WAWebWidFactory").createUserWid(a.id),c=d("WAWebContactCollection").ContactCollection.get(b);return{id:b,pushname:(c==null?void 0:c.pushname)||"",type:(c==null?void 0:c.type)||"out",name:c==null?void 0:c.name,statusMute:a.statusMute}});d("WAWebContactCollection").ContactCollection.add(g,{merge:!0});return a});function e(b){return a.apply(this,arguments)}return e}();f.getMutationForStatusMute=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){b={userStatusMuteAction:{muted:b}};a=d("WASyncdActionUtils").buildPendingMutation({action:this.getAction(),collection:d("WASyncdConst").CollectionName.RegularHigh,indexArgs:[a.toString({legacy:!0})],operation:d("WAServerSync.pb").SyncdMutation$SyncdOperation.SET,timestamp:c,value:b,version:this.getVersion()});return a});function c(b,c,d){return a.apply(this,arguments)}return c}();return e}(d("WASyncdAction").SyncActionBase);e=new a();g["default"]=e}),98);
__d("WAWebVisibilityOffIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="visibility-off";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=24;m=24;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 24 24",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),fill:"none",children:[j.jsx("title",{children:k}),j.jsx("path",{d:"M12 7C14.76 7 17 9.24 17 12C17 12.65 16.87 13.26 16.64 13.83L19.56 16.75C21.07 15.49 22.26 13.86 22.99 12C21.26 7.61 16.99 4.5 11.99 4.5C10.59 4.5 9.25 4.75 8.01 5.2L10.17 7.36C10.74 7.13 11.35 7 12 7ZM2 4.27L4.28 6.55L4.74 7.01C3.08 8.3 1.78 10.02 1 12C2.73 16.39 7 19.5 12 19.5C13.55 19.5 15.03 19.2 16.38 18.66L16.8 19.08L19.73 22L21 20.73L3.27 3L2 4.27ZM7.53 9.8L9.08 11.35C9.03 11.56 9 11.78 9 12C9 13.66 10.34 15 12 15C12.22 15 12.44 14.97 12.65 14.92L14.2 16.47C13.53 16.8 12.79 17 12 17C9.24 17 7 14.76 7 12C7 11.21 7.2 10.47 7.53 9.8ZM11.84 9.02L14.99 12.17L15.01 12.01C15.01 10.35 13.67 9.01 12.01 9.01L11.84 9.02Z",fill:"currentColor"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.VisibilityOffIcon=a}),98);
__d("WAWebVisibilityOnIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="visibility-on";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=24;m=24;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 24 24",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),fill:"none",children:[j.jsx("title",{children:k}),j.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5ZM12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17ZM9 12C9 10.34 10.34 9 12 9C13.66 9 15 10.34 15 12C15 13.66 13.66 15 12 15C10.34 15 9 13.66 9 12Z",fill:"currentColor"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.VisibilityOnIcon=a}),98);
__d("useWAWebAsync",["react","useWAWebStableCallback"],(function(a,b,c,d,e,f,g){var h;b=h||d("react");var i=b.useEffect,j=b.useState;function a(a,b){var d=c("useWAWebStableCallback")(a);a=j(!0);var e=a[0],f=a[1];a=j(null);var g=a[0],h=a[1];a=j(null);var k=a[0],l=a[1];i(function(){var a=new AbortController();f(!0);d().then(function(b){a.signal.aborted||(h(function(){return b}),f(!1),l(null))})["catch"](function(a){f(!1),l(a)});return function(){a.abort()}},[d].concat(b));if(e)return{loading:!0,error:null,value:null};return k?{loading:!1,error:k,value:null}:{loading:!1,error:null,value:g}}g["default"]=a}),98);
__d("useWAWebCallbackOnce",["once","react","useWAWebStableCallback"],(function(a,b,c,d,e,f,g){var h,i=(h||d("react")).useMemo;function a(a,b){b===void 0&&(b=[]);var d=c("useWAWebStableCallback")(a);a=i(function(){return c("once")(d)},[d].concat(b));return a}g["default"]=a}),98);
__d("useWAWebInterval",["react","useWAWebStableCallback"],(function(a,b,c,d,e,f,g){var h;b=h||d("react");var i=b.useCallback,j=b.useEffect,k=b.useRef;function a(a,b,d){b===void 0&&(b=0);d=(d=d)!=null?d:{};d=d.immediate;var e=d===void 0?!1:d,f=c("useWAWebStableCallback")(a),g=k(),h=i(function(){g.current&&self.clearInterval(g.current)},[]),l=i(function(){h(),g.current=self.setInterval(f,b)},[h,b,f]);j(function(){e&&l();return h},[e,l,h]);return[l,h]}g["default"]=a}),98);
__d("useWAWebToggle",["react","useWAWebStableCallback"],(function(a,b,c,d,e,f,g){var h;b=h||d("react");var i=b.useCallback,j=b.useState;function a(a,b){var d=c("useWAWebStableCallback")(b);b=j(a);a=b[0];var e=b[1];b=i(function(){return e(function(a){a=!a;d(a);return a})},[d]);return[a,b]}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("FbtErrorListenerWWW",["FBLogger"],(function(a,b,c,d,e,f,g){a=function(){function a(a){this.$1=a.hash,this.$2=a.translation}var b=a.prototype;b.onStringSerializationError=function(a){var b="Context not logged.";try{var d=JSON.stringify(a);d!=null&&(b=d.substr(0,250))}catch(a){b=a.message}d=(a==null?void 0:(d=a.constructor)==null?void 0:d.name)||"";c("FBLogger")("fbt").blameToPreviousDirectory().blameToPreviousDirectory().mustfix('Converting to a string will drop content data. Hash="%s" Translation="%s" Content="%s" (type=%s,%s)',this.$1,this.$2,b,typeof a,d)};b.onStringMethodUsed=function(a){c("FBLogger")("fbt").blameToPreviousDirectory().blameToPreviousDirectory().mustfix("Error using fbt string. Used method %s on Fbt string. Fbt string is designed to be immutable and should not be manipulated.",a)};b.onMissingParameterError=function(a,b){c("FBLogger")("fbt").blameToPreviousDirectory().blameToPreviousDirectory().mustfix('Expected fbt parameter names (%s) to also contain `%s`. Hash="%s" Translation="%s"',a.join(", "),b,this.$1,this.$2)};return a}();g["default"]=a}),98);
__d("FbtReactUtil",[],(function(a,b,c,d,e,f){a=typeof Symbol==="function"&&Symbol["for"]&&Symbol["for"]("react.element")||60103;var g=!1;b={REACT_ELEMENT_TYPE:a,injectReactShim:function(a){var b={validated:!0};g?Object.defineProperty(a,"_store",{configurable:!1,enumerable:!1,writable:!1,value:b}):a._store=b}};e.exports=b}),null);
__d("FbtResultBase",[],(function(a,b,c,d,e,f){"use strict";var g=function(){function a(a,b){this.$1=a,this.__errorListener=b,this.$3=!1,this.$2=null}var b=a.prototype;b.flattenToArray=function(){return a.flattenToArray(this.$1)};b.getContents=function(){return this.$1};b.toString=function(){if(Object.isFrozen(this))return this.$4();if(this.$3)return"<<Reentering fbt.toString() is forbidden>>";this.$3=!0;try{return this.$4()}finally{this.$3=!1}};b.$4=function(){if(this.$2!=null)return this.$2;var b="",c=this.flattenToArray();for(var d=0;d<c.length;++d){var e=c[d];if(typeof e==="string"||e instanceof a)b+=e.toString();else{var f;(f=this.__errorListener)==null?void 0:f.onStringSerializationError==null?void 0:f.onStringSerializationError(e)}}Object.isFrozen(this)||(this.$2=b);return b};b.toJSON=function(){return this.toString()};a.flattenToArray=function(b){var c=[];for(var d=0;d<b.length;++d){var e=b[d];Array.isArray(e)?c.push.apply(c,a.flattenToArray(e)):e instanceof a?c.push.apply(c,e.flattenToArray()):c.push(e)}return c};return a}();["anchor","big","blink","bold","charAt","charCodeAt","codePointAt","contains","endsWith","fixed","fontcolor","fontsize","includes","indexOf","italics","lastIndexOf","link","localeCompare","match","normalize","repeat","replace","search","slice","small","split","startsWith","strike","sub","substr","substring","sup","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimLeft","trimRight"].forEach(function(a){g.prototype[a]=function(){var b;(b=this.__errorListener)==null?void 0:b.onStringMethodUsed==null?void 0:b.onStringMethodUsed(a);for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return String.prototype[a].apply(this,d)}});a=g;e.exports=a}),null);
__d("FbtResult",["FbtReactUtil","FbtResultBase"],(function(a,b,c,d,e,f){var g=function(a){return a.content};a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(c,d){d=a.call(this,c,d)||this;d.$$typeof=b("FbtReactUtil").REACT_ELEMENT_TYPE;d.key=null;d.ref=null;d.type=g;d.props={content:c};return d}c.get=function(a){return new c(a.contents,a.errorListener)};return c}(b("FbtResultBase"));e.exports=a}),null);
__d("FbtPureStringResult",["FbtResult"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("FbtResult"));c=a;e.exports=c}),null);
__d("getFbsResult",["FbtPureStringResult"],(function(a,b,c,d,e,f){function a(a){return new(b("FbtPureStringResult"))(a.contents,a.errorListener)}e.exports=a}),null);
__d("getTranslatedInput",["Env","ExecutionEnvironment","FBLogger","MakeHasteTranslationsMap"],(function(a,b,c,d,e,f,g){var h,i;b="JHASH";var j=new RegExp("__"+b+"__(.+?)__"+b+"__"),k=!!(h||(h=c("Env"))).use_fbt_virtual_modules;function a(a){var b=a.table;if(k&&(i||(i=c("ExecutionEnvironment"))).isInBrowser){if(typeof b==="string"){var e=b.match(j);if(e!=null)return babelHelpers["extends"]({},a,{table:d("MakeHasteTranslationsMap").get(e[1])})}c("FBLogger")("binary_transparency","inlined_translations").warn("Found inlined translated contents in client_fetch_translations experiment! Input: %s",JSON.stringify(b))}return a}g["default"]=a}),98);
__d("translationOverrideListener",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("IntlQtEventFalcoEvent").__setRef("translationOverrideListener");function a(a){h.onReady(function(b){return b.log(function(){return{hash:a}})})}g["default"]=a}),98);
__d("FbtEnv",["FbtErrorListenerWWW","FbtHooks","IntlViewerContext","cr:7730","getFbsResult","getTranslatedInput","justknobx","promiseDone","requireDeferred","translationOverrideListener"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("FbtLogging").__setRef("FbtEnv");d="JHASH";var j=new RegExp("__"+d+"__(.+?)__"+d+"__"),k=!1;function a(){if(k)return;k=!0;(h||(h=b("FbtHooks"))).register({errorListener:function(a){return new(c("FbtErrorListenerWWW"))(a)},getFbsResult:c("getFbsResult"),getFbtResult:b("cr:7730"),getTranslatedInput:c("getTranslatedInput"),onTranslationOverride:c("translationOverrideListener"),getViewerContext:function(){return c("IntlViewerContext")},logImpression:function(a,b){return c("promiseDone")(i.load().then(function(d){d.logImpression==null?void 0:d.logImpression(a);if(!c("justknobx")._("2269")){var e,f=b==null?void 0:b.inputTable;e=(e=b==null?void 0:b.tokens)!=null?e:[];if(typeof f==="string"){f=f.match(j);f!=null&&(d.logImpressionV2==null?void 0:d.logImpressionV2(f[1],e))}}}))}})}g.setupOnce=a}),98);
__d("FbtHooksImpl",[],(function(a,b,c,d,e,f){var g={};a={getErrorListener:function(a){return g.errorListener==null?void 0:g.errorListener(a)},logImpression:function(a,b){g.logImpression==null?void 0:g.logImpression(a,b)},onTranslationOverride:function(a){g.onTranslationOverride==null?void 0:g.onTranslationOverride(a)},getFbsResult:function(a){return g.getFbsResult(a)},getFbtResult:function(a){return g.getFbtResult(a)},getTranslatedInput:function(a){var b;return(b=g.getTranslatedInput==null?void 0:g.getTranslatedInput(a))!=null?b:a},getViewerContext:function(){return g.getViewerContext()},register:function(a){Object.assign(g,a)}};e.exports=a}),null);
__d("FbtHooks",["FbtEnv","FbtHooksImpl"],(function(a,b,c,d,e,f){e.exports=b("FbtHooksImpl"),b("FbtEnv").setupOnce()}),null);
__d("FbtNumberType",["IntlNumberTypeProps"],(function(a,b,c,d,e,f,g){g["default"]=c("IntlNumberTypeProps").module}),98);
__d("FbtTable",["invariant"],(function(a,b,c,d,e,f,g){"use strict";var h={ARG:{INDEX:0,SUBSTITUTION:1},access:function(a,b,c,d){if(c>=b.length){typeof a==="string"||Array.isArray(a)||g(0,21388,JSON.stringify(a));return a}var e=b[c];e=e[h.ARG.INDEX];if(e==null)return h.access(a,b,c+1,d);typeof a!=="string"&&!Array.isArray(a)||g(0,20954,typeof a);for(var f=0;f<e.length;++f){var i=a[e[f]];if(i==null)continue;d.push(e[f]);i=h.access(i,b,c+1,d);if(i!=null)return i}return null}};e.exports=h}),null);
__d("FbtTableAccessor",[],(function(a,b,c,d,e,f){"use strict";a={getEnumResult:function(a){return[[a],null]},getGenderResult:function(a,b,c){return[a,b]},getNumberResult:function(a,b,c){return[a,b]},getSubstitution:function(a){return[null,a]},getPronounResult:function(a){return[[a,"*"],null]}};e.exports=a}),null);
__d("GenderConst",[],(function(a,b,c,d,e,f){e.exports={NOT_A_PERSON:0,FEMALE_SINGULAR:1,MALE_SINGULAR:2,FEMALE_SINGULAR_GUESS:3,MALE_SINGULAR_GUESS:4,MIXED_UNKNOWN:5,NEUTER_SINGULAR:6,UNKNOWN_SINGULAR:7,FEMALE_PLURAL:8,MALE_PLURAL:9,NEUTER_PLURAL:10,UNKNOWN_PLURAL:11}}),null);
__d("InlineFbtResult",["cr:1183579"],(function(a,b,c,d,e,f,g){g["default"]=b("cr:1183579")}),98);
__d("InlineFbtResultImplComet",["FbtHooks","FbtReactUtil","FbtResultBase","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function k(a){var b=a.content,d=a.hash,e=a.inlineMode;a=a.translation;d==null&&c("recoverableViolation")('Fbt string hash should not be null for translated string "'+a+'" '+("[inlineMode="+e+"]"),"internationalization");return j.jsx("span",{"data-intl-hash":d,"data-intl-translation":a,"data-intl-trid":"",children:b})}k.displayName=k.name+" [from "+f.id+"]";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e,f,g){var i;i=a.call(this,b,(h||(h=c("FbtHooks"))).getErrorListener({hash:g,translation:f}))||this;i.$$typeof=d("FbtReactUtil").REACT_ELEMENT_TYPE;i.key=null;i.ref=null;i.type=k;i.props={content:b,hash:g,inlineMode:e,translation:f};return i}return b}(c("FbtResultBase"));g["default"]=a}),98);
__d("IntlNumberType",["FbtNumberType"],(function(a,b,c,d,e,f,g){a=function(a){return c("FbtNumberType")};g.get=a}),98);
__d("IntlPhonologicalRewrites",["IntlPhonologicalRules"],(function(a,b,c,d,e,f){"use strict";a={get:function(a){return b("IntlPhonologicalRules")}};e.exports=a}),null);
__d("IntlRedundantStops",[],(function(a,b,c,d,e,f){a=Object.freeze({equivalencies:{".":["\u0964","\u104b","\u3002"],"\u2026":["\u0e2f","\u0eaf","\u1801"],"!":["\uff01"],"?":["\uff1f"]},redundancies:{"?":["?",".","!","\u2026"],"!":["!","?","."],".":[".","!"],"\u2026":["\u2026",".","!"]}});f["default"]=a}),66);
__d("IntlPunctuation",["FbtHooks","IntlPhonologicalRewrites","IntlRedundantStops"],(function(a,b,c,d,e,f,g){var h;d="[.!?\u3002\uff01\uff1f\u0964\u2026\u0eaf\u1801\u0e2f\uff0e]";var i={};function j(a){var b;b=(b=a)!=null?b:"";var c=i[b];c==null&&(c=i[b]=k(a));return c}function k(a){var b=[];a=c("IntlPhonologicalRewrites").get(a);for(var d in a.patterns){var e=a.patterns[d];for(var f in a.meta){var g=new RegExp(f.slice(1,-1),"g"),h=a.meta[f];d=d.replace(g,h);e=e.replace(g,h)}e==="javascript"&&(e=function(a){return a.slice(1).toLowerCase()});b.push([new RegExp(d.slice(1,-1),"g"),e])}return b}function a(a){var b=j((h||(h=c("FbtHooks"))).getViewerContext().locale);a=a;for(var d=0;d<b.length;d++){var e=b[d],f=e[0];e=e[1];a=a.replace(f,e)}return a.replace(/\x01/g,"")}var l=new Map();for(e in c("IntlRedundantStops").equivalencies)for(var f=[e].concat(c("IntlRedundantStops").equivalencies[e]),m=Array.isArray(f),n=0,f=m?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=f.length)break;o=f[n++]}else{n=f.next();if(n.done)break;o=n.value}o=o;l.set(o,e)}var p=new Map();for(o in c("IntlRedundantStops").redundancies)p.set(o,new Set(c("IntlRedundantStops").redundancies[o]));function q(a,b){a=l.get(a);b=l.get(b);return((a=p.get(a))==null?void 0:a.has(b))===!0}function b(a,b){return q(a[a.length-1],b)?"":b}g.PUNCT_CHAR_CLASS=d;g.applyPhonologicalRules=a;g.dedupeStops=b}),98);
__d("IntlVariations",[],(function(a,b,c,d,e,f){e.exports={BITMASK_NUMBER:28,BITMASK_GENDER:3,NUMBER_ZERO:16,NUMBER_ONE:4,NUMBER_TWO:8,NUMBER_FEW:20,NUMBER_MANY:12,NUMBER_OTHER:24,GENDER_MALE:1,GENDER_FEMALE:2,GENDER_UNKNOWN:3}}),null);
__d("IntlVariationResolverImpl",["invariant","FbtHooks","IntlNumberType","IntlVariations"],(function(a,b,c,d,e,f,g){var h,i="_1";a={EXACTLY_ONE:i,getNumberVariations:function(a){var c=b("IntlNumberType").get((h||(h=b("FbtHooks"))).getViewerContext().locale).getVariation(a);c&b("IntlVariations").BITMASK_NUMBER||g(0,11647,c,typeof c);return a===1?[i,c,"*"]:[c,"*"]},getGenderVariations:function(a){a&b("IntlVariations").BITMASK_GENDER||g(0,11648,a,typeof a);return[a,"*"]}};e.exports=a}),null);
__d("IntlVariationResolver",["IntlVariationHoldout","IntlVariationResolverImpl"],(function(a,b,c,d,e,f,g){a={getNumberVariations:function(a){return d("IntlVariationResolverImpl").getNumberVariations(a)},getGenderVariations:function(a){return d("IntlVariationHoldout").disable_variation?["*"]:d("IntlVariationResolverImpl").getGenderVariations(a)}};b=a;g["default"]=b}),98);
__d("NumberFormatConsts",["NumberFormatConfig"],(function(a,b,c,d,e,f){a={get:function(a){return b("NumberFormatConfig")}};e.exports=a}),null);
__d("TransAppInlineMode",[],(function(a,b,c,d,e,f){a=Object.freeze({STRING_MANAGER:"STRING_MANAGER",TRANSLATION:"TRANSLATION",APPROVE:"APPROVE",REPORT:"REPORT",NO_INLINE:"NO_INLINE"});f["default"]=a}),66);
__d("asyncToGeneratorRuntime",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;function h(a,c,d,e,f,h,i){try{var j=a[h](i),k=j.value}catch(a){d(a);return}j.done?c(k):(g||(g=b("Promise"))).resolve(k).then(e,f)}function a(a){return function(){var c=this,d=arguments;return new(g||(g=b("Promise")))(function(b,e){var f=a.apply(c,d);function g(a){h(f,b,e,g,i,"next",a)}function i(a){h(f,b,e,g,i,"throw",a)}g(void 0)})}}f.asyncToGenerator=a}),66);
__d("regeneratorRuntime",["Promise"],(function(a,b,c,d,e,f){"use strict";var g,h=Object.prototype.hasOwnProperty,i=typeof Symbol==="function"&&(typeof Symbol==="function"?Symbol.iterator:"@@iterator")||"@@iterator",j=e.exports;function k(a,b,c,d){b=Object.create((b||r).prototype);d=new A(d||[]);b._invoke=x(a,c,d);return b}j.wrap=k;function l(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(a){return{type:"throw",arg:a}}}var m="suspendedStart",n="suspendedYield",o="executing",p="completed",q={};function r(){}function s(){}function t(){}var u=t.prototype=r.prototype;s.prototype=u.constructor=t;t.constructor=s;s.displayName="GeneratorFunction";function a(a){["next","throw","return"].forEach(function(b){a[b]=function(a){return this._invoke(b,a)}})}j.isGeneratorFunction=function(a){a=typeof a==="function"&&a.constructor;return a?a===s||(a.displayName||a.name)==="GeneratorFunction":!1};j.mark=function(a){Object.setPrototypeOf?Object.setPrototypeOf(a,t):Object.assign(a,t);a.prototype=Object.create(u);return a};j.awrap=function(a){return new v(a)};function v(a){this.arg=a}function w(a){function c(c,f){var h=a[c](f);c=h.value;return c instanceof v?(g||(g=b("Promise"))).resolve(c.arg).then(d,e):(g||(g=b("Promise"))).resolve(c).then(function(a){h.value=a;return h})}typeof process==="object"&&process.domain&&(c=process.domain.bind(c));var d=c.bind(a,"next"),e=c.bind(a,"throw");c.bind(a,"return");var f;function h(a,d){var e=f?f.then(function(){return c(a,d)}):new(g||(g=b("Promise")))(function(b){b(c(a,d))});f=e["catch"](function(a){});return e}this._invoke=h}a(w.prototype);j.async=function(a,b,c,d){var e=new w(k(a,b,c,d));return j.isGeneratorFunction(b)?e:e.next().then(function(a){return a.done?a.value:e.next()})};function x(a,b,c){var d=m;return function(e,f){if(d===o)throw new Error("Generator is already running");if(d===p){if(e==="throw")throw f;return C()}while(!0){var g=c.delegate;if(g){if(e==="return"||e==="throw"&&g.iterator[e]===void 0){c.delegate=null;var h=g.iterator["return"];if(h){h=l(h,g.iterator,f);if(h.type==="throw"){e="throw";f=h.arg;continue}}if(e==="return")continue}h=l(g.iterator[e],g.iterator,f);if(h.type==="throw"){c.delegate=null;e="throw";f=h.arg;continue}e="next";f=void 0;var i=h.arg;if(i.done)c[g.resultName]=i.value,c.next=g.nextLoc;else{d=n;return i}c.delegate=null}if(e==="next")d===n?c.sent=f:c.sent=void 0;else if(e==="throw"){if(d===m){d=p;throw f}c.dispatchException(f)&&(e="next",f=void 0)}else e==="return"&&c.abrupt("return",f);d=o;h=l(a,b,c);if(h.type==="normal"){d=c.done?p:n;var i={value:h.arg,done:c.done};if(h.arg===q)c.delegate&&e==="next"&&(f=void 0);else return i}else h.type==="throw"&&(d=p,e="throw",f=h.arg)}}}a(u);u[i]=function(){return this};u.toString=function(){return"[object Generator]"};function y(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]);2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]);this.tryEntries.push(b)}function z(a){var b=a.completion||{};b.type="normal";delete b.arg;a.completion=b}function A(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(y,this),this.reset(!0)}j.keys=function(a){var b=[];for(var c in a)b.push(c);b.reverse();return function c(){while(b.length){var d=b.pop();if(d in a){c.value=d;c.done=!1;return c}}c.done=!0;return c}};function B(a){if(a){var b=a[i];if(b)return b.call(a);if(typeof a.next==="function")return a;if(!isNaN(a.length)){var c=-1;b=function b(){while(++c<a.length)if(h.call(a,c)){b.value=a[c];b.done=!1;return b}b.value=void 0;b.done=!0;return b};return b.next=b}}return{next:C}}j.values=B;function C(){return{value:void 0,done:!0}}A.prototype={constructor:A,reset:function(a){this.prev=0;this.next=0;this.sent=void 0;this.done=!1;this.delegate=null;this.tryEntries.forEach(z);if(!a)for(a in this)a.charAt(0)==="t"&&h.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=void 0)},stop:function(){this.done=!0;var a=this.tryEntries[0];a=a.completion;if(a.type==="throw")throw a.arg;return this.rval},dispatchException:function(a){if(this.done)throw a;var b=this;function c(c,d){f.type="throw";f.arg=a;b.next=c;return!!d}for(var d=this.tryEntries.length-1;d>=0;--d){var e=this.tryEntries[d],f=e.completion;if(e.tryLoc==="root")return c("end");if(e.tryLoc<=this.prev){var g=h.call(e,"catchLoc"),i=h.call(e,"finallyLoc");if(g&&i){if(this.prev<e.catchLoc)return c(e.catchLoc,!0);else if(this.prev<e.finallyLoc)return c(e.finallyLoc)}else if(g){if(this.prev<e.catchLoc)return c(e.catchLoc,!0)}else if(i){if(this.prev<e.finallyLoc)return c(e.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(a,b){for(var c=this.tryEntries.length-1;c>=0;--c){var d=this.tryEntries[c];if(d.tryLoc<=this.prev&&h.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var e=d;break}}e&&(a==="break"||a==="continue")&&e.tryLoc<=b&&b<=e.finallyLoc&&(e=null);d=e?e.completion:{};d.type=a;d.arg=b;e?this.next=e.finallyLoc:this.complete(d);return q},complete:function(a,b){if(a.type==="throw")throw a.arg;a.type==="break"||a.type==="continue"?this.next=a.arg:a.type==="return"?(this.rval=a.arg,this.next="end"):a.type==="normal"&&b&&(this.next=b)},finish:function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.finallyLoc===a){this.complete(c.completion,c.afterLoc);z(c);return q}}},"catch":function(a){for(var b=this.tryEntries.length-1;b>=0;--b){var c=this.tryEntries[b];if(c.tryLoc===a){var d=c.completion;if(d.type==="throw"){var e=d.arg;z(c)}return e}}throw new Error("illegal catch attempt")},delegateYield:function(a,b,c){this.delegate={iterator:B(a),resultName:b,nextLoc:c};return q}}}),null);
__d("escapeRegex",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.replace(/([.?*+\^$\[\]\\(){}|\-])/g,"\\$1")}e.exports=a}),null);
__d("intlNumUtils",["FbtHooks","NumberFormatConsts","escapeRegex"],(function(a,b,c,d,e,f){var g,h=3;f=["\u0433\u0440\u043d.","\u0434\u0435\u043d.","\u043b\u0432.","\u043c\u0430\u043d.","\u0564\u0580.","\u062c.\u0645.","\u062f.\u0625.","\u062f.\u0627.","\u062f.\u0628.","\u062f.\u062a.","\u062f.\u062c.","\u062f.\u0639.","\u062f.\u0643.","\u062f.\u0644.","\u062f.\u0645.","\u0631.\u0633.","\u0631.\u0639.","\u0631.\u0642.","\u0631.\u064a.","\u0644.\u0633.","\u0644.\u0644.","\u0783.","B/.","Bs.","Fr.","kr.","L.","p.","S/."];var i={};function j(a){i[a]||(i[a]=new RegExp(a,"i"));return i[a]}var k=j(f.reduce(function(a,c,d){return a+(d?"|":"")+"("+b("escapeRegex")(c)+")"},""));function l(a,c,d,e,f,g,i){d===void 0&&(d="");e===void 0&&(e=".");f===void 0&&(f=0);g===void 0&&(g={primaryGroupSize:h,secondaryGroupSize:h});var k=g.primaryGroupSize||h;g=g.secondaryGroupSize||k;i=i&&i.digits;var l;c==null?l=a.toString():typeof a==="string"?l=r(a,c):l=p(a,c);a=l.split(".");c=a[0];l=a[1];if(Math.abs(parseInt(c,10)).toString().length>=f){a="$1"+d+"$2$3";f="(\\d)(\\d{"+(k-0)+"})($|\\D)";k=c.replace(j(f),a);if(k!=c){c=k;f="(\\d)(\\d{"+(g-0)+"})("+b("escapeRegex")(d)+")";g=j(f);while((k=c.replace(g,a))!=c)c=k}}i!=null&&(c=m(c,i),l=l&&m(l,i));d=c;l&&(d+=e+l);return d}function m(a,b){var c="";for(var d=0;d<a.length;++d){var e=b[a.charCodeAt(d)-48];c+=e!==void 0?e:a[d]}return c}function a(a,c){var d=b("NumberFormatConsts").get((g||(g=b("FbtHooks"))).getViewerContext().locale);return l(a,c,"",d.decimalSeparator,d.minDigitsForThousandsSeparator,d.standardDecimalPatternInfo,d.numberingSystemData)}function n(a,c){var d=b("NumberFormatConsts").get((g||(g=b("FbtHooks"))).getViewerContext().locale);return l(a,c,d.numberDelimiter,d.decimalSeparator,d.minDigitsForThousandsSeparator,d.standardDecimalPatternInfo,d.numberingSystemData)}function o(a){return a&&Math.floor(Math.log10(Math.abs(a)))}function c(a,b,c){var d=o(a),e=a;d<c&&(e=a*Math.pow(10,-d+c));a=Math.pow(10,o(e)-c+1);e=Math.round(e/a)*a;if(d<c){e/=Math.pow(10,-d+c);if(b==null)return n(e,c-d-1)}return n(e,b)}function p(a,b){b=b==null?0:b;var c=Math.pow(10,b);a=(Math.round(a*c)/c).toString();if(!b)return a;if(a.indexOf("e-")!==-1)return a;c=a.indexOf(".");var d;c===-1?(a+=".",d=b):d=b-(a.length-c-1);for(b=0,c=d;b<c;b++)a+="0";return a}var q=function(a,b){a=a;for(var c=0;c<b;c++)a+="0";return a};function r(a,b){var c=a.indexOf("."),d=c===-1?a:a.slice(0,c);a=c===-1?"":a.slice(c+1);return b!=null?d+"."+q(a.slice(0,b),b-a.length):d}function s(a,c,d){d===void 0&&(d="");var e=u(),f=a;e&&(f=a.split("").map(function(a){return e[a]||a}).join("").trim());f=f.replace(/^[^\d]*\-/,"\x02");f=f.replace(k,"");a=b("escapeRegex")(c);c=b("escapeRegex")(d);d=j("^[^\\d]*\\d.*"+a+".*\\d[^\\d]*$");if(!d.test(f)){d=j("(^[^\\d]*)"+a+"(\\d*[^\\d]*$)");if(d.test(f)){f=f.replace(d,"$1\x01$2");return t(f)}d=j("^[^\\d]*[\\d "+b("escapeRegex")(c)+"]*[^\\d]*$");d.test(f)||(f="");return t(f)}d=j("(^[^\\d]*[\\d "+c+"]*)"+a+"(\\d*[^\\d]*$)");f=d.test(f)?f.replace(d,"$1\x01$2"):"";return t(f)}function t(a){a=a.replace(/[^0-9\u0001\u0002]/g,"").replace("\x01",".").replace("\x02","-");var b=Number(a);return a===""||isNaN(b)?null:b}function u(){var a=b("NumberFormatConsts").get((g||(g=b("FbtHooks"))).getViewerContext().locale),c={};a=a.numberingSystemData&&a.numberingSystemData.digits;if(a==null)return null;for(var d=0;d<a.length;d++)c[a.charAt(d)]=d.toString();return c}function d(a){var c=b("NumberFormatConsts").get((g||(g=b("FbtHooks"))).getViewerContext().locale);return s(a,c.decimalSeparator||".",c.numberDelimiter)}var v={formatNumber:a,formatNumberRaw:l,formatNumberWithThousandDelimiters:n,formatNumberWithLimitedSigFig:c,parseNumber:d,parseNumberRaw:s,truncateLongNumber:r,getFloatString:function(a,b,c){a=String(a);a=a.split(".");b=v.getIntegerString(a[0],b);return a.length===1?b:b+c+a[1]},getIntegerString:function(a,b){b=b;b===""&&(b=",");a=String(a);var c=/(\d+)(\d{3})/;while(c.test(a))a=a.replace(c,"$1"+b+"$2");return a}};e.exports=v}),null);
__d("substituteTokens",["invariant","IntlPunctuation"],(function(a,b,c,d,e,f,g,h){var i=Object.prototype.hasOwnProperty,j=new RegExp("\\{([^}]+)\\}("+d("IntlPunctuation").PUNCT_CHAR_CLASS+"*)","g");function k(a){return a}function a(a,b,c){if(b==null)return a;typeof b==="object"||h(0,6041,a);var e=[],f=[];a=a.replace(j,function(a,g,h){i.call(b,g)||(c==null?void 0:c.onMissingParameterError==null?void 0:c.onMissingParameterError(Object.keys(b),g));a=b[g];if(a!=null&&typeof a==="object"){e.push(a);f.push(g);return"\x17"+h}else if(a==null)return"";return String(a)+d("IntlPunctuation").dedupeStops(String(a),h)}).split("\x17").map(d("IntlPunctuation").applyPhonologicalRules);if(a.length===1)return a[0];var g=a[0]!==""?[a[0]]:[];for(var l=0;l<e.length;l++)g.push(k(e[l])),a[l+1]!==""&&g.push(a[l+1]);return g}f.exports=a}),34);
__d("fbt",["invariant","FbtEnv","FbtHooks","FbtQTOverrides","FbtResultBase","FbtTable","FbtTableAccessor","GenderConst","IntlVariationResolver","intlNumUtils","substituteTokens"],(function(a,b,c,d,e,f,g){var h;b("FbtEnv").setupOnce();var i=b("FbtQTOverrides").overrides,j=b("IntlVariationResolver").getGenderVariations,k=b("IntlVariationResolver").getNumberVariations,l=Object.prototype.hasOwnProperty,m=!1,n=b("FbtTable").ARG,o={number:0,gender:1},p={object:0,possessive:1,reflexive:2,subject:3},q={};function a(a,c,d){if(((d==null?void 0:d.hk)||(d==null?void 0:d.ehk))&&m)return{text:a,fbt:!0,hashKey:d.hk};c=(h||(h=b("FbtHooks"))).getTranslatedInput({table:a,args:c,options:d});var e=c.args;c=c.table;var f={};if(c.__vcg!=null){e=e||[];var k=(h||(h=b("FbtHooks"))).getViewerContext();k=k.GENDER;var l=j(k);e.unshift(b("FbtTableAccessor").getGenderResult(l,null,k))}l=[];e&&(typeof c!=="string"&&(c=b("FbtTable").access(c,e,0,l)),f=r(e),c!==null||g(0,479));var n;if(Array.isArray(c)){k=c[0];n=c[1];e="1_"+n;i[e]!=null&&i[e]!==""&&(k=i[e],(h||(h=b("FbtHooks"))).onTranslationOverride(n));e={inputTable:a,tokens:l};(h||(h=b("FbtHooks"))).logImpression(n,e)}else if(typeof c==="string")k=c;else throw new Error("Table access did not result in string: "+(c===void 0?"undefined":JSON.stringify(c))+", Type: "+typeof c);a=this.cachedResults[k];l=s(f);if(a&&!l)return a;else{e=b("substituteTokens")(k,f,(h||(h=b("FbtHooks"))).getErrorListener==null?void 0:(h||(h=b("FbtHooks"))).getErrorListener({translation:k,hash:n}));c=this._wrapContent(e,k,n,d==null?void 0:d.eo);l||(this.cachedResults[k]=c);return c}}function r(a){var b={};a.forEach(function(a){a=a[n.SUBSTITUTION];if(!a)return;for(var c in a)l.call(a,c)&&(b[c]==null||g(0,56656,c),b[c]=a[c])});return b}function s(a){for(a in a)return!0;return!1}function c(a,c){return b("FbtTableAccessor").getEnumResult(a)}function d(a){return b("FbtTableAccessor").getGenderResult(j(a),null,a)}function f(a,c,d){var e;e=(e={},e[a]=c,e);if(d)if(d[0]===o.number){var f=d.length>1?d[1]:c;typeof f==="number"||g(0,484);var h=k(f);typeof c==="number"&&(e[a]=b("intlNumUtils").formatNumberWithThousandDelimiters(c));return b("FbtTableAccessor").getNumberResult(h,e,f)}else if(d[0]===o.gender){a=d[1];a!=null||g(0,485);return b("FbtTableAccessor").getGenderResult(j(a),e,a)}else g(0,486);else return b("FbtTableAccessor").getSubstitution(e)}function t(a,b,c){return this._param(a,b,c)}function u(a,c,d){var e=k(a),f={};c&&(typeof d==="number"?f[c]=b("intlNumUtils").formatNumberWithThousandDelimiters(d):f[c]=d||b("intlNumUtils").formatNumberWithThousandDelimiters(a));return b("FbtTableAccessor").getNumberResult(e,f,a)}function v(a,c,d){c!==b("GenderConst").NOT_A_PERSON||!d||!d.human||g(0,11835);d=w(a,c);return b("FbtTableAccessor").getPronounResult(d)}function w(a,c){switch(c){case b("GenderConst").NOT_A_PERSON:return a===p.object||a===p.reflexive?b("GenderConst").NOT_A_PERSON:b("GenderConst").UNKNOWN_PLURAL;case b("GenderConst").FEMALE_SINGULAR:case b("GenderConst").FEMALE_SINGULAR_GUESS:return b("GenderConst").FEMALE_SINGULAR;case b("GenderConst").MALE_SINGULAR:case b("GenderConst").MALE_SINGULAR_GUESS:return b("GenderConst").MALE_SINGULAR;case b("GenderConst").MIXED_UNKNOWN:case b("GenderConst").FEMALE_PLURAL:case b("GenderConst").MALE_PLURAL:case b("GenderConst").NEUTER_PLURAL:case b("GenderConst").UNKNOWN_PLURAL:return b("GenderConst").UNKNOWN_PLURAL;case b("GenderConst").NEUTER_SINGULAR:case b("GenderConst").UNKNOWN_SINGULAR:return a===p.reflexive?b("GenderConst").NOT_A_PERSON:b("GenderConst").UNKNOWN_PLURAL}return b("GenderConst").NOT_A_PERSON}function x(a,c,d){var e=j(d),f={};f[a]=c;return b("FbtTableAccessor").getGenderResult(e,f,d)}function y(a,c,d,e){a=typeof a==="string"?[a]:a;var f=(h||(h=b("FbtHooks"))).getErrorListener({translation:c,hash:d});a=h.getFbtResult({contents:a,errorListener:f,extraOptions:e,patternHash:d,patternString:c});return a}function z(){m=!0}function A(){m=!1}function B(a){return a instanceof b("FbtResultBase")}var C=function(){};C._=a;C._enum=c;C._implicitParam=t;C._name=x;C._param=f;C._plural=u;C._pronoun=v;C._subject=d;C._wrapContent=y;C.disableJsonExportMode=A;C.enableJsonExportMode=z;C.isFbtInstance=B;C.cachedResults=q;C._getCachedFbt=void 0;a=C;e.exports=a}),null);
__d("getUnwrappedFbt",["FbtResultGK"],(function(a,b,c,d,e,f){function a(a){a=a.contents;var c=b("FbtResultGK").inlineMode,d=b("FbtResultGK").shouldReturnFbtResult;if(!d&&c!=="REPORT")return(a==null?void 0:a.length)===1&&typeof a[0]==="string"?a[0]:a}e.exports=a}),null);
__d("getFbtResult",["FbtResult","FbtResultGK","InlineFbtResult","getUnwrappedFbt","gkx","recoverableViolation"],(function(a,b,c,d,e,f,g){if(c("gkx")("20935")&&c("FbtResultGK").inlineMode==="TRANSLATION"){c("recoverableViolation")("TransAppInlineMode=TRANSLATION should not happen on Comet yet. "+("[inlineMode="+((b=c("FbtResultGK").inlineMode)!=null?b:"")+"]")+("[runtime_site_is_comet="+String(c("gkx")("20935"))+"]"),"internationalization")}function a(a){var b=c("getUnwrappedFbt")(a);if(b!=null)return b;b=a.contents;var d=a.patternString,e=a.patternHash;return c("FbtResultGK").inlineMode!=null&&c("FbtResultGK").inlineMode!=="NO_INLINE"?new(c("InlineFbtResult"))(b,c("FbtResultGK").inlineMode,d,e):c("FbtResult").get(a)}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("IntlCLDRNumberType05",["IntlVariations"],(function(a,b,c,d,e,f,g){"use strict";a={getVariation:function(a){if(a===1)return c("IntlVariations").NUMBER_ONE;else return c("IntlVariations").NUMBER_OTHER}};b=a;g["default"]=b}),98);
__d("WAWebWaLogoIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="wa-logo";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=30;m=31;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 31 30",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),fill:"none",children:[j.jsx("title",{children:k}),j.jsx("path",{d:"M30.3139 14.3245C30.174 10.4932 28.5594 6.864 25.8073 4.1948C23.0552 1.52559 19.3784 0.0227244 15.5446 4.10118e-06H15.4722C12.8904 -0.00191309 10.3527 0.668375 8.10857 1.94491C5.86449 3.22145 3.99142 5.06026 2.67367 7.28039C1.35592 9.50053 0.6389 12.0255 0.593155 14.6068C0.547411 17.1882 1.17452 19.737 2.41278 22.0024L1.09794 29.8703C1.0958 29.8865 1.09712 29.9029 1.10182 29.9185C1.10651 29.9341 1.11448 29.9485 1.12518 29.9607C1.13588 29.973 1.14907 29.9828 1.16387 29.9896C1.17867 29.9964 1.19475 29.9999 1.21103 30H1.23365L9.01561 28.269C11.0263 29.2344 13.2282 29.7353 15.4586 29.7346C15.6004 29.7346 15.7421 29.7346 15.8838 29.7346C17.8458 29.6786 19.7773 29.2346 21.5667 28.4282C23.3562 27.6218 24.9682 26.469 26.3098 25.0363C27.6514 23.6036 28.696 21.9194 29.3832 20.0809C30.0704 18.2423 30.3867 16.2859 30.3139 14.3245ZM15.8099 27.1487C15.6923 27.1487 15.5747 27.1487 15.4586 27.1487C13.4874 27.1511 11.5444 26.6795 9.79366 25.7735L9.39559 25.5654L4.11815 26.8124L5.09221 21.4732L4.86604 21.0902C3.78579 19.2484 3.20393 17.157 3.17778 15.0219C3.15163 12.8869 3.68208 10.7819 4.71689 8.91419C5.75171 7.0465 7.25518 5.48059 9.07924 4.37067C10.9033 3.26076 12.985 2.64514 15.1194 2.58444C15.238 2.58444 15.3571 2.58444 15.4767 2.58444C18.6992 2.59399 21.7889 3.86908 24.0802 6.13498C26.3715 8.40087 27.681 11.4762 27.7265 14.6984C27.7719 17.9205 26.5498 21.0316 24.3234 23.3612C22.0969 25.6909 19.0444 27.0527 15.8235 27.1532L15.8099 27.1487Z",fill:"currentColor"}),j.jsx("path",{d:"M10.2894 7.69007C10.1057 7.69366 9.92456 7.73407 9.75673 7.80892C9.5889 7.88377 9.43779 7.99154 9.31236 8.12584C8.95801 8.48923 7.96736 9.36377 7.91006 11.2003C7.85277 13.0369 9.13594 14.8538 9.31537 15.1086C9.49481 15.3635 11.7686 19.3306 15.5141 20.9395C17.7156 21.8879 18.6806 22.0507 19.3063 22.0507C19.5642 22.0507 19.7587 22.0236 19.9622 22.0115C20.6483 21.9693 22.1969 21.1762 22.5346 20.3137C22.8724 19.4512 22.895 18.6973 22.806 18.5465C22.7171 18.3957 22.4728 18.2872 22.1049 18.0942C21.737 17.9012 19.9321 16.9361 19.5928 16.8004C19.467 16.7419 19.3316 16.7066 19.1932 16.6964C19.1031 16.7011 19.0155 16.7278 18.938 16.774C18.8605 16.8203 18.7954 16.8847 18.7484 16.9618C18.4469 17.3372 17.7548 18.153 17.5225 18.3882C17.4718 18.4466 17.4093 18.4938 17.3392 18.5265C17.2691 18.5592 17.1928 18.5768 17.1154 18.5782C16.9728 18.5719 16.8333 18.5344 16.7068 18.4681C15.6135 18.0038 14.6167 17.339 13.768 16.5079C12.975 15.7263 12.3022 14.8315 11.7716 13.8526C11.5666 13.4726 11.7716 13.2766 11.9586 13.0987C12.1456 12.9208 12.3461 12.675 12.5391 12.4624C12.6975 12.2808 12.8295 12.0777 12.9312 11.8593C12.9838 11.7578 13.0104 11.6449 13.0085 11.5307C13.0067 11.4165 12.9765 11.3045 12.9206 11.2048C12.8317 11.0149 12.1667 9.14664 11.8546 8.39725C11.6013 7.75642 11.2997 7.73531 11.0358 7.7157C10.8187 7.70062 10.5699 7.69309 10.3211 7.68555H10.2894",fill:"currentColor"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.WaLogoIcon=a}),98);
__d("WAWebWaWordmarkIcon",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k="wa-wordmark";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,["iconXstyle","height","width","viewBox"]);var h;if(g){var l=g.x;l=l===void 0?0:l;var m=g.y;m=m===void 0?0:m;var n=g.width;n=n===void 0?0:n;g=g.height;g=g===void 0?0:g;h=[l,m,n,g].join(" ")}l=21;m=103;(e!=null||f!=null)&&(l=e,m=f);return j.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:k},a,{children:j.jsxs("svg",{viewBox:(n=h)!=null?n:"0 0 103 21",height:l,width:m,preserveAspectRatio:"xMidYMid meet",className:(i||(i=c("stylex")))(b),fill:"none",children:[j.jsx("title",{children:k}),j.jsx("path",{d:"M13.0691 16.3425L10.3885 5.57555H10.3439L7.70791 16.3425H4.18613L0 0.523438H2.98136L5.83876 12.6207H5.88836L8.97381 0.523438H11.8015L14.7994 12.6207H14.8176L17.8601 0.523438H20.7753L16.5231 16.3425H13.0674H13.0691Z",fill:"currentColor"}),j.jsx("path",{d:"M34.6722 6.57208C34.9945 6.08455 35.4095 5.69288 35.9117 5.3987C36.4142 5.10453 36.9777 4.893 37.6075 4.7674C38.2337 4.64178 38.6865 4.57898 39.3212 4.57898C39.8962 4.57898 40.4797 4.6203 41.0697 4.70128C41.6597 4.78225 42.0347 4.94093 42.5225 5.17725C43.0082 5.41358 43.4082 5.74245 43.7172 6.16388C44.028 6.58363 44.1832 7.14058 44.1832 7.83633V13.7958C44.1832 14.3147 44.213 14.8088 44.2725 15.2798C44.3302 15.7541 44.4345 16.1078 44.5832 16.3425H41.559C41.4995 16.1656 41.4515 15.9838 41.415 15.8004C41.3787 15.617 41.3522 15.4269 41.3375 15.2352C40.835 15.7525 40.2435 16.1144 39.5642 16.3226C38.8865 16.5292 38.1925 16.6317 37.4835 16.6317C36.9365 16.6317 36.5927 16.5656 36.12 16.4317C35.6475 16.2978 35.2342 16.0913 34.8805 15.8103C34.5252 15.5294 34.2492 15.1757 34.0492 14.746C33.8492 14.318 33.7502 13.809 33.7502 13.2173C33.7502 12.5678 33.8642 12.0324 34.0922 11.611C34.322 11.1895 34.6162 10.8541 34.978 10.6012C35.34 10.3517 35.7547 10.1616 36.2192 10.0377C36.6835 9.91205 36.9877 9.8129 37.4602 9.73853C37.933 9.6658 38.3975 9.6063 38.8552 9.56003C39.313 9.51708 39.8847 9.45095 40.2385 9.36173C40.5937 9.27413 40.873 9.14523 41.0797 8.97335C41.2862 8.80313 41.382 8.55688 41.3672 8.23133C41.3672 7.89253 41.311 7.62315 41.2002 7.42318C41.0895 7.2232 40.9425 7.06785 40.7572 6.95713C40.5722 6.8464 40.1922 6.7737 39.9492 6.73568C39.7047 6.69933 39.4435 6.68115 39.1625 6.68115C38.5412 6.68115 37.9165 6.81335 37.5627 7.07943C37.2075 7.3455 37.001 7.7884 36.9415 8.4098H34.1137C34.1585 7.67108 34.3417 7.05795 34.6675 6.57043L34.6722 6.57208ZM40.7062 11.0144C40.5062 11.0805 40.293 11.1367 40.0632 11.1813C39.8352 11.2243 39.5955 11.2623 39.3427 11.292C39.0932 11.3218 38.8402 11.3598 38.5907 11.4027C38.3545 11.4474 37.9562 11.5069 37.728 11.5796C37.5 11.6539 37.3 11.7531 37.1297 11.8787C36.9595 12.0043 36.8225 12.1646 36.72 12.3547C36.6175 12.5464 36.5645 12.791 36.5645 13.0868C36.5645 13.3826 36.6175 13.6024 36.72 13.7941C36.824 13.9858 36.9645 14.1379 37.1415 14.2486C37.3182 14.3593 37.5247 14.437 37.7612 14.4799C37.9975 14.5246 38.242 14.5477 38.4915 14.5477C39.113 14.5477 39.9227 14.4436 40.2615 14.237C40.6002 14.0304 40.8515 13.7825 41.0152 13.495C41.1772 13.2074 41.278 12.9166 41.3142 12.6191C41.3522 12.3249 41.3705 12.0886 41.3705 11.9101V10.7367C41.2367 10.8557 40.906 10.9466 40.7077 11.0127L40.7062 11.0144Z",fill:"currentColor"}),j.jsx("path",{d:"M73.5243 10.1154L71.26 3.52298H71.184L68.8473 10.1104L73.5258 10.1154H73.5243ZM72.7078 0.523438L78.621 16.3425H75.666L74.2365 12.1283H68.1383L66.6558 16.3425H63.7473L69.7265 0.523438H72.7078Z",fill:"currentColor"}),j.jsx("path",{d:"M86.1785 13.9709C86.527 13.766 86.808 13.495 87.0213 13.1628C87.2345 12.8306 87.3865 12.4439 87.4758 11.9993C87.5633 11.5564 87.6063 11.1053 87.6063 10.6491C87.6063 10.193 87.56 9.74018 87.4625 9.29563C87.3668 8.8527 87.208 8.45773 86.9865 8.11068C86.765 7.76363 86.4808 7.48268 86.1338 7.26948C85.7885 7.05463 85.362 6.94723 84.8595 6.94723C84.3573 6.94723 83.911 7.0563 83.5655 7.26948C83.217 7.48268 82.936 7.76033 82.7228 8.0991C82.508 8.4412 82.3575 8.83123 82.2683 9.27413C82.179 9.71703 82.136 10.1732 82.136 10.6475C82.136 11.1218 82.1823 11.5548 82.2798 11.9977C82.3758 12.4406 82.531 12.8273 82.7443 13.1611C82.959 13.4933 83.2433 13.7644 83.597 13.9693C83.9523 14.1759 84.3788 14.28 84.881 14.28C85.3835 14.28 85.8298 14.1759 86.175 13.9693L86.1785 13.9709ZM82.1048 4.88803V6.35063H82.1493C82.5328 5.73088 83.0185 5.2797 83.6103 4.99875C84.2003 4.7178 84.6845 4.57898 85.3935 4.57898C86.294 4.57898 86.9023 4.74755 87.5535 5.088C88.203 5.4268 88.7433 5.87795 89.1698 6.43985C89.5978 7.00175 89.915 7.65455 90.1233 8.39988C90.3283 9.14688 90.4323 9.92528 90.4323 10.7384C90.4323 11.5069 90.3283 12.2439 90.1233 12.9546C89.915 13.6635 89.6028 14.2899 89.1813 14.8369C88.7598 15.3839 88.236 15.8202 87.608 16.1442C86.98 16.4681 86.4115 16.6317 85.5703 16.6317C84.8613 16.6317 84.372 16.4863 83.7755 16.1987C83.1773 15.9111 82.6848 15.4881 82.3013 14.9262H82.2583V20.3551H79.4308V4.88968H82.1013L82.1048 4.88803Z",fill:"currentColor"}),j.jsx("path",{d:"M98.3832 13.9709C98.732 13.766 99.013 13.495 99.226 13.1628C99.4392 12.8306 99.5912 12.4439 99.6805 11.9993C99.7682 11.5564 99.8112 11.1053 99.8112 10.6491C99.8112 10.193 99.7648 9.74018 99.6673 9.29563C99.5715 8.8527 99.4127 8.45773 99.1915 8.11068C98.97 7.76363 98.6858 7.48268 98.3388 7.26948C97.9933 7.05463 97.5667 6.94723 97.0645 6.94723C96.562 6.94723 96.1158 7.0563 95.7705 7.26948C95.4218 7.48268 95.1407 7.76033 94.9275 8.0991C94.7127 8.4412 94.5622 8.83123 94.473 9.27413C94.384 9.71703 94.341 10.1732 94.341 10.6475C94.341 11.1218 94.3872 11.5548 94.4847 11.9977C94.5805 12.4406 94.736 12.8273 94.949 13.1611C95.164 13.4933 95.4483 13.7644 95.8018 13.9693C96.1573 14.1759 96.5835 14.28 97.086 14.28C97.5882 14.28 98.0345 14.1759 98.38 13.9693L98.3832 13.9709ZM94.3095 4.88803V6.35063H94.3542C94.7375 5.73088 95.2235 5.2797 95.815 4.99875C96.405 4.7178 96.8893 4.57898 97.5983 4.57898C98.499 4.57898 99.107 4.74755 99.7582 5.088C100.408 5.4268 100.948 5.87795 101.374 6.43985C101.802 7.00175 102.12 7.65455 102.328 8.39988C102.533 9.14688 102.637 9.92528 102.637 10.7384C102.637 11.5069 102.533 12.2439 102.328 12.9546C102.12 13.6635 101.808 14.2899 101.386 14.8369C100.965 15.3839 100.441 15.8202 99.8128 16.1442C99.1848 16.4681 98.6163 16.6317 97.775 16.6317C97.066 16.6317 96.577 16.4863 95.9802 16.1987C95.382 15.9111 94.8895 15.4881 94.5062 14.9262H94.4632V20.3551H91.6355V4.88968H94.3063L94.3095 4.88803Z",fill:"currentColor"}),j.jsx("path",{d:"M55.9548 13.5941C56.0953 13.8387 56.277 14.037 56.4985 14.1924C56.72 14.3477 56.9745 14.4618 57.2638 14.5361C57.5513 14.6105 58.138 14.6469 58.4485 14.6469C58.67 14.6469 58.9445 14.6204 59.189 14.5692C59.432 14.518 59.7758 14.437 59.9773 14.3263C60.1755 14.2155 60.3425 14.0684 60.4748 13.8833C60.6085 13.6983 60.673 13.4388 60.673 13.1578C60.673 12.7298 60.2368 12.2605 59.6088 12.0241C58.9825 11.7862 58.1065 11.5515 56.9828 11.3151C56.5265 11.211 56.0788 11.0904 55.644 10.9483C55.2095 10.8094 54.821 10.6243 54.4808 10.3946C54.1418 10.1649 53.8675 9.879 53.6625 9.5303C53.456 9.18323 53.352 8.7585 53.352 8.2561C53.352 7.51903 53.4958 6.9125 53.7848 6.43985C54.074 5.9672 54.4525 5.5937 54.9268 5.32103C55.3995 5.04833 55.93 4.85498 56.5218 4.74425C57.11 4.63518 57.5513 4.57898 58.1728 4.57898C58.794 4.57898 59.227 4.63683 59.8105 4.75583C60.3938 4.8748 60.916 5.07313 61.3723 5.35408C61.83 5.63503 62.21 6.00688 62.5125 6.47125C62.815 6.9373 62.9968 7.52398 63.0545 8.23298H60.3955C60.3525 7.6281 60.1228 7.1538 59.7095 6.9406C59.2948 6.72578 58.6635 6.59685 58.1015 6.59685C57.9248 6.59685 57.4373 6.63653 57.239 6.66463C57.0405 6.6927 56.8093 6.75055 56.639 6.82328C56.4688 6.89765 56.325 7.00505 56.206 7.14553C56.087 7.286 56.0293 7.5372 56.0293 7.77353C56.0293 8.05448 56.1315 8.28255 56.3383 8.45938C56.5448 8.63788 56.8143 8.78165 57.1463 8.89238C57.4785 9.0031 57.8603 9.10225 58.2883 9.1915C58.7163 9.28075 59.455 9.48733 59.8963 9.59143C60.354 9.69555 60.635 9.8195 61.0713 9.96658C61.506 10.1153 61.8943 10.312 62.2348 10.5549C62.5735 10.7995 62.848 11.102 63.0545 11.4639C63.261 11.8258 63.3635 12.2704 63.3635 12.8042C63.3635 13.5578 63.2133 14.1891 62.9108 14.6998C62.6068 15.2104 62.2133 15.6203 61.7258 15.9293C61.2383 16.24 60.8465 16.3193 60.2185 16.4449C59.5905 16.5689 58.951 16.6333 58.3015 16.6333C57.652 16.6333 57.153 16.5672 56.52 16.4334C55.8838 16.2995 55.3185 16.0781 54.8245 15.769C54.3285 15.4583 53.9238 15.0485 53.6065 14.5394C53.2875 14.0304 53.1155 13.3909 53.0843 12.6224H55.7433C55.7433 12.9628 55.8143 13.3529 55.9548 13.5958V13.5941Z",fill:"currentColor"}),j.jsx("path",{d:"M52.2035 4.89629V6.83484H49.8997V12.8372C49.8997 13.3694 49.989 13.7247 50.1642 13.9015C50.341 14.0784 50.6962 14.1676 51.2285 14.1676C51.4052 14.1676 51.5755 14.1593 51.7375 14.1445C51.901 14.1312 52.0547 14.1081 52.2035 14.0783V16.3507C51.9375 16.397 51.6415 16.4251 51.3177 16.44C50.9922 16.4532 50.6765 16.4615 50.3642 16.4615C49.8782 16.4615 49.4137 16.4284 48.981 16.3623C48.5445 16.2962 48.3017 16.1888 47.9827 15.9657C47.7232 15.7839 47.5035 15.5095 47.348 15.146C47.1927 14.7824 47.0737 14.3262 47.0737 13.7495V6.82659H45.17V4.88804H47.0737V1.45386L49.9015 1.46212V4.89629H52.2052H52.2035Z",fill:"currentColor"}),j.jsx("path",{d:"M24.6491 0.523438V6.42501H24.7152C25.1135 5.76066 25.7447 5.25493 26.3645 4.95251C26.986 4.64843 27.6355 4.57736 28.2255 4.57736C29.0665 4.57736 29.427 4.69138 29.9657 4.91946C30.5045 5.14918 30.9292 5.46648 31.2382 5.87303C31.5487 6.27958 31.767 6.77536 31.8925 7.35708C32.0182 7.94213 32.081 8.58831 32.081 9.29563V16.3408H29.2665V9.87076C29.2665 8.92546 29.1195 8.21978 28.8237 7.75538C28.5277 7.28933 28.0022 6.94558 27.252 6.89106C26.2852 6.82163 25.6092 7.21496 25.226 7.72398C24.8408 8.23463 24.6491 9.16838 24.6491 10.3352V16.3392H21.8214V0.523438H24.6491Z",fill:"currentColor"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.WaWordmarkIcon=a}),98);
__d("WAWebLogger",["ErrorNormalizeUtils","WALogger","WATagsLogger","WAWebCrashlog","WAWebLoggerImpl","err","gkx"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[logger] initialized"]);h=function(){return a};return a}function i(a){switch(a){case"ERROR":case"CATCHING":return{level:4,consoleFunction:console.error};case"WARN":return{level:3,consoleFunction:console.warn};case"LOG":return{level:2,consoleFunction:console.log};case"DEV_XMPP":case"DEV":return{level:1,consoleFunction:console.info};default:return{level:2,consoleFunction:console.log}}}function j(a){if(c("gkx")("5943"))return;var b=i(a.level);a=d("WAWebLoggerImpl").Logger.log(b.level).apply(void 0,[a.template].concat(a.expressions));c("gkx")("26258")||b.consoleFunction(a)}var k={info:function(a,b,c){j(c)},debug:function(a,b,d){c("gkx")("26258")||j(d)},logRestricted:function(a,b,d){c("gkx")("26258")||j(d)},error:function(a,b,c,d){j(d)},warn:function(a,b,c){j(c)},devConsole:function(a,b,d){if(c("gkx")("5943"))return;if(!c("gkx")("26258")){var e;for(var f=arguments.length,g=new Array(f>3?f-3:0),h=3;h<f;h++)g[h-3]=arguments[h];(e=i(a)).consoleFunction.apply(e,[b+" devConsole:"].concat(g))}},sendLogs:function(a){var b=i(a.level),e=c("ErrorNormalizeUtils").normalizeError(c("err")("created for stack trace"));e=d("WAWebLoggerImpl").Logger.log(b.level,a.verbose,e,!1,[d("WAWebLoggerImpl").STACK_TRACE_TAG]).apply(void 0,[a.template].concat(a.expressions));!c("gkx")("26258")&&!c("gkx")("5943")&&b.consoleFunction(e);e=d("WAWebLoggerImpl").Logger.log(b.level,a.verbose,void 0,!0,a.tags).apply(void 0,[a.template].concat(a.expressions));!c("gkx")("26258")&&!c("gkx")("5943")&&b.consoleFunction(e);d("WAWebCrashlog").sendLogs((e=(b=a.sendLogs)==null?void 0:b.reason)!=null?e:"www_sendlogs_undefined",{sampling:(b=a.sendLogs)==null?void 0:b.sampling,tags:a.tags,sendLogsType:(e=a.sendLogs)==null?void 0:e.sendLogsType})["catch"](function(a){})}};function a(){d("WATagsLogger").initializeWaLogger(k),d("WALogger").DEV(h())}g.initializeWAWebLogger=a}),98);
__d("WAWebQplQuickPerformanceLoggerInit",["Promise","WALogger","WAQplConfigTypes","WAQplNetwork","WAQuickPerformanceLogger","WAWebApiQplEvents","WAWebQplHealthLogger","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebQplStorageApi","WAWebQplValuesConfig","WAWebXHR","asyncToGeneratorRuntime","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL ondemand upload event failure"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([""," failed to upload successfully"]);j=function(){return a};return a}function a(){var b=babelHelpers.taggedTemplateLiteralLoose(["QPL, got event during STARTUP ",", duration: ","ms, ",""]);a=function(){return b};return b}var k=[(f=d("WAWebQplQuickPerformanceLoggerMarkerIds")).QuickLogMarkerId.WHATSAPP_WEB_TEST_EVENT,f.QuickLogMarkerId.SYNCD,f.QuickLogMarkerId.ALTERNATIVE_DEVICE_LINKING,f.QuickLogMarkerId.OFFLINE_RESUME,f.QuickLogMarkerId.DESKTOP_UPSELL_LINK_DEVICE_METRICS,f.QuickLogMarkerId.PAGE_LOAD,f.QuickLogMarkerId.MOBILE_LANDING_PAGE_METRICS],l=new Map([[f.QuickLogMarkerId.SYNCD,100]]),m={cast:function(a){return d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.cast(a)},getName:function(a){return d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.getName(a)}};function e(){c("gkx")("26258")||d("WAWebQplQuickPerformanceLoggerModule").updateAllowlistDevVerboseLoggingOverrides();d("WAQuickPerformanceLogger").QPL.setAllowListDevVerboseLogging(d("WAWebQplQuickPerformanceLoggerModule").ALLOWLIST_DEV_VERBOSE_LOGGING.map(function(a){return a}));d("WAQuickPerformanceLogger").QPL.setStartupAllowListEventFilter(k);d("WAQuickPerformanceLogger").QPL.setQplReducePrecisionMapMs(l);var a=new(d("WAWebQplStorageApi").QplStorageApi)();d("WAQuickPerformanceLogger").QPL.setStorageApi(a);d("WAQuickPerformanceLogger").QPL.setHealthLogger(d("WAWebQplHealthLogger"));d("WAQuickPerformanceLogger").QPL.setEnumConversion(m);var e=!1;d("WAQuickPerformanceLogger").QPL.setIsDev(e);d("WAQuickPerformanceLogger").QPL.init(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(e,f){if(d("WAWebQplQuickPerformanceLoggerModule").ALLOWLIST_IMMEDIATE_UPLOAD.includes(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.cast(e.marker_id))){f={post:c("WAWebXHR").post};d("WAQplNetwork").defaultQplNetwork({restInterface:f,isDev:0,qplAccessToken:d("WAWebQplValuesConfig").qplConfigs.accessToken,qplAppId:d("WAWebQplValuesConfig").qplConfigs.appId,qplEndpoint:d("WAWebQplValuesConfig").qplConfigs.endpoint});try{yield d("WAQplNetwork").defaultQplNetwork().sendEventsOverNetwork(d("WAWebApiQplEvents").createRows([e]))}catch(a){f=d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.cast(e.marker_id);f&&d("WALogger").LOG(j(),d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.getName(f));d("WALogger").ERROR(i()).tags("qpl").sendLogs("QPL ondemand upload event failure")}}else a.add([e]);return(h||(h=b("Promise"))).resolve()});return function(a,b){return e.apply(this,arguments)}}(),function(a){return{sampleRate:k.includes(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.cast(a))?1:0,samplingMethod:d("WAQplConfigTypes").QplSampleMethod.EVENT_BASED_SAMPLING}},function(){return!0})}g.initializeQpl=e}),98);/*FB_PKG_DELIM*/
__d("WAQplNetwork",["WABaseGlobals","WALogger","WAQplTypes","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Default Network already init"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[qpl] networkSendEventsOverNetwork, completed Request"]);i=function(){return a};return a}function j(a,b,c){c=c||{};a=new Blob(a,c);c=a;c.name=b;return c}function k(a,b){function c(a){delete a.app_version;delete a.app_build_number;a.wa_ab_key2===void 0&&(a.wa_ab_key2="abkey");return JSON.stringify(a)}return JSON.stringify(a)+"\n"+b.map(c).join("\n")}var l=function(){function a(a){var c;this.$1=(c=(c=a==null?void 0:a.qplEndpoint)!=null?c:(c=d("WABaseGlobals").getQplConfig())==null?void 0:c.endpoint)!=null?c:"";this.$2=(c=(c=a==null?void 0:a.qplAccessToken)!=null?c:(c=d("WABaseGlobals").getQplConfig())==null?void 0:c.accessToken)!=null?c:"";this.$3=(c=(c=a==null?void 0:a.qplAppId)!=null?c:(c=d("WABaseGlobals").getQplConfig())==null?void 0:c.appId)!=null?c:"";this.$4=(c=a==null?void 0:a.isDev)!=null?c:!1;this.$6=(c=a==null?void 0:a.restInterface)!=null?c:{post:function(a,c){return fetch(a,{method:"POST",body:c}).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield a.text());a=a.status;return{status:a,responseText:b}});return function(b){return a.apply(this,arguments)}}())}}}var c=a.prototype;c.sendEventsOverNetwork=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this.$4?{is_employee:"true"}:{},c=this.$1,e=new FormData();e.append("access_token",this.$2);e.append("app_id",this.$3);this.$5===void 0&&(this.$5=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString());e.append("user_id",this.$5);e.append("upload_time",d("WATimeUtils").unixTime().toString());e.append("batch_info",JSON.stringify(b));var f={};a.forEach(function(a){a.app_version!==void 0&&(f[a.app_version]?f[a.app_version].push(a):f[a.app_version]=[a])});if(Object.keys(f).length===0)return;Object.keys(f).map(function(a){return f[a]}).forEach(function(a){var b={app_version:a[0].app_version,app_build_number:a[0].app_build_number};e.append("batches[]",j([k(b,a)],"qpldata.txt"))});b=(yield this.$6.post(c,e));d("WALogger").LOG(i()).tags("qpl").devConsole(b);if(200!==b.status)throw new(d("WAQplTypes").QplServerStatusCodeError)(b.status,"Failed call to QPL endpoint: "+this.$1+", response: "+b.responseText)});function c(b){return a.apply(this,arguments)}return c}();return a}(),m;function a(a){m?a&&d("WALogger").WARN(h()):m=new l(a);return m}g.createPayload=k;g.QplNetwork=l;g.defaultQplNetwork=a}),98);
__d("WAWebWamEnumWebcQplHealthEventType",[],(function(a,b,c,d,e,f){a=Object.freeze({ANNOTATION_SIZE_LIMIT_EXCEEDED:1,MAX_POINT_COUNT_EXCEEDED:2,MAX_MARKER_COUNT_EXCEEDED:3,TOO_MANY_OPEN_MARKERS_TO_WRITE:4,POINT_TO_END_AT_NOT_FOUND:5,JSON_FORMAT_ERROR:6,MAX_STORAGE_EVENT_COUNT_REACHED:7,ERROR_UPLOADING_CHUNK:8,POINT_NAME_TOO_LONG:9,ANNOTATION_KEY_TOO_LONG:10,POINT_DATA_TOO_LONG:11,ERROR_PARSING_CONFIG:12});f.WEBC_QPL_HEALTH_EVENT_TYPE=a}),66);
__d("WAWebWebcQplHealthWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebcQplHealthEventType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebcQplHealth:[3134,{webcQplHealthEventData:[1,d("WAWebWamCodegenUtils").TYPES.STRING],webcQplHealthEventType:[2,d("WAWebWamEnumWebcQplHealthEventType").WEBC_QPL_HEALTH_EVENT_TYPE]},[1,1,1],"regular"]},{WebcQplHealth:[]});g.WebcQplHealthWamEvent=a}),98);
__d("WAWebQplHealthLogger",["WALogger","WAWebWamEnumWebcQplHealthEventType","WAWebWebcQplHealthWamEvent"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL errorUploadingChunk, error ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL maxStorageEventCountReached"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL errorParsingConfig, error ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL pointDataTooLong, markerId: ",", instanceKey: ",", data: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL annotationKeyTooLong, markerId: ",", instanceKey: ",", annotationKey: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL pointNameTooLong, markerId: ",", instanceKey: ",", pointName: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL maxPointCountExceeded, markerId: ",", instanceKey: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL annotationSizeLimitExceeded, markerId: ",", instanceKey: ",", annotationKey: ",""]);o=function(){return a};return a}var p=5,q=0;function a(a,b,c){d("WALogger").DEV(o(),a,b,c);if(q++>p)return;a=new(d("WAWebWebcQplHealthWamEvent").WebcQplHealthWamEvent)({webcQplHealthEventType:d("WAWebWamEnumWebcQplHealthEventType").WEBC_QPL_HEALTH_EVENT_TYPE.ANNOTATION_SIZE_LIMIT_EXCEEDED,webcQplHealthEventData:"markerId: "+a+", instanceKey: "+b+", annotationKey: "+c});a.commit()}function b(a,b){d("WALogger").DEV(n(),a,b);if(q++>p)return;a=new(d("WAWebWebcQplHealthWamEvent").WebcQplHealthWamEvent)({webcQplHealthEventType:d("WAWebWamEnumWebcQplHealthEventType").WEBC_QPL_HEALTH_EVENT_TYPE.MAX_POINT_COUNT_EXCEEDED,webcQplHealthEventData:"markerId: "+a+", instanceKey: "+b});a.commit()}function c(a,b,c){d("WALogger").DEV(m(),a,b,c);if(q++>p)return;a=new(d("WAWebWebcQplHealthWamEvent").WebcQplHealthWamEvent)({webcQplHealthEventType:d("WAWebWamEnumWebcQplHealthEventType").WEBC_QPL_HEALTH_EVENT_TYPE.POINT_NAME_TOO_LONG,webcQplHealthEventData:"markerId: "+a+", instanceKey: "+b+", pointName: "+c});a.commit()}function e(a,b,c){d("WALogger").DEV(l(),a,b,c);if(q++>p)return;a=new(d("WAWebWebcQplHealthWamEvent").WebcQplHealthWamEvent)({webcQplHealthEventType:d("WAWebWamEnumWebcQplHealthEventType").WEBC_QPL_HEALTH_EVENT_TYPE.ANNOTATION_KEY_TOO_LONG,webcQplHealthEventData:"markerId: "+a+", instanceKey: "+b+", annotationKey: "+c});a.commit()}function f(a,b,c){d("WALogger").DEV(k(),a,b,c);if(q++>p)return;a=new(d("WAWebWebcQplHealthWamEvent").WebcQplHealthWamEvent)({webcQplHealthEventType:d("WAWebWamEnumWebcQplHealthEventType").WEBC_QPL_HEALTH_EVENT_TYPE.POINT_DATA_TOO_LONG,webcQplHealthEventData:"markerId: "+a+", instanceKey: "+b+", data: "+c});a.commit()}function r(a){d("WALogger").DEV(j(),a);if(q++>p)return;a=new(d("WAWebWebcQplHealthWamEvent").WebcQplHealthWamEvent)({webcQplHealthEventType:d("WAWebWamEnumWebcQplHealthEventType").WEBC_QPL_HEALTH_EVENT_TYPE.ERROR_PARSING_CONFIG,webcQplHealthEventData:"errorString: "+a});a.commit()}function s(){d("WALogger").DEV(i());if(q++>p)return;var a=new(d("WAWebWebcQplHealthWamEvent").WebcQplHealthWamEvent)({webcQplHealthEventType:d("WAWebWamEnumWebcQplHealthEventType").WEBC_QPL_HEALTH_EVENT_TYPE.MAX_STORAGE_EVENT_COUNT_REACHED});a.commit()}function t(a){d("WALogger").DEV(h(),a);if(q++>p)return;a=new(d("WAWebWebcQplHealthWamEvent").WebcQplHealthWamEvent)({webcQplHealthEventType:d("WAWebWamEnumWebcQplHealthEventType").WEBC_QPL_HEALTH_EVENT_TYPE.ERROR_UPLOADING_CHUNK,webcQplHealthEventData:"errorString: "+a});a.commit()}g.annotationSizeLimitExceeded=a;g.maxPointCountExceeded=b;g.pointNameTooLong=c;g.annotationKeyTooLong=e;g.pointDataTooLong=f;g.errorParsingConfig=r;g.maxStorageEventCountReached=s;g.errorUploadingChunk=t}),98);
__d("WAWebApiQplEvents",["WALogger","WAWebABPropsLocalStorage","WAWebBuildConstants","WAWebNoop","WAWebQplHealthLogger","WAWebQplStorage","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL Storage, error saving events ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL Storage, saved "," rows"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL Storage, error during checking for excessive events ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["QPL Storage, error calling initializeQplStorage, error ",""]);k=function(){return a};return a}var l=200,m=1e5,n=0,o=[],p=c("lodash").throttle(function(){return C()},l);function q(a){return function(b){return r(b,a)}}function r(a,b){return{marker_id:a.marker_id,method:a.method,action_id:a.action_id,duration_ns:a.duration_ns,marker_type:a.marker_type,sample_rate:a.sample_rate,points:a.points,instance_id:a.instance_id,metadata:a.metadata||{application_analytics:{time_since_qpl_module_init:0}},flags:a.flags,annotations_bool_array:a.annotations_bool_array,annotations_bool:a.annotations_bool,annotations_double_array:a.annotations_double_array,annotations_double:a.annotations_double,annotations_int_array:a.annotations_int_array,annotations_int:a.annotations_int,annotations_string_array:a.annotations_string_array,annotations:a.annotations,app_version:d("WAWebBuildConstants").VERSION_BASE,app_build_number:n,wa_ab_key2:b}}function s(){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{yield d("WAWebQplStorage").initialize()}catch(a){d("WALogger").ERROR(k(),a).verbose().devConsole(a).sendLogs("QPL Storage init error");throw a}});return t.apply(this,arguments)}function a(a,b){b===void 0&&(b=d("WAWebABPropsLocalStorage").getABKey()||"abkey"),o=o.concat(a.map(q(b))),p()}function e(a,b){b===void 0&&(b=d("WAWebABPropsLocalStorage").getABKey()||"abkey");return a.map(q(b))}function u(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield s();return d("WAWebQplStorage").getQplEventsTable().all({limit:a,offset:0})});return v.apply(this,arguments)}function w(){return x.apply(this,arguments)}function x(){x=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield s();return d("WAWebQplStorage").getQplEventsTable().count()});return x.apply(this,arguments)}function f(){return y.apply(this,arguments)}function y(){y=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield s();return d("WAWebQplStorage").getQplEventsTable().clear(!0)});return y.apply(this,arguments)}function z(a,b){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield s();return d("WAWebQplStorage").getQplEventsTable().bulkDeleteRange(["id"],a-1,b+1).then(c("WAWebNoop"))});return A.apply(this,arguments)}var B=null;function C(){return D.apply(this,arguments)}function D(){D=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield s();if(B)B.then(C);else if(o.length>0){var a=o;o=[];try{var b=(yield w());if(b+a.length>m){d("WAWebQplHealthLogger").maxStorageEventCountReached();b=b+a.length-m;yield E(b)}}catch(a){d("WALogger").ERROR(j(),a).verbose().devConsole(a).sendLogs("QPL Storage, error saving events");return}B=d("WAWebQplStorage").getQplEventsTable().bulkCreate(a).then(function(){d("WALogger").DEV(i(),a.length),B=null})["catch"](function(a){d("WALogger").ERROR(h(),a).verbose().devConsole(a).sendLogs("QPL Storage, error saving events"),B=null})}});return D.apply(this,arguments)}function E(a){return F.apply(this,arguments)}function F(){F=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield u(a));var b=a[0].id||0;a=a[a.length-1].id||0;yield z(b,a)});return F.apply(this,arguments)}g.WRITE_THROTTLE_INTERVAL=l;g.add=a;g.createRows=e;g.getFromBottom=u;g.rowCount=w;g.clear=f;g.deleteRange=z}),98);
__d("WAWebQplStorageApi",["WAWebApiQplEvents"],(function(a,b,c,d,e,f,g){a=function(){function a(){}var b=a.prototype;b.add=function(a,b){return d("WAWebApiQplEvents").add(a,b)};b.getFromBottom=function(a){return d("WAWebApiQplEvents").getFromBottom(a)};b.getRowCount=function(){return d("WAWebApiQplEvents").rowCount()};b.clear=function(){return d("WAWebApiQplEvents").clear()};b.deleteRange=function(a,b){return d("WAWebApiQplEvents").deleteRange(a,b)};return a}();g.QplStorageApi=a}),98);
__d("WAWebQplValuesConfig",[],(function(a,b,c,d,e,f){a="167028690535322";b={accessToken:"1063127757113399|745146ffa34413f9dbb5469f5370b7af",appId:a,endpoint:"https://graph.whatsapp.net/wa_qpl_data"};f.qplConfigs=b}),66);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/V8_l6oUwABQ/
 */
__d("react-dom-0.0.0",["ReactDOM"],(function(a,b,c,d,e,f){"use strict";function a(a){return a&&typeof a==="object"&&"default"in a?a["default"]:a}var g=a(b("ReactDOM"));d={};var h={exports:d};function i(){h.exports=g}var j=!1;function k(){j||(j=!0,i());return h.exports}function c(a){switch(a){case void 0:return k()}}e.exports=c}),null);